(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{1001:function(e,t,s){},1002:function(e,t,s){"use strict";s(1013),s(3),s(60),s(36),s(27),s(168),s(311);var r=s(161),n=s(86),i=(s(33),s(376),s(8),s(5),null);var o=null;function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=document.createElement(e);return Object.keys(t).forEach((function(e){s[e]=t[e]})),s}function l(e,t,s){return(window.getComputedStyle(e,s||null)||{display:"none"})[t]}function c(e){if(!document.documentElement.contains(e))return{detached:!0,rendered:!1};for(var t=e;t!==document;){if("none"===l(t,"display"))return{detached:!1,rendered:!1};t=t.parentNode}return{detached:!1,rendered:!0}}var u='.resize-triggers{visibility:hidden;opacity:0}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',d=0,p=null;function h(e,t){if(e.__resize_mutation_handler__||(e.__resize_mutation_handler__=f.bind(e)),!e.__resize_listeners__)if(e.__resize_listeners__=[],window.ResizeObserver){var s=e.offsetWidth,r=e.offsetHeight,n=new ResizeObserver((function(){(e.__resize_observer_triggered__||(e.__resize_observer_triggered__=!0,e.offsetWidth!==s||e.offsetHeight!==r))&&m(e)})),i=c(e),o=i.detached,h=i.rendered;e.__resize_observer_triggered__=!1===o&&!1===h,e.__resize_observer__=n,n.observe(e)}else if(e.attachEvent&&e.addEventListener)e.__resize_legacy_resize_handler__=function(){m(e)},e.attachEvent("onresize",e.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);else if(d||(p=function(e){var t=document.createElement("style");return t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),(document.querySelector("head")||document.body).appendChild(t),t}(u)),function(e){var t=l(e,"position");t&&"static"!==t||(e.style.position="relative");e.__resize_old_position__=t,e.__resize_last__={};var s=a("div",{className:"resize-triggers"}),r=a("div",{className:"resize-expand-trigger"}),n=a("div"),i=a("div",{className:"resize-contract-trigger"});r.appendChild(n),s.appendChild(r),s.appendChild(i),e.appendChild(s),e.__resize_triggers__={triggers:s,expand:r,expandChild:n,contract:i},v(e),e.addEventListener("scroll",_,!0),e.__resize_last__={width:e.offsetWidth,height:e.offsetHeight}}(e),e.__resize_rendered__=c(e).rendered,window.MutationObserver){var g=new MutationObserver(e.__resize_mutation_handler__);g.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__resize_mutation_observer__=g}e.__resize_listeners__.push(t),d++}function f(){var e=c(this),t=e.rendered,s=e.detached;t!==this.__resize_rendered__&&(!s&&this.__resize_triggers__&&(v(this),this.addEventListener("scroll",_,!0)),this.__resize_rendered__=t,m(this))}function _(){var e,t,s=this;v(this),this.__resize_raf__&&(e=this.__resize_raf__,o||(o=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}).bind(window)),o(e)),this.__resize_raf__=(t=function(){var e,t,r,n,i,o,a=(t=(e=s).__resize_last__,r=t.width,n=t.height,i=e.offsetWidth,o=e.offsetHeight,i!==r||o!==n?{width:i,height:o}:null);a&&(s.__resize_last__=a,m(s))},i||(i=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return setTimeout(e,16)}).bind(window)),i(t))}function m(e){e&&e.__resize_listeners__&&e.__resize_listeners__.forEach((function(t){t.call(e)}))}function v(e){var t=e.__resize_triggers__,s=t.expand,r=t.expandChild,n=t.contract,i=n.scrollWidth,o=n.scrollHeight,a=s.offsetWidth,l=s.offsetHeight,c=s.scrollWidth,u=s.scrollHeight;n.scrollLeft=i,n.scrollTop=o,r.style.width=a+1+"px",r.style.height=l+1+"px",s.scrollLeft=c,s.scrollTop=u}var g=["maxLines","maxHeight","ellipsis","isClamped"],b=["tag","text","autoresize"];t.a={name:"vue-clamp",props:{tag:{type:String,default:"div"},autoresize:{type:Boolean,default:!1},maxLines:Number,maxHeight:[String,Number],ellipsis:{type:String,default:"…"},expanded:Boolean},data:function(){return{offset:null,text:this.getText(),localExpanded:!!this.expanded}},computed:{clampedText:function(){return this.text.slice(0,this.offset)+this.ellipsis},isClamped:function(){return!!this.text&&this.offset!==this.text.length},realText:function(){return this.isClamped?this.clampedText:this.text},realMaxHeight:function(){if(this.localExpanded)return null;var e=this.maxHeight;return e?"number"==typeof e?"".concat(e,"px"):e:null}},watch:{expanded:function(e){this.localExpanded=e},localExpanded:function(e){e?this.clampAt(this.text.length):this.update(),this.expanded!==e&&this.$emit("update:expanded",e)}},mounted:function(){var e=this;this.init(),b.forEach((function(t){e.$watch(t,e.init)})),g.forEach((function(t){e.$watch(t,e.update)}))},updated:function(){this.text=this.getText(),this.applyChange()},beforeDestroy:function(){this.cleanUp()},methods:{init:function(){var e=this;if(this.$slots.default){if(this.offset=this.text.length,this.cleanUp(),this.autoresize){var t=function(){e.update()};h(this.$el,t),this.unregisterResizeCallback=function(){!function(e,t){if(e.detachEvent&&e.removeEventListener)return e.detachEvent("onresize",e.__resize_legacy_resize_handler__),void document.removeEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);var s=e.__resize_listeners__;s&&(s.splice(s.indexOf(t),1),s.length||(e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__.disconnect(),e.__resize_observer__=null):(e.__resize_mutation_observer__&&(e.__resize_mutation_observer__.disconnect(),e.__resize_mutation_observer__=null),e.removeEventListener("scroll",_),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null),e.__resize_listeners__=null),!--d&&p&&p.parentNode.removeChild(p))}(e.$el,t)}}this.update()}},update:function(){this.localExpanded||(this.applyChange(),(this.isOverflow()||this.isClamped)&&this.search())},expand:function(){this.localExpanded=!0},collapse:function(){this.localExpanded=!1},toggle:function(){this.localExpanded=!this.localExpanded},getLines:function(){return this.$refs.content.getClientRects().length},isOverflow:function(){return!(!this.maxLines&&!this.maxHeight)&&(!!(this.maxLines&&this.getLines()>this.maxLines)||!!(this.maxHeight&&this.$el.scrollHeight>this.$el.offsetHeight))},getText:function(){var e=(this.$slots.default||[]).filter((function(e){return!e.tag&&!e.isComment})),t=Object(n.a)(e,1)[0];return t?t.text:""},moveEdge:function(e){this.clampAt(this.offset+e)},clampAt:function(e){this.offset=e,this.applyChange()},applyChange:function(){this.$refs.text.textContent=this.realText},stepToFit:function(){this.fill(),this.clamp()},fill:function(){for(;(!this.isOverflow()||this.getLines()<2)&&this.offset<this.text.length;)this.moveEdge(1)},clamp:function(){for(;this.isOverflow()&&this.getLines()>1&&this.offset>0;)this.moveEdge(-1)},search:function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];var r=t[0],n=void 0===r?0:r,i=t[1],o=void 0===i?this.offset:i;if(o-n<=3)this.stepToFit();else{var a=Math.floor((o+n)/2);this.clampAt(a),this.isOverflow()?this.search(n,a):this.search(a,o)}},cleanUp:function(){this.unregisterResizeCallback&&this.unregisterResizeCallback()}},render:function(e){var t=[e("span",{ref:"text",attrs:{"aria-label":this.text.trim()}},this.realText)],s={expand:this.expand,collapse:this.collapse,toggle:this.toggle,clamped:this.isClamped,expanded:this.localExpanded},n=this.$scopedSlots.before?this.$scopedSlots.before(s):this.$slots.before;n&&t.unshift.apply(t,Object(r.a)(Array.isArray(n)?n:[n]));var i=this.$scopedSlots.after?this.$scopedSlots.after(s):this.$slots.after;i&&t.push.apply(t,Object(r.a)(Array.isArray(i)?i:[i]));var o=[e("span",{style:{boxShadow:"transparent 0 0"},ref:"content"},t)];return e(this.tag,{style:{maxHeight:this.realMaxHeight,overflow:"hidden"}},o)}}},1007:function(e,t,s){},1008:function(e,t,s){},1012:function(e,t){var s=Object.prototype.hasOwnProperty;e.exports=function(e,t){return null!=e&&s.call(e,t)}},1013:function(e,t,s){var r=s(23),n=s(1014),i=s(167);r({target:"Array",proto:!0},{fill:n}),i("fill")},1014:function(e,t,s){"use strict";var r=s(71),n=s(310),i=s(64);e.exports=function(e){for(var t=r(this),s=i(t.length),o=arguments.length,a=n(o>1?arguments[1]:void 0,s),l=o>2?arguments[2]:void 0,c=void 0===l?s:n(l,s);c>a;)t[a++]=e;return t}},1016:function(e,t,s){"use strict";s(26),s(27),s(43);var r=s(32),n=(s(11),s(37));t.a={mixins:[n.a],methods:{preparePhone:function(e){return e.replace(/[^0-9]/g,"")},fillFormUserData:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.$auth.loggedIn&&(void 0!==Object(r.a)(e.name)&&(e.name=this.$auth.user.name),void 0!==Object(r.a)(e.surname)&&(e.surname=this.$auth.user.surname),void 0!==Object(r.a)(e.secondName)&&this.$auth.user.second_name&&(e.secondName=this.$auth.user.second_name),void 0!==Object(r.a)(e.phone)&&(e.phone=this.formatPhone(this.$auth.user.phone)),void 0!==Object(r.a)(e.email)&&(this.$auth.user.email?e.email=this.$auth.user.email:t&&(e.email=this.$auth.user.unconfirmed_email)))}}}},1017:function(e,t,s){"use strict";s(27),s(59);var r=s(83),n=s(48),i=s(374),o={props:{isShowed:Boolean},components:{Popup:r.a,CloseIcon:n.a,IntroPopupContent:i.a}},a=(s(1072),s(2)),l=Object(a.a)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.isShowed?s("Popup",{attrs:{disableBodyScroll:""}},[s("intro-popup-content",{on:{"toggle-info-popup":function(t){return e.$emit("toggle")}}},[s("template",{slot:"title"},[e._v("\n      СОГЛАСИЕ НА ОБРАБОТКУ ПЕРСОНАЛЬНЫХ ДАННЫХ ПОСЕТИТЕЛЕЙ САЙТА\n    ")]),e._v(" "),s("template",{slot:"description"},[s("ol",[s("li",[s("p",[e._v("\n            Пользователь, проходя регистрацию на Сайте\n            "),s("a",{attrs:{href:"https://kia.ru/"}},[e._v("https://kia.ru/")]),e._v(", принимает настоящее Согласие на\n            обработку персональных данных (далее – Согласие).\n          ")]),e._v(" "),s("p",[e._v("\n            Действуя свободно, своей волей и в своем интересе, а также подтверждая свою\n            дееспособность, Пользователь дает свое согласие Общество с ограниченной\n            ответственностью «Киа Россия и СНГ» зарегистрированному по адресу 115054, г. Москва,\n            ул. Валовая, д. 26 (далее — Оператор) на обработку своих персональных данных со\n            следующими условиями:\n          ")])]),e._v(" "),s("li",[s("p",[e._v("Данное Согласие дается на автоматизированную обработку персональных данных.")]),e._v(" "),s("p",[e._v("Согласие дается на обработку следующих моих персональных данных:")]),e._v(" "),s("ol",{staticClass:"ol_bracket"},[s("li",[e._v("Специальные категории персональных данных – не обрабатываются.")]),e._v(" "),s("li",[e._v("Биометрические персональные данные – не обрабатываются.")]),e._v(" "),s("li",[e._v("\n              Персональные данные, не являющиеся специальными или биометрическими:"),s("br"),e._v("\n              фамилия, имя, отчество; номер телефона; адрес электронной почты; пол; семейное\n              положение; дата рождения; адрес места жительства, образ жизни и поведение субъекта\n              (в том числе, в сети Интернет), сфера деятельности, место работы и должность (род\n              занятий), иные данные и информация, предоставленные и предоставляемые субъектом или\n              ставшие известными ООО «Киа Россия и СНГ» в целях, указанных в настоящем согласии.\n            ")])])]),e._v(" "),s("li",[s("p",[e._v("\n            Настоящее Согласие дается на выполнение следующих действий (операций), совершаемых с\n            использованием средств автоматизации или без использования таких средств с\n            персональными данными: сбор, запись, систематизация, накопление, хранение, уточнение\n            (обновление, изменение), извлечение, использование, передача, в том числе\n            трансграничная (распространение в случаях и в объеме, предусмотренных\n            законодательством РФ, в том числе предоставление в государственные органы и иные\n            организации), деперсонализация, блокирование, удаление, уничтожение персональных\n            данных в целях:\n          ")]),e._v(" "),s("ol",{staticClass:"ol_latin"},[s("li",[e._v("продвижения и совершенствование товаров и услуг бренда Kia;")]),e._v(" "),s("li",[e._v("\n              получения и исследования статистических данных об объемах продаж и качестве услуг\n              бренда Kia;\n            ")]),e._v(" "),s("li",[e._v("\n              изучения конъюнктуры рынка автомобилей, автомобильных запасных частей и аксессуаров;\n            ")]),e._v(" "),s("li",[e._v("\n              сбора статистики по посетителям Сайта для улучшения качества работы Сайта и его\n              содержания;\n            ")]),e._v(" "),s("li",[e._v("\n              осуществления других видов деятельности в рамках законодательства РФ с обязательным\n              выполнением требований законодательства РФ в области персональных данных.\n            ")]),e._v(" "),s("li",[e._v("\n              сбора данных по поведению на сайте kia.ru (сервисами веб-аналитики, метрическими\n              программами). Подробная информация приведена на официальном сайте ООО «Киа Россия и\n              СНГ» в разделе в разделе «Правовая информация» на странице «Файлы Cookie и анализ\n              посещения сайта»\n              "),s("a",{attrs:{href:"https://www.kia.ru/info/cookie/"}},[e._v("https://www.kia.ru/info/cookie/")])]),e._v(" "),s("p",[e._v("\n              При обработке персональных данных и информации в целях, не связанных с направлением\n              информации рекламного характера, могут использоваться e-mail рассылка (направление\n              сообщений на электронную почту), СМС-рассылка (служба коротких сообщений), почтовая\n              рассылка, телефонные звонки, любые иные средства связи, сеть Интернет. Для целей\n              направления информации рекламного характера могут использоваться только варианты\n              связи, отмеченные выше, либо на которые отдельно дано согласие.\n            ")])])]),e._v(" "),s("li",[e._v("\n          Основанием для обработки персональных данных является: ст. 24 Конституции Российской\n          Федерации; настоящее Согласие на обработку персональных данных.\n        ")]),e._v(" "),s("li",[e._v("\n          Оператор персональных данных ведет деятельность на территории Российской Федерации в\n          соответствии с законодательством Российской Федерации. Предлагаемые товары/работы/услуги\n          доступны к получению на территории Российской Федерации. Мониторинг потребительского\n          поведения субъектов, находящихся за пределами Российской Федерации, не ведется.\n        ")]),e._v(" "),s("li",[e._v("\n          Обработка персональных данных может быть прекращена по запросу субъекта персональных\n          данных. Хранение персональных данных, зафиксированных на бумажных носителях,\n          осуществляется согласно Федеральному закону №125-ФЗ «Об архивном деле в Российской\n          Федерации» и иным нормативно правовым актам в области архивного дела и архивного\n          хранения.\n        ")]),e._v(" "),s("li",[e._v("\n          Согласие может быть отозвано субъектом персональных данных или его представителем путем\n          направления письменного заявления заказным письмом с уведомлением Оператору по адресу,\n          указанному в начале данного Согласия.\n        ")]),e._v(" "),s("li",[e._v("\n          В случае отзыва субъектом персональных данных или его представителем согласия на\n          обработку персональных данных Оператор вправе продолжить обработку персональных данных\n          без согласия субъекта персональных данных при наличии оснований, указанных в пунктах 2 –\n          11 части 1 статьи 6, части 2 статьи 10 и части 2 статьи 11 Федерального закона №152-ФЗ\n          «О персональных данных» от 27.07.2006 г.\n        ")]),e._v(" "),s("li",[e._v("\n          Настоящее согласие действует с момента проставления отметки и до момента прекращения\n          обработки персональных данных, указанных в п.7 и п.8 данного Согласия.\n        ")]),e._v(" "),s("li",[e._v("\n          Политика обработки данных ООО «Киа Россия и СНГ», а также описание прав субъекта\n          персональных данных и возможности их реализации приведены на официальном сайте ООО «Киа\n          Россия и СНГ» в разделе «Правовая информация»\n          "),s("a",{attrs:{href:"https://www.kia.ru/info/"}},[e._v("https://www.kia.ru/info/")])])])])],2)],1):e._e()}),[],!1,null,"e3bcbd32",null).exports,c={props:{agreement:{type:Object,default:function(){return{}}},smallText:{type:Boolean,default:!1},onNewPage:{type:Boolean,default:!1}},data:function(){return{regExp:/(#[A-Z]+#)/gi,isPopupLicenseOpen:!1}},methods:{toggleLicensePopup:function(){this.isPopupLicenseOpen=!this.isPopupLicenseOpen},isLicense:function(e){return"#LICENSE#"===e}},computed:{agreementSplit:function(){return void 0!==this.agreement.text?this.agreement.text.split(this.regExp):[]}},components:{License:l}},u=Object(a.a)(c,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{class:["w-full",{"text-s3":e.smallText}]},[e._l(e.agreementSplit,(function(t){return[e.isLicense(t)?[e.onNewPage?s("a",{attrs:{href:"/info/pd",target:"_blank"}},[e._v("указанных здесь")]):s("a",{attrs:{href:"javascript:"},on:{click:e.toggleLicensePopup}},[e._v("указанных здесь")])]:[e._v(e._s(t))]]})),e._v(" "),s("License",{attrs:{"is-showed":e.isPopupLicenseOpen},on:{toggle:e.toggleLicensePopup}})],2)}),[],!1,null,null,null);t.a=u.exports},1022:function(e,t,s){"use strict";s(7),s(3),s(9),s(10),s(8),s(6),s(5),s(51);var r=s(21),n=s(15),i=s(18),o=s(11),a=s(96),l=s.n(a),c=s(137),u=s.n(c),d=s(98),p=s.n(d),h=s(83),f=s(107),_=s(109),m=s(112),v=s(379);function g(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}var b,y={mixins:[s(24).a],props:{error:String,dealership:null,dealershipIds:{type:Array,default:function(){return[]}},excludedDealershipIds:{type:Array,default:function(){return[]}},model:{type:Object,default:function(){}},theme:{type:Object,default:function(){}},mapId:{type:String,default:"yamap"},autoFill:{type:Boolean,default:!1},showButton:{type:Boolean,default:!0},isSmall:{type:Boolean,default:function(){return!0}},buttonShort:{type:Boolean,default:!1},showServices:{type:Boolean,default:function(){return!0}},showFilter:{type:Boolean,default:function(){return!0}},showGeoIp:{type:Boolean,default:function(){return!0}},title:{type:String,default:function(){return"Выберите дилера"}},description:{type:String,default:null},disableResult:{type:Boolean,default:function(){return!1}},value:{type:Object,default:null},carInfo:{type:Object,default:null},headerClass:{type:String,default:""},isCalculatorPage:{type:Boolean,default:!1},showLink:{type:Boolean,default:!0},isMaintenanceCalc:{type:Boolean,default:function(){return!1}},isBuyCalc:{type:Boolean,default:!1},isConfigurator:{type:Boolean,default:!1},isTradeIn:{type:Boolean,default:function(){return!1}},isUsedCars:{type:Boolean,default:function(){return!1}}},data:function(){return{dealer:null,isLoading:!1,isPopupOpen:!1,isLimitQuery:this.dealershipIds.length>=100}},created:function(){var e=this;this.clearDealerships(),this.dealership?this.setDealer(this.dealership):this.autoFill&&this.$auth.loggedIn&&(this.isLoading=!0,this.$axios(o.a.lastUserDealer()).then((function(t){0===t.data.error&&void 0!==t.data.content.dealership&&e.setDealer(t.data.content.dealership)})).finally((function(){e.isLoading=!1})))},destroyed:function(){this.clearDealerships()},computed:function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?g(Object(s),!0).forEach((function(t){Object(n.a)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):g(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},Object(i.e)("geo-position",{currentCity:"city"}),{},Object(i.c)("dealerships",{cities:"getCities",dealerships:"getDealerships"}),{dealershipFiltered:function(){var e=this,t=this.dealerships;return this.excludedDealershipIds.length>0&&(t=this.dealerships.filter((function(t){return!e.excludedDealershipIdsByKey[t.id]}))),this.isLimitQuery?u()(t,(function(t){return-1!==p()(e.dealershipIds,t.id)})):t},cityFiltered:function(){if(this.isLimitQuery){var e=l()(this.dealershipFiltered,"city_id");return u()(this.cities,(function(t){return-1!==p()(e,t.id)}))}return this.cities},dealerSelected:function(){return!this.disableResult&&null!==this.dealer},hasError:function(){return!!this.error},hasButtonSlot:function(){return!!this.$slots.button},excludedDealershipIdsByKey:function(){var e={};return this.excludedDealershipIds.forEach((function(t){e[t]=t})),e}}),methods:{togglePopup:(b=Object(r.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,this.loadDealerships();case 3:this.isPopupOpen=!this.isPopupOpen,this.dealerSelected&&this.dataLayerPush("Dealer search","Change dealer"),!this.dealerSelected&&this.isConfigurator&&this.isPopupOpen&&this.dataLayerPush("Dealer search pop-up","Open");case 6:case"end":return e.stop()}}),e,this)}))),function(e){return b.apply(this,arguments)}),checkedDealer:function(e){Object.assign(this,{dealer:e,isPopupOpen:!1}),this.$emit("input",e)},loadDealerships:function(){return this.dealerships.length<=0?this.$store.dispatch("dealerships/loadAll",this.isLimitQuery?[]:this.dealershipIds):Promise.resolve()},clearDealerships:function(){this.dealershipIds.length>0&&this.$store.dispatch("dealerships/clearAll")},clearSelected:function(){this.dealer=null},setDealer:function(e){this.dealer=e,this.isPopupOpen=!1,this.$emit("input",this.dealer)}},components:{Popup:h.a,Loader:f.a,IconEdit:_.a,IconClose:m.a,DealerLocator:v.a}},x=(s(1037),s(2)),O=Object(x.a)(y,(function(){var e,t=this,s=t.$createElement,r=t._self._c||s;return r("div",[t.isLoading?r("Loader",{attrs:{inline:!0}}):t.showButton?r("div",[r("div",{class:["form-control",(e={},e["has-error"]=t.hasError,e)]},[t.dealerSelected?t._e():r("button",{class:["button button_secondary",{button_small:t.isSmall},{"mt-3":t.isMaintenanceCalc},{"button-short":t.buttonShort}],on:{click:t.togglePopup}},[r("span",{staticClass:"button__span-after"},[t._v("\n          Выбрать дилера\n        ")])]),t._v(" "),t.hasError?r("span",{class:["form-control__error"]},[t._v(t._s(t.error))]):t._e()]),t._v(" "),t.dealerSelected?r("div",{staticClass:"form-dealer text-s2i"},[r("div",{staticClass:"flex items-center text-s1 mt-3 mb-1",class:t.headerClass},[t._v("\n        Дилер\n        "),r("icon-edit",{staticClass:"color-disabled-gray cursor-pointer ml-2",on:{click:t.togglePopup}})],1),t._v(" "),r("div",[t._v(t._s(t.dealer.name))]),t._v(" "),r("div",{staticClass:"color-dark-gray"},[t._v(t._s(t.dealer.address))])]):t._e()]):t._e(),t._v(" "),t.isPopupOpen?r("popup",[r("div",{staticClass:"popup__container flex items-center justify-center"},[r("div",{staticClass:"popup__body"},[r("div",{staticClass:"popup__close",on:{click:t.togglePopup}},[r("IconClose",{staticClass:"block"})],1),t._v(" "),r("div",{staticClass:"form form_popup flex flex-col"},[r("div",{staticClass:"form__wrap flex flex-col"},[r("div",{staticClass:"form__header px-6 desktop:px-16 pt-6 desktop:pt-8 desktop:pb-4"},[r("h1",{staticClass:"text-x5 desktop:text-x4 mb-1"},[t._v(t._s(t.title))]),t._v(" "),t.description?r("div",{staticClass:"sub-header",domProps:{innerHTML:t._s(t.description)}}):t._e()]),t._v(" "),r("div",{staticClass:"form__container flex-container flex-col"},[r("DealerLocator",{attrs:{mapId:t.mapId,cities:t.cityFiltered,carInfo:t.carInfo,showServices:t.showServices,"show-filter":t.showFilter,"show-geo-ip":t.showGeoIp,"dealership-ids":t.dealershipIds,defaultCityCode:t.currentCity.code,"excluded-dealership-ids":t.excludedDealershipIds,"is-calculator-page":t.isCalculatorPage,"show-link":t.showLink,isBuyCalc:t.isBuyCalc,isConfigurator:t.isConfigurator,isTradeIn:t.isTradeIn,isUsedCars:t.isUsedCars},on:{"checked-dealer":t.checkedDealer}})],1)])])])])]):t._e()],1)}),[],!1,null,"cf648c4c",null);t.a=O.exports},1028:function(e,t,s){"use strict";var r=s(32);t.a={methods:{getLocalizedName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"name",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en";if("object"!==Object(r.a)(e)||null===e)return"";var n=t+"_"+s;return e[n]?e[n]:e[t]||""}}}},1030:function(e,t,s){"use strict";var r=s(1040),n=s.n(r),i=s(1041),o=s.n(i);t.a={methods:{prepareValidateErrors:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o()(e,(function(e,s){return n()(t,s)?t[s]:s}))}}}},1034:function(e,t,s){},1037:function(e,t,s){"use strict";var r=s(1001);s.n(r).a},1040:function(e,t,s){var r=s(1012),n=s(536);e.exports=function(e,t){return null!=e&&n(e,t,r)}},1041:function(e,t,s){var r=s(164),n=s(309),i=s(97);e.exports=function(e,t){var s={};return t=i(t,3),n(e,(function(e,n,i){r(s,t(e,n,i),e)})),s}},1050:function(e,t,s){"use strict";var r={props:{unlockDate:{type:String,default:"manual"},banType:{type:String,default:"short"}}},n=s(2),i=Object(n.a)(r,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"form__response form__response_full"},[[s("div",{staticClass:"text-x4 mb-4"},[e._v("Ошибка")]),e._v(" "),s("div",{staticClass:"text-s2i mb-1"},["long"===e.banType?[e._v("\n        Вы больше не можете отправить заявку, потому что с вашего IP‑адреса с необычной\n        частотой поступают запросы. Если это произошло по ошибке, пожалуйста, обратитесь в службу\n        поддержки для разблокировки."),s("br")]:[e._v("\n        Превышен дневной лимит на отправку заявок. Новую заявку можно будет отправить через\n        сутки."),s("br")],e._v(" "),"manual"!==e.unlockDate?[e._v("\n        Дата и время разблокировки: "+e._s(e.unlockDate)+"\n      ")]:e._e()],2),e._v(" "),s("div",{staticClass:"form__footer__buttons flex flex-wrap"},[s("div",{staticClass:"form__footer__button"},[s("nuxt-link",{tag:"NavLink",staticClass:"button button_primary",attrs:{to:"/"}},[e._v("На главную ")])],1)])]],2)}),[],!1,null,null,null);t.a=i.exports},1069:function(e,t,s){"use strict";s(7),s(3),s(9),s(10),s(8),s(5);var r=s(15),n=s(18),i=s(62),o=s(1002);function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}var l={props:{customAside:{type:Boolean,default:!1}},data:function(){return{atTop:!0,isInited:!0,isOpened:!1,isResultFixed:!1,isResultScrolled:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){Object(r.a)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},Object(n.e)("ui",["header"]),{hasOffset:function(){return!(!this.header.isFixedHeaderVisible&&!this.isInited)}}),mounted:function(){window.addEventListener("load",this.handleScrollResult),window.addEventListener("resize",this.handleScrollResult),window.addEventListener("scroll",this.handleScrollResult)},beforeDestroy:function(){window.removeEventListener("load",this.handleScrollResult),window.removeEventListener("resize",this.handleScrollResult),window.removeEventListener("scroll",this.handleScrollResult)},methods:{handleTouchMove:function(e){e.preventDefault()},handleScrollResult:function(){var e=window.scrollY,t=Math.round(window.innerHeight),s=Math.round(document.getElementsByClassName("page-wrapper__footer")[0].offsetTop);e<60?this.isInited=!this.header.isFixedHeaderVisible:(this.atTop=this.isInited,this.isInited=!1);var r=Math.round(this.$refs.result.offsetTop);this.isResultFixed=e>r,this.isResultScrolled=e+t>s+1},toggleResult:function(){this.isOpened=!this.isOpened,this.isOpened?Object(i.disableBodyScroll)(this.$refs.resultContent):Object(i.enableBodyScroll)(this.$refs.resultContent)}},components:{VClamp:o.a}},c=(s(1071),s(2)),u=Object(c.a)(l,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("aside",{ref:"result",class:["form-aside",e.isInited?"absolute":"fixed",{"is-opened":e.isOpened},{"at-top":e.isInited||e.atTop},{"has-offset":e.hasOffset},{"is-fixed":e.isResultFixed},{"is-scrolled":e.isResultScrolled},{"is-custom":e.customAside}]},[s("div",{directives:[{name:"touch",rawName:"v-touch:tap",value:e.toggleResult,expression:"toggleResult",arg:"tap"},{name:"touch",rawName:"v-touch:swipe.bottom.top",value:e.toggleResult,expression:"toggleResult",arg:"swipe",modifiers:{bottom:!0,top:!0}}],staticClass:"form-aside__header flex justify-between"},[s("div",{staticClass:"form-aside__header__title text-s2-b tablet:text-x5"},[s("v-clamp",{attrs:{autoresize:"","max-lines":1,ellipsis:"..."}},[e._t("title")],2)],1)]),e._v(" "),s("div",{staticClass:"form-aside__body"},[s("div",{ref:"resultContent",staticClass:"form-aside__content"},[e._t("body")],2),e._v(" "),s("div",{directives:[{name:"touch",rawName:"v-touch:tap",value:e.toggleResult,expression:"toggleResult",arg:"tap"},{name:"touch",rawName:"v-touch:swipe.bottom.top",value:e.toggleResult,expression:"toggleResult",arg:"swipe",modifiers:{bottom:!0,top:!0}}],staticClass:"form-aside__toggle"})])])}),[],!1,null,null,null);t.a=u.exports},1071:function(e,t,s){"use strict";var r=s(1007);s.n(r).a},1072:function(e,t,s){"use strict";var r=s(1008);s.n(r).a},1087:function(e,t,s){"use strict";s(36);var r={props:{steps:Array,currentStepIndex:Number,stepClickEmitFunction:{type:String,default:"select-step"}},methods:{onStepClick:function(e){this.stepClickEmitFunction&&e<this.currentStepIndex&&this.$emit(this.stepClickEmitFunction,e)}}},n=(s(1129),s(2)),i=Object(n.a)(r,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:["progress-bar-box w-screen desktop:w-auto",{"progress-bar-box--shifted":0!==e.currentStepIndex}]},[s("div",{staticClass:"flex progress-bar",style:"transform: translateX(-"+260*e.currentStepIndex+"px)"},e._l(e.steps,(function(t,r){return s("div",{class:["progress-bar__step relative color-gray flex",{"progress-bar__step--active":r===e.currentStepIndex},{"progress-bar__step--past":r<e.currentStepIndex},{"progress-bar__step-link":r<e.currentStepIndex}],on:{click:function(t){return t.preventDefault(),e.onStepClick(r)}}},[s("div",{staticClass:"progress-bar__step-number mt-2 text-s2-b color-black"},[e._v("\n        "+e._s("0"+(r+1))+"\n      ")]),e._v(" "),s("div",{staticClass:"progress-bar__step-name pl-3 mt-2 text-s2 color-disabled-gray"},[e._v("\n        "+e._s(t.name)+"\n      ")])])})),0)])}),[],!1,null,null,null);t.a=i.exports},1129:function(e,t,s){"use strict";var r=s(1034);s.n(r).a},1314:function(e,t,s){},1378:function(e,t,s){"use strict";var r=s(410),n=s(109),i=s(393),o={mixins:[r.a],name:"aside-dealer-card",props:{dealer:Object,useIconEdit:{type:Boolean,default:!1}},components:{Rating:i.a,IconEdit:n.a}},a=(s(1497),s(2)),l=Object(a.a)(o,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dealer-summary"},[s("div",{staticClass:"dealer-summary__header text-s2i flex items-center pb-2"},[e._v("\n    Дилер\n    "),e.useIconEdit?s("icon-edit",{staticClass:"color-disabled-gray cursor-pointer ml-2",on:{click:function(t){return e.$emit("edit-dealer")}}}):e._e()],1),e._v(" "),s("div",{staticClass:"mt-2"},[s("div",{staticClass:"text-s2i-b"},[e._v(e._s(e.dealer.name))]),e._v(" "),s("div",{staticClass:"text-s3i mt-2"},[s("div",[e._v(e._s(e.dealer.address))]),e._v(" "),s("div",[e._v(e._s(e.prepareWorkTime(e.dealer.work_time)))]),e._v(" "),s("div",[e._v(e._s(e.dealer.phone))])])])])}),[],!1,null,"200addbe",null);t.a=l.exports},1497:function(e,t,s){"use strict";var r=s(1314);s.n(r).a},1514:function(e,t,s){"use strict";s(7),s(3),s(26),s(9),s(10),s(8),s(5);var r=s(15),n=s(96),i=s.n(n),o=s(55),a=s.n(o),l=s(19),c=s.n(l),u=s(1368);function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}var p={name:"test-drive-models",props:{props:Object},computed:{models:function(){var e=this,t=i()(this.props.models,(function(t){var s=a()(e.props.modelLines,{id:t.model_line_id});return function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){Object(r.a)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},t,{name:s.name,code:s.code,external_id:s.external_id})}));return c()(t,"id")}},methods:{selectModel:function(e){this.$emit("input",this.models[e])},setModel:function(){this.$emit("input","setModel")}},components:{ModelSelect:u.a}},h=s(2),f=Object(h.a)(p,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"test-drive__step"},[Boolean(this.props.models.length)?t("div",[t("ModelSelect",{staticClass:"mt-6 desktop:mt-8",attrs:{models:this.props.models||[],modelLines:this.props.modelLines||[],carcassTypes:this.props.carcasses||[]},on:{"model-select":this.selectModel,"model-img-click":this.setModel}})],1):t("div",[this._v("Модели не найдены")])])}),[],!1,null,"698e3a4c",null);t.a=f.exports},1533:function(e,t,s){"use strict";s(7),s(3),s(26),s(9),s(10),s(8),s(5);var r=s(15),n=s(0),i=s(56),o=s.n(i),a=s(533),l=s(1030),c=s(165),u=s(24),d=s(1022),p=s(1050),h=s(1028),f=s(1017),_=s(1016),m=s(76),v=s(18);s(55);function g(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function b(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?g(Object(s),!0).forEach((function(t){Object(r.a)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):g(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}var y={name:"test-drive-form",mixins:[l.a,u.a,h.a,_.a],props:{props:Object,settings:{type:Object,default:function(){return{mode:"default"}}}},data:function(){return{form:{name:null,surname:null,email:null,phone:null,callTime:{from:12,to:14},testDrive:{date:null,time:null},withCredit:!1,withTradeIn:!1,message:null,agree:null},isSended:!1,optionsTime:{from:9,to:20},isBanned:!1,unlockDate:null,banType:null}},created:function(){this.fillFormUserData(this.form)},computed:b({},Object(v.e)("geo-position",["city"]),{isPopupMode:function(){return"popup_store"===this.settings.mode},hours:function(e){for(var t=e.optionsTime.from,s=e.optionsTime.to,r=[],n=t;n<=s;n++)r.push({id:n,name:"".concat(n<10?"0".concat(n):n,":00")});return r}}),mounted:function(){this.loadAllCities(),this.gtagEventByPath(this.props.model.name,"open")},methods:b({},Object(v.b)("geo-position",["loadAllCities"]),{onSubmit:function(){var e=this,t=new FormData;t.append("name",this.form.name),t.append("last_name",this.form.surname),t.append("email",this.form.email),t.append("source",this.isPopupMode?this.settings.mode:this.props.source),t.append("agreement_id",this.props.agreement.id),t.append("phone",this.preparePhone(this.form.phone)),t.append("interesting_credit",+this.form.withCredit),t.append("interesting_trade_in",+this.form.withTradeIn),t.append("comment",this.form.message),t.append("agree",+this.form.agree),t.append("popup_store_uid",o()(this.$route.query,"temp_uid",null)),t.append("model_code",o()(this.props.model,"external_id",null)),t.append("dealership_id",o()(this.props.dealer,"id",null)),!0!==this.props.model.hide_testdrive_date&&t.append("datetime",this.prepareTestDriveTime(this.form.testDrive)),this.sendDataLayerAnalytics(),this.$axios(n.a.createTestDriveRequest(t)).then((function(t){t.data.content.unlock_date&&(e.unlockDate=t.data.content.unlock_date,e.banType=t.data.content.ban_type,e.isBanned=!0,window.scrollTo(0,0),e.isPopupMode&&history.pushState("","","?result")),t.data.content.success&&(e.isPopupMode&&history.pushState("","","?result"),e.isSended=!0,window.scrollTo(0,0))})).catch((function(t){t instanceof c.a&&e.$refs.form.setErrors(e.prepareValidateErrors(t.data,{last_name:"surname"}))}))},prepareTestDriveTime:function(e){var t=e.date||this.$moment();return(e.time?t.hours(e.time):t.startOf("day")).format()},sendDataLayerAnalytics:function(){var e={vehicleModelYear:this.props.model.unique_id.substr(4,4),vehicleNameplate:this.props.model.name,dealershipId:this.props.dealer.code,dealershipName:this.props.dealer.name_en,userLocation:this.city.name_en};this.$auth.user&&(e.kiaCustomerId=this.$auth.user.id),this.dataLayerPush("Lead","Test drive","Lead submit",e)}}),watch:{props:{deep:!0,handler:function(){this.isSended=!1}}},components:{NavLink:a.default,LeadBanned:p.a,DealerChoice:d.a,LicenseButton:f.a,ValidationProvider:m.b,ValidationObserver:m.a}},x=s(2),O=Object(x.a)(y,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"form"},[s("g-container",[s("div",{staticClass:"form__wrap flex"},[s("div",{staticClass:"form__container"},[e.isSended?s("div",{staticClass:"px-6 desktop:px-16"},[s("div",{staticClass:"text-s1 mb-4"},[e._v("Заявка успешно отправлена!")]),e._v(" "),s("p",[e._v("\n            Сотрудник дилерского центра Kia свяжется с Вами в ближайшее время.\n          ")]),e._v(" "),e.isPopupMode?e._e():s("div",{staticClass:"form__footer__buttons flex flex-wrap"},[s("div",{staticClass:"form__footer__button"},[s("NavLink",{staticClass:"button button_primary",attrs:{to:{name:"index"}}},[e._v("\n                На главную\n              ")])],1)])]):e._e(),e._v(" "),e.isBanned?s("LeadBanned",{attrs:{unlockDate:e.unlockDate,banType:e.banType}}):e._e(),e._v(" "),e.isSended||e.isBanned?e._e():s("div",[s("div",{staticClass:"flex justify-between"},[s("div",[s("div",{staticClass:"text-s2"},[s("p",{staticStyle:{"font-weight":"100"}},[e._v("\n                  После отправки заявки, выбранный дилер свяжется с вами для согласования времени\n                  тест-драйва.\n                ")])])])]),e._v(" "),s("ValidationObserver",{ref:"form",scopedSlots:e._u([{key:"default",fn:function(t){var r=t.handleSubmit;return[s("form",{on:{submit:function(t){return t.preventDefault(),r(e.onSubmit)}}},[e.isPopupMode?s("div",{staticClass:"form__footer"},[s("div",{staticClass:"form__footer__buttons flex flex-wrap"},[s("div",{staticClass:"form__footer__button"},[s("button",{staticClass:"button button_primary",attrs:{type:"submit"}},[s("span",{staticClass:"button__span-after"},[e._v("\n                        Отправить заявку\n                      ")])])])])]):e._e(),e._v(" "),s("fieldset",{staticClass:"is-split"},[s("ul",[s("li",[s("ValidationProvider",{attrs:{vid:"name",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[s("g-form-control",{attrs:{type:"text",label:"Имя",error:r[0]},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})]}}],null,!0)})],1),e._v(" "),s("li",[s("ValidationProvider",{attrs:{vid:"phone",rules:"required|phone"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[s("g-form-control",{directives:[{name:"mask",rawName:"v-mask",value:"+7 (###) ###-##-##",expression:"'+7 (###) ###-##-##'"}],attrs:{type:"text",label:"Телефон",placeholder:"+7 (___) ___-__-__",error:r[0]},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})]}}],null,!0)})],1)])]),e._v(" "),s("fieldset",{staticClass:"is-split"},[s("ul",[!0===e.props.model.hide_testdrive_date||e.isPopupMode?e._e():s("li",[s("div",{staticClass:"mb-3"},[e._v("Укажите удобный день")]),e._v(" "),s("div",{staticClass:"form__split-select flex is-full"},[s("g-form-datepicker",{attrs:{"disabled-before":!0,hideDefaultValue:!0},model:{value:e.form.testDrive.date,callback:function(t){e.$set(e.form.testDrive,"date",t)},expression:"form.testDrive.date"}}),e._v(" "),s("g-select",{staticClass:"multiselect_small ml-2",attrs:{placeholder:"",searchable:!1,options:e.hours},on:{input:function(t){e.form.testDrive.time=t.id}}})],1)])])]),e._v(" "),e.isPopupMode?e._e():[s("fieldset",[s("ul",[s("li",[s("g-form-control",{staticClass:"mt-6",attrs:{type:"textarea",as:"textarea","rows-count":5,placeholder:"Ваш комментарий (необязательно)"},model:{value:e.form.message,callback:function(t){e.$set(e.form,"message",t)},expression:"form.message"}})],1)])])],e._v(" "),s("div",{staticClass:"form-agree"},[s("ValidationProvider",{attrs:{vid:"agree",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.errors;return[s("g-form-control",{attrs:{type:"checkbox",id:"agree",name:"agree",error:r[0],"has-label":!1},model:{value:e.form.agree,callback:function(t){e.$set(e.form,"agree",t)},expression:"form.agree"}},[s("template",{slot:"label"},[s("LicenseButton",{attrs:{agreement:e.props.agreement}})],1)],2)]}}],null,!0)})],1),e._v(" "),e.isPopupMode?e._e():s("div",{staticClass:"form__footer pt-4"},[s("div",{staticClass:"form__footer__buttons flex flex-wrap"},[s("div",{staticClass:"form__footer__button"},[s("button",{staticClass:"button button_primary",attrs:{type:"submit"}},[s("span",{staticClass:"button__span-after"},[e._v("\n                        Отправить заявку\n                      ")])])])])])],2)]}}],null,!1,1480666529)})],1)],1)])])],1)}),[],!1,null,null,null);t.a=O.exports},1663:function(e,t,s){},1664:function(e,t,s){},1956:function(e,t,s){"use strict";s(7),s(3),s(26),s(9),s(10),s(8),s(5);var r=s(15),n=s(96),i=s.n(n),o=s(78),a=s.n(o),l=s(55),c=s.n(l),u=s(137),d=s.n(u),p=s(14),h=s.n(p),f=s(98),_=s.n(f),m=s(1087),v=s(1069),g=s(37),b=s(31),y=s(109),x={name:"aside-model-card",mixins:[b.a,g.a],props:{model:Object,useIconEdit:{type:Boolean,default:!1}},data:function(){return{resize:"300x200"}},components:{IconEdit:y.a}},O=s(2),w=Object(O.a)(x,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("g-container",[s("div",{staticClass:"text-s1 desktop1440:text-x5"},[e._v("\n    "+e._s(e.model.name)+"\n    "),e.useIconEdit?s("icon-edit",{staticClass:"color-disabled-gray cursor-pointer ml-2",on:{click:function(t){return e.$emit("edit-model")}}}):e._e()],1),e._v(" "),s("figure",[s("img",{attrs:{src:e.getResizeImagePath(e.model.image_side_view,e.resize),alt:e.model.name}})]),e._v(" "),s("div",{staticClass:"form-aside__section"},[s("dl",[s("dt",[e._v("Стоимость")]),e._v(" "),s("dd",[s("div",{staticClass:"text-s1"},[e._v("от "+e._s(e.formatMoney(e.model.min_price)))])])])])])}),[],!1,null,"517a2888",null).exports,C=s(1378),S=s(1514),j=s(2019),P=s(1533),k=s(162),D={name:"test-drive-buttons",props:{showNextBtn:{type:Boolean,default:!0},showPrevBtn:{type:Boolean,default:!1}},data:function(){return{isButtonsScrolled:!1}},mounted:function(){window.addEventListener("load",this.handleScrollButtons),window.addEventListener("resize",this.handleScrollButtons),window.addEventListener("scroll",this.handleScrollButtons)},beforeDestroy:function(){window.removeEventListener("load",this.handleScrollButtons),window.removeEventListener("resize",this.handleScrollButtons),window.removeEventListener("scroll",this.handleScrollButtons)},methods:{handleScrollButtons:function(){var e=window.scrollY,t=Math.round(window.innerHeight),s=Math.round(document.getElementsByClassName("page-wrapper__footer")[0].offsetTop);this.isButtonsScrolled=e+t>s+1}},components:{IconLeft:k.a}},E=(s(2138),Object(O.a)(D,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("nav",{staticClass:"test-drive__buttons"},[s("div",{class:["constructor__buttons__container",{"is-scrolled":e.isButtonsScrolled}]},[s("g-container",[s("ul",{staticClass:"flex desktop:justify-end"},[s("li",[e.showPrevBtn?s("button",{staticClass:"button button_text",on:{click:function(t){return t.preventDefault(),e.$emit("click-prev")}}},[s("span",{staticClass:"button__span-after"},[s("icon-left"),e._v("\n              Шаг назад\n            ")],1)]):e._e()]),e._v(" "),s("li",[e.showNextBtn?s("button",{staticClass:"button button_primary",on:{click:function(t){return t.preventDefault(),e.$emit("click-next")}}},[s("span",{staticClass:"button__span-after"},[e._v("\n              Далее\n            ")])]):e._e()])])])],1)])}),[],!1,null,null,null).exports),L=s(390),B=s(18);function z(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}var $={name:"test-drive",mixins:[L.a],props:{customAside:{type:Boolean,default:!1},hideRadius:{type:Boolean,default:!1},model:{type:Object,default:null},dealer:{type:Object,default:null},options:{type:Object,default:function(){return{}}},currentCity:{type:Object,default:function(){}},models:{type:Array,default:function(){return[]}},carcasses:{type:Array,default:function(){return[]}},modelLines:{type:Array,default:function(){return[]}},cities:{type:Array,default:function(){return[]}},dealerships:{type:Array,default:function(){return[]}},services:{type:Array,default:function(){return[]}},agreement:{type:Object,default:function(){return{}}},excludedDealershipIds:{type:Array,default:function(){return[]}}},data:function(){var e={currentStepIndex:0,selectedServices:[],result:{model:this.model,dealer:this.dealer,agreement:this.agreement,source:"test_drive"}},t={steps:{models:{name:"Выбор модели",component:S.a,useAside:!1,buttons:{prev:!1,next:!0}},dealers:{name:"Выбор дилера",component:j.a,useAside:!0,buttons:null},form:{name:"Ваши контакты",component:P.a,useAside:!0,buttons:null}}};return Object.assign(t,this.options,e)},created:function(){null!==this.result.model&&(this.currentStepIndex=1),null!==this.result.dealer&&(this.currentStepIndex=2),"number"==typeof this.options.firstStep&&(this.currentStepIndex=this.options.firstStep)},computed:function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?z(Object(s),!0).forEach((function(t){Object(r.a)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):z(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},Object(B.e)("test-drive",["seo"]),{stepModels:function(e){return{models:e.models,carcasses:e.carcasses,modelLines:e.modelLines}},stepDealers:function(e){return{model:e.model,cities:e.cities,services:e.services,dealerships:e.dealerships,hideRadius:e.hideRadius,currentCity:e.currentCity||{},excludedDealershipIds:e.excludedDealershipIds||{}}},progressSteps:function(){return i()(this.steps,(function(e){return{name:e.name}}))},keySteps:function(){return a()(this.steps)},currentStep:{get:function(){var e=this.keySteps[this.currentStepIndex];return this.$emit("input",e,this.result),h()(this.$refs.ProgressBar)||window.scrollTo({top:this.$refs.ProgressBar.$el.offsetTop-80,behavior:"smooth"}),e},set:function(e){this.selectStep(_()(this.keySteps,e))}},currentStepProps:function(){switch(this.currentStep){case"models":return this.stepModels;case"dealers":return this.stepDealers;case"form":return this.result;default:return{}}},currentStepOptions:function(){return this.steps[this.currentStep]}}),methods:{selectStep:function(e){this.currentStepIndex=e,this.setStepUrl()},nextStep:function(){if("models"===this.currentStep&&this.result.model.code!==this.$route.params.code)return this.$router.push({name:"models-code-testdrive",params:{code:this.result.model.code}});this.currentStepIndex++,this.setStepUrl()},setStepUrl:function(){switch(this.currentStep){case"models":this.replaceUrlWithGtag("/buy/testdrive/",this.seo.title);break;case"dealers":this.replaceUrlWithGtag(this.$route.path,this.seo.title);break;case"form":"popup_store"!==this.options.mode&&this.replaceUrlWithGtag(this.$route.path+"step_".concat(this.currentStepIndex+1,"/"),this.seo.title);break;default:return{}}},setResult:function(e){switch(this.currentStep){case"models":"setModel"!==e?this.result.model=e:this.nextStep();break;case"dealers":this.setDealer(e),this.nextStep()}},setDealer:function(e){var t=this;this.result=Object.assign({},this.result,{dealer:e,city:c()(this.cities,{id:e.city_id}),services:d()(this.services,(function(e){return-1!==_()(t.selectedServices,e.id)}))})}},watch:{dealerships:function(){this.result.dealer=null}},components:{Buttons:E,StepForm:P.a,AsideBlock:v.a,StepModels:S.a,StepDealers:j.a,ProgressBar:m.a,AsideModelCard:w,AsideDealerCard:C.a}},I=(s(2139),Object(O.a)($,(function(){var e=this,t=this,s=t.$createElement,r=t._self._c||s;return r("div",{staticClass:"test-drive"},[r("g-padding",[r("g-container",[r("ProgressBar",{ref:"ProgressBar",attrs:{steps:t.progressSteps,currentStepIndex:t.currentStepIndex,stepClickEmitFunction:"select-step"},on:{"select-step":t.selectStep}})],1)],1),t._v(" "),r("div",{staticClass:"test-drive__body mt-6"},[[r("g-padding",[r("g-container",{staticClass:"flex"},[t.currentStepOptions.useAside?r("AsideBlock",{attrs:{"custom-aside":t.customAside}},[r("template",{slot:"title"},[t._v("Выбран "+t._s(t.result.model.name)+"\n            ")]),t._v(" "),r("template",{slot:"body"},[Boolean(t.result.model)?r("AsideModelCard",{attrs:{model:t.result.model,useIconEdit:Boolean(t.steps.models)},on:{"edit-model":function(e){t.currentStep="models"}}}):t._e(),t._v(" "),Boolean(t.result.dealer)?r("AsideDealerCard",{staticClass:"mt-4",attrs:{dealer:t.result.dealer,useIconEdit:Boolean(t.steps.dealers)},on:{"edit-dealer":function(e){t.currentStep="dealers"}}}):t._e()],1)],2):t._e(),t._v(" "),r("div",{class:["test-drive__content",{"is-full":!t.currentStepOptions.useAside}]},[r("keep-alive",[r(t.currentStepOptions.component,{tag:"component",attrs:{props:t.currentStepProps,settings:t.currentStepOptions.settings},on:{input:t.setResult,"select-services":function(t){e.selectedServices=t}}})],1),t._v(" "),Boolean(t.currentStepOptions.buttons)?r("Buttons",{attrs:{showPrevBtn:t.currentStepOptions.buttons.prev,showNextBtn:t.currentStepOptions.buttons.next},on:{"click-next":t.nextStep}}):t._e()],1)],1)],1)]],2)],1)}),[],!1,null,null,null));t.a=I.exports},2019:function(e,t,s){"use strict";s(7),s(3),s(84),s(38),s(26),s(9),s(10),s(8),s(111),s(5);var r=s(15),n=s(24),i=s(379),o=s(18);function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}var l={mixins:[n.a],name:"test-drive-dealers",props:{props:Object},mounted:function(){void 0!==this.props.model&&this.gtagEventByPath(this.props.model.name,"dealer-open")},computed:function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){Object(r.a)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},Object(o.e)("geo-position",["city"])),methods:{selectDealer:function(e){this.$emit("input",e)},selectServices:function(e){this.$emit("select-services",e)},isCityInCities:function(){return this.props.cities.map((function(e){return e.id})).includes(this.city.id)}},components:{DealerLocator:i.a}},c=s(2),u=Object(c.a)(l,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"test-drive__step test-drive__step--map"},[!e.props.model.hide_in_test_drive&&e.props.dealerships.length&&e.isCityInCities()?s("DealerLocator",{attrs:{mode:"table","show-link":!1,cities:e.props.cities||[],services:e.props.services||[],"model-code":e.props.model.external_id,hideRadius:e.props.hideRadius||!1,defaultCityCode:e.props.currentCity.code,"excluded-dealership-ids":e.props.excludedDealershipIds||[]},on:{"checked-dealer":e.selectDealer,"select-services":e.selectServices}}):s("div",{staticClass:"text-x4 mb-4"},[e._v("Возможность тест-драйва уточняйте у дилера.")])],1)}),[],!1,null,null,null);t.a=u.exports},2138:function(e,t,s){"use strict";var r=s(1663);s.n(r).a},2139:function(e,t,s){"use strict";var r=s(1664);s.n(r).a}}]);