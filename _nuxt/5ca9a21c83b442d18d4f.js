(window.webpackJsonp=window.webpackJsonp||[]).push([[246],{1001:function(e,t,i){},1010:function(e,t){var i=Array.prototype.join;e.exports=function(e,t){return null==e?"":i.call(e,t)}},1011:function(e,t){e.exports=function(e){for(var t=-1,i=null==e?0:e.length,s=0,r=[];++t<i;){var a=e[t];a&&(r[s++]=a)}return r}},1012:function(e,t){var i=Object.prototype.hasOwnProperty;e.exports=function(e,t){return null!=e&&i.call(e,t)}},1022:function(e,t,i){"use strict";i(7),i(3),i(9),i(10),i(8),i(6),i(5),i(51);var s=i(21),r=i(15),a=i(18),n=i(11),o=i(96),l=i.n(o),c=i(137),u=i.n(c),d=i(98),f=i.n(d),p=i(83),h=i(107),m=i(109),g=i(112),_=i(379);function v(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}var y,b={mixins:[i(24).a],props:{error:String,dealership:null,dealershipIds:{type:Array,default:function(){return[]}},excludedDealershipIds:{type:Array,default:function(){return[]}},model:{type:Object,default:function(){}},theme:{type:Object,default:function(){}},mapId:{type:String,default:"yamap"},autoFill:{type:Boolean,default:!1},showButton:{type:Boolean,default:!0},isSmall:{type:Boolean,default:function(){return!0}},buttonShort:{type:Boolean,default:!1},showServices:{type:Boolean,default:function(){return!0}},showFilter:{type:Boolean,default:function(){return!0}},showGeoIp:{type:Boolean,default:function(){return!0}},title:{type:String,default:function(){return"Выберите дилера"}},description:{type:String,default:null},disableResult:{type:Boolean,default:function(){return!1}},value:{type:Object,default:null},carInfo:{type:Object,default:null},headerClass:{type:String,default:""},isCalculatorPage:{type:Boolean,default:!1},showLink:{type:Boolean,default:!0},isMaintenanceCalc:{type:Boolean,default:function(){return!1}},isBuyCalc:{type:Boolean,default:!1},isConfigurator:{type:Boolean,default:!1},isTradeIn:{type:Boolean,default:function(){return!1}},isUsedCars:{type:Boolean,default:function(){return!1}}},data:function(){return{dealer:null,isLoading:!1,isPopupOpen:!1,isLimitQuery:this.dealershipIds.length>=100}},created:function(){var e=this;this.clearDealerships(),this.dealership?this.setDealer(this.dealership):this.autoFill&&this.$auth.loggedIn&&(this.isLoading=!0,this.$axios(n.a.lastUserDealer()).then((function(t){0===t.data.error&&void 0!==t.data.content.dealership&&e.setDealer(t.data.content.dealership)})).finally((function(){e.isLoading=!1})))},destroyed:function(){this.clearDealerships()},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?v(Object(i),!0).forEach((function(t){Object(r.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},Object(a.e)("geo-position",{currentCity:"city"}),{},Object(a.c)("dealerships",{cities:"getCities",dealerships:"getDealerships"}),{dealershipFiltered:function(){var e=this,t=this.dealerships;return this.excludedDealershipIds.length>0&&(t=this.dealerships.filter((function(t){return!e.excludedDealershipIdsByKey[t.id]}))),this.isLimitQuery?u()(t,(function(t){return-1!==f()(e.dealershipIds,t.id)})):t},cityFiltered:function(){if(this.isLimitQuery){var e=l()(this.dealershipFiltered,"city_id");return u()(this.cities,(function(t){return-1!==f()(e,t.id)}))}return this.cities},dealerSelected:function(){return!this.disableResult&&null!==this.dealer},hasError:function(){return!!this.error},hasButtonSlot:function(){return!!this.$slots.button},excludedDealershipIdsByKey:function(){var e={};return this.excludedDealershipIds.forEach((function(t){e[t]=t})),e}}),methods:{togglePopup:(y=Object(s.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,this.loadDealerships();case 3:this.isPopupOpen=!this.isPopupOpen,this.dealerSelected&&this.dataLayerPush("Dealer search","Change dealer"),!this.dealerSelected&&this.isConfigurator&&this.isPopupOpen&&this.dataLayerPush("Dealer search pop-up","Open");case 6:case"end":return e.stop()}}),e,this)}))),function(e){return y.apply(this,arguments)}),checkedDealer:function(e){Object.assign(this,{dealer:e,isPopupOpen:!1}),this.$emit("input",e)},loadDealerships:function(){return this.dealerships.length<=0?this.$store.dispatch("dealerships/loadAll",this.isLimitQuery?[]:this.dealershipIds):Promise.resolve()},clearDealerships:function(){this.dealershipIds.length>0&&this.$store.dispatch("dealerships/clearAll")},clearSelected:function(){this.dealer=null},setDealer:function(e){this.dealer=e,this.isPopupOpen=!1,this.$emit("input",this.dealer)}},components:{Popup:p.a,Loader:h.a,IconEdit:m.a,IconClose:g.a,DealerLocator:_.a}},S=(i(1037),i(2)),C=Object(S.a)(b,(function(){var e,t=this,i=t.$createElement,s=t._self._c||i;return s("div",[t.isLoading?s("Loader",{attrs:{inline:!0}}):t.showButton?s("div",[s("div",{class:["form-control",(e={},e["has-error"]=t.hasError,e)]},[t.dealerSelected?t._e():s("button",{class:["button button_secondary",{button_small:t.isSmall},{"mt-3":t.isMaintenanceCalc},{"button-short":t.buttonShort}],on:{click:t.togglePopup}},[s("span",{staticClass:"button__span-after"},[t._v("\n          Выбрать дилера\n        ")])]),t._v(" "),t.hasError?s("span",{class:["form-control__error"]},[t._v(t._s(t.error))]):t._e()]),t._v(" "),t.dealerSelected?s("div",{staticClass:"form-dealer text-s2i"},[s("div",{staticClass:"flex items-center text-s1 mt-3 mb-1",class:t.headerClass},[t._v("\n        Дилер\n        "),s("icon-edit",{staticClass:"color-disabled-gray cursor-pointer ml-2",on:{click:t.togglePopup}})],1),t._v(" "),s("div",[t._v(t._s(t.dealer.name))]),t._v(" "),s("div",{staticClass:"color-dark-gray"},[t._v(t._s(t.dealer.address))])]):t._e()]):t._e(),t._v(" "),t.isPopupOpen?s("popup",[s("div",{staticClass:"popup__container flex items-center justify-center"},[s("div",{staticClass:"popup__body"},[s("div",{staticClass:"popup__close",on:{click:t.togglePopup}},[s("IconClose",{staticClass:"block"})],1),t._v(" "),s("div",{staticClass:"form form_popup flex flex-col"},[s("div",{staticClass:"form__wrap flex flex-col"},[s("div",{staticClass:"form__header px-6 desktop:px-16 pt-6 desktop:pt-8 desktop:pb-4"},[s("h1",{staticClass:"text-x5 desktop:text-x4 mb-1"},[t._v(t._s(t.title))]),t._v(" "),t.description?s("div",{staticClass:"sub-header",domProps:{innerHTML:t._s(t.description)}}):t._e()]),t._v(" "),s("div",{staticClass:"form__container flex-container flex-col"},[s("DealerLocator",{attrs:{mapId:t.mapId,cities:t.cityFiltered,carInfo:t.carInfo,showServices:t.showServices,"show-filter":t.showFilter,"show-geo-ip":t.showGeoIp,"dealership-ids":t.dealershipIds,defaultCityCode:t.currentCity.code,"excluded-dealership-ids":t.excludedDealershipIds,"is-calculator-page":t.isCalculatorPage,"show-link":t.showLink,isBuyCalc:t.isBuyCalc,isConfigurator:t.isConfigurator,isTradeIn:t.isTradeIn,isUsedCars:t.isUsedCars},on:{"checked-dealer":t.checkedDealer}})],1)])])])])]):t._e()],1)}),[],!1,null,"cf648c4c",null);t.a=C.exports},1023:function(e,t,i){var s=i(535)((function(e,t,i){return e+(i?" ":"")+t.toLowerCase()}));e.exports=s},1033:function(e,t,i){},1037:function(e,t,i){"use strict";var s=i(1001);i.n(s).a},1039:function(e,t,i){},1040:function(e,t,i){var s=i(1012),r=i(536);e.exports=function(e,t){return null!=e&&r(e,t,s)}},1041:function(e,t,i){var s=i(164),r=i(309),a=i(97);e.exports=function(e,t){var i={};return t=a(t,3),r(e,(function(e,r,a){s(i,t(e,r,a),e)})),i}},1121:function(e,t,i){var s=i(164),r=i(540),a=Object.prototype.hasOwnProperty,n=r((function(e,t,i){a.call(e,i)?e[i].push(t):s(e,i,[t])}));e.exports=n},1127:function(e,t,i){"use strict";var s=i(1033);i.n(s).a},1131:function(e,t,i){"use strict";var s=i(1010),r=i.n(s),a=i(1011),n=i.n(a),o=i(1023),l=i.n(o),c=i(37),u=i(114),d=i(1132),f={name:"car",mixins:[c.a],props:{showMinCreditAmount:{type:Boolean,default:!0},detailUrl:{type:Object,default:function(){return{}}},car:{type:Object,default:function(){return{}}},isSlide:{type:Boolean,default:!1},isMaxBenefit:{type:Boolean,default:function(){return!1}},loadedButtonFavorites:{type:Boolean,default:!1},isFavorite:{type:Boolean,default:!1},isSendingFavorite:{type:Boolean,default:!1},showButtonFavorites:{type:Boolean,default:!1},isActive:{type:Boolean,default:!0}},computed:{description:function(){if(!(this.car.engine_volume||this.car.engine_power_hp||this.car.fuel_type_name||this.car.gearbox_name||this.car.drive_name))return null;var e=[this.car.engine_volume?"".concat(this.car.engine_volume," л"):null,this.car.engine_power_hp?"".concat(this.car.engine_power_hp," л.c."):null,l()(this.car.fuel_type_name),l()(this.car.gearbox_name),this.car.drive_name?l()("".concat(this.car.drive_name," привод")):null];return r()(n()(e)," / ")}},methods:{openPopup:function(){this.$emit("favorite-click",this.car,this.isFavorite)},toDetail:function(){this.$emit("click-on-card"),this.$router.push(this.detailUrl)}},components:{CarLocation:d.a,IconPin:u.a}},p=(i(1137),i(2)),h=Object(p.a)(f,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["catalog-element",{"swiper-slide":e.isSlide}]},[i("div",{staticClass:"catalog-element__image"},[e.isActive?i("div",{staticClass:"cursor-pointer",on:{click:e.toDetail}},[i("figure",[e._t("image-labels"),e._v(" "),e._t("image")],2)]):i("div",[i("figure",[e._t("image-labels"),e._v(" "),e._t("image")],2)])]),e._v(" "),i("div",{staticClass:"catalog-element__descr"},[i("div",{staticClass:"catalog-element__descr-header"},[i("h3",{staticClass:"flex"},[e.isActive?i("div",{staticClass:"mr-1 cursor-pointer",on:{click:e.toDetail}},[e._t("name")],2):i("div",[e._t("name")],2),e._v(" "),e._t("name-labels")],2),e._v(" "),e.showButtonFavorites?i("div",{staticClass:"catalog-element__descr-header-actions"},[i("g-button-favorites",{attrs:{"is-active":e.loadedButtonFavorites,"is-favorite":e.isFavorite,"is-loading":e.isSendingFavorite},on:{click:e.openPopup}})],1):e._e()]),e._v(" "),e._t("kia-sure"),e._v(" "),e._t("lable"),e._v(" "),i("div",{staticClass:"catalog-element__params text-s3 desktop:text-s2i color-dark-gray"},[e.description&&e.isActive?i("div",[e._v(e._s(e.description))]):e._e(),e._v(" "),e._t("description")],2),e._v(" "),e.isActive?i("div",{staticClass:"catalog-element__price catalog-element__price-used text-s3 desktop:text-s2i color-disabled-gray"},[e.car.price&&e.isActive?i("strong",{staticClass:"text-s1 color-black"},[e._v(e._s(e.formatMoney(e.car.price)))]):e._e(),e._v(" "),e.car.min_credit_amount&&e.showMinCreditAmount&&e.isActive?i("span",[e._v(e._s(e.formatMoney(e.car.min_credit_amount,"₽/мес")))]):e._e()]):e._e(),e._v(" "),i("CarLocation",{staticClass:"mt-2",attrs:{"city-name":e.car.city_name,"is-active":e.isActive}},[i("template",{slot:"location"},[e._t("location")],2)],2),e._v(" "),e.isMaxBenefit&&e.isActive?i("div",{staticClass:"catalog-element__sticker text-s2i"},[e._t("max_benefit")],2):e._e(),e._v(" "),i("div",{staticClass:"catalog-element__options"},[e._t("options")],2),e._v(" "),e._t("delete")],2)])}),[],!1,null,null,null);t.a=h.exports},1132:function(e,t,i){"use strict";var s={name:"car-location",components:{IconPin:i(114).a},props:{isActive:{type:Boolean,default:!0},cityName:{type:String,default:null}}},r=(i(1127),i(2)),a=Object(r.a)(s,(function(){var e=this.$createElement,t=this._self._c||e;return this.cityName&&this.isActive?t("div",{staticClass:"counter text-s3 desktop:text-s2 flex items-start"},[t("icon-pin",{staticClass:"counter__pin"}),this._v(" "),t("span",{staticClass:"counter__text"},[this._t("location")],2)],1):this._e()}),[],!1,null,"75444ef2",null);t.a=a.exports},1137:function(e,t,i){"use strict";var s=i(1039);i.n(s).a},1163:function(e,t,i){},1209:function(e,t,i){var s=i(383);e.exports=function(e){return(null==e?0:e.length)?s(e,1):[]}},1212:function(e,t,i){},1214:function(e,t,i){},1215:function(e,t,i){},1288:function(e,t,i){var s=i(397),r=i(385),a=i(314),n=i(65),o=i(176);e.exports=function(e,t,i,l){if(!n(e))return e;for(var c=-1,u=(t=r(t,e)).length,d=u-1,f=e;null!=f&&++c<u;){var p=o(t[c]),h=i;if(c!=d){var m=f[p];void 0===(h=l?l(m,p,f):void 0)&&(h=n(m)?m:a(t[c+1])?[]:{})}s(f,p,h),f=f[p]}return e}},1289:function(e,t,i){var s=i(1209),r=i(544),a=i(545);e.exports=function(e){return a(r(e,void 0,s),e+"")}},1316:function(e,t,i){var s=i(394),r=i(1288),a=i(385);e.exports=function(e,t,i){for(var n=-1,o=t.length,l={};++n<o;){var c=t[n],u=s(e,c);i(u,c)&&r(l,a(c,e),u)}return l}},1321:function(e,t,i){},1361:function(e,t,i){"use strict";var s=i(1163);i.n(s).a},1362:function(e,t,i){var s=i(1363),r=i(1289)((function(e,t){return null==e?{}:s(e,t)}));e.exports=r},1363:function(e,t,i){var s=i(1316),r=i(552);e.exports=function(e,t){return s(e,t,(function(t,i){return r(e,i)}))}},1372:function(e,t,i){"use strict";var s={name:"catalog-footer",props:{meta:{type:Object,default:function(){return{}}},isFull:{type:Boolean,default:!1},isLast:{type:Boolean,default:!1}},computed:{isShowMore:function(){return this.meta.current_page<this.meta.last_page}}},r=(i(1361),i(2)),a=Object(r.a)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isShowMore?i("div",{class:["catalog__section-footer",{"catalog__section-footer_full":e.isFull},{"catalog__section-footer_last":e.isLast}]},[i("button",{staticClass:"catalog__section-footer-button button button_secondary",on:{click:function(t){return t.preventDefault(),e.$emit("show-more",e.meta.current_page+1)}}},[i("span",{staticClass:"button__span-after"},[e._v("\n      Показать еще\n    ")])])]):e._e()}),[],!1,null,"8f397b54",null);t.a=a.exports},1421:function(e,t,i){"use strict";var s=i(1212);i.n(s).a},1424:function(e,t,i){var s=i(164),r=i(309),a=i(97);e.exports=function(e,t){var i={};return t=a(t,3),r(e,(function(e,r,a){s(i,r,t(e,r,a))})),i}},1425:function(e,t,i){"use strict";var s=i(1214);i.n(s).a},1426:function(e,t,i){"use strict";var s=i(1215);i.n(s).a},1466:function(e,t,i){"use strict";i(77);var s=i(1362),r=i.n(s),a=(i(17),i(13),i(8),i(7),i(3),i(6),i(9),i(5),i(10),["class","staticClass","style","staticStyle","attrs"]);function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function l(e,t){if(null==e)return{};var i,s,r=function(e,t){if(null==e)return{};var i,s,r={},a=Object.keys(e);for(s=0;s<a.length;s++)i=a[s],t.indexOf(i)>=0||(r[i]=e[i]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)i=a[s],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}var c={functional:!0,render:function(e,t){var i=t._c,s=(t._v,t.data),r=t.children,c=void 0===r?[]:r,u=s.class,d=s.staticClass,f=s.style,p=s.staticStyle,h=s.attrs,m=void 0===h?{}:h,g=l(s,a);return i("svg",function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach((function(t){o(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({class:[u,d],style:[f,p],attrs:Object.assign({width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},m)},g),c.concat([i("path",{attrs:{d:"M0 0h4v4H0zM6 0h14v4H6zM0 8h4v4H0zM6 8h14v4H6zM0 16h4v4H0zM6 16h14v4H6z"}})]))}},u=["class","staticClass","style","staticStyle","attrs"];function d(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function f(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function p(e,t){if(null==e)return{};var i,s,r=function(e,t){if(null==e)return{};var i,s,r={},a=Object.keys(e);for(s=0;s<a.length;s++)i=a[s],t.indexOf(i)>=0||(r[i]=e[i]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)i=a[s],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}var h={functional:!0,render:function(e,t){var i=t._c,s=(t._v,t.data),r=t.children,a=void 0===r?[]:r,n=s.class,o=s.staticClass,l=s.style,c=s.staticStyle,h=s.attrs,m=void 0===h?{}:h,g=p(s,u);return i("svg",function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?d(Object(i),!0).forEach((function(t){f(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({class:[n,o],style:[l,c],attrs:Object.assign({width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},m)},g),a.concat([i("path",{attrs:{d:"M0 0h9v9H0zM11 0h9v9h-9zM0 11h9v9H0zM11 11h9v9h-9z"}})]))}},m=i(404),g=i(55),_=i.n(g),v=i(24),y={mixins:[v.a],props:{sort:{type:Object,default:function(){return{sort:"price",order:"asc"}}},items:{type:Array,default:function(){return[]}},isCarLocator:{type:Boolean,default:!1}},data:function(){return{current:!1,optionsSort:0!==this.items.length?this.items:[{id:1,name:"Цена по возрастанию",sort:"price",order:"asc"},{id:2,name:"Цена по убыванию",sort:"price",order:"desc"}],isSortMultiselectOpened:!1,isAnalyticSended:!1}},computed:{defaultSort:function(){var e=this;return _()(this.optionsSort,(function(t){return t.sort===e.sort.sort&&t.order===e.sort.order}))||this.optionsSort[0]},currentSort:function(){return this.current?this.current:this.defaultSort}},methods:{sortDataLayer:function(){this.isSortMultiselectOpened=!this.isSortMultiselectOpened,this.isSortMultiselectOpened&&this.isCarLocator&&!this.isAnalyticSended&&(this.dataLayerPush("Car locator","Model catalog","Open sorting options"),this.isAnalyticSended=!0)},changeSort:function(e){this.isSortMultiselectOpened=!1,this.current={sort:e.sort,order:e.order,recommended:e.recommended},this.$emit("toggle-sort",this.current)},openSelect:function(){this.$emit("open-select")}}},b=i(2),S=Object(b.a)(y,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"catalog__section__actions__sort"},[i("g-select",{staticClass:"multiselect_small multiselect_sort",attrs:{options:e.optionsSort,selected:e.defaultSort,placeholder:"","select-function":"select-sort"},on:{"select-sort":function(t){return e.changeSort(t)},"open-select":e.openSelect},nativeOn:{click:function(t){return e.sortDataLayer(t)}}})],1)}),[],!1,null,null,null).exports,C={mixins:[v.a],name:"catalog-header",props:{mode:{type:String,default:"table"},fullSize:{type:Boolean,default:!1},meta:{type:Object,default:function(){return{}}},hasFilter:{type:Boolean,default:!1},sortItems:{type:Array,default:function(){return[]}},withPadding:{type:Boolean,default:!1},hasBookingToggle:{type:Boolean,default:!1},defaultSort:{type:Object,default:function(){return{}}},showHasBookingToggler:{type:Boolean,default:!1}},data:function(){return{isCatalogSectionScroll:!1,isCatalogSectionFilterFixed:!1,isCatalogSectionFilterInvisible:!1,isSortAscSended:!1,isSortDescSended:!1}},mounted:function(){window.addEventListener("load",this.handleScrollCatalogSection),window.addEventListener("resize",this.handleScrollCatalogSection),window.addEventListener("scroll",this.handleScrollCatalogSection)},beforeDestroy:function(){window.removeEventListener("load",this.handleScrollCatalogSection),window.removeEventListener("resize",this.handleScrollCatalogSection),window.removeEventListener("scroll",this.handleScrollCatalogSection)},methods:{getCurrentSort:function(){return r()(this.$refs.sort.currentSort,["sort","order","recommended"])},toggleSort:function(e){this.$emit("toggle-sort",e),0!==e.recommended||"asc"!==e.order||this.isSortAscSended?0!==e.recommended||"desc"!==e.order||this.isSortDescSended||(this.dataLayerPush("Car locator","Model catalog","Selected sort by price descending"),this.isSortDescSended=!0):(this.dataLayerPush("Car locator","Model catalog","Selected sort by price ascending"),this.isSortAscSended=!0)},openSelect:function(){this.$emit("open-select")},toggleConfigFilter:function(){document.body.classList.add("is-config-filter-toggling"),setTimeout((function(){document.body.classList.remove("is-config-filter-toggling"),window.dispatchEvent(new Event("resize"))}),300),document.body.classList.toggle("is-config-filter-opened"),document.getElementById("has-config-filter").classList.toggle("is-config-filter-opened")},handleScrollCatalogSection:function(){var e=window.scrollY,t=window.innerHeight,i=document.getElementsByClassName("page-wrapper__footer")[0].offsetTop,s=document.getElementsByClassName("catalog__wrap")[0],r=void 0!==s?s.offsetTop:this.$refs.catalogSectionHeader.offsetTop+100;this.isCatalogSectionFilterFixed=e>r,this.isCatalogSectionScroll=e+t>i,this.isCatalogSectionFilterInvisible=!!this.isCatalogSectionScroll}},components:{Sort:S,IconList:c,IconTiles:h,IconFilter:m.a}},x=(i(1421),Object(b.a)(C,(function(){var e,t=this,i=t.$createElement,s=t._self._c||i;return s("div",{ref:"catalogSectionHeader",class:["catalog__section__header items-center justify-between tablet:flex tablet:flex-wrap desktop1440",{catalog__section__header_empty:!t.meta.total},{"catalog__section__header_empty-no-pt":!t.meta.total&&t.hasFilter}]},[s("div",{staticClass:"catalog__section__controls catalog__section-item tablet:mb-5 desktop:mb-0 flex flex-wrap items-center justify-between"},[s("div",{class:["catalog__section__controls__filter",(e={},e.catalog__section__controls__filter_fixed=t.isCatalogSectionFilterFixed,e.catalog__section__controls__filter_invisible=t.isCatalogSectionFilterInvisible,e.catalog__section__controls__filter_full=t.fullSize&&!t.isCatalogSectionFilterFixed,e.catalog__section__controls__filter_fixed__padding=t.isCatalogSectionFilterFixed&&t.withPadding,e)]},[s("a",{staticClass:"catalog__section-filter flex items-center justify-center",attrs:{href:"javascript:"},on:{click:t.toggleConfigFilter}},[s("span",{staticClass:"catalog__section-link"},[s("icon-filter"),t._v(" "),s("span",[t._v("Фильтры")])],1)])]),t._v(" "),t.fullSize?t._e():s("div",{staticClass:"hidden tablet:block"},[t._t("total")],2),t._v(" "),t._t("download")],2),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.meta.total,expression:"meta.total"}],class:["catalog__section__actions catalog__section-item items-center tablet:flex",{"catalog__section__actions-no-mt":t.fullSize}]},[s("sort",{ref:"sort",attrs:{items:t.sortItems,sort:t.defaultSort,isCarLocator:!0},on:{"toggle-sort":t.toggleSort,"open-select":t.openSelect}}),t._v(" "),t.fullSize?t._e():s("div",{staticClass:"tablet:hidden mt-4"},[t._t("total")],2),t._v(" "),s("nav",{staticClass:"catalog__section__actions__view"},[s("ul",{staticClass:"flex items-center"},[s("li",[s("icon-list",{class:{active:"list"===t.mode},on:{click:function(e){return t.$emit("toggle-mode","list")}}})],1),t._v(" "),s("li",[s("icon-tiles",{class:{active:"table"===t.mode},on:{click:function(e){return t.$emit("toggle-mode","table")}}})],1)])])],1),t._v(" "),t.showHasBookingToggler?s("div",{class:["catalog__checkbox",{"catalog__checkbox_no-border":t.fullSize}]},[s("g-checkbox",{attrs:{value:t.hasBookingToggle,name:"online-prepayment",id:"online-prepayment",label:"Онлайн-бронирование","is-switch":!0},on:{input:function(e){return t.$emit("toggle-has-booking-filter",e)}}})],1):t._e()])}),[],!1,null,"69bb282c",null));t.a=x.exports},1473:function(e,t,i){"use strict";i(36),i(6),i(108),i(27),i(43),i(46);var s=i(72),r=i.n(s),a=i(37),n=i(125),o=i.n(n),l=(i(320),i(321),{name:"filter-range",mixins:[a.a],props:{title:String,min:Number,max:Number,values:Array},data:function(){return{value:this.values,formattedValue:this.values,options:{dotSize:20,tooltip:"none"}}},created:function(){this.emitInput=r()(this.emitChange,3e3),this.emitChange=r()(this.emitChange,500)},methods:{onChange:function(){var e=[this.toNumber(this.formattedValue[0]),this.toNumber(this.formattedValue[1])];e[0]<this.min||e[0]>this.max?this.value[0]=this.min:this.value[0]=e[0],e[1]>this.max||e[1]<this.min?this.value[1]=this.max:this.value[1]=e[1],this.emitInput()},emitChange:function(){this.$emit("change",this.value)},clearPrice:function(){this.value=this.values},toNumber:function(e){return"string"==typeof e?parseInt(e.replace(/ /g,"")):e},toFormattedNumber:function(e){return this.formatNumber(e," "," ")}},watch:{values:function(){this.clearPrice()},value:function(){this.formattedValue[0]=this.toFormattedNumber(this.value[0]),this.formattedValue[1]=this.toFormattedNumber(this.value[1])}},components:{VueSlider:o.a}}),c=(i(1425),i(2)),u=Object(c.a)(l,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.min!==e.max?i("fieldset",[i("div",{staticClass:"config-filter__fields__title flex items-center"},[e._v(e._s(e.title))]),e._v(" "),i("div",{staticClass:"config-filter__fields__body"},[i("div",{staticClass:"range-slider"},[i("vue-slider",e._b({attrs:{min:e.min,max:e.max},on:{change:e.emitChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},"vue-slider",e.options,!1)),e._v(" "),i("ul",{staticClass:"flex"},[i("li",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.formattedValue[0],expression:"formattedValue[0]"}],attrs:{min:e.min},domProps:{value:e.formattedValue[0]},on:{input:[function(t){t.target.composing||e.$set(e.formattedValue,0,t.target.value)},e.onChange]}})]),e._v(" "),i("li",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.formattedValue[1],expression:"formattedValue[1]"}],attrs:{max:e.max},domProps:{value:e.formattedValue[1]},on:{input:[function(t){t.target.composing||e.$set(e.formattedValue,1,t.target.value)},e.onChange]}})])])],1)])]):e._e()}),[],!1,null,null,null);t.a=u.exports},1474:function(e,t,i){"use strict";var s={name:"filter-header",methods:{toggleConfigFilter:function(){document.body.classList.add("is-config-filter-toggling"),setTimeout((function(){document.body.classList.remove("is-config-filter-toggling"),window.dispatchEvent(new Event("resize"))}),300),document.body.classList.toggle("is-config-filter-opened"),document.getElementById("has-config-filter").classList.toggle("is-config-filter-opened")}},components:{IconClose:i(112).a}},r=i(2),a=Object(r.a)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"config-filter__header flex items-center justify-center"},[i("icon-close",{staticClass:"cursor-pointer",on:{click:e.toggleConfigFilter}}),e._v(" "),i("strong",{staticClass:"text-s1"},[e._v("Фильтры")]),e._v(" "),i("button",{on:{click:function(t){return e.$emit("clear-filter")}}},[e._v("Сбросить")])],1)}),[],!1,null,"2d9c2b95",null);t.a=a.exports},1475:function(e,t,i){"use strict";i(27),i(43);var s=i(405),r={name:"filter-footer",props:{meta:{type:Object,default:function(){return{}}},text:{type:String,default:"Показать #total#"},showRefresh:{type:Boolean,default:!1},withPadding:{type:Boolean,default:!1}},computed:{buttonTitle:function(){return this.text.replace("#total#",this.meta.total)}},methods:{toggleConfigFilter:function(){document.body.classList.add("is-config-filter-toggling"),setTimeout((function(){document.body.classList.remove("is-config-filter-toggling"),window.dispatchEvent(new Event("resize"))}),300),document.body.classList.toggle("is-config-filter-opened"),document.getElementById("has-config-filter").classList.toggle("is-config-filter-opened")}},components:{IconRefresh:s.a}},a=(i(1426),i(2)),n=Object(a.a)(r,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["config-filter__footer",{"config-filter__footer__padding flex flex-wrap items-center justify-between":e.withPadding}]},[i("button",{on:{click:e.toggleConfigFilter}},[e._v(e._s(e.buttonTitle))]),e._v(" "),e.showRefresh?i("div",{staticClass:"config-filter__footer__reset hidden"},[i("button",{on:{click:function(t){return e.$emit("clear-filter")}}},[i("icon-refresh",{staticClass:"mr-2"}),e._v("\n      Очистить фильтр\n    ")],1)]):e._e()])}),[],!1,null,"213ce506",null);t.a=n.exports},1476:function(e,t,i){"use strict";i(38);var s=i(55),r=i.n(s),a=i(14),n=i.n(a),o={name:"filter-select",props:{title:String,placeholder:String,hasSingle:{type:Boolean,default:!1},fieldsetClasses:{type:Array,default:function(){return[]}},bodyClasses:{type:Array,default:function(){return["config-filter__fields__body"]}},selectClasses:{type:Array,default:function(){return["multiselect_small","mt-2"]}},multiple:{type:Boolean,default:!1},selected:{type:Object,default:function(){return null}},options:{type:Array,default:function(){return[]}},value:[Array,Object],searchable:{type:Boolean,default:!0}},computed:{state:{get:function(){return this.value},set:function(e){n()(e)||this.$emit("input",e)}}},methods:{prepareOptions:function(e){var t=this;return this.multiple&&!n()(this.state)?e.map((function(e){return r()(t.state,{id:e.id})||e})):e}}},l=i(2),c=Object(l.a)(o,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.hasSingle||e.options.length>1?i("fieldset",{class:e.fieldsetClasses},[i("div",{class:e.bodyClasses},[i("div",{staticClass:"config-filter__fields__title flex items-center"},[e._v(e._s(e.title))]),e._v(" "),i("g-select",{class:e.selectClasses,attrs:{placeholder:e.placeholder,searchable:e.searchable,"has-label":!1,multiple:e.multiple,options:e.prepareOptions(e.options),selected:e.selected||this.value},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}})],1)]):e._e()}),[],!1,null,"b9a5384c",null);t.a=c.exports},1477:function(e,t,i){"use strict";var s={name:"filter-checkbox",props:{id:String,title:String,hasSingle:{type:Boolean,default:!1},values:{type:Array,default:function(){return[]}},value:{type:Array,default:function(){return[]}}},computed:{state:{get:function(e){return e.value},set:function(e){return e}}},methods:{getValueId:function(e){return this.id?this.id+"_"+e:e}}},r=i(2),a=Object(r.a)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.hasSingle||e.values.length>1?i("fieldset",[e.title?i("div",{staticClass:"config-filter__fields__title flex items-center"},[e._v(e._s(e.title))]):e._e(),e._v(" "),i("div",{staticClass:"config-filter__fields__body"},[i("ul",e._l(e.values,(function(t){return i("li",{key:e.getValueId(t.id)},[i("g-checkbox",{attrs:{id:e.getValueId(t.id),val:t.id,label:t.name,disabled:t.disabled},on:{input:function(t){return e.$emit("input",t)}},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}},[e._t("default")],2)],1)})),0)])]):e._e()}),[],!1,null,"628b1aa2",null);t.a=a.exports},1478:function(e,t,i){"use strict";var s={name:"filter-color-checkbox",mixins:[i(31).a],props:{id:String,title:String,hasLabel:{type:Boolean,default:!1},values:{type:Array,default:function(){return[]}},value:{type:Array,default:function(){return[]}}},computed:{state:{get:function(e){return e.value},set:function(e){return e}},listClasses:function(){return this.hasLabel?"":"config-filter__colors flex flex-row flex-wrap"}},methods:{prepareImage:function(e){return e?this.generateFilePath(e):void 0},checkboxInput:function(e){this.$emit("input",e)},getValueId:function(e){return this.id?this.id+"_"+e:e}}},r=i(2),a=Object(r.a)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.values.length>1?i("fieldset",[i("div",{staticClass:"config-filter__fields__title flex items-center"},[e._v(e._s(e.title))]),e._v(" "),i("div",{staticClass:"config-filter__fields__body"},[i("ul",{class:e.listClasses},e._l(e.values,(function(t){return i("li",{key:t.id},[i("g-checkbox",{attrs:{id:e.getValueId(t.id),val:t.id,label:t.name,"has-color":!0,"has-label":e.hasLabel,disabled:t.disabled,image:e.prepareImage(t.image),hex:t.hex},on:{input:e.checkboxInput},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}})],1)})),0)])]):e._e()}),[],!1,null,"3bfc7f91",null);t.a=a.exports},1503:function(e,t,i){"use strict";var s=i(1321);i.n(s).a},1523:function(e,t,i){"use strict";var s=i(1075),r={name:"cars-not-found",props:{isSmall:{type:Boolean,default:!0},showTitle:{type:Boolean,default:!1},items:{type:Array,default:function(){return[]}}},mounted:function(){this.$emit("mounted")},components:{ViewAlso:s.a}},a=i(2),n=Object(a.a)(r,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{staticClass:"text-x5 tablet:text-x4 desktop1920:text-x3",attrs:{id:"sorry-cars-not-found"}},[this._v("\n    Нам очень жаль, автомобили не найдены.\n  ")]),this._v(" "),t("div",{staticClass:"text-s2i mt-4"},[this._v("\n    Обратитесь к официальному дилеру Kia и вас проконсультируют о наличии.\n  ")]),this._v(" "),t("ViewAlso",{attrs:{"is-small":this.isSmall,"show-title":this.showTitle,items:this.items}})],1)}),[],!1,null,null,null);t.a=n.exports},1527:function(e,t,i){"use strict";i(13),i(6),i(5),i(46);var s=i(85),r=i(96),a=i.n(r),n={mixins:[i(24).a],name:"catalog-options-filter",props:{groupedOptions:{type:Array,default:function(){return[]}}},data:function(){return{isOpened:{},checkboxesState:[],selectsState:{},isOptionGroupsSended:[]}},computed:{selectOptionsId:function(){var e=[];return this.groupedOptions.forEach((function(t){t.options.forEach((function(t){(t.values&&t.values.length>1||void 0===t.values)&&e.push(t.id)}))})),e}},mounted:function(){void 0!==this.$store.state["cars-catalog"].selectedFilters.options&&(this.checkboxesState=this.$store.state["cars-catalog"].selectedFilters.options),void 0!==this.$store.state["used-cars-catalog"].selectedFilters.options&&(this.checkboxesState=this.$store.state["used-cars-catalog"].selectedFilters.options)},methods:{toggleFieldset:function(e,t){this.isOpened[e]=!Boolean(this.isOpened[e]),this.isOpened[e]&&this.dataLayerPush("Filter accordion",t,"Open"),this.isOpened=Object.assign({},this.isOpened)},changeFilter:function(){this.$emit("change_filter")},clearSelected:function(){this.resetSelectsState(),this.checkboxesState=[]},resetSelectsState:function(){var e=this;this.selectOptionsId.forEach((function(t){e.selectsState[t]=[]}))},checkHandler:function(e,t,i){e&&t&&i.length>0&&this.dataLayerPush("Filter accordion",e,t),this.$emit("input",this.getAllOptionValues())},getAllOptionValues:function(){var e=this.checkboxesState;for(var t in this.selectsState){var i=this.selectsState[t];i.length&&(e=e.concat(a()(i,"id")))}return e}},created:function(){this.resetSelectsState()},components:{IconAngleDown:s.a}},o=(i(1503),i(2)),l=Object(o.a)(n,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.groupedOptions.length>0?i("fieldset",[i("div",{staticClass:"config-filter__options mt-6"},[i("div",{staticClass:"config-filter__options-title text-s1 mb-4"},[e._v("Опции")]),e._v(" "),e._l(e.groupedOptions,(function(t){return i("fieldset",{key:t.group.id,class:["options-fieldset",{"is-opened":e.isOpened[t.group.id]}]},[i("div",{staticClass:"options-fieldset__title config-filter__fields__title flex items-center justify-between",on:{click:function(i){return e.toggleFieldset(t.group.id,t.group.name)}}},[i("span",[e._v(e._s(t.group.name))]),e._v(" "),i("icon-angle-down")],1),e._v(" "),i("div",{staticClass:"options-fieldset__body config-filter__fields__body"},[i("ul",e._l(t.options,(function(s){return i("li",{key:s.id},[s.values?[s.values.length>1?i("g-select",{staticClass:"multiselect_small multiselect--aboveest",attrs:{placeholder:s.name,searchable:!0,"has-label":!1,label:s.name,multiple:!0,options:s.values,selected:e.selectsState[s.id]},on:{input:e.checkHandler},model:{value:e.selectsState[s.id],callback:function(t){e.$set(e.selectsState,s.id,t)},expression:"selectsState[option.id]"}}):e._l(s.values,(function(r){return i("g-checkbox",{key:r.id,attrs:{id:s.id,val:r.id,label:s.name,disabled:r.disabled},on:{input:function(i){return e.checkHandler(t.group.name,s.name,i)}},model:{value:e.checkboxesState,callback:function(t){e.checkboxesState=t},expression:"checkboxesState"}})}))]:[i("g-checkbox",{key:s.id,attrs:{id:s.id,val:s.id,label:s.name,disabled:s.disabled},on:{input:e.checkHandler},model:{value:e.checkboxesState,callback:function(t){e.checkboxesState=t},expression:"checkboxesState"}})]],2)})),0)])])}))],2)]):e._e()}),[],!1,null,null,null);t.a=l.exports},1870:function(e,t,i){},1871:function(e,t,i){},2306:function(e,t,i){var s=i(23),r=i(2307);s({global:!0,forced:parseFloat!=r},{parseFloat:r})},2307:function(e,t,i){var s=i(29),r=i(325).trim,a=i(326),n=s.parseFloat,o=1/n(a+"-0")!=-1/0;e.exports=o?function(e){var t=r(String(e)),i=n(t);return 0===i&&"-"==t.charAt(0)?-0:i}:n},2308:function(e,t,i){"use strict";var s=i(1870);i.n(s).a},2309:function(e,t,i){"use strict";var s=i(1871);i.n(s).a},2407:function(e,t,i){"use strict";i.r(t);i(7),i(75),i(3),i(26),i(9),i(10),i(8),i(5);var s=i(15),r=i(18),a=i(997),n=i(24),o=i(34),l=(i(13),i(375),i(6),i(56)),c=i.n(l),u=i(1182),d=i(83),f=i(1131),p=i(1009),h=i(37),m=i(1036),g=i(377),_=i(1224);function v(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function y(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?v(Object(i),!0).forEach((function(t){Object(s.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var b={name:"catalog-list",mixins:[h.a,n.a],props:{mode:{type:String,default:"table"},loading:{type:Boolean,default:!1},cars:{type:Array,default:function(){return[]}}},data:function(){return{isPopupOpened:!1,isFavoriteLoaded:!1,popupFormComponent:null,isSending:!1,sendingCarId:null,popupFormProps:{},favoriteType:"used_cars"}},mounted:function(){var e=this;this.getFavorites(this.favoriteType).then((function(t){void 0!==t.data.content.favorites&&(e.isFavoriteLoaded=!0)}))},computed:y({},Object(r.e)("personal/favorites",["favorites"]),{},Object(r.e)("geo-position",["city"])),methods:y({},Object(r.b)("personal/favorites",["getFavorites","addFavorite"]),{getDetailUrl:function(e){return{name:"used_cars-city-id",params:{id:e.code,city:e.city_code}}},isFavorite:function(e){return this.isFavoriteLoaded&&void 0!==this.favorites[e.id]},favoriteClick:function(e,t){var i=this;if(t)this.popupFormProps={name:"".concat(e.model_name," ").concat(e.year),id:e.id,type:"used_cars"},this.popupFormComponent="RemoveFavoriteCar",this.isPopupOpened=!0;else{if(this.dataLayerPush("Saving","Save used car to favorites"),this.isSending)return;this.isSending=!0,this.sendingCarId=e.id,this.addFavorite({type:this.favoriteType,id:e.id}).then((function(t){0===t.data.error&&t.data.content.success&&(i.popupFormProps={car:e,isUsedCar:!0},i.popupFormComponent="AddedFavoriteCar",i.isPopupOpened=!0)})).finally((function(){i.isSending=!1,i.sendingCarId=null}))}},showSurePopup:function(){this.dataLayerPush("Info pop-up","Kia certified description","Open"),this.isSurePopup=!0},closeSurePopup:function(){this.isSurePopup=!1},closePopup:function(){this.isPopupOpened=!1},sendStatistic:function(e){var t={vehicleColorExterior:e.exterior_color_name,vehicleNameplate:e.model_name,vehicleTransmission:e.gearbox_name,dealershipName:e.dealership_name,userLocation:this.city.name,vehicleEngine:"".concat(e.engine_volume," / ").concat(e.engine_power_hp," h.p. ").concat(e.fuel_type_name),driveUnit:e.drive_name,usedCarMileage:e.mileage,usedCarYearOfIssue:e.year,city:this.city.name,bodyType:e.body_type_name,priceDealership:e.price};this.dataLayerPush("Used cars","Car catalog","Click on product",t)}}),components:{KiaSure:_.a,Car:f.a,Popup:d.a,Preloader:p.a,PopupContentForm:m.a,IconInfo:g.a}},S=i(2),C=Object(S.a)(b,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["catalog-items flex flex-row flex-wrap",{"view-list":"list"===e.mode}]},[e.loading?i("Preloader"):e._e(),e._v(" "),e._l(e.cars,(function(t){return i("Car",{key:t.id,attrs:{car:t,detailUrl:e.getDetailUrl(t),isFavorite:e.isFavorite(t),showButtonFavorites:!0,loadedButtonFavorites:e.isFavoriteLoaded,isSendingFavorite:e.isSending&&t.id===e.sendingCarId},on:{"favorite-click":e.favoriteClick,"close-popup":e.closePopup,"click-on-card":function(i){return e.sendStatistic(t)}}},[i("template",{slot:"image"},[i("img",{attrs:{src:t.photo}})]),e._v(" "),i("template",{slot:"name"},[e._v(e._s(t.model_name)+" "+e._s(t.year))]),e._v(" "),t.is_kia_sure?i("template",{slot:"kia-sure"},[i("KiaSure",{staticClass:"mb-2",attrs:{"has-border":!0}})],1):e._e(),e._v(" "),i("template",{slot:"lable"},[e._v(e._s(e.formatMoney(t.mileage,"км")))]),e._v(" "),i("template",{slot:"location"},[i("span",[e._v(e._s(t.city_name)+", "+e._s(t.dealership_name))])])],2)})),e._v(" "),e.isPopupOpened?i("Popup",[i("PopupContentForm",{attrs:{"component-name":e.popupFormComponent,"component-props":e.popupFormProps},on:{"close-popup":e.closePopup}})],1):e._e()],2)}),[],!1,null,"32a87ed3",null).exports,x=i(1466),F=i(1372),O=(i(84),i(69),i(108),i(111),i(46),i(96)),w=i.n(O),j=i(137),P=i.n(j),k=i(98),L=i.n(k),$=i(39),D=i.n($),M=i(14),I=i.n(M),B=i(1121),E=i.n(B),T=i(1424),A=i.n(T),V=i(998),U=i(1022),R=i(1473),H=i(1474),N=i(1475),z=i(1476),K=i(1477),Y=i(1527),G=(i(2306),{name:"filter-select-range",props:{id:String,title:String,placeholder:String,limitValues:{type:Boolean,default:!1},hasPrefix:{type:Boolean,default:!0},postfix:{type:String,default:null},valuesFrom:{type:Array,default:function(){return[]}},valuesTo:{type:Array,default:function(){return[]}},stateFrom:{type:Object,default:function(){}},stateTo:{type:Object,default:function(){}}},computed:{isShowed:function(){return this.valuesFrom.length>1||this.valuesTo.length>1},prepareValuesFrom:function(){return this.prepareValues(this.valuesFrom,"from")},prepareValuesTo:function(){return this.prepareValues(this.valuesTo,"to")},from:{get:function(){return this.stateFrom},set:function(e){this.$emit("input-from",e),this.$emit("input")}},to:{get:function(){return this.stateTo},set:function(e){this.$emit("input-to",e),this.$emit("input")}},selectedFrom:function(){return I()(this.from)?null:this.from},selectedTo:function(){return I()(this.to)?null:this.to}},methods:{prepareValues:function(e,t){var i=this;if(e=this.limitSelectValues(e,t),!this.hasPrefix)return e;var s="from"===t?"от":"до",r=[],a={};return e.forEach((function(e){(a=Object.assign({},e)).name="".concat(s," ").concat(a.name),i.postfix&&(a.name="".concat(a.name," ").concat(i.postfix)),r.push(a)})),r},limitSelectValues:function(e,t){var i=this;if(!this.limitValues||!this.from&&!this.to)return e;var s=[],r={};return e.forEach((function(e){r=Object.assign({},e),e.disabled||("from"===t&&i.to?r.disabled=parseFloat(r.id)>parseFloat(i.to.id):"to"===t&&i.from&&(r.disabled=parseFloat(r.id)<parseFloat(i.from.id)),r.$isDisabled=r.disabled),s.push(r)})),s}}}),Q=Object(S.a)(G,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isShowed?i("fieldset",[i("div",{staticClass:"config-filter__fields__body"},[i("div",{staticClass:"config-filter__fields__title flex items-center"},[e._v(e._s(e.title))]),e._v(" "),i("div",{staticClass:"config-filter__fields-split flex"},[i("div",{staticClass:"config-filter__fields-split-item"},[i("g-select",{staticClass:"multiselect_small mt-2",attrs:{placeholder:"От",id:e.id+"_from",searchable:!1,"has-label":!1,options:e.prepareValuesFrom,selected:e.selectedFrom},model:{value:e.from,callback:function(t){e.from=t},expression:"from"}})],1),e._v(" "),i("div",{staticClass:"config-filter__fields-split-item"},[i("g-select",{staticClass:"multiselect_small mt-2",attrs:{placeholder:"До",id:e.id+"_to",searchable:!1,"has-label":!1,options:e.prepareValuesTo,selected:e.selectedTo},model:{value:e.to,callback:function(t){e.to=t},expression:"to"}})],1)])])]):e._e()}),[],!1,null,"e063b59a",null).exports,q=i(1478);function J(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}var W={name:"used-cars-catalog-filter",mixins:[V.a,n.a],props:{isShowedOptions:{type:Boolean,default:!0},isScrolledFixed:{type:Boolean,default:!0},isDummy:{type:Boolean,default:!1}},data:function(){return{prices:{},mileage:{},filterState:this.getDefaultFilterState(),kiaSure:{id:"sure"},configFilterOffsetLeft:0,configFilterHeight:"auto",isConfigFilterFixed:!1,isConfigFilterScroll:!1,isFilerFooterVisible:!0,isCityChanged:!1,isMinimumPriceSended:!1,isMaximumPriceSended:!1,isMaximumMileageSended:!1,isMinimumMileageSended:!1}},mounted:function(){this.prepareFilter(),this.isScrolledFixed&&(window.addEventListener("load",this.handleScrollConfigFilter),window.addEventListener("resize",this.handleScrollConfigFilter),window.addEventListener("scroll",this.handleScrollConfigFilter)),this.$emit("first-filter",this.prepareState())},beforeDestroy:function(){this.isScrolledFixed&&(window.removeEventListener("load",this.handleScrollConfigFilter),window.removeEventListener("resize",this.handleScrollConfigFilter),window.removeEventListener("scroll",this.handleScrollConfigFilter))},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?J(Object(i),!0).forEach((function(t){Object(s.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):J(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},Object(r.e)("used-cars-catalog",["meta","cities","filters","currentCityId","selectedFilters","availableFilters"]),{},Object(r.e)("geo-position",["city","extraRadius"]),{},Object(r.e)("ui",["header"]),{},Object(r.c)("used-cars-catalog",{currentCity:"getCurrentCity"}),{hasOffset:function(){return!(!this.header.isFixedHeaderVisible&&!this.isInited)},availablePrices:function(){return this.getAvailableRange("prices","price")},availableMileage:function(){return this.getAvailableRange("mileage")},filterData:function(){var e=this;return A()(this.filters,(function(t,i){if(D()(t)){var s=e.availableFilters[i]||!1;return w()(t,(function(e){var t=s&&-1===L()(s,e.id);return Object.assign({},e,{disabled:t,$isDisabled:t})}))}return t}))},filterApplyCount:function(){var e=P()(this.filterState,(function(e){return!I()(e)})).length;return I()(this.prices)||e++,I()(this.mileage)||e++,e},configFilterOffset:function(){return{height:this.configFilterHeight,marginLeft:Math.floor(this.configFilterOffsetLeft)+"px"}},ownersCount:function(){var e=this;return w()(this.filterData.owners_count,(function(t){return Object.assign({},t,{name:t.name+" "+e.choice(t.id,["владелец","владельца","владельцев"])})}))},groupedOptions:function(){var e=this,t=[];if(this.isShowedOptions){var i=E()(this.filters.options,"group_id"),s=this.availableFilters.options||!1;this.filters.option_groups.forEach((function(r){if(i[r.id]){var a=[];for(var n in i[r.id]){var o=i[r.id][n];a.push(Object.assign({},o,{values:Object.values(A()(o.values,(function(t){var i=s&&-1===L()(s,t.id);return i=i&&-1===L()(e.filterState.options,t.id),Object.assign({},t,{disabled:i,$isDisabled:i})})))}))}t.push({group:r,options:a})}}))}return t},showKiaSure:function(){var e=this.filterData.is_kia_sure.find((function(e){return 1===e.id}));return e&&!e.disabled}}),methods:{applyFilter:function(){this.$emit("apply-filter",this.prepareState())},loadDealership:function(e){var t=this;return this.$store.dispatch("dealerships/loadDealerships",e).then((function(){t.$set(t.filterState,"dealer",t.$store.state.dealerships.dealerships[0])}),(function(){}))},prepareObject:function(e,t){return this.filterData[e].filter((function(e){return t.includes(e.id)}))},prepareSelect:function(e){return this.selectedFilters[e]?this.prepareObject(e,this.selectedFilters[e]):[]},prepareRangeSelect:function(e){var t;switch(e){case"year_from":t="years_from";break;case"year_to":t="years_to";break;case"engine_volume_from":t="engine_volumes_from";break;case"engine_volume_to":t="engine_volumes_to";break;default:t=e}return this.selectedFilters[e]?this.prepareObject(t,[parseInt(this.selectedFilters[e])])[0]:null},prepareFilter:function(){void 0!==this.selectedFilters.price_from&&void 0!==this.selectedFilters.price_to&&(this.prices={min:this.selectedFilters.price_from,max:this.selectedFilters.price_to}),void 0!==this.selectedFilters.mileage_from&&void 0!==this.selectedFilters.mileage_to&&(this.mileage={min:this.selectedFilters.mileage_from,max:this.selectedFilters.mileage_to}),this.filterState={exterior_colors:this.selectedFilters.exterior_colors?this.selectedFilters.exterior_colors:[],options:this.selectedFilters.options?this.selectedFilters.options:[],kiaSure:this.selectedFilters.is_kia_sure?["sure"]:[],models:this.prepareSelect("models"),bodyTypes:this.prepareSelect("body_types"),gearboxes:this.prepareSelect("gearboxes"),fuelTypes:this.prepareSelect("fuel_types"),drives:this.prepareSelect("drives"),yearFrom:this.prepareRangeSelect("year_from"),yearTo:this.prepareRangeSelect("year_to"),engineVolumeFrom:this.prepareRangeSelect("engine_volume_from"),engineVolumeTo:this.prepareRangeSelect("engine_volume_to"),ownersCount:this.prepareRangeSelect("owners_count")},this.selectedFilters.dealerships&&this.loadDealership(this.selectedFilters.dealerships)},getAvailableRange:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t||(t=e),{min:c()(this.filters,"".concat(t,".min")),max:c()(this.filters,"".concat(t,".max"))}},reloadFilter:function(){this.dataLayerPush("Used cars","Car catalog","Clear filter"),this.clearFilter(),this.$emit("reload-filter",this.prepareState())},clearFilter:function(){this.prices={},this.mileage={},this.filterState=this.getDefaultFilterState(),this.filters.dealerships.length>1&&this.$refs["dealer-choice"].clearSelected(),this.isShowedOptions&&this.$refs["options-filter"].clearSelected()},prepareState:function(){var e={is_kia_sure:1===this.filterState.kiaSure.length?1:null,cities:[c()(this,"currentCityId",this.city.id)],models:this.prepareMultipleSelect(this.filterState.models),year_from:this.filterState.yearFrom?this.filterState.yearFrom.id:null,year_to:this.filterState.yearTo?this.filterState.yearTo.id:null,price_from:c()(this.prices,"min"),price_to:c()(this.prices,"max"),mileage_from:c()(this.mileage,"min"),mileage_to:c()(this.mileage,"max"),body_types:this.prepareMultipleSelect(this.filterState.bodyTypes),gearboxes:this.prepareMultipleSelect(this.filterState.gearboxes),fuel_types:this.prepareMultipleSelect(this.filterState.fuelTypes),drives:this.prepareMultipleSelect(this.filterState.drives),engine_volume_from:this.filterState.engineVolumeFrom?this.filterState.engineVolumeFrom.id:null,engine_volume_to:this.filterState.engineVolumeTo?this.filterState.engineVolumeTo.id:null,owners_count:this.filterState.ownersCount?this.filterState.ownersCount.id:null,dealerships:this.filterState.dealer?[this.filterState.dealer.id]:null,exterior_colors:this.filterState.exterior_colors,options:this.filterState.options};return e.dealerships||(e.radius=this.extraRadius||0),e},prepareMultipleSelect:function(e){return w()(e,"id")},setPriceFilter:function(e){(+this.prices.min&&+this.prices.min!=+e[0]||!+this.prices.min&&this.availablePrices.min!==+e[0])&&this.sendAnalytics("min",!0),(+this.prices.max&&+this.prices.max!=+e[1]||!+this.prices.max&&this.availablePrices.max!==+e[1])&&this.sendAnalytics("max",!0),this.setRangeFilter("prices",e)},setMileageFilter:function(e){(+this.mileage.min&&+this.mileage.min!=+e[0]||!+this.mileage.min&&this.availableMileage.min!==+e[0])&&this.sendAnalytics("min"),(+this.mileage.max&&+this.mileage.max!=+e[1]||!+this.mileage.max&&this.availableMileage.max!==+e[1])&&this.sendAnalytics("max"),this.setRangeFilter("mileage",e)},setOptionsFilter:function(e){(this.filterState.options.length||e.length)&&(this.filterState.options=e,this.applyFilter())},setRangeFilter:function(e,t){this[e]={min:+t[0],max:+t[1]},this.applyFilter()},getDefaultFilterState:function(){return{kiaSure:[],models:[],bodyTypes:[],gearboxes:[],fuelTypes:[],drives:[],yearFrom:null,yearTo:null,engineVolumeFrom:null,engineVolumeTo:null,ownersCount:null,exterior_colors:[],options:[],dealer:null}},handleScrollConfigFilter:function(){var e=window.pageYOffset,t=Math.round(window.innerHeight),i=document.getElementsByClassName("page-wrapper__footer")[0].offsetTop,s=document.getElementsByClassName("user-watched")[0],r=void 0!==s?s.offsetTop:0,a=Math.round(document.getElementsByClassName("catalog__wrap")[0].offsetTop),n=Math.round(document.getElementsByClassName("catalog__container")[0].offsetLeft);this.isConfigFilterFixed=e>a,this.isConfigFilterScroll=e+t>(r||i),this.isConfigFilterScroll?this.configFilterHeight=Math.round(t-1)+"px":this.configFilterHeight="auto",this.configFilterOffsetLeft=n},sendAnalytics:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];"min"===e&&t&&!this.isMinimumPriceSended&&(this.isMinimumPriceSended=!0,this.dataLayerPush("Used cars","Car catalog","Select minimum price")),"max"===e&&t&&!this.isMaximumPriceSended&&(this.isMaximumPriceSended=!0,this.dataLayerPush("Used cars","Car catalog","Select maximum price")),"min"!==e||t||this.isMinimumMileageSended||(this.isMinimumMileageSended=!0,this.dataLayerPush("Used cars","Car catalog","Select minimum mileage")),"max"!==e||t||this.isMaximumMileageSended||(this.isMaximumMileageSended=!0,this.dataLayerPush("Used cars","Car catalog","Select maximum mileage"))}},watch:{city:function(){this.isCityChanged=!0,this.$router.push({name:"used_cars-city",params:{city:this.city.code}})},extraRadius:function(){this.isCityChanged?this.isCityChanged=!1:this.applyFilter()}},components:{KiaSure:_.a,FilterRange:R.a,DealerChoice:U.a,FilterHeader:H.a,FilterFooter:N.a,FilterSelect:z.a,OptionsFilter:Y.a,FilterCheckbox:K.a,FilterSelectRange:Q,FilterColorCheckbox:q.a}},X=(i(2308),Object(S.a)(W,(function(){var e,t=this,i=t.$createElement,s=t._self._c||i;return s("aside",{ref:"configFilter",class:["config-filter",(e={},e["config-filter_fixed"]=t.isConfigFilterFixed,e["config-filter_scroll"]=t.isConfigFilterScroll,e["config-filter_dummy"]=t.isDummy,e["has-offset"]=t.hasOffset,e)],attrs:{"is-scrolled-fixed":t.isScrolledFixed}},[s("div",{staticClass:"config-filter__wrap",style:t.configFilterOffset},[s("div",{staticClass:"config-filter__container"},[s("div",{staticClass:"config-filter__form flex flex-col"},[s("FilterHeader",{on:{"clear-filter":t.reloadFilter}}),t._v(" "),s("div",{staticClass:"config-filter__body"},[s("div",{staticClass:"config-filter__content"},[t.showKiaSure?s("FilterCheckbox",{attrs:{id:"sure","has-single":!0,values:[t.kiaSure]},on:{input:t.applyFilter},model:{value:t.filterState.kiaSure,callback:function(e){t.$set(t.filterState,"kiaSure",e)},expression:"filterState.kiaSure"}},[s("KiaSure")],1):t._e(),t._v(" "),s("FilterSelect",{attrs:{title:"Модель",placeholder:"Выбрать одну или несколько",multiple:!0,options:t.filterData.models},on:{input:t.applyFilter},model:{value:t.filterState.models,callback:function(e){t.$set(t.filterState,"models",e)},expression:"filterState.models"}}),t._v(" "),s("FilterSelectRange",{attrs:{id:"year",title:"Год выпуска",valuesFrom:t.filterData.years_from,valuesTo:t.filterData.years_to,stateFrom:t.filterState.yearFrom,stateTo:t.filterState.yearTo,postfix:"г"},on:{"input-from":function(e){t.filterState.yearFrom=e},"input-to":function(e){t.filterState.yearTo=e},input:t.applyFilter}}),t._v(" "),s("FilterRange",{attrs:{title:"Стоимость, Р",min:t.availablePrices.min,max:t.availablePrices.max,values:[t.prices.min||t.availablePrices.min,t.prices.max||t.availablePrices.max]},on:{change:t.setPriceFilter}}),t._v(" "),s("FilterRange",{attrs:{title:"Пробег, км",min:t.availableMileage.min,max:t.availableMileage.max,values:[t.mileage.min||t.availableMileage.min,t.mileage.max||t.availableMileage.max]},on:{change:t.setMileageFilter}}),t._v(" "),s("FilterSelect",{attrs:{title:"Тип кузова",placeholder:"Все типы",multiple:!0,options:t.filterData.body_types,searchable:!1},on:{input:t.applyFilter},model:{value:t.filterState.bodyTypes,callback:function(e){t.$set(t.filterState,"bodyTypes",e)},expression:"filterState.bodyTypes"}}),t._v(" "),s("FilterSelect",{attrs:{title:"Коробка передач",placeholder:"Все типы",multiple:!0,options:t.filterData.gearboxes,searchable:!1},on:{input:t.applyFilter},model:{value:t.filterState.gearboxes,callback:function(e){t.$set(t.filterState,"gearboxes",e)},expression:"filterState.gearboxes"}}),t._v(" "),s("FilterSelectRange",{attrs:{id:"engine_volumes",title:"Объем двигателя",valuesFrom:t.filterData.engine_volumes_from,valuesTo:t.filterData.engine_volumes_to,stateFrom:t.filterState.engineVolumeFrom,stateTo:t.filterState.engineVolumeTo,postfix:"л"},on:{"input-from":function(e){t.filterState.engineVolumeFrom=e},"input-to":function(e){t.filterState.engineVolumeTo=e},input:t.applyFilter}}),t._v(" "),s("FilterSelect",{attrs:{title:"Вид топлива",placeholder:"Все типы",multiple:!0,options:t.filterData.fuel_types,searchable:!1},on:{input:t.applyFilter},model:{value:t.filterState.fuelTypes,callback:function(e){t.$set(t.filterState,"fuelTypes",e)},expression:"filterState.fuelTypes"}}),t._v(" "),s("FilterSelect",{attrs:{title:"Привод",placeholder:"Все типы",multiple:!0,options:t.filterData.drives,searchable:!1},on:{input:t.applyFilter},model:{value:t.filterState.drives,callback:function(e){t.$set(t.filterState,"drives",e)},expression:"filterState.drives"}}),t._v(" "),s("FilterSelect",{attrs:{title:"Количество владельцев",placeholder:"Любое",options:t.ownersCount,searchable:!1},on:{input:t.applyFilter},model:{value:t.filterState.ownersCount,callback:function(e){t.$set(t.filterState,"ownersCount",e)},expression:"filterState.ownersCount"}}),t._v(" "),t.filters.dealerships.length>1?s("fieldset",[s("div",{staticClass:"config-filter__fields__body"},[s("div",{staticClass:"config-filter__fields__title flex items-center"},[t._v("Дилер")]),t._v(" "),s("DealerChoice",{ref:"dealer-choice",staticClass:"mt-2",attrs:{dealershipIds:t.availableFilters.dealerships||t.filters.dealerships,isUsedCars:!0},on:{input:t.applyFilter},nativeOn:{click:function(e){return t.dataLayerPush("Dealer search pop-up","Open")}},model:{value:t.filterState.dealer,callback:function(e){t.$set(t.filterState,"dealer",e)},expression:"filterState.dealer"}})],1)]):t._e(),t._v(" "),s("FilterColorCheckbox",{attrs:{title:"Цвет кузова",values:t.filterData.exterior_colors},on:{input:t.applyFilter},model:{value:t.filterState.exterior_colors,callback:function(e){t.$set(t.filterState,"exterior_colors",e)},expression:"filterState.exterior_colors"}}),t._v(" "),t.isShowedOptions?s("OptionsFilter",{ref:"options-filter",attrs:{groupedOptions:t.groupedOptions},on:{input:t.setOptionsFilter}}):t._e()],1)]),t._v(" "),s("FilterFooter",{class:{"is-visible":t.isFilerFooterVisible},attrs:{meta:t.meta,"show-refresh":Boolean(t.filterApplyCount)},on:{"clear-filter":t.reloadFilter}})],1)])])])}),[],!1,null,null,null).exports),Z=i(1523);function ee(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function te(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(i),!0).forEach((function(t){Object(s.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ee(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var ie={name:"used-cars-catalog-list",mixins:[n.a],data:function(){return{mode:"table",loading:!1,hasFilter:!0,currentModelCode:null,viewAlsoItems:[{icon:"IconDealerOffice",url:"/dealers/",text:"Поиск дилера"},{icon:"IconCarExchange",url:"/buy/configurator/",text:"Конфигуратор"},{icon:"IconCredit",url:"/buy/calc/",text:"Кредитный калькулятор"},{icon:"IconCarChoice",url:"/buy/cars/",text:"Авто в наличии"}],firstFilter:[],isFilterSended:{kiaSure:!1,models:!1,year_from:!1,year_to:!1,body_types:!1,engine_volume_from:!1,engine_volume_to:!1,fuel_types:!1,drives:!1,exterior_colors:!1}}},updated:function(){this.triggerScroll()},mounted:function(){var e=document.getElementsByClassName("config-filter__content")[0];this.hasFilter=void 0===e||e.childElementCount>0},computed:te({},Object(r.e)("used-cars-catalog",["cars","meta","defaultSort","allCitiesTotal","filters"]),{},Object(r.c)("watched",["watchedEntities"]),{hasCars:function(){return this.cars.length>0},total:function(){var e=c()(this.meta,"total",0);return e?this.allCitiesTotal&&this.allCitiesTotal>e?"".concat(e," авто из ").concat(this.allCitiesTotal):"".concat(e," авто"):"Нет вариантов авто"}}),methods:{triggerScroll:function(){setTimeout((function(){window.scrollBy(0,1)}),50)},toggleViewMode:function(e){this.mode=e,this.dataLayerPush("Used cars","Car catalog","list"===e?"Change to list view of catalog":"Change to card view of catalog")},toggleLoading:function(){this.loading=!this.loading},SetFirstFilter:function(e){this.firstFilter=e},applyFilter:function(e){this.toggleLoading(),1===e.models.length?this.changeModelCode(e.models[0]):null!==this.currentModelCode&&this.changeModelCode(null),this.$store.dispatch("used-cars-catalog/filterCars",Object.assign({},e,this.$refs.header.getCurrentSort(),{recalc:!0})).finally(this.toggleLoading),this.sendFilterAnalytic(e)},sendFilterAnalytic:function(e){this.firstFilter.is_kia_sure===e.is_kia_sure||this.isFilterSended.kiaSure||(this.isFilterSended.kiaSure=!0,this.dataLayerPush("Used cars","Car catalog","Select Kia certified used cars")),this.firstFilter.models.length===e.models.length||this.isFilterSended.models||(this.isFilterSended.models=!0,this.dataLayerPush("Used cars","Car catalog","Select model")),this.firstFilter.year_from===e.year_from||this.isFilterSended.year_from||(this.isFilterSended.year_from=!0,this.dataLayerPush("Used cars","Car catalog","Select year of Issue min")),this.firstFilter.year_to===e.year_to||this.isFilterSended.year_to||(this.isFilterSended.year_to=!0,this.dataLayerPush("Used cars","Car catalog","Select year of Issue max")),this.firstFilter.body_types.length===e.body_types.length||this.isFilterSended.body_types||(this.isFilterSended.body_types=!0,this.dataLayerPush("Used cars","Car catalog","Select body type")),this.firstFilter.engine_volume_from===e.engine_volume_from||this.isFilterSended.engine_volume_from||(this.isFilterSended.engine_volume_from=!0,this.dataLayerPush("Used cars","Car catalog","Select minimum Engine volume")),this.firstFilter.engine_volume_to===e.engine_volume_to||this.isFilterSended.engine_volume_to||(this.isFilterSended.engine_volume_to=!0,this.dataLayerPush("Used cars","Car catalog","Select maximum Engine volume")),this.firstFilter.fuel_types.length===e.fuel_types.length||this.isFilterSended.fuel_types||(this.isFilterSended.fuel_types=!0,this.dataLayerPush("Used cars","Car catalog","Select type of fuel")),this.firstFilter.drives.length===e.drives.length||this.isFilterSended.drives||(this.isFilterSended.drives=!0,this.dataLayerPush("Used cars","Car catalog","Select drive unit")),this.firstFilter.exterior_colors.length===e.exterior_colors.length||this.isFilterSended.exterior_colors||(this.isFilterSended.exterior_colors=!0,this.dataLayerPush("Used cars","Car catalog","Select color"))},applySort:function(e){this.toggleLoading(),1!=e.recommended&&"asc"===e.order?this.dataLayerPush("Used cars","Car catalog","Selected sort by price ascending"):1!=e.recommended&&"desc"===e.order&&this.dataLayerPush("Used cars","Car catalog","Selected sort by price descending"),this.$store.dispatch("used-cars-catalog/filterCars",Object.assign({},this.$refs.filter.prepareState(),{recalc:!0},e)).finally(this.toggleLoading)},reloadFilter:function(e){var t=this;this.toggleLoading(),this.changeModelCode(null),this.$store.dispatch("used-cars-catalog/reloadFilterCars",Object.assign({},e,this.$refs.header.getCurrentSort())).then((function(){t.$store.dispatch("used-cars-catalog/clearFilter")}),(function(){})).finally(this.toggleLoading)},showMore:function(e){var t=this;this.toggleLoading(),this.dataLayerPush("Used cars","Car catalog","Show more products");var i=window.scrollY;this.$store.dispatch("used-cars-catalog/showMoreCars",Object.assign({},this.$refs.filter.prepareState(),this.$refs.header.getCurrentSort(),{page:e,only:"cars"})).finally((function(){t.toggleLoading(),window.scrollTo(0,i)}))},changeModelCode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.$route.params,i=null;null!==e?(i=this.filters.models.find((function(t){return t.id===e})),this.currentModelCode=i.code,window.history.replaceState(null,"",this.$route.path+"".concat(this.currentModelCode,"/")),this.$store.dispatch("used-cars-catalog/loadSeo",te({},t,{model:this.currentModelCode}))):(this.currentModelCode=null,window.history.replaceState(null,"",this.$route.path),this.$store.dispatch("used-cars-catalog/loadSeo",t)),this.$emit("changeModelCode",i?i.name:null)}},components:{Watched:u.a,CatalogList:C,CarsNotFound:Z.a,CatalogFilter:X,CatalogHeader:x.a,CatalogFooter:F.a}},se=(i(2309),Object(S.a)(ie,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"catalog__wrap"},[i("g-padding",[i("g-container",{staticClass:"catalog__container"},[i("div",{staticClass:"catalog__body flex"},[i("CatalogFilter",{ref:"filter",attrs:{isDummy:!e.hasFilter},on:{"apply-filter":e.applyFilter,"reload-filter":e.reloadFilter,"first-filter":e.SetFirstFilter}}),e._v(" "),i("div",{class:["catalog__section",{catalog__section_dummy:!e.hasCars&&!e.hasFilter}]},[i("CatalogHeader",{key:e.total,ref:"header",attrs:{mode:e.mode,meta:e.meta,"default-sort":e.defaultSort,"sort-items":[{id:1,name:"Рекомендуемое",sort:"recommended"},{id:2,name:"Цена по возрастанию",sort:"price",order:"asc"},{id:3,name:"Цена по убыванию",sort:"price",order:"desc"}]},on:{"toggle-mode":e.toggleViewMode,"toggle-sort":e.applySort,"open-select":function(t){return e.dataLayerPush("Used cars","Car catalog","Open sorting options")}}},[i("template",{slot:"total"},[i("div",{staticClass:"items-counter"},[e._v(e._s(e.total))])])],2),e._v(" "),e.hasCars?[i("CatalogList",{staticClass:"is-used",attrs:{mode:e.mode,cars:e.cars,loading:e.loading}}),e._v(" "),i("CatalogFooter",{attrs:{meta:e.meta},on:{"show-more":e.showMore}})]:i("CarsNotFound",{attrs:{items:e.viewAlsoItems},on:{mounted:function(t){return e.dataLayerPush("Used cars","Car catalog","No products found",null,!0)}}})],2)],1)])],1),e._v(" "),e.hasCars?e._e():i("Watched",{attrs:{entities:e.watchedEntities}})],1)}),[],!1,null,"23673164",null).exports),re=i(532),ae=i(398);function ne(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function oe(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(i),!0).forEach((function(t){Object(s.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ne(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var le={name:"used-cars-catalog-page",data:function(){return{currentModel:null}},mixins:[n.a],fetch:function(e){var t=e.store,i=e.params,s=e.error,r=e.req,n=e.query,l=o.a.methods.getCookie("geo-extra-radius",r),c=l?oe({},i,{radius:l}):i;return Object(a.a)(t,s,"used-cars-catalog/loadPage",c).then((function(){var e=void 0!==n.model?{model:n.model}:{};return t.commit("ui/setHeaderColor","black"),Object(a.a)(t,s,"used-cars-catalog/loadFilter",e).then((function(){void 0!==n.model&&void 0===t.state["used-cars-catalog"].selectedFilters.models&&s({statusCode:404})}),(function(){}))}),(function(){}))},head:function(){return{title:this.seo.title,link:[this.linkIsCanonical],meta:[{hid:"description",name:"description",content:this.seo.description}]}},mounted:function(){this.dataLayerPush("Used cars","Car catalog","Start",null,!0)},methods:{changeModelCode:function(e){this.currentModel=e}},computed:oe({},Object(r.e)("used-cars-catalog",["seo","cities"]),{},Object(r.c)("used-cars-catalog",{currentCity:"getCurrentCity"}),{linkIsCanonical:function(){return I()(this.$route.query)?{}:{rel:"canonical",href:"https://www.kia.ru"+this.$route.path}},title:function(){return this.currentCity?this.currentModel?"Kia "+this.currentModel+" с пробегом в г. "+this.currentCity.name:"Kia с пробегом в г. "+this.currentCity.name:"Каталог автомобилей с пробегом"},breadcrumbItems:function(){var e=[{name:"Каталог автомобилей с пробегом",href:{name:"used_cars"}}];return this.currentCity&&e.push({name:this.currentCity?"г. "+this.currentCity.name:""}),e}}),components:{Catalog:se,Breadcrumbs:re.default,GeoIP:ae.a}},ce=Object(S.a)(le,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"catalog config pt-12 desktop1440:pt-16 is-config-filter-opened",attrs:{id:"has-config-filter"}},[i("g-padding",{staticClass:"pt-0 desktop:pt-4"},[i("g-container",{staticClass:"flex justify-between"},[i("Breadcrumbs",{attrs:{items:e.breadcrumbItems}})],1),e._v(" "),i("g-container",[i("div",{staticClass:"pt-8 tablet:pt-6 pb-6 tablet:pb-10 desktop1440:pb-12"},[i("h1",{staticClass:"text-x5 desktop:text-x3"},[e._v("\n            "+e._s(e.title)+"\n          ")]),e._v(" "),i("GeoIP",{staticClass:"mt-6",attrs:{"main-city-code":this.$route.params.city,"filtered-cities":e.cities,isCarLocator:!0},on:{click:function(t){return e.dataLayerPush("Used cars","Open city and radius")}}})],1)])],1),e._v(" "),i("Catalog",{on:{changeModelCode:e.changeModelCode}})],1)])}),[],!1,null,"956ba12a",null);t.default=ce.exports}}]);