(window.webpackJsonp=window.webpackJsonp||[]).push([[126,13,28],{1001:function(t,e,n){},1004:function(t,e,n){"use strict";var i=n(14),r=n.n(i),s={retina:1920,desktop:1440,mobile:500};e.a={methods:{getMaxResizeWidthByType:function(t){return s[t]},getResizeTypes:function(){return["mobile","desktop","retina"]},getPictureMediaSources:function(t,e){for(var n=this.getResizeTypes(),i=[],r=0;r<n.length;r++){var s=n[r];null!==t[s]&&i.push({max_width:this.getMaxResizeWidthByType(s),url:this.getResizeImagePath(t[s],e[s])})}return this.unsetLastMaxwithProperty(i)},getVideoMediaSources:function(t,e,n){for(var i=this.getResizeTypes(),s=[],a=0;a<i.length;a++){var o=i[a];s.push({max_width:this.getMaxResizeWidthByType(o),url:this.generateFilePath(e),poster:r()(t[o])?null:this.getResizeImagePath(t[o],n[o])})}return this.unsetLastMaxwithProperty(s)},unsetLastMaxwithProperty:function(t){return void 0!==t[t.length-1]&&delete t[t.length-1].max_width,t}}}},1005:function(t,e,n){"use strict";var i=n(166),r=n(115),s={props:{isRight:{type:Boolean,default:!1},isTransparent:{type:Boolean,default:!1}},components:{LongArrowLeft:i.a,LongArrowRight:r.a}},a=(n(1015),n(2)),o=Object(a.a)(s,(function(){var t=this.$createElement,e=this._self._c||t;return e("button",{class:["shared-slider-button",this.isTransparent&&"shared-slider-button_transparent"]},[this.isRight?[e("LongArrowRight")]:[e("LongArrowLeft")]],2)}),[],!1,null,null,null);e.a=o.exports},1007:function(t,e,n){},1015:function(t,e,n){"use strict";var i=n(999);n.n(i).a},1022:function(t,e,n){"use strict";n(7),n(3),n(9),n(10),n(8),n(6),n(5),n(51);var i=n(21),r=n(15),s=n(18),a=n(11),o=n(96),c=n.n(o),l=n(137),u=n.n(l),d=n(98),p=n.n(d),f=n(83),m=n(107),h=n(109),_=n(112),v=n(379);function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}var b,y={mixins:[n(24).a],props:{error:String,dealership:null,dealershipIds:{type:Array,default:function(){return[]}},excludedDealershipIds:{type:Array,default:function(){return[]}},model:{type:Object,default:function(){}},theme:{type:Object,default:function(){}},mapId:{type:String,default:"yamap"},autoFill:{type:Boolean,default:!1},showButton:{type:Boolean,default:!0},isSmall:{type:Boolean,default:function(){return!0}},buttonShort:{type:Boolean,default:!1},showServices:{type:Boolean,default:function(){return!0}},showFilter:{type:Boolean,default:function(){return!0}},showGeoIp:{type:Boolean,default:function(){return!0}},title:{type:String,default:function(){return"Выберите дилера"}},description:{type:String,default:null},disableResult:{type:Boolean,default:function(){return!1}},value:{type:Object,default:null},carInfo:{type:Object,default:null},headerClass:{type:String,default:""},isCalculatorPage:{type:Boolean,default:!1},showLink:{type:Boolean,default:!0},isMaintenanceCalc:{type:Boolean,default:function(){return!1}},isBuyCalc:{type:Boolean,default:!1},isConfigurator:{type:Boolean,default:!1},isTradeIn:{type:Boolean,default:function(){return!1}},isUsedCars:{type:Boolean,default:function(){return!1}}},data:function(){return{dealer:null,isLoading:!1,isPopupOpen:!1,isLimitQuery:this.dealershipIds.length>=100}},created:function(){var t=this;this.clearDealerships(),this.dealership?this.setDealer(this.dealership):this.autoFill&&this.$auth.loggedIn&&(this.isLoading=!0,this.$axios(a.a.lastUserDealer()).then((function(e){0===e.data.error&&void 0!==e.data.content.dealership&&t.setDealer(e.data.content.dealership)})).finally((function(){t.isLoading=!1})))},destroyed:function(){this.clearDealerships()},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(s.e)("geo-position",{currentCity:"city"}),{},Object(s.c)("dealerships",{cities:"getCities",dealerships:"getDealerships"}),{dealershipFiltered:function(){var t=this,e=this.dealerships;return this.excludedDealershipIds.length>0&&(e=this.dealerships.filter((function(e){return!t.excludedDealershipIdsByKey[e.id]}))),this.isLimitQuery?u()(e,(function(e){return-1!==p()(t.dealershipIds,e.id)})):e},cityFiltered:function(){if(this.isLimitQuery){var t=c()(this.dealershipFiltered,"city_id");return u()(this.cities,(function(e){return-1!==p()(t,e.id)}))}return this.cities},dealerSelected:function(){return!this.disableResult&&null!==this.dealer},hasError:function(){return!!this.error},hasButtonSlot:function(){return!!this.$slots.button},excludedDealershipIdsByKey:function(){var t={};return this.excludedDealershipIds.forEach((function(e){t[e]=e})),t}}),methods:{togglePopup:(b=Object(i.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.next=3,this.loadDealerships();case 3:this.isPopupOpen=!this.isPopupOpen,this.dealerSelected&&this.dataLayerPush("Dealer search","Change dealer"),!this.dealerSelected&&this.isConfigurator&&this.isPopupOpen&&this.dataLayerPush("Dealer search pop-up","Open");case 6:case"end":return t.stop()}}),t,this)}))),function(t){return b.apply(this,arguments)}),checkedDealer:function(t){Object.assign(this,{dealer:t,isPopupOpen:!1}),this.$emit("input",t)},loadDealerships:function(){return this.dealerships.length<=0?this.$store.dispatch("dealerships/loadAll",this.isLimitQuery?[]:this.dealershipIds):Promise.resolve()},clearDealerships:function(){this.dealershipIds.length>0&&this.$store.dispatch("dealerships/clearAll")},clearSelected:function(){this.dealer=null},setDealer:function(t){this.dealer=t,this.isPopupOpen=!1,this.$emit("input",this.dealer)}},components:{Popup:f.a,Loader:m.a,IconEdit:h.a,IconClose:_.a,DealerLocator:v.a}},C=(n(1037),n(2)),P=Object(C.a)(y,(function(){var t,e=this,n=e.$createElement,i=e._self._c||n;return i("div",[e.isLoading?i("Loader",{attrs:{inline:!0}}):e.showButton?i("div",[i("div",{class:["form-control",(t={},t["has-error"]=e.hasError,t)]},[e.dealerSelected?e._e():i("button",{class:["button button_secondary",{button_small:e.isSmall},{"mt-3":e.isMaintenanceCalc},{"button-short":e.buttonShort}],on:{click:e.togglePopup}},[i("span",{staticClass:"button__span-after"},[e._v("\n          Выбрать дилера\n        ")])]),e._v(" "),e.hasError?i("span",{class:["form-control__error"]},[e._v(e._s(e.error))]):e._e()]),e._v(" "),e.dealerSelected?i("div",{staticClass:"form-dealer text-s2i"},[i("div",{staticClass:"flex items-center text-s1 mt-3 mb-1",class:e.headerClass},[e._v("\n        Дилер\n        "),i("icon-edit",{staticClass:"color-disabled-gray cursor-pointer ml-2",on:{click:e.togglePopup}})],1),e._v(" "),i("div",[e._v(e._s(e.dealer.name))]),e._v(" "),i("div",{staticClass:"color-dark-gray"},[e._v(e._s(e.dealer.address))])]):e._e()]):e._e(),e._v(" "),e.isPopupOpen?i("popup",[i("div",{staticClass:"popup__container flex items-center justify-center"},[i("div",{staticClass:"popup__body"},[i("div",{staticClass:"popup__close",on:{click:e.togglePopup}},[i("IconClose",{staticClass:"block"})],1),e._v(" "),i("div",{staticClass:"form form_popup flex flex-col"},[i("div",{staticClass:"form__wrap flex flex-col"},[i("div",{staticClass:"form__header px-6 desktop:px-16 pt-6 desktop:pt-8 desktop:pb-4"},[i("h1",{staticClass:"text-x5 desktop:text-x4 mb-1"},[e._v(e._s(e.title))]),e._v(" "),e.description?i("div",{staticClass:"sub-header",domProps:{innerHTML:e._s(e.description)}}):e._e()]),e._v(" "),i("div",{staticClass:"form__container flex-container flex-col"},[i("DealerLocator",{attrs:{mapId:e.mapId,cities:e.cityFiltered,carInfo:e.carInfo,showServices:e.showServices,"show-filter":e.showFilter,"show-geo-ip":e.showGeoIp,"dealership-ids":e.dealershipIds,defaultCityCode:e.currentCity.code,"excluded-dealership-ids":e.excludedDealershipIds,"is-calculator-page":e.isCalculatorPage,"show-link":e.showLink,isBuyCalc:e.isBuyCalc,isConfigurator:e.isConfigurator,isTradeIn:e.isTradeIn,isUsedCars:e.isUsedCars},on:{"checked-dealer":e.checkedDealer}})],1)])])])])]):e._e()],1)}),[],!1,null,"cf648c4c",null);e.a=P.exports},1027:function(t,e,n){"use strict";n(13);var i=n(83),r=n(48),s={props:{offer:Object,isPopupShown:Boolean},computed:{datePrepare:function(){var t=this.$moment().startOf("month"),e=this.$moment().endOf("month"),n=this.$moment.unix(this.offer.active_from),i=this.$moment.unix(this.offer.active_to);return n=n.isSame(t,"month")?n:t,i=i.isSame(e,"month")?i:e,"".concat(n.format("D ")," - ").concat(i.format("D MMMM YYYY"))}},methods:{toggleInfoPopup:function(){this.$emit("toggle-info-popup")}},components:{Popup:i.a,CloseIcon:r.a}},a=(n(1125),n(2)),o=Object(a.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isPopupShown?n("Popup",[n("div",{staticClass:"info__popup-wrapper bg-white pt-16 pb-8 desktop:pb-20 px-6 desktop:px-22"},[n("button",{staticClass:"info__close-button",on:{click:t.toggleInfoPopup}},[n("CloseIcon")],1),t._v(" "),n("div",[n("h1",{staticClass:"info__title",domProps:{innerHTML:t._s(t.offer.name)}}),t._v(" "),n("p",{staticClass:"info__head",domProps:{innerHTML:t._s(t.offer.preview_text)}}),t._v(" "),n("p",{staticClass:"info__head",domProps:{innerHTML:t._s(t.datePrepare)}}),t._v(" "),n("hr"),t._v(" "),t.offer.condition_text?[n("p",{staticClass:"info__head__bold"},[t._v("Условия участия в Программе")]),t._v(" "),n("p",{staticClass:"info__text__main",domProps:{innerHTML:t._s(t.offer.condition_text)}})]:t._e(),t._v(" "),t.offer.advantage_text?[n("p",{staticClass:"info__head__bold"},[t._v("Преимущества")]),t._v(" "),n("p",{staticClass:"info__text__main",domProps:{innerHTML:t._s(t.offer.advantage_text)}})]:t._e(),t._v(" "),t.offer.description?[n("div",{staticClass:"info__text",domProps:{innerHTML:t._s(t.offer.description)}})]:t._e(),t._v(" "),n("button",{staticClass:"button bg-black color-white info__button",on:{click:t.toggleInfoPopup}},[n("span",{staticClass:"button__span-after"},[t._v("\n          Понятно\n        ")])])],2)])]):t._e()}),[],!1,null,null,null);e.a=o.exports},1028:function(t,e,n){"use strict";var i=n(32);e.a={methods:{getLocalizedName:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"name",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en";if("object"!==Object(i.a)(t)||null===t)return"";var r=e+"_"+n;return t[r]?t[r]:t[e]||""}}}},1032:function(t,e,n){},1033:function(t,e,n){},1034:function(t,e,n){},1037:function(t,e,n){"use strict";var i=n(1001);n.n(i).a},1038:function(t,e,n){"use strict";n(17),n(13),n(8),n(7),n(3),n(6),n(9),n(5),n(10);var i=["class","staticClass","style","staticStyle","attrs"];function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},s=Object.keys(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}e.a={functional:!0,render:function(t,e){var n=e._c,o=(e._v,e.data),c=e.children,l=void 0===c?[]:c,u=o.class,d=o.staticClass,p=o.style,f=o.staticStyle,m=o.attrs,h=void 0===m?{}:m,_=a(o,i);return n("svg",function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({class:[u,d],style:[p,f],attrs:Object.assign({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},h)},_),l.concat([n("path",{attrs:{d:"M5 8l5 5 5-5",stroke:"currentColor","stroke-width":"2"}})]))}}},1039:function(t,e,n){},1043:function(t,e,n){"use strict";var i=n(374),r={props:{popup:{type:Object,default:function(){return{}}}},components:{PopupContent:i.a}},s=n(2),a=Object(s.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("popup-content",{attrs:{popup:t.popup},on:{"toggle-info-popup":function(e){return t.$emit("toggle-info-popup")},"send-analytics-popup":function(e){return t.$emit("send-analytics-popup",e)}}},[n("template",{slot:"title"},[t._v("\n    Условия формирования цены на авто\n  ")]),t._v(" "),n("template",{slot:"description"}),t._v(" "),n("template",{slot:"button-name"},[t._v("\n    Комплектации и цены "+t._s(t.popup.label)+"\n  ")])],2)}),[],!1,null,null,null);e.a=a.exports},1046:function(t,e,n){},1047:function(t,e,n){},1048:function(t,e,n){"use strict";n.r(e);n(7),n(13),n(3),n(9),n(10),n(8),n(5);var i=n(15),r=n(173),s=n.n(r),a=n(76),o=n(998),c=n(386),l=n(169),u=n.n(l);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var f=o.a.methods.choice,m=function(t,e){return t.length===e.length?s()(t,e):null};Object(a.c)("integer",p({},c.d,{message:"Поле должно содержать только цифры"})),Object(a.c)("alpha_spaces",p({},c.b,{message:function(t,e){var n=e.locale;return"Поле может содержать только ".concat("ru"===n?"русские ":"","буквы или пробелы")}})),Object(a.c)("alpha_num",p({},c.a,{message:function(t,e){var n=e.locale;return"Поле может содержать только ".concat("en"===n?"латинские ":"","буквы или цифры")}})),Object(a.c)("length",p({},c.e,{message:function(t,e){var n=e.length,i=f(n,["символ","символа","символов"]);return"Поле должно содержать ".concat(n," ").concat(i)}})),Object(a.c)("digits",p({},c.c,{message:function(t,e){var n=e.length,i=f(n,["цифру","цифры","цифр"]);return"Поле должно быть числовым и иметь ".concat(n," ").concat(i)}})),Object(a.c)("min_value",p({},c.g,{message:function(t,e){var n=e.min;return"Поле должно быть не менее ".concat(n)}})),Object(a.c)("max",p({},c.f,{message:function(t,e){var n=e.length,i=f(n,["символа","символов","символов"]);return"Не более ".concat(n," ").concat(i)}})),Object(a.c)("date_format",{params:["format"],validate:function(t,e){var n=e.format,i=m(t,n);return i&&i.isValid()},message:"Поле должно быть корректной датой"}),Object(a.c)("date_before",{params:["format"],validate:function(t,e){var n=e.format,i=m(t,n);return i&&i.isSameOrBefore(s()())},message:"Поле должно быть датой меньше текущей"}),Object(a.c)("date_after",{params:["format"],validate:function(t,e){var n=e.format,i=m(t,n);return i&&i.isSameOrAfter(s()())},message:"Поле должно быть датой больше текущей"}),Object(a.c)("max_age",{params:["max","format"],validate:function(t,e){var n=e.max,i=e.format;return s()().diff(s()(t,i),"years",!0)<u()(n)},message:"Поле должно быть корректной датой"}),Object(a.c)("letter_number",{validate:function(t){return/^[а-яА-ЯёЁa-zA-Z0-9\w -]+$/.test(t)},message:"Поле должно содержать только буквы, цифры, пробел и тире"})},1049:function(t,e,n){"use strict";n(17),n(13),n(8),n(7),n(3),n(6),n(9),n(5),n(10);var i=["class","staticClass","style","staticStyle","attrs"];function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},s=Object.keys(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}e.a={functional:!0,render:function(t,e){var n=e._c,o=(e._v,e.data),c=e.children,l=void 0===c?[]:c,u=o.class,d=o.staticClass,p=o.style,f=o.staticStyle,m=o.attrs,h=void 0===m?{}:m,_=a(o,i);return n("svg",function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({class:[u,d],style:[p,f],attrs:Object.assign({width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},h)},_),l.concat([n("path",{attrs:{d:"M14.734 11.239l2.706-2.955c.747-.816.747-2.14 0-2.956l-2.03-2.216c-.746-.816-1.958-.816-2.705 0L8.647 7.545c-.747.816-.747 2.139 0 2.955l1.015 1.108m-3.72-2.586L2.56 12.716c-.747.816-.747 2.14 0 2.956l2.03 2.216c.746.816 1.957.816 2.705 0l4.735-5.172c.747-.816.746-2.139-.001-2.955l-1.014-1.108",stroke:"currentColor","stroke-width":"1.5"}})]))}}},1050:function(t,e,n){"use strict";var i={props:{unlockDate:{type:String,default:"manual"},banType:{type:String,default:"short"}}},r=n(2),s=Object(r.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form__response form__response_full"},[[n("div",{staticClass:"text-x4 mb-4"},[t._v("Ошибка")]),t._v(" "),n("div",{staticClass:"text-s2i mb-1"},["long"===t.banType?[t._v("\n        Вы больше не можете отправить заявку, потому что с вашего IP‑адреса с необычной\n        частотой поступают запросы. Если это произошло по ошибке, пожалуйста, обратитесь в службу\n        поддержки для разблокировки."),n("br")]:[t._v("\n        Превышен дневной лимит на отправку заявок. Новую заявку можно будет отправить через\n        сутки."),n("br")],t._v(" "),"manual"!==t.unlockDate?[t._v("\n        Дата и время разблокировки: "+t._s(t.unlockDate)+"\n      ")]:t._e()],2),t._v(" "),n("div",{staticClass:"form__footer__buttons flex flex-wrap"},[n("div",{staticClass:"form__footer__button"},[n("nuxt-link",{tag:"NavLink",staticClass:"button button_primary",attrs:{to:"/"}},[t._v("На главную ")])],1)])]],2)}),[],!1,null,null,null);e.a=s.exports},1052:function(t,e,n){"use strict";n(17),n(13),n(8),n(7),n(3),n(6),n(9),n(5),n(10);var i=["class","staticClass","style","staticStyle","attrs"];function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},s=Object.keys(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}e.a={functional:!0,render:function(t,e){var n=e._c,o=(e._v,e.data),c=e.children,l=void 0===c?[]:c,u=o.class,d=o.staticClass,p=o.style,f=o.staticStyle,m=o.attrs,h=void 0===m?{}:m,_=a(o,i);return n("svg",function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({class:[u,d],style:[p,f],attrs:Object.assign({width:"18",height:"4",viewBox:"0 0 18 4",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},h)},_),l.concat([n("circle",{attrs:{cx:"2",cy:"2",r:"2"}}),n("circle",{attrs:{cx:"9",cy:"2",r:"2"}}),n("circle",{attrs:{cx:"16",cy:"2",r:"2"}})]))}}},1053:function(t,e,n){"use strict";n(17),n(13),n(8),n(7),n(3),n(6),n(9),n(5),n(10);var i=["class","staticClass","style","staticStyle","attrs"];function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},s=Object.keys(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}e.a={functional:!0,render:function(t,e){var n=e._c,o=(e._v,e.data),c=e.children,l=void 0===c?[]:c,u=o.class,d=o.staticClass,p=o.style,f=o.staticStyle,m=o.attrs,h=void 0===m?{}:m,_=a(o,i);return n("svg",function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({class:[u,d],style:[p,f],attrs:Object.assign({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},h)},_),l.concat([n("path",{attrs:{d:"M8 15l5-5-5-5",stroke:"currentColor","stroke-width":"2"}})]))}}},1054:function(t,e,n){"use strict";n(33),n(6),n(140),n(27),n(53),n(139),n(538);var i=n(161),r=n(96),s=n.n(r);e.a={methods:{calcValueByPercent:function(t,e){return Math.round(e*(t/100))},calcPercentByValue:function(t,e){return Math.round(t/e*100)},getCreditProgramMinResidualPaymentPercent:function(t){var e=s()(t,"percent");return Math.min.apply(Math,Object(i.a)(e))},getCreditProgramMinResidualPayment:function(t,e){return t.is_residual_payment?e*this.getCreditProgramMinResidualPaymentPercent(t.residual_payment_conditions)/100:0},getCreditProgramResidualPayment:function(t,e,n){return t.is_residual_payment?e*this.getCreditProgramResidualPaymentPercent(t.residual_payment_conditions,n)/100:0},getCreditProgramResidualPaymentPercent:function(t,e){for(var n=0,i=0;i<t.length;i++)if(t[i].conditions.period===e){n=t[i].percent;break}return n},getCreditProgramMinFirstPaymentPercent:function(t){var e=s()(t.rate_conditions,(function(t){return t.conditions.first_payment_from}));return Math.min.apply(Math,Object(i.a)(e))},getCreditProgramMinFirstPayment:function(t,e){return e*this.getCreditProgramMinFirstPaymentPercent(t)/100},getCreditProgramMaxFirstPaymentPercent:function(t){var e=s()(t.rate_conditions,(function(t){return t.conditions.first_payment_to}));return Math.max.apply(Math,Object(i.a)(e))},getCreditProgramMaxFirstPayment:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this.getCreditProgramMaxFirstPaymentPercent(t),r=e*i/100;return n&&r>n&&(r=n),r},calcCreditProgramFirstPayment:function(t,e){return e*t/100},getCreditProgramMinMonthlyPay:function(t,e){var n=this.getCreditProgramMaxFirstPayment(t,e),i=this.getCreditProgramResidualPayment(t,e,t.max_credit_period),r=this.getCreditProgramMonthRate(t.rate_conditions,e,n),s=(r=r/12/100)/(1-Math.pow(1+r,-t.max_credit_period));return(e-n-i+this.getCreditPrograMadditionalServicesPrice(t))*s+r*i},getCreditProgramMonthRate:function(t,e,n){for(var i=this.toFixedNoRounding(100*n/e,1),r=0,s=0;s<t.length;s++)if(t[s].conditions.first_payment_from<=i&&t[s].conditions.first_payment_to>=i){r=t[s].percent;break}return r},toFixedNoRounding:function(t,e){var n=new RegExp("^-?\\d+(?:\\.\\d{0,"+e+"})?","g"),i=t.toString().match(n)[0],r=i.indexOf(".");if(-1===r)return i+"."+"0".repeat(e);var s=e-(i.length-r)+1;return s>0?i+"0".repeat(s):i},getCreditPrograMadditionalServicesPrice:function(t){return t.has_additional_services?t.additional_services_price:0},getCreditProgramMinRate:function(t){var e=s()(t.rate_conditions,"percent");return Math.min.apply(Math,Object(i.a)(e))}}}},1055:function(t,e,n){},1056:function(t,e,n){},1057:function(t,e,n){},1058:function(t,e,n){},1059:function(t,e,n){},1060:function(t,e,n){},1061:function(t,e,n){},1062:function(t,e,n){},1063:function(t,e,n){},1064:function(t,e,n){},1065:function(t,e,n){},1066:function(t,e,n){},1067:function(t,e,n){},1068:function(t,e,n){"use strict";var i=n(163),r=n(170),s=n(396),a=n.n(s),o={props:{text:String,open:Boolean,color:String,isPopup:Boolean},data:function(){return{moreText:!1}},methods:{isDot:function(){this.moreText=!0},onToggle:function(){this.$emit("toggle-disclaimer")}},computed:{isOpen:function(){return this.open},formattedText:function(){return this.open?a()(this.text,1e4,{html:!0,maxLines:2}):this.text}},components:{IconTickDown:i.a,IconTickUp:r.a}},c=(n(1172),n(2)),l=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isPopup&&t.text?n("div",[n("div",{class:"text-s3 tablet:text-s2i "+(t.color?t.color:"color-black"),domProps:{innerHTML:t._s(t.formattedText)}}),t._v(" "),t.open?n("span",{class:"pt-1 text-s2-b inline-flex items-center cursor-pointer text-bold "+(t.color?t.color:"color-black"),on:{click:t.onToggle}},[t._v("\n    Подробнее\n    "),n("icon-tick-down")],1):t._e(),t._v(" "),t.open?t._e():n("span",{class:"pt-1 text-s2-b inline-flex items-center cursor-pointer "+(t.color?t.color:"color-black"),on:{click:t.onToggle}},[t._v("\n    Свернуть\n    "),n("icon-tick-up")],1)]):n("div",{staticClass:"maxposter-disclaimer text-s3 tablet:text-s2i color-dark-gray mt-4"},[t._v("\n  Указанная расчетная стоимость является приблизительной и действует при сдаче автомобиля с\n  пробегом в зачет покупки нового автомобиля Kia. Информация предоставлена\n  "),n("a",{attrs:{href:"https://maxposter.ru",target:"_blank"}},[t._v("MaxPoster")]),t._v(".\n")])}),[],!1,null,"79dba481",null);e.a=l.exports},1069:function(t,e,n){"use strict";n(7),n(3),n(9),n(10),n(8),n(5);var i=n(15),r=n(18),s=n(62),a=n(1002);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}var c={props:{customAside:{type:Boolean,default:!1}},data:function(){return{atTop:!0,isInited:!0,isOpened:!1,isResultFixed:!1,isResultScrolled:!1}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(r.e)("ui",["header"]),{hasOffset:function(){return!(!this.header.isFixedHeaderVisible&&!this.isInited)}}),mounted:function(){window.addEventListener("load",this.handleScrollResult),window.addEventListener("resize",this.handleScrollResult),window.addEventListener("scroll",this.handleScrollResult)},beforeDestroy:function(){window.removeEventListener("load",this.handleScrollResult),window.removeEventListener("resize",this.handleScrollResult),window.removeEventListener("scroll",this.handleScrollResult)},methods:{handleTouchMove:function(t){t.preventDefault()},handleScrollResult:function(){var t=window.scrollY,e=Math.round(window.innerHeight),n=Math.round(document.getElementsByClassName("page-wrapper__footer")[0].offsetTop);t<60?this.isInited=!this.header.isFixedHeaderVisible:(this.atTop=this.isInited,this.isInited=!1);var i=Math.round(this.$refs.result.offsetTop);this.isResultFixed=t>i,this.isResultScrolled=t+e>n+1},toggleResult:function(){this.isOpened=!this.isOpened,this.isOpened?Object(s.disableBodyScroll)(this.$refs.resultContent):Object(s.enableBodyScroll)(this.$refs.resultContent)}},components:{VClamp:a.a}},l=(n(1071),n(2)),u=Object(l.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("aside",{ref:"result",class:["form-aside",t.isInited?"absolute":"fixed",{"is-opened":t.isOpened},{"at-top":t.isInited||t.atTop},{"has-offset":t.hasOffset},{"is-fixed":t.isResultFixed},{"is-scrolled":t.isResultScrolled},{"is-custom":t.customAside}]},[n("div",{directives:[{name:"touch",rawName:"v-touch:tap",value:t.toggleResult,expression:"toggleResult",arg:"tap"},{name:"touch",rawName:"v-touch:swipe.bottom.top",value:t.toggleResult,expression:"toggleResult",arg:"swipe",modifiers:{bottom:!0,top:!0}}],staticClass:"form-aside__header flex justify-between"},[n("div",{staticClass:"form-aside__header__title text-s2-b tablet:text-x5"},[n("v-clamp",{attrs:{autoresize:"","max-lines":1,ellipsis:"..."}},[t._t("title")],2)],1)]),t._v(" "),n("div",{staticClass:"form-aside__body"},[n("div",{ref:"resultContent",staticClass:"form-aside__content"},[t._t("body")],2),t._v(" "),n("div",{directives:[{name:"touch",rawName:"v-touch:tap",value:t.toggleResult,expression:"toggleResult",arg:"tap"},{name:"touch",rawName:"v-touch:swipe.bottom.top",value:t.toggleResult,expression:"toggleResult",arg:"swipe",modifiers:{bottom:!0,top:!0}}],staticClass:"form-aside__toggle"})])])}),[],!1,null,null,null);e.a=u.exports},1070:function(t,e,n){"use strict";var i=n(83),r=n(48),s={data:function(){return{title:"Изменения повлияют на стоимость автомобиля",description:"Текущий кредитный расчет будет сброшен",apply:"Продолжить",cancel:"Отменить"}},components:{Popup:i.a,CloseIcon:r.a}},a=(n(1171),n(2)),o=Object(a.a)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Popup",[n("div",{staticClass:"info__popup-wrapper bg-white pt-16 pb-8 desktop:pb-20 px-6 desktop:px-22"},[n("button",{staticClass:"info__close-button",on:{click:function(e){return t.$emit("cancel")}}},[n("CloseIcon")],1),t._v(" "),n("div",[n("h1",{staticClass:"info__title",domProps:{innerHTML:t._s(t.title)}}),t._v(" "),n("hr"),t._v(" "),n("p",{staticClass:"info__text__main",domProps:{innerHTML:t._s(t.description)}}),t._v(" "),n("button",{staticClass:"button bg-black color-white info__button",domProps:{innerHTML:t._s(t.apply)},on:{click:function(e){return t.$emit("apply")}}}),t._v(" "),n("button",{staticClass:"button button_secondary info__button",domProps:{innerHTML:t._s(t.cancel)},on:{click:function(e){return t.$emit("cancel")}}})])])])}),[],!1,null,null,null);e.a=o.exports},1071:function(t,e,n){"use strict";var i=n(1007);n.n(i).a},1073:function(t,e,n){"use strict";n(17),n(13),n(8),n(7),n(3),n(6),n(9),n(5),n(10);var i=["class","staticClass","style","staticStyle","attrs"];function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},s=Object.keys(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}e.a={functional:!0,render:function(t,e){var n=e._c,o=(e._v,e.data),c=e.children,l=void 0===c?[]:c,u=o.class,d=o.staticClass,p=o.style,f=o.staticStyle,m=o.attrs,h=void 0===m?{}:m,_=a(o,i);return n("svg",function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({class:[u,d],style:[p,f],attrs:Object.assign({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},h)},_),l.concat([n("path",{attrs:{d:"M10 5v10M5 10h10",stroke:"currentColor","stroke-width":"2"}})]))}}},1074:function(t,e,n){"use strict";n(17),n(13),n(8),n(7),n(3),n(6),n(9),n(5),n(10);var i=["class","staticClass","style","staticStyle","attrs"];function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},s=Object.keys(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}e.a={functional:!0,render:function(t,e){var n=e._c,o=(e._v,e.data),c=e.children,l=void 0===c?[]:c,u=o.class,d=o.staticClass,p=o.style,f=o.staticStyle,m=o.attrs,h=void 0===m?{}:m,_=a(o,i);return n("svg",function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({class:[u,d],style:[p,f],attrs:Object.assign({width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},h)},_),l.concat([n("circle",{attrs:{cx:"20",cy:"20",r:"19",stroke:"currentColor","stroke-width":"2"}}),n("path",{attrs:{d:"M20 15v10M15 20h10",stroke:"currentColor","stroke-width":"2"}})]))}}},1076:function(t,e,n){},1077:function(t,e,n){},1078:function(t,e,n){},1079:function(t,e,n){},1080:function(t,e,n){},1081:function(t,e,n){},1083:function(t,e,n){"use strict";n(17),n(13),n(8),n(7),n(3),n(6),n(9),n(5),n(10);var i=["class","staticClass","style","staticStyle","attrs"];function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},s=Object.keys(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}e.a={functional:!0,render:function(t,e){var n=e._c,o=(e._v,e.data),c=e.children,l=void 0===c?[]:c,u=o.class,d=o.staticClass,p=o.style,f=o.staticStyle,m=o.attrs,h=void 0===m?{}:m,_=a(o,i);return n("svg",function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({class:[u,d],style:[p,f],attrs:Object.assign({width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},h)},_),l.concat([n("path",{attrs:{d:"M5 0l1.123 3.455h3.632L6.816 5.59 7.94 9.045 5 6.91 2.061 9.045 3.184 5.59.244 3.455h3.633L5 0z",fill:"currentColor"}})]))}}},1084:function(t,e,n){"use strict";var i=n(31),r=n(1004),s=n(48),a={mixins:[i.a,r.a],props:{popup:{type:Object,default:function(){return{}}}},data:function(){return{resize:"770x442"}},components:{Close:s.a}},o=(n(1168),n(2)),c=Object(o.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"popup-description"},[n("div",{staticClass:"popup-description__body"},[n("div",{staticClass:"popup-description__panel"},[n("Close",{staticClass:"popup-description__close cursor-pointer",on:{click:function(e){return t.$emit("toggle-info-popup")}}})],1),t._v(" "),t.popup.file?n("div",{staticClass:"popup-description__image"},[n("img",{staticClass:"popup-description__image-img",attrs:{src:t.getResizeImagePath(t.popup.file,t.resize),alt:""}})]):t._e(),t._v(" "),n("div",{staticClass:"popup-description__content"},[t.popup.title?n("div",{staticClass:"popup-description__title text-s1"},[t._v("\n        "+t._s(t.popup.title)+"\n        "),t._t("title")],2):t._e(),t._v(" "),t.popup.description?n("div",{staticClass:"popup-description__text text-s2i tablet:text-s2"},[t._v("\n        "+t._s(t.popup.description)+"\n        "),t._t("description")],2):t._e(),t._v(" "),t.popup.link?n("g-button",{staticClass:"popup-description__button mt-6",attrs:{as:"nuxt-link",to:t.popup.link}},[t._t("button-name")],2):t._e()],1)])])}),[],!1,null,"23173e7e",null).exports,l={props:{popup:{type:Object,default:function(){return{}}}},components:{PopupContentImage:c}},u=Object(o.a)(l,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("popup-content-image",{attrs:{popup:t.popup},on:{"toggle-info-popup":function(e){return t.$emit("toggle-info-popup")}}})}),[],!1,null,null,null);e.a=u.exports},1087:function(t,e,n){"use strict";n(36);var i={props:{steps:Array,currentStepIndex:Number,stepClickEmitFunction:{type:String,default:"select-step"}},methods:{onStepClick:function(t){this.stepClickEmitFunction&&t<this.currentStepIndex&&this.$emit(this.stepClickEmitFunction,t)}}},r=(n(1129),n(2)),s=Object(r.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["progress-bar-box w-screen desktop:w-auto",{"progress-bar-box--shifted":0!==t.currentStepIndex}]},[n("div",{staticClass:"flex progress-bar",style:"transform: translateX(-"+260*t.currentStepIndex+"px)"},t._l(t.steps,(function(e,i){return n("div",{class:["progress-bar__step relative color-gray flex",{"progress-bar__step--active":i===t.currentStepIndex},{"progress-bar__step--past":i<t.currentStepIndex},{"progress-bar__step-link":i<t.currentStepIndex}],on:{click:function(e){return e.preventDefault(),t.onStepClick(i)}}},[n("div",{staticClass:"progress-bar__step-number mt-2 text-s2-b color-black"},[t._v("\n        "+t._s("0"+(i+1))+"\n      ")]),t._v(" "),n("div",{staticClass:"progress-bar__step-name pl-3 mt-2 text-s2 color-disabled-gray"},[t._v("\n        "+t._s(e.name)+"\n      ")])])})),0)])}),[],!1,null,null,null);e.a=s.exports},1093:function(t,e,n){"use strict";n(7),n(75),n(26),n(69),n(108),n(5);var i=n(138),r=n.n(i);e.a={methods:{getOptionGroups:function(t){var e={};return t.forEach((function(t){e[t.group_name]?e[t.group_name].options.push({id:t.id,name:t.name,file:t.file_id||null,description:t.description||null}):e[t.group_name]={options:[{id:t.id,name:t.name,file:t.file_id||null,description:t.description||null}],name:t.group_name,sort:parseInt(t.group_sort)}})),r()(Object.values(e),["sort"],["desc"])}}}},1094:function(t,e,n){},1095:function(t,e,n){},1096:function(t,e,n){},1097:function(t,e,n){},1098:function(t,e,n){},1099:function(t,e,n){},1100:function(t,e,n){},1101:function(t,e,n){},1102:function(t,e,n){},1103:function(t,e,n){},1104:function(t,e,n){},1105:function(t,e,n){},1106:function(t,e,n){},1107:function(t,e,n){},1108:function(t,e,n){},1109:function(t,e,n){},1110:function(t,e,n){},1111:function(t,e,n){},1113:function(t,e,n){"use strict";n(7),n(3),n(26),n(9),n(10),n(8),n(5);var i=n(15),r=n(18),s=n(162),a=n(1052),o=n(112),c=n(70),l=n(174),u=n(24);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var f={props:{params:{type:Object,default:function(){return{}}},isMenuHidden:{type:Boolean,default:!1},isStatic:{type:Boolean,default:!1},singleButton:{type:Boolean,default:!1},noOffset:{type:Boolean,default:!1},withMargin:{type:Boolean,default:!1},bigPadding:{type:Boolean,default:!1},isCalculator:{type:Boolean,default:!1},isConfigurator:{type:Boolean,default:!1}},mixins:[c.a,u.a],data:function(){return{isMenuOpened:!1,isBottomMenuHidden:this.isMenuHidden}},created:function(){switch(this.$route.name){case"models-code-cars-city-id":case"used_cars-city-id":this.isBottomMenuHidden=!0}},mounted:function(){window.addEventListener("load",this.handleScroll),window.addEventListener("resize",this.handleScroll),window.addEventListener("scroll",this.handleScroll)},updated:function(){switch(this.$route.name){case"service-accessories-article":this.handleScroll()}},beforeDestroy:function(){window.removeEventListener("load",this.handleScroll),window.removeEventListener("resize",this.handleScroll),window.removeEventListener("scroll",this.handleScroll)},computed:p({},Object(r.e)("ui",["header"])),methods:p({},Object(r.d)("step-manager",["prevStep"]),{handleScroll:function(){var t=window.pageYOffset,e=window.innerHeight,n=document.getElementsByClassName("page-wrapper__footer")[0].offsetTop,i=0;switch(this.$route.name){case"models-code-cars-city-id":case"used_cars-city-id":var r=document.getElementsByClassName("catalog-detail-summary__top")[0].getBoundingClientRect(),s=r.top+t+r.height;this.isBottomMenuHidden=t<s||t+e>n;break;default:i=this.isDesktop()?100:60,this.noOffset&&(i=0),this.isBottomMenuHidden=t+e>n-i}},toggleMenu:function(){this.isMenuOpened=!this.isMenuOpened},emitMenu:function(t){this.$emit("button-menu",{buttonName:t})},complexToggle:function(){this.toggleMenu(),this.$emit("main-button-callback")},previousStep:function(){(this.isCalculator||this.isConfigurator)&&this.dataLayerPush(this.isCalculator?"Loan Calculator":"Configurator","Results","Back"),this.prevStep()}}),components:{IconTickLeft:s.a,IconEllipsis:a.a,IconClose:o.a,IconBasket:l.a}},m=(n(1153),n(2)),h=Object(m.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["menu-buttons",{"menu-buttons_opened":t.isMenuOpened},{"menu-buttons_hidden":t.isBottomMenuHidden},{"menu-buttons_static":t.isStatic},{"menu-buttons_margin":t.withMargin}]},[n("div",{staticClass:"menu-buttons__overlay desktop:hidden",on:{click:t.toggleMenu}}),t._v(" "),n("g-padding",[n("g-container",[n("div",{class:["menu-buttons__body flex items-center justify-between",{"with-margin":t.withMargin}]},[t.params.hideBackButton?t._e():n("div",{staticClass:"menu-buttons__back"},[t.params.addOptionsLink?[n("nuxt-link",{attrs:{to:{name:"models-code-options",params:{code:this.$route.params.code}}}},[n("div",{staticClass:"flex items-center cursor-pointer py-4 desktop:color-dark-gray"},[n("IconTickLeft"),t._v(" "),n("strong",{staticClass:"hidden desktop:block"},[t._v("\n                  Назад\n                ")])],1)])]:[n("div",{staticClass:"flex items-center cursor-pointer py-4 desktop:color-dark-gray",on:{click:t.previousStep}},[n("IconTickLeft"),t._v(" "),n("strong",{staticClass:"hidden desktop:block"},[t._v("\n                Назад\n              ")])],1)]],2),t._v(" "),t._t("default"),t._v(" "),n("div",{class:["menu-buttons__button desktop:hidden",t.withMargin?"ml-auto mr-2":"mx-2"]},[n("button",{class:["button",{"menu-button":t.withMargin},t.params.mainButton.isBooking?"button_prepayment":"button_primary"],on:{click:function(e){return t.$emit("main-button-callback")}}},[n("span",{class:["button__span-after",{"color-black button__span-after-booking text-center":t.params.mainButton.isBooking}]},[t.params.mainButton.isBooking?n("IconBasket",{staticClass:"block mr-2"}):t._e(),t._v(" "),n("span",{domProps:{innerHTML:t._s(t.params.mainButton.title)}})],1)])]),t._v(" "),t.params.links?n("div",{class:["menu-buttons__toggle desktop:hidden",{"menu-buttons__toggle-right":t.params.mainButton.isBooking}]},[n("div",{staticClass:"flex items-center cursor-pointer py-4",on:{click:t.toggleMenu}},[n("IconEllipsis")],1)]):t._e(),t._v(" "),n("div",{staticClass:"menu-buttons__links desktop:flex items-center justify-end"},[n("span",{staticClass:"menu-buttons__links-toggle desktop:hidden",on:{click:t.toggleMenu}},[n("IconClose")],1),t._v(" "),n("div",{staticClass:"menu-buttons__links-items desktop:flex items-center"},[t._l(t.params.links,(function(e,i){return[n("div",{key:i,staticClass:"mb-2 desktop:mb-0 desktop:mr-8",on:{click:function(n){return t.emitMenu(e.name||e.code||e.path)}}},[e.path?n("nuxt-link",{attrs:{to:"calc"===e.code?"":{path:e.path}}},[t._v("\n                  "+t._s(e.title)+"\n                ")]):t._e(),t._v(" "),e.name&&!e.isButton?n("nuxt-link",{attrs:{to:{name:e.name,params:e.params}}},[t._v("\n                  "+t._s(e.title)+"\n                ")]):t._e(),t._v(" "),e.isButton?n("a",{attrs:{href:"javascript:void(0)"}},[t._v("\n                  "+t._s(e.title)+"\n                ")]):t._e()],1)]}))],2),t._v(" "),n("div",{staticClass:"menu-buttons__links-buttons desktop:flex items-center"},[n("button",{class:["button",{"menu-button":t.withMargin,"menu-button-big-px":t.bigPadding},t.params.mainButton.isBooking?"button_prepayment":"button_primary"],on:{click:t.complexToggle}},[n("span",{class:["button__span-after",{"color-black button__span-after-booking text-center":t.params.mainButton.isBooking}]},[t.params.mainButton.isBooking?n("IconBasket",{staticClass:"block mr-2"}):t._e(),t._v(" "),n("span",{domProps:{innerHTML:t._s(t.params.mainButton.title)}})],1)])])])],2)])],1)],1)}),[],!1,null,"bd081716",null);e.a=h.exports},1114:function(t,e,n){"use strict";n(17),n(13),n(8),n(7),n(3),n(6),n(9),n(5),n(10);var i=["class","staticClass","style","staticStyle","attrs"];function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},s=Object.keys(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}e.a={functional:!0,render:function(t,e){var n=e._c,o=(e._v,e.data),c=e.children,l=void 0===c?[]:c,u=o.class,d=o.staticClass,p=o.style,f=o.staticStyle,m=o.attrs,h=void 0===m?{}:m,_=a(o,i);return n("svg",function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({class:[u,d],style:[p,f],attrs:Object.assign({width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},h)},_),l.concat([n("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M20 40c11.046 0 20-8.954 20-20S31.046 0 20 0 0 8.954 0 20s8.954 20 20 20zm-1.793-15.293l8-8-1.414-1.414-7.293 7.293-2.793-2.793-1.414 1.414 3.5 3.5.707.707.707-.707z",fill:"currentColor"}})]))}}},1118:function(t,e,n){"use strict";n(7),n(3),n(84),n(9),n(10),n(8),n(6),n(69),n(27),n(111),n(59),n(5);var i=n(15),r=n(1027),s=n(1009),a=n(37),o=n(377),c=n(1053),l=n(1070),u=n(1117),d=n.n(u),p=n(1352),f=n.n(p),m=n(18);function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var v={name:"summary-tradein",mixins:[a.a],props:{currentTradeIn:Object,inCredit:{type:Boolean,default:!1},showOffers:{type:Boolean,default:!0},disableCookie:{type:Boolean,default:!1},checkOver:{type:Boolean,default:!1},prefix:{type:String,default:""},isTradeInChecked:{type:Boolean,default:!1},isCreditPage:{type:Boolean,default:!1},isWaitingForCredit:{type:Boolean,default:!1}},data:function(){return{cookie:null,cookieName:"saved_trade_in_results",popupOffer:{},isLoading:!0,isOfferPopupOpen:!1,needOfferConfirm:!1}},mounted:function(){this.disableCookie||!this.getCookie(this.cookieName)||this.unique_code?(this.marginalityPrice&&this.currentTradeIn.tradeInId&&this.isTradeInChecked&&(this.setTradeIn(this.marginalityPrice),this.setTradeInResultId(this.currentTradeIn.tradeInId)),this.isLoading=!1):this.cookie=this.getCookie(this.cookieName)},activated:function(){if(!this.disableCookie&&this.getCookie(this.cookieName)){var t=this.getCookie(this.cookieName);this.cookie!==t&&(this.cookie=t)}},methods:_({},Object(m.d)("calculator",["setOffer","setTradeIn","setTradeInResultId","setIsTradeInChecked"]),{getLastConfigResult:function(){var t=this,e=(this.cookie||this.getCookie(this.cookieName)).split(","),n=e[e.length-1];n&&(this.isLoading=!0,this.$store.dispatch("trade-in/loadTradeInByCode",n).then((function(){t.$emit("set-trade-in")})).finally((function(){t.isLoading=!1})))},selectOffer:function(t,e){this.isPopupCreditSelected&&!this.inCredit?(e.preventDefault(),this.popupOffer=t,this.needOfferConfirm=!0):this.setOffer(t)},getCookie:function(t){var e="; ".concat(document.cookie).split("; ".concat(t,"="));return 2!==e.length?void 0:e.pop().split(";").shift()},isDisabledOffer:function(t){return!this.isTradeInChecked||this.disabledOffers.includes(t)},showPopupOffer:function(t){this.popupOffer=t,this.isOfferPopupOpen=!0},closePopupOffer:function(){this.isOfferPopupOpen=!1},closeOfferConfirmPopup:function(){this.needOfferConfirm=!1},applyOfferConfirmPopup:function(){this.needOfferConfirm=!1,this.$emit("clear-credit"),this.setOffer(this.popupOffer)},applyTradein:function(t){this.$emit("trade-in-checked",t)},getTradeInCheckboxId:function(){return this.prefix?this.prefix+"-tradein-checkbox":"tradein-checkbox"}}),computed:_({},Object(m.e)("trade-in",["year","model","brand","price","marginalityPrice","unique_code"]),{},Object(m.e)("calculator",["offers","selectedOffers","disabledOffers","isPopupCreditSelected","firstPayment"]),{tradeInOffers:function(){return Object.values(this.offers).filter((function(t){return t.is_traid_in}))},maxBenefit:function(){var t=0;return d()(this.tradeInOffers,(function(e){e.price>t&&(t=e.price)})),t},isTradeInOverFirstPayment:function(){return this.checkOver&&this.isTradeInChecked&&!f()(this.currentTradeIn.marginalityPrice)&&this.currentTradeIn.marginalityPrice>=this.firstPayment},hasInfo:function(){return this.currentTradeIn.unique_code&&!this.isTradeInChecked}}),watch:{cookie:function(){this.getLastConfigResult()},price:function(){this.isTradeInChecked&&(this.setTradeIn(this.marginalityPrice),this.setTradeInResultId(this.currentTradeIn.tradeInId))}},components:{IconInfo:o.a,Preloader:s.a,TickRight:c.a,PopupOffer:r.a,ConfirmOfferPopup:l.a}},g=(n(1204),n(2)),b=Object(g.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isLoading||t.isWaitingForCredit?n("Preloader",{attrs:{inline:!0}}):n("div",{class:["catalog-detail-summary__card mt-2",{"catalog-detail-summary__card-over":t.isTradeInOverFirstPayment}]},[n("div",{staticClass:"w-full"},[n("div",{class:["catalog-detail-summary__card-tradein-block items-center flex-wrap justify-between",{flex:!t.currentTradeIn.unique_code}]},[n("div",{staticClass:"text-s1 my-1 mr-6",class:{toolbar:!t.currentTradeIn.unique_code},on:{click:function(e){!t.currentTradeIn.unique_code&&t.$emit("open")}}},[n("g-checkbox",{attrs:{disabled:!t.currentTradeIn.unique_code,val:t.isTradeInChecked,isSwitch:!0,id:t.getTradeInCheckboxId(),smallText:!1,label:'<span class="color-black">Трейд-ин</span>',value:t.isTradeInChecked},on:{input:t.applyTradein}})],1),t._v(" "),n("div",{class:["my-1 flex items-center",{"mr-6":t.currentTradeIn.unique_code}],on:{click:function(e){return t.$emit("open")}}},[n("span",{staticClass:"catalog-detail-summary__card-open cursor-pointer",class:{inactive:!t.isTradeInChecked&&t.currentTradeIn.unique_code}},[t.currentTradeIn.unique_code?[t._v("\n            "+t._s(t.currentTradeIn.brand.name)+"\n            "+t._s(t.currentTradeIn.model.name)+"\n            "+t._s(t.currentTradeIn.year.name)+"\n            —\n            "),n("span",{staticClass:"nowrap"},[t._v("\n              "+t._s(t.formatMoney(this.currentTradeIn.marginalityPrice))+"\n            ")])]:[t._v("Оцените свой авто")]],2),t._v(" "),n("TickRight")],1),t._v(" "),t.isTradeInOverFirstPayment?n("div",{class:["color-forest-green",{"mr-6":t.isCreditPage&&t.hasInfo}]},[t._v("\n        Сумма Trade-in покрывает первый взнос\n      ")]):t._e(),t._v(" "),t.isCreditPage&&t.hasInfo?n("div",{staticClass:"flex items-center text-s3 my-2 desktop1440:my-0"},[n("IconInfo",{staticClass:"mr-2"}),t._v(" "),n("span",[t._v("Расчет трейд-ин не будет отправлен дилеру")])],1):t._e()]),t._v(" "),t.showOffers?n("div",{staticClass:"catalog-detail-summary__card-benefit"},[t.currentTradeIn.unique_code&&t.tradeInOffers.length?n("div",{staticClass:"mt-2 relative"},t._l(t.tradeInOffers,(function(e){return n("div",{key:e.id,staticClass:"catalog-detail-summary__offers-item"},[n("div",{staticClass:"catalog-detail-summary__offers-item-row"},[n("g-checkbox",{attrs:{id:e.id,val:e.id,label:e.name,value:t.selectedOffers,disabled:t.isDisabledOffer(e.id)},on:{click:function(n){return t.selectOffer(e,n)}}}),t._v(" "),e.description||e.advantage_text||e.condition_text?n("span",{staticClass:"block ml-2",on:{click:function(n){return n.stopPropagation(),t.showPopupOffer(e)}}},[n("g-info-icon",{staticClass:"block",attrs:{theme:"black"}})],1):t._e()],1),t._v(" "),n("div",{staticClass:"catalog-detail-summary__offers-item-price",class:{"color-disabled-gray":!t.isTradeInChecked}},[t._v("\n            Выгода - "+t._s(t.formatMoney(e.price))+"\n          ")])])})),0):t._e(),t._v(" "),t.maxBenefit&&!t.currentTradeIn.unique_code?n("div",{staticClass:"catalog-detail-summary__card-benefit-price"},[t._v("\n        Выгода до "+t._s(t.formatMoney(t.maxBenefit))+"\n      ")]):t._e(),t._v(" "),n("PopupOffer",{attrs:{offer:t.popupOffer,"is-popup-shown":t.isOfferPopupOpen},on:{"toggle-info-popup":t.closePopupOffer}}),t._v(" "),t.needOfferConfirm?n("ConfirmOfferPopup",{on:{cancel:t.closeOfferConfirmPopup,apply:t.applyOfferConfirmPopup}}):t._e()],1):t._e(),t._v(" "),!t.isCreditPage&&t.hasInfo?n("div",{class:["catalog-detail-summary__card-not-send flex items-center mb-2 text-s3 ",{"my-2":!t.showOffers||!t.tradeInOffers.length}]},[n("IconInfo",{staticClass:"mr-2"}),t._v(" "),n("span",[t._v("Расчет трейд-ин не будет отправлен дилеру")])],1):t._e()])])}),[],!1,null,"6034b67c",null);e.a=b.exports},1121:function(t,e,n){var i=n(164),r=n(540),s=Object.prototype.hasOwnProperty,a=r((function(t,e,n){s.call(t,n)?t[n].push(e):i(t,n,[e])}));t.exports=a},1122:function(t,e,n){},1123:function(t,e,n){},1124:function(t,e,n){},1125:function(t,e,n){"use strict";var i=n(1032);n.n(i).a},1126:function(t,e,n){},1127:function(t,e,n){"use strict";var i=n(1033);n.n(i).a},1128:function(t,e,n){},1129:function(t,e,n){"use strict";var i=n(1034);n.n(i).a},1130:function(t,e,n){},1131:function(t,e,n){"use strict";var i=n(1010),r=n.n(i),s=n(1011),a=n.n(s),o=n(1023),c=n.n(o),l=n(37),u=n(114),d=n(1132),p={name:"car",mixins:[l.a],props:{showMinCreditAmount:{type:Boolean,default:!0},detailUrl:{type:Object,default:function(){return{}}},car:{type:Object,default:function(){return{}}},isSlide:{type:Boolean,default:!1},isMaxBenefit:{type:Boolean,default:function(){return!1}},loadedButtonFavorites:{type:Boolean,default:!1},isFavorite:{type:Boolean,default:!1},isSendingFavorite:{type:Boolean,default:!1},showButtonFavorites:{type:Boolean,default:!1},isActive:{type:Boolean,default:!0}},computed:{description:function(){if(!(this.car.engine_volume||this.car.engine_power_hp||this.car.fuel_type_name||this.car.gearbox_name||this.car.drive_name))return null;var t=[this.car.engine_volume?"".concat(this.car.engine_volume," л"):null,this.car.engine_power_hp?"".concat(this.car.engine_power_hp," л.c."):null,c()(this.car.fuel_type_name),c()(this.car.gearbox_name),this.car.drive_name?c()("".concat(this.car.drive_name," привод")):null];return r()(a()(t)," / ")}},methods:{openPopup:function(){this.$emit("favorite-click",this.car,this.isFavorite)},toDetail:function(){this.$emit("click-on-card"),this.$router.push(this.detailUrl)}},components:{CarLocation:d.a,IconPin:u.a}},f=(n(1137),n(2)),m=Object(f.a)(p,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["catalog-element",{"swiper-slide":t.isSlide}]},[n("div",{staticClass:"catalog-element__image"},[t.isActive?n("div",{staticClass:"cursor-pointer",on:{click:t.toDetail}},[n("figure",[t._t("image-labels"),t._v(" "),t._t("image")],2)]):n("div",[n("figure",[t._t("image-labels"),t._v(" "),t._t("image")],2)])]),t._v(" "),n("div",{staticClass:"catalog-element__descr"},[n("div",{staticClass:"catalog-element__descr-header"},[n("h3",{staticClass:"flex"},[t.isActive?n("div",{staticClass:"mr-1 cursor-pointer",on:{click:t.toDetail}},[t._t("name")],2):n("div",[t._t("name")],2),t._v(" "),t._t("name-labels")],2),t._v(" "),t.showButtonFavorites?n("div",{staticClass:"catalog-element__descr-header-actions"},[n("g-button-favorites",{attrs:{"is-active":t.loadedButtonFavorites,"is-favorite":t.isFavorite,"is-loading":t.isSendingFavorite},on:{click:t.openPopup}})],1):t._e()]),t._v(" "),t._t("kia-sure"),t._v(" "),t._t("lable"),t._v(" "),n("div",{staticClass:"catalog-element__params text-s3 desktop:text-s2i color-dark-gray"},[t.description&&t.isActive?n("div",[t._v(t._s(t.description))]):t._e(),t._v(" "),t._t("description")],2),t._v(" "),t.isActive?n("div",{staticClass:"catalog-element__price catalog-element__price-used text-s3 desktop:text-s2i color-disabled-gray"},[t.car.price&&t.isActive?n("strong",{staticClass:"text-s1 color-black"},[t._v(t._s(t.formatMoney(t.car.price)))]):t._e(),t._v(" "),t.car.min_credit_amount&&t.showMinCreditAmount&&t.isActive?n("span",[t._v(t._s(t.formatMoney(t.car.min_credit_amount,"₽/мес")))]):t._e()]):t._e(),t._v(" "),n("CarLocation",{staticClass:"mt-2",attrs:{"city-name":t.car.city_name,"is-active":t.isActive}},[n("template",{slot:"location"},[t._t("location")],2)],2),t._v(" "),t.isMaxBenefit&&t.isActive?n("div",{staticClass:"catalog-element__sticker text-s2i"},[t._t("max_benefit")],2):t._e(),t._v(" "),n("div",{staticClass:"catalog-element__options"},[t._t("options")],2),t._v(" "),t._t("delete")],2)])}),[],!1,null,null,null);e.a=m.exports},1132:function(t,e,n){"use strict";var i={name:"car-location",components:{IconPin:n(114).a},props:{isActive:{type:Boolean,default:!0},cityName:{type:String,default:null}}},r=(n(1127),n(2)),s=Object(r.a)(i,(function(){var t=this.$createElement,e=this._self._c||t;return this.cityName&&this.isActive?e("div",{staticClass:"counter text-s3 desktop:text-s2 flex items-start"},[e("icon-pin",{staticClass:"counter__pin"}),this._v(" "),e("span",{staticClass:"counter__text"},[this._t("location")],2)],1):this._e()}),[],!1,null,"75444ef2",null);e.a=s.exports},1134:function(t,e,n){"use strict";n(7),n(75),n(13),n(26);var i=n(14),r=n.n(i),s=n(83),a=n(1093),o=n(24),c=n(1084),l=n(85),u={mixins:[a.a,o.a],props:{getOptionsList:Array,title:String,classes:{type:Array,default:function(){return["py-4","desktop:py-6"]}},isOpened:{type:Boolean,default:!1},isPopup:{type:Boolean,default:!1},isConfigurator:{type:Boolean,default:!1},defaultOpen:Boolean,isCarLocator:{type:Boolean,default:!1}},data:function(){return{isOpen:!0,optionPopupOpened:!1,description:{}}},mounted:function(){this.isOpen=this.defaultOpen},methods:{toggleInfoSection:function(t){this.isCarLocator&&!this.$refs[t].classList.contains("is-opened")&&this.dataLayerPush("Filter accordion",this.title,"Open"),this.$refs[t].classList.toggle("is-opened"),this.isConfigurator&&this.$refs[t].classList.contains("is-opened")&&this.dataLayerPush("Option accordion",this.title,"Open")},openOptionInfoPopup:function(t){this.isCarLocator&&this.dataLayerPush("Info pop-up",t.name,"Open"),this.optionPopupOpened=!0,this.description={title:t.name,file:t.file,description:t.description},this.isConfigurator&&this.dataLayerPush("Info pop-up",t.name,"Open")},closeOptionInfoPopup:function(){this.optionPopupOpened=!1},getDescription:function(){return this.description}},computed:{blockClasses:function(){return["info-section__header","cursor-pointer","flex","items-center","justify-between"].concat(this.classes)},optionGroups:function(){return this.getOptionGroups(this.getOptionsList)},isOptionsEmpty:function(){return r()(this.groupedOptions)}},components:{Popup:s.a,IconAngleArrowDown:l.a,OptionInfoContent:c.a}},d=(n(1169),n(2)),p=Object(d.a)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("div",{ref:"infoParams",class:["info-section",{"is-opened":t.isOpened}]},[n("div",{class:t.blockClasses,on:{click:function(e){return t.toggleInfoSection("infoParams")}}},[n("div",{staticClass:"text-s1 desktop:text-x5"},[t._v(t._s(t.title))]),t._v(" "),n("icon-angle-arrow-down")],1),t._v(" "),n("div",{staticClass:"info-section__body pt-4 desktop:pt-6"},[n("div",{staticClass:"info-section__params text-s2i"},[n("div",{staticClass:"info-section__params__item"},t._l(t.optionGroups,(function(e,i){return n("div",{key:i,staticClass:"info-section__params__item__body"},[n("div",{staticClass:"text-s2i-b"},[t._v(t._s(e.name))]),t._v(" "),n("ul",t._l(e.options,(function(e,i){return n("li",{key:i},[n("div",{staticClass:"flex items-center justify-between desktop:justify-start"},[t._v("\n                  "+t._s(e.name)+"\n                  "),!e.description&&!e.file||t.isPopup?t._e():n("g-button-info",{on:{click:function(n){return t.openOptionInfoPopup(e)}}})],1)])})),0)])})),0)])])]),t._v(" "),t.optionPopupOpened?n("popup",[n("option-info-content",{attrs:{popup:t.getDescription()},on:{"toggle-info-popup":t.closeOptionInfoPopup}})],1):t._e()],1)}),[],!1,null,null,null);e.a=p.exports},1136:function(t,e,n){var i=n(383),r=n(549),s=n(388),a=n(541),o=s((function(t,e){if(null==t)return[];var n=e.length;return n>1&&a(t,e[0],e[1])?e=[]:n>2&&a(e[0],e[1],e[2])&&(e=[e[0]]),r(t,i(e,1),[])}));t.exports=o},1137:function(t,e,n){"use strict";var i=n(1039);n.n(i).a},1138:function(t,e,n){"use strict";var i=n(374),r={props:{popup:{type:Object,default:function(){return{}}}},components:{PopupContent:i.a}},s=n(2),a=Object(s.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("popup-content",{attrs:{popup:t.popup},on:{"toggle-info-popup":function(e){return t.$emit("toggle-info-popup")}}},[n("template",{slot:"title"},[t._v("\n    Расчет кредита\n  ")]),t._v(" "),n("template",{slot:"button-name"},[t._v("\n    Рассчитать кредит "+t._s(t.popup.label)+"\n  ")])],2)}),[],!1,null,null,null);e.a=a.exports},1139:function(t,e,n){"use strict";var i=n(162),r={name:"test-drive-buttons",props:{showNextBtn:{type:Boolean,default:!0},textNextBtn:{type:String,default:"Шаг назад"},showPrevBtn:{type:Boolean,default:!1},textPrevBtn:{type:String,default:"Далее"},isContainerBordered:{type:Boolean,default:!1}},data:function(){return{isButtonsScrolled:!1}},mounted:function(){window.addEventListener("load",this.handleScrollButtons),window.addEventListener("resize",this.handleScrollButtons),window.addEventListener("scroll",this.handleScrollButtons)},beforeDestroy:function(){window.removeEventListener("load",this.handleScrollButtons),window.removeEventListener("resize",this.handleScrollButtons),window.removeEventListener("scroll",this.handleScrollButtons)},methods:{handleScrollButtons:function(){var t=window.scrollY,e=Math.round(window.innerHeight),n=Math.round(document.getElementsByClassName("page-wrapper__footer")[0].offsetTop);this.isButtonsScrolled=t+e>n+1}},components:{IconLeft:i.a}},s=(n(1157),n(2)),a=Object(s.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"form-buttons"},[n("div",{class:["form-buttons__container",{"is-scrolled":t.isButtonsScrolled},{"form-buttons__container--bordered":t.isContainerBordered}]},[n("g-container",[n("ul",{staticClass:"flex desktop:justify-end"},[t.showPrevBtn?n("li",[n("button",{staticClass:"button button_text",on:{click:function(e){return e.preventDefault(),t.$emit("click-prev")}}},[n("span",{staticClass:"button__span-after"},[n("icon-left"),t._v("\n              "+t._s(t.textPrevBtn)+"\n            ")],1)])]):t._e(),t._v(" "),t.showNextBtn?n("li",[n("button",{staticClass:"button button_primary",on:{click:function(e){return e.preventDefault(),t.$emit("click-next")}}},[n("span",{staticClass:"button__span-after"},[t._v("\n              "+t._s(t.textNextBtn)+"\n            ")])])]):t._e()])])],1)])}),[],!1,null,"6e69ebae",null);e.a=a.exports},1147:function(t,e,n){},1148:function(t,e,n){},1149:function(t,e,n){},1150:function(t,e,n){},1151:function(t,e,n){},1152:function(t,e,n){},1153:function(t,e,n){"use strict";var i=n(1046);n.n(i).a},1154:function(t,e,n){},1155:function(t,e,n){},1156:function(t,e,n){},1157:function(t,e,n){"use strict";var i=n(1047);n.n(i).a},1158:function(t,e,n){},1159:function(t,e,n){},1160:function(t,e,n){},1161:function(t,e,n){},1168:function(t,e,n){"use strict";var i=n(1055);n.n(i).a},1169:function(t,e,n){"use strict";var i=n(1056);n.n(i).a},1170:function(t,e,n){"use strict";var i=n(1057);n.n(i).a},1171:function(t,e,n){"use strict";var i=n(1058);n.n(i).a},1172:function(t,e,n){"use strict";var i=n(1059);n.n(i).a},1173:function(t,e,n){"use strict";var i=n(1060);n.n(i).a},1174:function(t,e,n){"use strict";var i=n(1061);n.n(i).a},1175:function(t,e,n){"use strict";var i=n(1062);n.n(i).a},1176:function(t,e,n){"use strict";var i=n(1063);n.n(i).a},1177:function(t,e,n){"use strict";var i=n(1064);n.n(i).a},1178:function(t,e,n){"use strict";var i=n(1065);n.n(i).a},1179:function(t,e,n){"use strict";var i=n(1066);n.n(i).a},1180:function(t,e,n){"use strict";var i=n(1067);n.n(i).a},1181:function(t,e,n){"use strict";n(17),n(13),n(8),n(7),n(3),n(6),n(9),n(5),n(10);var i=["class","staticClass","style","staticStyle","attrs"];function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},s=Object.keys(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}e.a={functional:!0,render:function(t,e){var n=e._c,o=(e._v,e.data),c=e.children,l=void 0===c?[]:c,u=o.class,d=o.staticClass,p=o.style,f=o.staticStyle,m=o.attrs,h=void 0===m?{}:m,_=a(o,i);return n("svg",function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({class:[u,d],style:[p,f],attrs:Object.assign({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},h)},_),l.concat([n("path",{attrs:{fill:"currentColor",d:"M9 10h3v3H9z"}})]))}}},1183:function(t,e,n){"use strict";n(7),n(13),n(3),n(84),n(60),n(26),n(9),n(10),n(8),n(6),n(69),n(108),n(111),n(5);var i=n(15),r=n(0),s=n(11),a=n(18),o=n(1068),c=n(109),l=n(32),u=n(14),d=n.n(u),p=n(533),f=n(24),m=n(1030),h=n(1022),_=n(1017),v=n(76),g=n(165),b=n(1016);n(55);function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var P={mixins:[f.a,b.a,m.a],props:{dataLayerInfo:{type:Object,default:function(){}},sms:{type:Object,default:function(){}},model:{type:Object,default:function(){}},resultId:String,uniqueCode:String,agreement:{type:Object,default:function(){return{}}}},data:function(){return{data:{title:"Отправить заявку дилеру",buttonText:"Отправить",success:{title:"Заявка успешно отправлена!",description:"Сотрудник дилерского центра Kia свяжется с Вами в ближайшее время."}},form:{name:null,phone:null,dealer:null},source:"trade_in",isSended:!1}},created:function(){this.fillFormUserData(this.form)},mounted:function(){this.loadAllCities()},computed:C({},Object(a.e)("geo-position",["city"]),{description:function(){return"Отправьте заявку, чтобы получить консультацию по оценке Вашего автомобиля ".concat(this.model.name," и условиям покупки с учетом трейд-ин.")}}),methods:C({},Object(a.b)("geo-position",["loadAllCities"]),{bindObject:function(t,e,n){var i=this;Object.keys(t).forEach((function(r){"object"===Object(l.a)(t[r])?i.bindObject(t[r],"".concat(e,"[").concat(r,"]"),n):n.append("".concat(e,"[").concat(r,"]"),t[r])}))},onSubmit:function(){var t=this,e=new FormData;e.append("source",this.source),e.append("name",this.form.name),e.append("agree",+this.form.agree),e.append("result_id",this.resultId),e.append("unique_code",this.uniqueCode),e.append("agreement_id",this.agreement.id),e.append("dealership_id",this.form.dealer.id),e.append("phone",this.preparePhone(this.form.phone)),e.append("model_code",this.model.model_code),d()(this.sms)||this.bindObject(this.sms,"sms",e),this.sendDataLayerAnalytics(),this.$axios(r.a.createTradeInRequest(e)).then((function(e){e.data.content.success&&(t.isSended=!0,t.$nextTick((function(){window.scrollTo(0,t.$refs.successBlock.offsetTop-150)})))})).catch((function(e){e instanceof g.a&&t.$refs.form.setErrors(t.prepareValidateErrors(e.data,{dealership_id:"dealer"}))}))},sendDataLayerAnalytics:function(){var t={vehicleTransmission:this.dataLayerInfo.transmission,customerLeadVin:this.dataLayerInfo.vin,vehicleEngine:this.dataLayerInfo.engine,driveUnit:this.dataLayerInfo.drive,usedCarMileage:this.dataLayerInfo.mileage,usedCarYearOfIssue:this.dataLayerInfo.usedYear,settlementDate:this.dataLayerInfo.settlementDate,city:this.city.name_en,carBrand:this.dataLayerInfo.brand,tradeInId:this.dataLayerInfo.tradeInId,userLocation:this.city.name_en,tradeInOffer:this.dataLayerInfo.tradeInPrice};this.dataLayerInfo.bodyType&&(t.bodyType=this.dataLayerInfo.bodyType),this.dataLayerInfo.complectationName&&(t.vehicleTrim=this.dataLayerInfo.complectationName),this.dataLayerInfo.generation&&(t.carGeneration=this.dataLayerInfo.generation),this.dataLayerInfo.ownerCount&&(t.usedCarNumberOfOwners=this.dataLayerInfo.ownerCount),this.$auth.user&&(t.kiaCustomerId=this.$auth.user.id),this.dataLayerPush("Lead","Trade-in","Lead submit",t)}}),components:{NavLink:p.default,IconEdit:c.a,DealerChoice:h.a,LicenseButton:_.a,ValidationObserver:v.a,ValidationProvider:v.b}},O=n(2),x=Object(O.a)(P,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isSended?[n("div",{ref:"successBlock"},[n("div",{staticClass:"text-x4 mb-4"},[t._v(t._s(t.data.success.title))]),t._v(" "),t.description?n("p",[t._v(t._s(t.description))]):t._e(),t._v(" "),n("div",{staticClass:"form__footer__buttons flex flex-wrap"},[n("div",{staticClass:"form__footer__button"},[n("nuxt-link",{tag:"NavLink",staticClass:"button button_primary",attrs:{to:"/"}},[t._v("На главную")])],1)])])]:[n("div",{staticClass:"text-x5 desktop:text-x4 mb-4 desktop:mb-12"},[t._v("\n      "+t._s(t.data.title)+"\n    ")]),t._v(" "),t.description?n("div",[t._v(t._s(t.description))]):t._e(),t._v(" "),n("ValidationObserver",{ref:"form",scopedSlots:t._u([{key:"default",fn:function(e){var i=e.handleSubmit;return[n("form",{on:{submit:function(e){return e.preventDefault(),i(t.onSubmit)}}},[n("fieldset",[n("ul",{staticClass:"form-fields flex-wrap"},[n("li",[n("ValidationProvider",{attrs:{vid:"name",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[n("g-form-control",{attrs:{type:"text",label:"Имя",error:i[0]},nativeOn:{focusout:function(e){return t.$emit("trade-in-name-input")}},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})]}}],null,!0)})],1),t._v(" "),n("li",[n("ValidationProvider",{attrs:{vid:"phone",rules:"required|phone"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[n("g-form-control",{directives:[{name:"mask",rawName:"v-mask",value:"+7 (###) ###-##-##",expression:"'+7 (###) ###-##-##'"}],attrs:{type:"text",label:"Телефон",placeholder:"+7 (___) ___-__-__",error:i[0]},nativeOn:{focusout:function(e){return t.$emit("trade-in-phone-input")}},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})]}}],null,!0)})],1),t._v(" "),n("li",[n("ValidationProvider",{attrs:{vid:"dealer",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[n("DealerChoice",{attrs:{autoFill:!0,model:t.model,error:i[0],isTradeIn:!0},nativeOn:{click:function(e){return t.$emit("trade-in-dealer-choice")}},model:{value:t.form.dealer,callback:function(e){t.$set(t.form,"dealer",e)},expression:"form.dealer"}})]}}],null,!0)})],1)])]),t._v(" "),n("div",{staticClass:"form-agree"},[n("ValidationProvider",{attrs:{vid:"agree",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[n("g-form-control",{attrs:{id:"agree",name:"agree",type:"checkbox",error:i[0],"has-label":!1},model:{value:t.form.agree,callback:function(e){t.$set(t.form,"agree",e)},expression:"form.agree"}},[n("template",{slot:"label"},[n("LicenseButton",{attrs:{agreement:t.agreement}})],1)],2)]}}],null,!0)})],1),t._v(" "),n("div",{staticClass:"form-button"},[n("button",{staticClass:"button button_primary",attrs:{type:"submit"}},[n("span",{staticClass:"button__span-after"},[t._v("\n              "+t._s(t.data.buttonText)+"\n            ")])])])])]}}])})]],2)}),[],!1,null,null,null).exports,w=n(1075),I=n(37),j=n(1028),k=n(107),S=n(1339),D=n(61),L=n(1038),T=n(1009),E=n(1043),B=n(83),M=n(1027),F=n(374),R=n(1049),$=(n(49),n(27),n(59),n(384)),A=n.n($),N={mixins:[n(34).a],props:{tradeInResultCode:{type:String,default:null}},data:function(){return{cookieName:"saved_trade_in_results",cookiePath:"/",cookieDomain:"",cookieExpiryDays:90}},methods:{handleTradeInResultCode:function(){if(this.tradeInResultCode){var t=this.getCookie(this.cookieName),e=[];void 0!==t&&(e=t.split(",")),e.push(this.tradeInResultCode),e=A()(e).join(","),this.setCookie(this.cookieName,e,this.cookieExpiryDays,this.cookieDomain,this.cookiePath)}}},mounted:function(){this.handleTradeInResultCode()},watch:{tradeInResultCode:function(){this.handleTradeInResultCode()}}},q=Object(O.a)(N,(function(){var t=this.$createElement;return(this._self._c||t)("div")}),[],!1,null,null,null).exports,H=n(31),z=n(177),V=n(110),G={mixins:[H.a,I.a],props:{model:Object,disclaimer:String},data:function(){return{resize:"400x198"}},components:{Arrow:V.a,IconStar:z.a}},Y=(n(1179),Object(O.a)(G,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"trade-in-result__car mt-3 flex flex-wrap justify-between items-end"},[n("div",[n("div",{staticClass:"flex items-baseline"},[t.model.min_price?n("span",{staticClass:"text-s1 desktop:text-x5"},[t._v("\n        от "+t._s(t.formatMoney(t.model.min_price))+"\n      ")]):t._e(),t._v(" "),t.disclaimer?n("g-button-info",{on:{click:function(e){return t.$emit("price-info")}}}):t._e()],1),t._v(" "),n("div",{staticClass:"mt-3"},[n("nuxt-link",{attrs:{to:{name:"models-code-desc",params:{code:t.model.code}}}},[n("img",{attrs:{src:t.getResizeImagePath(t.model.image_side_view,t.resize)}})])],1),t._v(" "),n("div",{staticClass:"mt-3"},[t.model.trade_in_benefit?n("div",{staticClass:"trade-in-result__car-labels flex flex-wrap"},[n("span",{staticClass:"green"},[t._v("\n          Выгода по трейд-ин до "),n("span",{staticClass:"no-wrap-price"},[t._v(t._s(t.formatMoney(t.model.trade_in_benefit)))])])]):t._e()])]),t._v(" "),n("div",[n("div",{staticClass:"trade-in-result__car-buttons flex flex-wrap mt-3"},[n("nuxt-link",{staticClass:"button button_secondary mb-2 mr-2",attrs:{to:{name:"models-code-configurator",params:{code:t.model.code}}},nativeOn:{click:function(e){return t.$emit("car-conf-click")}}},[n("span",{staticClass:"button__span-after"},[t._v("\n          Конфигуратор\n        ")])]),t._v(" "),n("nuxt-link",{staticClass:"button button_secondary mb-2 mr-2",attrs:{to:{name:"models-code-cars",params:{code:t.model.code}}},nativeOn:{click:function(e){return t.$emit("car-stock-click")}}},[n("span",{staticClass:"button__span-after"},[t._v("\n          Авто в наличии\n        ")])]),t._v(" "),n("nuxt-link",{staticClass:"button button_secondary",attrs:{to:{name:"models-code-calc",params:{code:t.model.code}}},nativeOn:{click:function(e){return t.$emit("car-credit-click")}}},[n("span",{staticClass:"button__span-after"},[t._v("\n          Рассчитать кредит\n        ")])])],1)])])}),[],!1,null,"2063a4f4",null).exports),U=n(1070),W=n(1036),K=n(534),Q=n(56),X=n.n(Q);function J(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?J(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var tt={mixins:[f.a,I.a,j.a],props:{result:Object,selected:Object,isResultLoading:Boolean,tradeInRequestAgreement:Object,isPopup:Boolean,showOffers:{type:Boolean,default:!0}},data:function(){return{smsPopupIsOpen:!1,dateOptions:{month:"2-digit",day:"2-digit",year:"numeric"},popup:{data:{},isOpened:!1},popupConfigId:{data:{},isOpened:!1},popupOffer:{},loadingPdf:!1,scrolledToForm:!1,isOpenDisclaimer:!0,needOfferConfirm:!1,isOfferPopupOpen:!1,isPopupFavoriteOpened:!1,popupFormComponent:"AddedTradeIn",popupFormProps:{},isPopupPdfSendingOpened:!1,pageName:"trade-in"}},mounted:function(){var t=this;if(0===this.result.price)this.dataLayerPush("Trade-in","Results","Not possible to estimate",null,!0);else{var e={vehicleTransmission:X()(this.selected,"gearbox.code",null),vehicleTrim:X()(this.selected,"complectation.name",null),customerLeadVin:X()(this.selected,"vin",null),vehicleEngine:X()(this.selected,"engine.code",null),driveUnit:X()(this.selected,"drive.code",null),usedCarMileage:X()(this.selected,"mileage",null),usedCarYearOfIssue:X()(this.selected,"year.name",null),usedCarNumberOfOwners:X()(this.selected,"ownerCount",null),settlementDate:this.formatDate(this.result.created_at||this.date,this.dateOptions),city:X()(this.selected,"city.name_en",null),bodyType:X()(this.selected,"modification.body_type",null),carBrand:X()(this.selected,"brand.name",null),carGeneration:X()(this.selected,"generation.name",null),tradeInId:X()(this.result,"unique_code",null),userLocation:X()(this.selected,"city.name_en",null),tradeInOffer:X()(this.result,"marginalityPrice",null)};this.$auth.user&&(e.KiaCustomerId=this.$auth.user.id),void 0!==this.result.kiaModel&&void 0!==this.result.kiaModel.unique_id&&(e.VehicleModelYear=this.result.kiaModel.unique_id.substr(4,4)),this.dataLayerPush("Trade-in","Results","Complete",e,!0)}this.$route.query.scrollToForm&&setTimeout((function(){t.requestButtonClickHandler()})),this.showRequest&&!this.isPopup&&window.addEventListener("scroll",this.handleScroll),this.addWatched({type:K.watchedTypes.tradeIn,id:this.result.id})},computed:Z({},Object(a.e)("calculator",["offers","selectedOffers","disabledOffers","isPopupCreditSelected"]),{},Object(a.c)("trade-in",["modelName"]),{},Object(a.e)("trade-in",["unique_code","popupDisclaimer","isFavoriteLoading","isFavorite","date","vin"]),{model:function(){var t=this.selected.year.name||"";return{name:"".concat(this.selected.brand.name," ").concat(this.selected.model.name," ").concat(t),model_code:this.result.kiaModel?this.result.kiaModel.external_id:""}},showRequest:function(){return!this.isResultLoading&&this.result.price&&this.tradeInRequestAgreement.id},resultItems:function(){var t=[],e=this.selected.vin||this.vin;return e&&t.push({name:"VIN",value:e}),this.selected.brand&&t.push({name:"Марка",value:this.selected.brand.name}),this.selected.model&&t.push({name:"Модель",value:this.selected.model.name}),this.selected.year&&t.push({name:"Год выпуска",value:this.selected.year.name}),this.selected.generation&&""!==this.selected.generation.name&&t.push({name:"Поколение",value:this.selected.generation.name}),this.selected.configuration&&t.push({name:"Тип кузова",value:this.selected.configuration.name}),this.selected.engine&&t.push({name:"Двигатель",value:this.selected.engine.name}),this.selected.drive&&t.push({name:"Привод",value:this.selected.drive.name}),this.selected.gearbox&&t.push({name:"КПП",value:this.selected.gearbox.name}),this.selected.modification&&t.push({name:"Модификация",value:this.selected.modification.name}),this.formatedMileage&&t.push({name:"Пробег",value:this.formatedMileage}),this.selected.complectation&&t.push({name:"Комплектация",value:this.selected.complectation.name}),this.selected.ownerCount&&t.push({name:"Владельцев",value:this.selected.ownerCount}),this.selected.ptsType&&t.push({name:"ПТС",value:this.selected.ptsType.name}),this.selected.city&&t.push({name:"Город",value:this.selected.city.name}),t},resultItemsColumns:function(){return[this.resultItemsFirstColumn,this.resultItemsSecondColumn]},resultItemsFirstColumn:function(){return this.resultItems.slice(0,Math.round(this.resultItems.length/2))},resultItemsSecondColumn:function(){return this.resultItems.slice(-Math.floor(this.resultItems.length/2))},formatedMileage:function(){if(!this.selected.mileage)return null;var t=parseInt(this.selected.mileage);return t>0?this.formatNumber(t," "," "):null},formTradeInPosition:function(){return X()(this.$refs.formTradeIn,"$el.offsetTop",150)-150},tradeInOffers:function(){return Object.values(this.offers).filter((function(t){return t.is_traid_in}))},pdfSendingProps:function(){return{page:this.pageName,formData:this.formData,modelName:this.modelName,uniqueId:this.unique_code||this.result.unique_code,header:"Отправить ссылку на расчет трейд-ин по email",uniqueUrl:this.uniquerUrl,source:"trade-in"}},smsSendingProps:function(){return{header:"Отправить ссылку на расчет трейд-ин по sms",linkOn:"расчет трейд-ин",code:"trade-in",dynamic_variables:{"trade-in_id":this.result.unique_code,model_name:this.modelName},source:"trade-in"}},smsConfirmProps:function(){return{code:"confirm-trade-in",dynamic_variables:{"trade-in_id":this.result.unique_code,model_name:this.modelName}}},formData:function(){var t=new FormData;this.selected.year&&t.append("year",this.selected.year.name),this.selected.drive&&t.append("drive",this.selected.drive.name),this.selected.engine&&t.append("engine",this.selected.engine.name),this.selected.gearbox&&t.append("gearbox",this.selected.gearbox.name),this.selected.ptsType&&t.append("ptsType",this.selected.ptsType.name),this.selected.ownerCount&&t.append("ownerCount",this.selected.ownerCount),this.selected.generation&&t.append("generation",this.selected.generation.name),this.selected.modification&&t.append("modification",this.selected.modification.name),this.selected.configuration&&t.append("configuration",this.selected.configuration.name),this.selected.complectation&&t.append("complectation",this.selected.complectation.name);var e=this.selected.vin||this.vin;return e&&t.append("vin",e),t.append("price",this.result.price),t.append("city",this.selected.city.name),t.append("mileage",this.selected.mileage),t.append("brand",this.selected.brand.name),t.append("model",this.selected.model.name),t.append("marginalityPrice",this.result.marginalityPrice),t.append("createdAt",this.result.created_at||this.date),t.append("unique_code",this.result.unique_code),t},uniquerUrl:function(){return window.location.origin+"/t/"+this.result.unique_code+"/"},prepareDataLayerInfo:function(){return{complectationName:this.selected.complectation?this.selected.complectation.name:null,vin:this.selected.vin,mileage:this.selected.mileage,usedYear:this.selected.year.id,owners:this.selected.ownerCount,brand:this.selected.brand?this.selected.brand.name:null,generation:this.selected.generation?this.selected.generation.name:null,tradeInId:this.result.unique_code,tradeInPrice:this.result.marginalityPrice,settlementDate:this.formatDate(this.result.created_at||this.date,this.dateOptions),bodyType:this.selected.configuration?this.selected.configuration.name:null,transmission:this.selected.gearbox?this.selected.gearbox.name:null,engine:this.selected.engine?this.selected.engine.name:null,drive:this.selected.drive?this.selected.drive.name:null}}}),methods:Z({},Object(a.d)("trade-in",["setUniqueCode","setPrice","setMarginalityPrice","setIsFavoriteLoading","setIsFavorite"]),{},Object(a.d)("calculator",["setOffer"]),{},Object(a.b)("watched",["addWatched"]),{toggleSmsPopup:function(){this.smsPopupIsOpen||this.dataLayerPush("Saving","Send trade-in in sms"),this.smsPopupIsOpen=!this.smsPopupIsOpen},onFavoriteClick:function(){var t=this;this.setIsFavoriteLoading(!0),this.dataLayerPush("Saving","Add trade-in to favorites"),this.$axios(s.a.addFavorite("trade_in",this.result.id)).then((function(e){t.popupFormProps={selected:t.selected,uniqueId:t.result.unique_code,alreadyAdded:!1,success:!1},e.data.content.success?(t.setIsFavorite(!0),t.popupFormProps.success=!0):1==e.data.error&&"favorite_already_added_exception"===e.data.content.error_code&&(t.setIsFavorite(!0),t.popupFormProps.alreadyAdded=!0),t.isPopupFavoriteOpened=!0})).finally((function(){t.setIsFavoriteLoading(!1)}))},requestButtonClickHandler:function(){this.dataLayerPush("Trade-in","Results","Trade-in request to dealer");var t=document.getElementById("trade_in_request");window.scrollTo(0,t.offsetTop-150)},createTradeInPdf:function(){var t=this;this.loadingPdf||(this.loadingPdf=!0,r.a.createTradeInPdf(this.formData,this.selected.brand.name,this.selected.model.name).finally((function(){r.a.getTradeInPdfLink(t.formData).then((function(e){t.dataLayerPush("Saving","Download pdf",e)})),t.loadingPdf=!1})))},sendTradeInEmail:function(){},sendTradeInSms:function(){},handleScroll:function(t){!this.scrolledToForm&&window.scrollY>=this.formTradeInPosition?this.scrolledToForm=!0:this.scrolledToForm&&window.scrollY<this.formTradeInPosition&&(this.scrolledToForm=!1)},prepareEngine:function(){return this.selected.modification?this.selected.engine?"".concat(this.selected.modification.name," / ").concat(this.selected.engine.name):this.selected.modification.name:this.selected.engine?this.selected.engine.name:""},toggleDisclaimer:function(){this.isOpenDisclaimer=!this.isOpenDisclaimer},openPopup:function(){this.dataLayerPush("Info pop-up","Trade-in id description","Open"),Object.assign(this,{popupConfigId:{data:{title:"ID трейд-ин расчета",description:"\n                <p>ID трейд-ин расчета — это код, который хранит все детали вашего расчета, указанные параметры автомобиля, а так же расчетную стоимость при сдаче в трейд-ин.</p>\n                <p>Сохраните ссылку или код и откройте ваш расчет в любое время с любого устройства.</p>\n                <p>Код действует 3 месяца.</p>\n              ",buttonClose:!0},isOpened:!0}})},openPricePopup:function(){this.dataLayerPush("Info pop-up","Price description","Open"),Object.assign(this,{popup:{data:{description:this.result.kiaModelPriceDisclaimer,buttonClose:!0},isOpened:!0}})},closePopup:function(){Object.assign(this,{popup:{data:{},isOpened:!1}})},closePopupConfigId:function(){Object.assign(this,{popupConfigId:{data:{},isOpened:!1}})},showPopupOffer:function(t){this.popupOffer=t,this.isOfferPopupOpen=!0},closePopupOffer:function(){this.isOfferPopupOpen=!1},copyUrlToClipboard:function(t){this.dataLayerPush("Saving","Copy link");var e,n=this.$refs.copyButton,i=this.$refs.copyInput;clearTimeout(e),i.value=this.uniquerUrl,i.select(),document.execCommand("copy"),n.classList.add("hinted_callback-done"),e=setTimeout((function(){n.classList.remove("hinted_callback-done")}),2e3)},isDisabledOffer:function(t){return this.disabledOffers.includes(t)},selectOffer:function(t,e){this.isPopupCreditSelected&&!this.inCredit?(e.preventDefault(),this.popupOffer=t,this.needOfferConfirm=!0):this.setOffer(t)},submitPopupTradeIn:function(){this.dataLayerPush("Calculator pop-up","Trade-in","Apply"),this.isPopupCreditSelected&&this.unique_code!==this.result.unique_code?this.needOfferConfirm=!0:this.setTradeIn()},setTradeIn:function(){this.setUniqueCode(this.result.unique_code),this.setPrice(this.result.price),this.setMarginalityPrice(this.result.marginalityPrice),this.$emit("submit-popup")},firstStep:function(){this.dataLayerPush("Calculator pop-up","Trade-in","Recalculate"),this.setUniqueCode(null),this.$emit("first-step")},closeOfferConfirmPopup:function(){this.needOfferConfirm=!1},applyOfferConfirmPopup:function(){this.needOfferConfirm=!1,this.$emit("clear-credit"),this.setTradeIn()},closePopupFavorite:function(){this.isPopupFavoriteOpened=!1},openPdfSubmissionForm:function(){this.dataLayerPush("Saving","Send trade-in to email"),this.isPopupPdfSendingOpened=!0},closePdfSubmissionForm:function(){this.isPopupPdfSendingOpened=!1},toFormClick:function(){this.dataLayerPush("Trade-in","Results","Edit car characteristics"),this.$emit("prev-step")}}),components:{Popup:B.a,Loader:k.a,CarCard:Y,Results:q,IconLink:R.a,IconEdit:c.a,ViewAlso:w.a,LinkBySms:S.a,Preloader:T.a,PopupOffer:M.a,Disclaimer:o.a,FormTradein:x,PopupContent:F.a,DocumentIcon:D.a,TrickRightIcon:L.a,PriceInfoContent:E.a,ConfirmOfferPopup:U.a,PopupContentForm:W.a}},et=(n(1180),Object(O.a)(tt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"trade-in-calc__summary",class:{"mt-14":!t.isPopup}},[n("g-padding",[n("g-container",[n("div",{staticClass:"trade-in-calc__summary-header",class:{"trade-in-calc__summary-header_popup":t.isPopup}},[t.isPopup?n("div",[n("div",{staticClass:"text-x5 desktop:text-x4 mb-6"},[t._v("\n            Трейд-ин оценка\n          ")])]):n("div",{staticClass:"text-x5 desktop:text-x4"},[t._v("Расчетная цена "+t._s(t.model.name))]),t._v(" "),t.isResultLoading?n("Loader"):[t.result.price>0&&t.isPopup?[n("div",{staticClass:"popup-result-content mt-4"},[n("div",{staticClass:"bg-pale-beige pt-8 px-4 pb-2"},[n("div",{staticClass:"desktop:flex justify-between"},[n("div",{staticClass:"mb-8"},[t.isPopup?n("span",{staticClass:"text-s1"},[t._v("\n                      Расчетная стоимость\n                    ")]):t._e(),t._v(" "),n("span",{staticClass:"text-s1 nowrap"},[t._v("\n                      "+t._s(t.model.name)+"\n                    ")]),t._v(" "),n("div",{staticClass:"tablet:flex items-end"},[n("div",{staticClass:"mt-4 tablet:mt-0 tablet:mr-6"},[n("div",{staticClass:"text-x5 mt-2"},[t._v(t._s(t.formatMoney(t.result.marginalityPrice)))]),t._v(" "),n("div",{staticClass:"text-s3 color-black mt-1"},[t._v("\n                          При сдаче в трейд-ин\n                        ")])]),t._v(" "),n("div",{staticClass:"mt-4 tablet:mt-0"},[n("div",{staticClass:"text-x6 mt-2"},[t._v(t._s(t.formatMoney(t.result.price)))]),t._v(" "),n("div",{staticClass:"text-s3 color-black mt-1 tablet:mt-2"},[t._v("\n                          При самостоятельной продаже\n                        ")])])])]),t._v(" "),n("div",{staticClass:"popup-result-content__offers mb-8"},[t.tradeInOffers.length&&t.showOffers?n("div",{staticClass:"mt-6 desktop:mt-0 desktop:ml-2 desktop:ml-4"},[n("div",{staticClass:"text-s1"},[t._v("Выберите спецпредложение")]),t._v(" "),t._l(t.tradeInOffers,(function(e){return n("div",{key:e.id,staticClass:"catalog-detail-summary__offers-item"},[n("g-checkbox",{attrs:{id:e.id,val:e.id,label:e.name,value:t.selectedOffers,disabled:t.isDisabledOffer(e.id)},on:{click:function(n){return t.selectOffer(e,n)}}}),t._v(" "),n("div",{staticClass:"catalog-detail-summary__offers-item-price"},[t._v("\n                          Выгода - "+t._s(t.formatMoney(e.price))+"\n                        ")]),t._v(" "),e.description||e.advantage_text||e.condition_text?n("button",{staticClass:"offer__info-button",on:{click:function(n){return n.stopPropagation(),t.showPopupOffer(e)}}},[n("g-info-icon")],1):t._e()],1)}))],2):t._e()])]),t._v(" "),n("div",{staticClass:"text-s3 color-disabled-gray mt-1 mb-2 pt-2",staticStyle:{"border-top":"1px solid #cccccc"}},[t._v("\n                  Расчёт носит информационный характер и не является публичной офертой\n                ")])])])]:t.result.price>0?[n("div",{staticClass:"flex items-center justify-between flex-wrap"},[n("div",{staticClass:"flex flex-wrap mb-4"},[n("div",{staticClass:"mt-5 mr-10"},[n("div",{staticClass:"text-s3 mb-1"},[t._v("\n                    При сдаче в трейд-ин\n                  ")]),t._v(" "),n("div",{staticClass:"text-x4"},[t._v("\n                    "+t._s(t.formatMoney(t.result.marginalityPrice))+"\n                  ")])]),t._v(" "),n("div",{staticClass:"mt-5"},[n("div",{staticClass:"text-s3 mb-1"},[t._v("\n                    При самостоятельной продаже\n                  ")]),t._v(" "),n("div",{staticClass:"text-x5 pt-1"},[t._v("\n                    "+t._s(t.formatMoney(t.result.price))+"\n                  ")])])]),t._v(" "),t.showRequest?n("div",{staticClass:"mt-4 desktop:mt-0 items-center desktop:flex mb-4"},[n("div",{staticClass:"text-s2i-b desktop:ml-4"},[t._v("\n                  Хотите сдать авто по программе трейд-ин?\n                ")]),t._v(" "),n("div",{staticClass:"mt-6 desktop:mt-0 desktop:ml-7"},[n("a",{staticClass:"button button_primary",attrs:{href:"javascript:"},on:{click:t.requestButtonClickHandler}},[n("span",{staticClass:"button__span-after"},[t._v("\n                      Оставить заявку дилеру\n                    ")])])])]):t._e()])]:0===t.result.price?n("div",{staticClass:"mt-4 error-calc"},[t._v("\n            К сожалению, по указанным параметрам сделать расчет не удалось.\n          ")]):[t._v("\n            Ошибка расчета стоимости. Попробуйте изменить характеристики автомобиля.\n          ")]],t._v(" "),t.isPopup?n("div",{staticClass:"mt-6"},[n("div",{staticClass:"desktop:flex flex-wrap"},[t.result.price>0?n("g-button",{staticClass:"button_fixed-width-desktop mb-2 desktop:mr-4",nativeOn:{click:function(e){return t.submitPopupTradeIn(e)}}},[t._v("\n              Применить\n            ")]):t._e(),t._v(" "),n("g-button",{staticClass:"button_fixed-width-desktop mb-2",attrs:{inverted:"",hasBorder:""},nativeOn:{click:function(e){return t.firstStep(e)}}},[t._v("\n              Пересчитать\n            ")])],1)]):t._e()],2),t._v(" "),t.result.unique_code?n("div",{class:["mt-6",{"calc-font":t.isPopup}]},[n("span",[t._v("Дата расчета: "+t._s(t.formatDate(t.result.created_at||t.date,t.dateOptions)))])]):t._e(),t._v(" "),t.result.unique_code?n("div",{class:["unique-id my-6",{"unique-id_popup":t.isPopup}]},[n("div",{staticClass:"unique-id__info"},[n("div",{staticClass:"unique-id__info-title text-s2-b"},[n("div",{staticClass:"inline-flex items-center"},[n("div",[t._v("\n                Ваш ID расчета трейд-ин\n              ")]),t._v(" "),n("g-button-info",{staticClass:"unique-id__info-button hinted hinted_bottom",on:{click:t.openPopup}})],1)]),t._v(" "),n("div",{staticClass:"unique-id__info-code text-x5",on:{click:t.copyUrlToClipboard}},[n("div",{ref:"copyButton",staticClass:"unique-id__info-code-content hinted hinted_bottom hinted_callback"},[n("input",{ref:"copyInput",staticClass:"unique-id__info-code-input",attrs:{name:"copyInput",value:""}}),t._v("\n\n              "+t._s(t.result.unique_code)+"\n\n              "),n("div",{staticClass:"hinted-text"},[t._v("\n                Ссылка скопирована\n              ")])]),t._v(" "),n("IconLink",{staticClass:"ml-2"})],1)]),t._v(" "),n("div",{staticClass:"unique-id__links"},[t.result.unique_code?n("div",{staticClass:"unique-id__links-item"},[t.isFavorite?n("div",[t._v("\n              Сохранено в избранном\n            ")]):n("div",[t.isFavoriteLoading?[n("Loader",{attrs:{inline:!0}})]:[n("a",{attrs:{href:"javascript:"},on:{click:t.onFavoriteClick}},[t._v("\n                  Сохранить в избранное\n                ")])]],2)]):t._e(),t._v(" "),n("div",{staticClass:"unique-id__links-item"},[n("a",{attrs:{href:"javascript:"},on:{click:t.createTradeInPdf}},[t._v("\n              Загрузить расчет в pdf\n            ")])]),t._v(" "),n("div",{staticClass:"unique-id__links-item"},[n("a",{attrs:{href:"javascript:"},on:{click:t.openPdfSubmissionForm}},[t._v("\n              Отправить на email\n            ")])]),t._v(" "),n("div",{staticClass:"unique-id__links-item"},[n("a",{attrs:{href:"javascript:"},on:{click:t.toggleSmsPopup}},[t._v("\n              Отправить по sms\n            ")])])])]):t._e(),t._v(" "),t.isPopup?t._e():n("div",{staticClass:"trade-in-calc__summary-info mt-14 mb-12"},[n("div",{staticClass:"inline-flex items-center cursor-pointer text-s1 mb-6"},[t._v("\n          Характеристики авто\n          "),n("IconEdit",{staticClass:"ml-2 color-black",on:{click:t.toFormClick}})],1),t._v(" "),n("div",{staticClass:"trade-in-calc__summary-info-params tablet:flex"},t._l(t.resultItemsColumns,(function(e,i){return n("div",{key:i,staticClass:"trade-in-calc__summary-info-params-section"},t._l(e,(function(e,i){return n("dl",{key:i},[n("dt",[t._v(t._s(e.name))]),t._v(" "),n("dd",[t._v(t._s(e.value))])])})),0)})),0),t._v(" "),t.result.kiaModel?n("div",[n("div",{staticClass:"text-x5 desktop:text-x4 mt-14"},[t._v("\n            Выбранный автомобиль: Kia "+t._s(t.result.kiaModel.modelLine)+"\n          ")]),t._v(" "),n("car-card",{attrs:{model:t.result.kiaModel,disclaimer:t.result.kiaModelPriceDisclaimer},on:{"price-info":t.openPricePopup,"car-conf-click":function(e){return t.dataLayerPush("Trade-in","Results","Configurator")},"car-stock-click":function(e){return t.dataLayerPush("Trade-in","Results","Car locator")},"car-credit-click":function(e){return t.dataLayerPush("Trade-in","Results","Loan calculator")}}})],1):t._e()])])],1),t._v(" "),t.showRequest&&!t.isPopup?n("g-form-wrapper",[n("FormTradein",{ref:"formTradeIn",attrs:{id:"trade_in_request",agreement:t.tradeInRequestAgreement,model:t.model,resultId:t.result.id,uniqueCode:t.result.unique_code,sms:t.smsConfirmProps,dataLayerInfo:t.prepareDataLayerInfo},on:{"trade-in-name-input":function(e){return t.dataLayerPush("Form","Results","First name")},"trade-in-phone-input":function(e){return t.dataLayerPush("Form","Results","Phone")},"trade-in-dealer-choice":function(e){return t.dataLayerPush("Dealer search pop-up","Open")}}})],1):t._e(),t._v(" "),n("PopupOffer",{attrs:{offer:t.popupOffer,"is-popup-shown":t.isOfferPopupOpen},on:{"toggle-info-popup":t.closePopupOffer}}),t._v(" "),t.needOfferConfirm?n("ConfirmOfferPopup",{on:{cancel:t.closeOfferConfirmPopup,apply:t.applyOfferConfirmPopup}}):t._e(),t._v(" "),t.popupConfigId.isOpened?n("Popup",[n("PopupContent",{attrs:{popup:t.popupConfigId.data},on:{"toggle-info-popup":t.closePopupConfigId}})],1):t._e(),t._v(" "),t.popup.isOpened?n("popup",[n("price-info-content",{attrs:{popup:t.popup.data},on:{"toggle-info-popup":t.closePopup}})],1):t._e(),t._v(" "),n("g-padding",[n("g-container",[t.isPopup?t._e():n("ViewAlso",{on:{"view-also-credit-click":function(e){return t.dataLayerPush("Navigation","Additional information","Loan calculator")},"view-also-special-click":function(e){return t.dataLayerPush("Navigation","Additional information","Special offers for purchase")},"view-also-models-click":function(e){return t.dataLayerPush("Navigation","Additional information","All models")}}}),t._v(" "),n("Disclaimer",{staticClass:"mt-12 mb-16",attrs:{"is-popup":t.isPopup,text:t.popupDisclaimer,color:"color-disabled-gray",open:t.isOpenDisclaimer},on:{"toggle-disclaimer":t.toggleDisclaimer}})],1)],1),t._v(" "),n("Results",{attrs:{tradeInResultCode:t.result.unique_code}}),t._v(" "),t.isPopupFavoriteOpened?n("Popup",[n("PopupContentForm",{attrs:{"component-name":t.popupFormComponent,"component-props":t.popupFormProps},on:{"close-popup":t.closePopupFavorite}})],1):t._e(),t._v(" "),t.isPopupPdfSendingOpened?n("Popup",[n("PopupContentForm",{attrs:{"component-name":"SendPdf","component-props":t.pdfSendingProps},on:{"close-popup":t.closePdfSubmissionForm,"send-pdf-email-input":function(e){return t.dataLayerPush("Form","Send trade-in to email","Email")}}})],1):t._e(),t._v(" "),t.smsPopupIsOpen?n("Popup",[n("PopupContentForm",{attrs:{"component-name":"LinkBySms","component-props":t.smsSendingProps},on:{"close-popup":t.toggleSmsPopup,"link-by-sms-input":function(e){return t.dataLayerPush("Form","Send trade-in in sms","Phone")}}})],1):t._e()],1)}),[],!1,null,"185c0654",null).exports),nt=n(997),it={props:{selected:Object,tradeInRequestAgreement:Object,isResultLoading:Boolean,result:Object,applyTradeInProgram:Boolean,showOffers:{type:Boolean,default:!0},isPopup:{type:Boolean,default:function(){return!1}}},created:function(){return this.isPopup?Object(nt.a)(this.$store,this.$error,"trade-in/loadPopupDisclaimer","buy-trade-in-result").then((function(){}),(function(){})):Object(nt.a)(this.$store,this.$error,"layout/loadDisclaimer","buy-trade-in-result").then((function(){}),(function(){}))},activated:function(){this.isPopup?document.getElementsByClassName("popup-tradein__content")[0].scrollTo(0,0):window.scrollTo(0,0)},components:{Final:et}},rt=Object(O.a)(it,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("Final",{attrs:{selected:t.selected,result:t.result,isResultLoading:t.isResultLoading,tradeInRequestAgreement:t.tradeInRequestAgreement,isPopup:t.isPopup,"show-offers":t.showOffers},on:{"prev-step":function(e){return t.$emit("prev-step")},"submit-popup":function(e){return t.$emit("submit-popup")},"first-step":function(e){return t.$emit("first-step")},"clear-credit":function(e){return t.$emit("clear-credit")}}})}),[],!1,null,null,null);e.a=rt.exports},1184:function(t,e,n){"use strict";n(7),n(3),n(375),n(38),n(26),n(9),n(10),n(8),n(5);var i=n(15),r=n(18),s=n(14),a=n.n(s),o=n(1068),c=n(382),l=n(110),u=n(1083),d={props:{brands:Array},computed:{groupedBrands:function(){var t={};return this.brands.forEach((function(e){var n=e.name.substr(0,1);t[n]?t[n].push(e):t[n]=[e]})),t}},components:{IconStar:u.a}},p=(n(1173),n(2)),f=Object(p.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"trade-in-calc__models-list mt-8"},t._l(t.groupedBrands,(function(e,i){return n("div",{key:i,staticClass:"trade-in-calc__models-item"},[n("div",{staticClass:"trade-in-calc__models-item-letter text-x4"},[t._v("\n      "+t._s(i)+"\n    ")]),t._v(" "),n("ul",t._l(e,(function(e,i){return n("li",{key:i,on:{click:function(n){return t.$emit("select-brand",e.id)}}},[e.has_star?n("IconStar",{staticClass:"trade-in-calc__models-item-star color-kia-red"}):t._e(),t._v("\n        "+t._s(e.name)+"\n      ")],1)})),0)])})),0)}),[],!1,null,"2dfe4764",null).exports,m={props:{brands:Array},components:{IconTickRight:l.a,IconStar:u.a}},h=(n(1174),Object(p.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"trade-in-calc__models-featured mt-8 mb-6"},[n("ul",[t._l(t.brands,(function(e,i){return n("li",{key:i,on:{click:function(n){return t.$emit("select-brand",e.id)}}},[e.has_star?n("IconStar",{staticClass:"trade-in-calc__models-item-star color-forest-green"}):t._e(),t._v("\n      "+t._s(e.name)+"\n    ")],1)})),t._v(" "),n("li",[n("div",{staticClass:"inline-flex items-center text-s2-b cursor-pointer",on:{click:function(e){return t.$emit("select-all-tab")}}},[t._v("\n        Все марки\n        "),n("IconTickRight")],1)])],2)])}),[],!1,null,"8d9e21b8",null).exports),_=n(107),v=n(24),g=n(76),b=n(50),y=n.n(b);function C(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?C(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n(1048);var O={mixins:[v.a],data:function(){return{isLoading:!1,activeTabIndex:0,vin:null,vinError:null}},props:{brands:Array,currentVin:String,isPopup:{type:Boolean,default:function(){return!1}}},created:function(){a()(this.brands)&&this.loadBrands(),this.dataLayerPush("Trade-in","Select car brand","Start",null,!0)},computed:P({wrapperClass:function(){return this.isPopup?"trade-in-calc":"trade-in-calc mt-8 mb-12"}},Object(r.e)("trade-in",["brand"]),{tabs:function(){var t=[];return this.popularBrands.length&&t.push({name:"Популярные",code:"popular"}),t.push({name:"Все марки",code:"all"}),t},currentTab:function(){return this.tabs[this.activeTabIndex]},categoryTabs:function(){return this.tabs.map((function(t){return t.name}))},allBrands:function(){return this.brands.map((function(t){return t.has_star="kia"===t.name.toLowerCase(),t}))},popularBrands:function(){return this.allBrands.filter((function(t){return t.is_popular}))}}),methods:P({},Object(r.b)("trade-in",["loadBrands"]),{},Object(r.d)("trade-in",["setUniqueCode"]),{selectCategory:function(t){this.activeTabIndex=t,this.dataLayerPush("Trade-in","Select car brand",0===t?"All brands":"Popular brands")},selectTabByCode:function(t){var e=y()(this.tabs,{code:t});-1!==e&&(this.activeTabIndex=e)},selectBrandHandler:function(t){this.vin=null,this.$emit("select-brand",t);var e=this.brands.find((function(e){return e.id===t})).name;this.dataLayerPush("Trade-in","Select car brand","Select brand",{CarBrand:e})},onSubmit:function(){this.vin&&this.vin.length&&(this.$emit("decode-vin",this.vin),this.currentVin!==this.vin&&this.showLoader())},showLoader:function(){this.isLoading=!0},hideLoader:function(){this.isLoading=!1},onVinDecodeSuccess:function(){this.hideLoader(),this.vinError=null},onVinDecodeFail:function(){this.hideLoader(),this.vinError="Ошибка расшифровки VIN номера"}}),activated:function(){this.isPopup?document.getElementsByClassName("popup-tradein__content")[0].scrollTo(0,0):window.scrollTo(0,0)},components:{Disclaimer:o.a,NavTabs:c.a,AllBrands:f,PopularBrands:h,IconTickRight:l.a,ValidationProvider:g.b,ValidationObserver:g.a,Loader:_.a}},x=(n(1175),Object(p.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.wrapperClass},[n("g-padding",[n("g-container",[t.isPopup?n("div",[n("div",{staticClass:"text-x5 desktop:text-x4 mb-6"},[t._v("\n          Трейд-ин оценка\n        ")]),t._v(" "),n("div",{staticClass:"text-s1 mb-3"},[t._v("\n          Оцените свой авто\n        ")])]):n("div",{staticClass:"text-x5 tablet:text-x4 mb-6 tablet:mb-8"},[t._v("\n        Ваш автомобиль\n      ")]),t._v(" "),n("ValidationObserver",{scopedSlots:t._u([{key:"default",fn:function(e){var i=e.handleSubmit;return[n("div",{staticClass:"trade-in-calc__car flex"},[n("div",{staticClass:"trade-in-calc__car-input"},[n("ValidationProvider",{attrs:{rules:"length:17"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[n("g-form-control",{attrs:{type:"text",placeholder:"Введите VIN-номер",addClassName:"form-control_common w-full",error:i[0]||t.vinError},model:{value:t.vin,callback:function(e){t.vin=e},expression:"vin"}})]}}],null,!0)})],1),t._v(" "),n("div",{staticClass:"trade-in-calc__car-button"},[n("button",{staticClass:"trade-in-calc__car-button-item button button_primary button_small",on:{click:function(e){return i(t.onSubmit)}}},[n("IconTickRight")],1)])]),t._v(" "),n("div",{staticClass:"trade-in-calc__vin-loader"},[t.isLoading?n("Loader"):t._e()],1)]}}])}),t._v(" "),t.brands.length?n("div",{staticClass:"trade-in-calc__models mt-10"},[n("div",{staticClass:"trade-in-calc__models-header mb-4"},[n("span",{staticClass:"trade-in-calc__models-header-title"},[t._v("\n            Или выберите из списка\n          ")])]),t._v(" "),n("NavTabs",{attrs:{tabs:t.categoryTabs,activeTabIndex:t.activeTabIndex},on:{"select-tab":t.selectCategory}}),t._v(" "),n("keep-alive",["all"===t.currentTab.code?[n("AllBrands",{attrs:{brands:t.allBrands},on:{"select-brand":t.selectBrandHandler}})]:t._e(),t._v(" "),"popular"===t.currentTab.code?[n("PopularBrands",{attrs:{brands:t.popularBrands},on:{"select-all-tab":function(e){return t.selectTabByCode("all")},"select-brand":t.selectBrandHandler}})]:t._e()],2)],1):t._e(),t._v(" "),n("Disclaimer")],1)],1)],1)}),[],!1,null,"80d4f878",null));e.a=x.exports},1185:function(t,e,n){"use strict";n(7),n(13),n(3),n(375),n(33),n(26),n(9),n(10),n(8),n(5);var i=n(15),r=n(24),s=(n(108),n(1069)),a={mixins:[n(37).a],props:{selected:Object},computed:{formatedMileage:function(){if(!this.selected.mileage)return null;var t=parseInt(this.selected.mileage);return t>0?this.formatNumber(t," "," "):null}},components:{AsideBlock:s.a}},o=(n(1176),n(2)),c=Object(o.a)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("AsideBlock",[n("template",{slot:"title"},[t._v("\n    Ваш автомобиль\n  ")]),t._v(" "),n("template",{slot:"body"},[n("g-container",[n("div",{staticClass:"trade-in-calc__form-aside-title text-x5 mb-6"},[t._v("\n        Ваш автомобиль\n      ")]),t._v(" "),n("div",{staticClass:"trade-in-calc__form-aside-params"},[n("div",{staticClass:"trade-in-calc__form-aside-params-section"},[t.selected.brand?n("dl",[n("dt",[t._v("Марка")]),t._v(" "),n("dd",[t._v(t._s(t.selected.brand.name))])]):t._e(),t._v(" "),t.selected.model?n("dl",[n("dt",[t._v("Модель")]),t._v(" "),n("dd",[t._v(t._s(t.selected.model.name))])]):t._e(),t._v(" "),t.selected.year?n("dl",[n("dt",[t._v("Год выпуска")]),t._v(" "),n("dd",[t._v(t._s(t.selected.year.name))])]):t._e(),t._v(" "),t.selected.generation&&""!==t.selected.generation.name?n("dl",[n("dt",[t._v("Поколение")]),t._v(" "),n("dd",[t._v(t._s(t.selected.generation.name))])]):t._e()]),t._v(" "),n("div",{staticClass:"trade-in-calc__form-aside-params-section"},[t.selected.modification?n("dl",[n("dt",[t._v("Модификация")]),t._v(" "),n("dd",[t._v(t._s(t.selected.modification.name))])]):t._e(),t._v(" "),t.selected.configuration?n("dl",[n("dt",[t._v("Тип кузова")]),t._v(" "),n("dd",[t._v(t._s(t.selected.configuration.name))])]):t._e(),t._v(" "),t.selected.engine?n("dl",[n("dt",[t._v("Двигатель")]),t._v(" "),n("dd",[t._v(t._s(t.selected.engine.name))])]):t._e(),t._v(" "),t.selected.drive?n("dl",[n("dt",[t._v("Привод")]),t._v(" "),n("dd",[t._v(t._s(t.selected.drive.name))])]):t._e(),t._v(" "),t.selected.gearbox?n("dl",[n("dt",[t._v("КПП")]),t._v(" "),n("dd",[t._v(t._s(t.selected.gearbox.name))])]):t._e()]),t._v(" "),n("div",{staticClass:"trade-in-calc__form-aside-params-section"},[t.formatedMileage?n("dl",[n("dt",[t._v("Пробег")]),t._v(" "),n("dd",[t._v(t._s(t.formatedMileage))])]):t._e()]),t._v(" "),n("div",{staticClass:"trade-in-calc__form-aside-params-section trade-in-calc__form-aside-params-section_sep"},[t.selected.complectation?n("dl",[n("dt",[t._v("Комплектация")]),t._v(" "),n("dd",[t._v(t._s(t.selected.complectation.name))])]):t._e(),t._v(" "),t.selected.ownerCount?n("dl",[n("dt",[t._v("Владельцев")]),t._v(" "),n("dd",[t._v(t._s(t.selected.ownerCount))])]):t._e(),t._v(" "),t.selected.ptsType?n("dl",[n("dt",[t._v("ПТС")]),t._v(" "),n("dd",[t._v(t._s(t.selected.ptsType.name))])]):t._e()])])])],1)],2)}),[],!1,null,"22297338",null).exports,l={data:function(){return{}}},u=(n(1177),Object(o.a)(l,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"trade-in-calc__form-content"},[e("div",{staticClass:"trade-in-calc__form-content-body"},[this._t("body")],2),this._v(" "),this._t("footer")],2)}),[],!1,null,"2add09d2",null).exports),d=n(1139),p=n(1068),f=n(163),m=n(76),h=n(14),_=n.n(h),v=n(56),g=n.n(v),b=n(18);function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var P={mixins:[r.a],data:function(){return{showAddons:!0,form:this.getDefaultFormData(),formState:{},loaded:!1}},props:{brand:Object,cities:Array,options:Object,selected:Object,enginesById:Object,drivesById:Object,gearboxesById:Object,isFormShort:Boolean,needClearForm:Boolean,isDictionariesLoaded:Boolean,isPopup:{type:Boolean,default:function(){return!1}}},computed:C({selectedCity:function(){var t=this;if(this.isCitiesLoaded&&this.isUserCityLoaded){var e=this.cities.filter((function(e){return e.code===t.geoCity.code}));return _()(e)?null:(this.form.city=e[0],this.selectCityHandler(e[0]),e[0])}},wrapperClass:function(){return this.isPopup?"trade-in-calc__form trade-in-calc__form_popup":"trade-in-calc__form mt-6"},fieldsClass:function(){return this.isPopup?"trade-in-calc__form-fields trade-in-calc__popup-coloumns":"trade-in-calc__form-fields"}},Object(b.e)("geo-position",{geoCity:"city"}),{},Object(b.e)("trade-in",["unique_code","model","year","generation","configuration","modification","complectation","drive","engine","gearbox","ptsType","mileage","steeringWheel","ownerCount","city","isFormChanged"]),{generations:function(){var t=[];return this.form.year&&this.form.year.id&&0!==this.options.generations.length&&this.options.generations.forEach((function(e){t.push({id:e.id,name:""===e.name?"Без поколения":e.name})})),t},isCitiesLoaded:function(){return 0!==this.cities.length},isUserCityLoaded:function(){return 0!==this.geoCity.length}}),methods:C({},Object(b.b)("trade-in",["loadCities","loadBrands","loadDictionaries"]),{},Object(b.d)("trade-in",["setUniqueCode","setIsFormChanged"]),{getDefaultFormState:function(){var t={};return Object.keys(this.form).forEach((function(e){t[e]={loading:!1,disabled:!0}})),t},toggleAddons:function(){this.showAddons=!this.showAddons,setTimeout((function(){window.dispatchEvent(new Event("resize"))}),10)},changeFormState:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.formState[t][e]=n},lockFields:function(t){var e=this;t.forEach((function(t){e.changeFormState(t,"disabled")})),-1!==t.indexOf("modification")&&(this.changeFormState("drive","disabled",!1),this.changeFormState("engine","disabled",!1),this.changeFormState("gearbox","disabled",!1)),this.unique_code||this.clearFields(t)},clearFields:function(t){var e=this;-1!==t.indexOf("modification")&&this.form.modification&&(t=t.concat(["drive","engine","gearbox"])),t.forEach((function(t){e.form[t]=null})),this.$emit("clear-form-fields",t)},unlockFields:function(t){var e=this;t.forEach((function(t){e.changeFormState(t,"disabled",!1),e.changeFormState(t,"loading",!1)}))},selectBrandHandler:function(t){this.lockFields(["model","year","generation","configuration","modification","complectation"]),this.changeFormState("model","loading"),this.emitSelectFormEntity("brand",t.id)},onModelsLoaded:function(){var t=this;this.unlockFields(["model"]),this.$nextTick((function(){1===t.options.models.length?(t.form.model=t.options.models[0],t.selectModelHandler(t.options.models[0])):t.unique_code&&(t.form.model=t.model,t.selectModelHandler(t.model))}))},selectModelHandler:function(t){this.lockFields(["year","generation","configuration","modification","complectation"]),this.changeFormState("year","loading"),this.emitSelectFormEntity("model",t.id)},onYearsLoaded:function(){var t=this;this.unlockFields(["year"]),this.$nextTick((function(){1===t.options.years.length?(t.form.year=t.options.years[0],t.selectYearHandler(t.options.years[0])):t.unique_code&&(t.form.year=t.year,t.selectYearHandler(t.year))}))},selectYearHandler:function(t){this.lockFields(["generation","configuration","modification","complectation"]),this.changeFormState("generation","loading"),this.emitSelectFormEntity("year",t.id)},onGenerationsLoaded:function(){var t=this;this.unlockFields(["generation"]),this.$nextTick((function(){1===t.generations.length?(t.form.generation=t.generations[0],t.selectGenerationHandler(t.generations[0])):t.unique_code&&(t.form.generation=t.generation,t.selectGenerationHandler(t.generation))}))},selectGenerationHandler:function(t){this.lockFields(["configuration","modification","complectation"]),this.changeFormState("configuration","loading"),this.emitSelectFormEntity("generation",t?t.id:null)},onConfigurationsLoaded:function(){var t=this;this.unlockFields(["configuration"]),this.$nextTick((function(){1===t.options.configurations.length?(t.form.configuration=t.options.configurations[0],t.selectConfigurationHandler(t.options.configurations[0])):t.unique_code&&t.configuration&&(t.form.configuration=t.configuration,t.selectConfigurationHandler(t.configuration))}))},selectConfigurationHandler:function(t){this.lockFields(["modification","complectation"]),this.changeFormState("modification","loading"),this.emitSelectFormEntity("configuration",t?t.id:null)},onModificationsLoaded:function(){var t=this;this.unlockFields(["modification"]),this.$nextTick((function(){1===t.options.modifications.length?(t.form.modification=t.options.modifications[0],t.selectModificationHandler(t.options.modifications[0])):t.unique_code&&(t.form.modification=t.modification,t.selectModificationHandler(t.modification))}))},selectModificationHandler:function(t){this.lockFields(["complectation"]),this.changeFormState("complectation","loading"),this.emitSelectFormEntity("modification",t?t.id:null),this.checkModificationEntities(t)},onComplectationsLoaded:function(){var t=this;this.unlockFields(["complectation"]),this.$nextTick((function(){1===t.options.complectations.length?(t.form.complectation=t.options.complectations[0],t.selectComplectationHandler(t.options.complectations[0])):t.unique_code&&(t.form.complectation=t.complectation,t.selectComplectationHandler(t.complectation))}))},selectComplectationHandler:function(t){this.emitSelectFormEntity("complectation",t?t.id:null),this.unique_code&&this.setUniqueCode(null)},selectEngineHandler:function(t){this.emitSelectFormEntity("engine",t.id)},selectDriveHandler:function(t){this.emitSelectFormEntity("drive",t.id)},selectGearboxHandler:function(t){this.emitSelectFormEntity("gearbox",t.id)},changeOwnerCountHandler:function(t){this.emitSelectFormEntity("owner_count",t)},changePtsHandler:function(t){this.emitSelectFormEntity("pts_type",t)},changeMileageHandler:function(t){this.emitSelectFormEntity("mileage",t)},selectWheelHandler:function(t){this.emitSelectFormEntity("wheel-right",t?"right":"left")},selectCityHandler:function(t){this.emitSelectFormEntity("city",t)},emitSelectFormEntity:function(t,e){this.setIsFormChanged(!0),this.$emit("select-form-entity",t,e)},checkModificationEntities:function(t){if(t){if(t.drive_id&&this.drivesById[t.drive_id]){var e=this.drivesById[t.drive_id];this.form.drive=e,this.selectDriveHandler(e),this.changeFormState("drive","disabled")}else this.changeFormState("drive","disabled",!1);if(t.engine_id&&this.enginesById[t.engine_id]){var n=this.enginesById[t.engine_id];this.form.engine=n,this.selectEngineHandler(n),this.changeFormState("engine","disabled")}else this.changeFormState("engine","disabled",!1);if(t.gearbox_id&&this.gearboxesById[t.gearbox_id]){var i=this.gearboxesById[t.gearbox_id];this.form.gearbox=i,this.selectGearboxHandler(i),this.changeFormState("gearbox","disabled")}else this.changeFormState("gearbox","disabled",!1)}else this.changeFormState("drive","disabled"),this.changeFormState("engine","disabled"),this.changeFormState("gearbox","disabled")},onSubmit:function(){var t={VehicleEngine:g()(this.selected,"engine.code",null),DriveUnit:g()(this.selected,"drive.code",null),UsedCarMileage:g()(this.selected,"mileage",null),UsedCarYearOfIssue:g()(this.selected,"year.name",null),UsedCarNumberOfOwners:g()(this.selected,"ownerCount",null),City:g()(this.selected,"city.name_en",null),BodyType:g()(this.selected,"modification.body_type",null),CarBrand:g()(this.selected,"brand.name",null),CarGeneration:g()(this.selected,"generation.name",null),CompleteSets:g()(this.selected,"complectation.name",null)};this.dataLayerPush("Trade-in","Car characteristics","Calculate",t,!1),this.$emit("submit-form",this.isFormChanged)},getDefaultFormData:function(){return{brand:null,model:null,year:null,generation:null,configuration:null,modification:null,complectation:null,pts:null,mileage:null,drive:null,engine:null,gearbox:null,wheelRight:!1,ownerCount:null,city:null}},ptsChecked:function(t){return this.ptsType&&this.ptsType.id===t.id},addToDataLayer:function(t,e){void 0===window.dataLayer.find((function(n){return n.EventAction===t&&n.EventLabel===e}))&&this.dataLayerPush("Form",t,e,null,!1)},handleBack:function(){this.$emit("prev-step"),this.dataLayerPush("Trade-in","Car characteristics","Back",null,!1)}}),activated:function(){this.isPopup?document.getElementsByClassName("popup-tradein__content")[0].scrollTo(0,0):window.scrollTo(0,0),this.needClearForm&&(this.formState=this.getDefaultFormState(),this.form=this.getDefaultFormData()),this.form.brand&&this.form.brand.id===this.selected.brand.id||(this.form.brand=this.selected.brand),this.showAddons=!0},created:function(){var t=this;this.unique_code&&!this.needClearForm&&(this.loadBrands().then((function(){t.selectBrandHandler(t.selected.brand),t.form.city=t.city,t.form.mileage=t.mileage,t.form.ownerCount=t.ownerCount,t.form.wheelRight="right"===t.steeringWheel})),this.loadCities(),this.loadDictionaries()),this.formState=this.getDefaultFormState(),this.form.brand&&this.form.brand.id===this.selected.brand.id||(this.form.brand=this.selected.brand),this.options.models.length&&this.onModelsLoaded(),this.dataLayerPush("Trade-in","Car characteristics","Start",null,!0)},components:{FormAside:c,FormContent:u,FormButtons:d.a,Disclaimer:p.a,IconTickDown:f.a,ValidationProvider:m.b,ValidationObserver:m.a}},O=(n(1178),Object(o.a)(P,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.wrapperClass},[n("g-padding",[n("g-container",{staticClass:"flex"},[t.isPopup?t._e():n("FormAside",{attrs:{selected:t.selected}}),t._v(" "),n("ValidationObserver",{staticClass:"trade-in-calc__form-content-wrap",scopedSlots:t._u([{key:"default",fn:function(e){var i=e.handleSubmit;return[n("FormContent",{scopedSlots:t._u([{key:"body",fn:function(){return[t.isPopup?n("div",[n("div",{staticClass:"text-x5 desktop:text-x4 mb-6"},[t._v("\n                Трейд-ин оценка\n              ")])]):n("div",[n("div",{staticClass:"text-s1 mb-2"},[t._v("\n                Характеристики вашего авто\n              ")]),t._v(" "),n("div",{staticClass:"mb-4"},[t._v("\n                Параметры, необходимые для оценки автомобиля\n              ")])]),t._v(" "),t.isFormShort?[n("div",{staticClass:"trade-in-calc__form-fields"},[n("div",{staticClass:"trade-in-calc__form-fields-item"},[n("ValidationProvider",{attrs:{rules:"required|integer|min_value:1"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[n("g-form-control",{attrs:{type:"text",label:"Пробег, км *",maxlength:"10",error:i[0]},on:{input:t.changeMileageHandler},nativeOn:{focusout:function(e){return t.addToDataLayer("Car characteristics","Mileage")}},model:{value:t.form.mileage,callback:function(e){t.$set(t.form,"mileage",e)},expression:"form.mileage"}})]}}],null,!0)})],1),t._v(" "),n("div",{staticClass:"w-full"}),t._v(" "),n("div",{staticClass:"trade-in-calc__form-fields-item"},[n("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[n("g-select",{staticClass:"multiselect_small form-control_text",attrs:{placeholder:"Город",searchable:!0,"has-label":!0,loading:!t.isCitiesLoaded,disabled:!t.isCitiesLoaded,options:t.cities,selected:t.selectedCity,error:i[0]},on:{input:t.selectCityHandler},nativeOn:{focusout:function(e){return t.addToDataLayer("Car characteristics","City")}},model:{value:t.form.city,callback:function(e){t.$set(t.form,"city",e)},expression:"form.city"}})]}}],null,!0)})],1)]),t._v(" "),n("div",{on:{click:t.toggleAddons}},[n("div",{staticClass:"trade-in-calc__form-fields-toggle flex items-center justify-between cursor-pointer"},[n("div",{staticClass:"mr-2 text-s1"},[t._v("Дополнительная информация")]),t._v(" "),n("IconTickDown",{class:[{"trade-in-calc__form-fields-toggle-icon-opened":t.showAddons}]})],1),t._v(" "),n("div",{staticClass:"mt-2"},[t._v("\n                  Если вы заполните эти поля, то повысите точность расчета\n                ")])]),t._v(" "),n("div",{class:["trade-in-calc__form-addons",{hidden:!t.showAddons}]},[n("div",{staticClass:"trade-in-calc__form-fields"},[n("div",{staticClass:"trade-in-calc__form-fields-item"},[n("ValidationProvider",{attrs:{rules:"integer|min_value:1"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[n("g-form-control",{attrs:{type:"text",label:"Владельцев по ПТС",maxlength:"2",error:i[0]},on:{input:t.changeOwnerCountHandler},nativeOn:{focusout:function(e){return t.addToDataLayer("Car characteristics","Owners")}},model:{value:t.form.ownerCount,callback:function(e){t.$set(t.form,"ownerCount",e)},expression:"form.ownerCount"}})]}}],null,!0)})],1),t._v(" "),n("div",{staticClass:"w-full"}),t._v(" "),t.options.ptsTypes.length?n("div",{staticClass:"trade-in-calc__form-fields-item mt-6"},[n("div",{staticClass:"text-s2-b"},[t._v("ПТС")]),t._v(" "),n("div",{staticClass:"flex flex-wrap"},t._l(t.options.ptsTypes,(function(e,i){return n("g-form-control",{key:i,staticClass:"mt-4 mr-6",attrs:{type:"radio",name:"pts_type",label:e.name,id:e.id,selected:t.form.pts,checked:t.ptsChecked(e)},on:{input:function(n){return t.changePtsHandler(e.id)}},nativeOn:{focusout:function(e){return t.addToDataLayer("Car characteristics","Registration certificate")}},model:{value:t.form.pts,callback:function(e){t.$set(t.form,"pts",e)},expression:"form.pts"}})})),1)]):t._e()])]),t._v(" "),t.isPopup?n("div",{staticClass:"w-1/2"},[n("g-button",{staticClass:"button-border text-s2i-b",nativeOn:{click:function(e){return i(t.onSubmit)}}},[n("span",[t._v("Рассчитать")])])],1):t._e(),t._v(" "),n("Disclaimer")]:[n("div",{staticClass:"trade-in-calc__form-fields trade-in-calc__form-fields_cols"},[n("div",{staticClass:"trade-in-calc__form-fields-item"},[n("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[n("g-select",{staticClass:"multiselect_small form-control_text",attrs:{placeholder:"Марка автомобиля *","no-options":"Нет такой марки",searchable:!0,"has-label":!0,loading:!1,disabled:!1,options:t.options.brands,selectFunction:"select",selected:t.selected.brand,error:i[0]},on:{select:t.selectBrandHandler},nativeOn:{focusout:function(e){return t.addToDataLayer("Car characteristics","Car brand")}},model:{value:t.form.brand,callback:function(e){t.$set(t.form,"brand",e)},expression:"form.brand"}})]}}],null,!0)})],1),t._v(" "),n("div",{staticClass:"trade-in-calc__form-fields-item"},[n("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[n("g-select",{staticClass:"multiselect_small form-control_text",attrs:{placeholder:"Модель *","no-options":"Нет такой модели",searchable:!0,"has-label":!0,loading:t.formState.model.loading,disabled:t.formState.model.disabled||0===t.options.models.length,options:t.options.models,selectFunction:"select",selected:t.form.model,error:i[0]},on:{select:t.selectModelHandler},nativeOn:{focusout:function(e){return t.addToDataLayer("Car characteristics","Model")}},model:{value:t.form.model,callback:function(e){t.$set(t.form,"model",e)},expression:"form.model"}})]}}],null,!0)})],1),t._v(" "),n("div",{staticClass:"trade-in-calc__form-fields-item"},[n("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[n("g-select",{staticClass:"multiselect_small form-control_text",attrs:{placeholder:"Год выпуска *","no-options":"",searchable:!0,"has-label":!0,loading:t.formState.year.loading,disabled:t.formState.year.disabled||0===t.options.years.length,options:t.options.years,selected:t.form.year,selectFunction:"select",error:i[0]},on:{select:t.selectYearHandler},nativeOn:{focusout:function(e){return t.addToDataLayer("Car characteristics","Year of Issue")}},model:{value:t.form.year,callback:function(e){t.$set(t.form,"year",e)},expression:"form.year"}})]}}],null,!0)})],1),t._v(" "),n("div",{staticClass:"trade-in-calc__form-fields-item"},[n("g-select",{staticClass:"multiselect_small form-control_text",attrs:{placeholder:"Поколение","no-options":"",searchable:!0,"has-label":!0,loading:t.formState.generation.loading,disabled:t.formState.generation.disabled||0===t.generations.length,options:t.generations,selected:t.form.generation,selectFunction:"select"},on:{select:t.selectGenerationHandler},nativeOn:{focusout:function(e){return t.addToDataLayer("Car characteristics","Generation")}},model:{value:t.form.generation,callback:function(e){t.$set(t.form,"generation",e)},expression:"form.generation"}})],1),t._v(" "),n("div",{staticClass:"trade-in-calc__form-fields-item"},[n("g-select",{staticClass:"multiselect_small form-control_text",attrs:{placeholder:"Тип кузова","no-options":"",searchable:!0,"has-label":!0,loading:t.formState.configuration.loading,disabled:t.formState.configuration.disabled||0===t.options.configurations.length,options:t.options.configurations,selected:t.form.configuration,selectFunction:"select"},on:{select:t.selectConfigurationHandler},nativeOn:{focusout:function(e){return t.addToDataLayer("Car characteristics","Body type")}},model:{value:t.form.configuration,callback:function(e){t.$set(t.form,"configuration",e)},expression:"form.configuration"}})],1),t._v(" "),n("div",{staticClass:"trade-in-calc__form-fields-item"},[n("g-select",{staticClass:"multiselect_small form-control_text",attrs:{placeholder:"Модификация","no-options":"",searchable:!0,"has-label":!0,loading:t.formState.modification.loading,disabled:t.formState.modification.disabled||0===t.options.modifications.length,options:t.options.modifications,selected:t.form.modification,selectFunction:"select"},on:{select:t.selectModificationHandler},nativeOn:{focusout:function(e){return t.addToDataLayer("Car characteristics","Modification")}},model:{value:t.form.modification,callback:function(e){t.$set(t.form,"modification",e)},expression:"form.modification"}})],1),t._v(" "),n("div",{staticClass:"trade-in-calc__form-fields-item"},[n("g-select",{staticClass:"multiselect_small form-control_text",attrs:{placeholder:"Двигатель","no-options":"",searchable:!0,"has-label":!0,loading:t.formState.engine.loading,disabled:t.formState.engine.disabled||0===t.options.engines.length,options:t.options.engines,selected:t.form.engine,selectFunction:"select"},on:{select:t.selectEngineHandler},nativeOn:{focusout:function(e){return t.addToDataLayer("Car characteristics","Engine")}},model:{value:t.form.engine,callback:function(e){t.$set(t.form,"engine",e)},expression:"form.engine"}})],1),t._v(" "),n("div",{staticClass:"trade-in-calc__form-fields-item"},[n("g-select",{staticClass:"multiselect_small form-control_text",attrs:{placeholder:"Привод","no-options":"",searchable:!0,"has-label":!0,loading:t.formState.drive.loading,disabled:t.formState.drive.disabled||0===t.options.drives.length,options:t.options.drives,selected:t.form.drive,selectFunction:"select"},on:{select:t.selectDriveHandler},nativeOn:{focusout:function(e){return t.addToDataLayer("Car characteristics","Drive unit")}},model:{value:t.form.drive,callback:function(e){t.$set(t.form,"drive",e)},expression:"form.drive"}})],1),t._v(" "),n("div",{staticClass:"trade-in-calc__form-fields-item"},[n("g-select",{staticClass:"multiselect_small form-control_text",attrs:{placeholder:"КПП","no-options":"",searchable:!0,"has-label":!0,loading:t.formState.gearbox.loading,disabled:t.formState.gearbox.disabled||0===t.options.gearboxes.length,options:t.options.gearboxes,selected:t.form.gearbox,selectFunction:"select"},on:{select:t.selectGearboxHandler},nativeOn:{focusout:function(e){return t.addToDataLayer("Car characteristics","Transmission")}},model:{value:t.form.gearbox,callback:function(e){t.$set(t.form,"gearbox",e)},expression:"form.gearbox"}})],1),t._v(" "),n("div",{staticClass:"w-full"}),t._v(" "),n("div",{staticClass:"trade-in-calc__form-fields-item"},[n("ValidationProvider",{attrs:{rules:"required|integer|min_value:1"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[n("g-form-control",{attrs:{type:"text",label:"Пробег, км *",maxlength:"10",error:i[0]},on:{input:t.changeMileageHandler},nativeOn:{focusout:function(e){return t.addToDataLayer("Car characteristics","Mileage")}},model:{value:t.form.mileage,callback:function(e){t.$set(t.form,"mileage",e)},expression:"form.mileage"}})]}}],null,!0)})],1),t._v(" "),n("div",{staticClass:"w-full"}),t._v(" "),n("div",{staticClass:"trade-in-calc__form-fields-item"},[n("ValidationProvider",{attrs:{rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[n("g-select",{staticClass:"multiselect_small form-control_text",attrs:{placeholder:"Город",searchable:!0,"has-label":!0,"is-above":!0,loading:!t.isCitiesLoaded,disabled:!t.isCitiesLoaded,options:t.cities,selected:t.selectedCity,error:i[0]},on:{input:t.selectCityHandler},nativeOn:{focusout:function(e){return t.addToDataLayer("Car characteristics","City")}},model:{value:t.form.city,callback:function(e){t.$set(t.form,"city",e)},expression:"form.city"}})]}}],null,!0)})],1)]),t._v(" "),n("div",{on:{click:t.toggleAddons}},[n("div",{staticClass:"trade-in-calc__form-fields-toggle flex items-center justify-between cursor-pointer"},[n("div",{staticClass:"mr-2 text-s1"},[t._v("Дополнительная информация")]),t._v(" "),n("IconTickDown",{class:[{"trade-in-calc__form-fields-toggle-icon-opened":t.showAddons}]})],1),t._v(" "),n("div",{staticClass:"mt-2"},[t._v("\n                  Если вы заполните эти поля, то повысите точность расчета\n                ")])]),t._v(" "),n("div",{class:["trade-in-calc__form-addons",{hidden:!t.showAddons}]},[n("div",{staticClass:"trade-in-calc__form-fields"},[n("div",{staticClass:"trade-in-calc__form-fields-item"},[n("g-select",{staticClass:"multiselect_small form-control_text",attrs:{placeholder:"Комплектация","no-options":"",searchable:!0,"has-label":!0,loading:t.formState.complectation.loading,disabled:t.formState.complectation.disabled||0===t.options.complectations.length,options:t.options.complectations,selected:t.form.complectation,selectFunction:"select"},on:{select:t.selectComplectationHandler},nativeOn:{focusout:function(e){return t.addToDataLayer("Car characteristics","Equipment")}},model:{value:t.form.complectation,callback:function(e){t.$set(t.form,"complectation",e)},expression:"form.complectation"}})],1),t._v(" "),n("div",{staticClass:"trade-in-calc__form-fields-item"},[n("ValidationProvider",{attrs:{rules:"integer|min_value:1"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[n("g-form-control",{attrs:{type:"text",label:"Владельцев по ПТС",maxlength:"2",error:i[0]},on:{input:t.changeOwnerCountHandler},nativeOn:{focusout:function(e){return t.addToDataLayer("Car characteristics","Owners")}},model:{value:t.form.ownerCount,callback:function(e){t.$set(t.form,"ownerCount",e)},expression:"form.ownerCount"}})]}}],null,!0)})],1),t._v(" "),t.options.ptsTypes.length?n("div",{staticClass:"trade-in-calc__form-fields-item mt-6"},[n("div",{staticClass:"text-s2-b"},[t._v("ПТС")]),t._v(" "),n("div",{staticClass:"flex flex-wrap"},t._l(t.options.ptsTypes,(function(e,i){return n("g-form-control",{key:i,staticClass:"mt-4 mr-6",attrs:{type:"radio",name:"pts_type",label:e.name,id:e.id,selected:t.form.pts,checked:t.ptsChecked(e)},on:{input:function(n){return t.changePtsHandler(e.id)}},nativeOn:{focusout:function(e){return t.addToDataLayer("Car characteristics","Registration certificate")}},model:{value:t.form.pts,callback:function(e){t.$set(t.form,"pts",e)},expression:"form.pts"}})})),1)]):t._e(),t._v(" "),n("div",{staticClass:"trade-in-calc__form-fields-item mt-6"},[n("div",{staticClass:"text-s2-b hidden tablet:block"},[t._v(" ")]),t._v(" "),n("g-form-control",{staticClass:"tablet:mt-4",attrs:{type:"checkbox",id:"wheelRight",label:"Правый руль",checked:t.form.wheelRight},on:{input:t.selectWheelHandler},nativeOn:{focusout:function(e){return t.addToDataLayer("Car characteristics","Right hand drive")}},model:{value:t.form.wheelRight,callback:function(e){t.$set(t.form,"wheelRight",e)},expression:"form.wheelRight"}})],1)])]),t._v(" "),t.isPopup?n("div",{staticClass:"w-1/2"},[n("g-button",{staticClass:"button-border text-s2i-b",nativeOn:{click:function(e){return i(t.onSubmit)}}},[n("span",[t._v("Рассчитать")])])],1):t._e(),t._v(" "),n("Disclaimer")]]},proxy:!0},t.isPopup?null:{key:"footer",fn:function(){return[n("FormButtons",{attrs:{showPrevBtn:!0,textPrevBtn:"Шаг назад",showNextBtn:!0,textNextBtn:"Рассчитать"},on:{"click-prev":t.handleBack,"click-next":function(e){return i(t.onSubmit)}}})]},proxy:!0}],null,!0)})]}}])})],1)],1)],1)}),[],!1,null,"78e66334",null));e.a=O.exports},1187:function(t,e,n){"use strict";n(3),n(33),n(5);var i=n(1190),r=n.n(i),s=n(19),a=n.n(s),o=n(1116),c=n.n(o),l=n(117),u=n.n(l),d=n(83),p=n(1027),f=n(24),m=n(37),h=n(1073),_=n(377),v=n(48),g={mixins:[m.a,f.a],data:function(){return{selectedOffers:[],offerPopupDescription:"",isPopupOpen:!1,offer:{},isPopupShown:!1}},props:{offers:{type:Array,default:[]},title:{type:String,default:"Спецпредложения"},endTitle:{type:String,default:""},isConfigurator:{type:Boolean,default:!1}},computed:{offersById:function(){return a()(this.offers,"id")},totalPrice:function(){var t=this,e=0;return this.selectedOffers.forEach((function(n){e+=t.offersById[n].price})),e}},methods:{isOfferSelected:function(t){return-1!==this.selectedOffers.indexOf(t)},openPopup:function(t){this.offerPopupDescription=t,this.isPopupOpen=!0},closePopup:function(t){this.isPopupOpen=!1},addSpecialOffer:function(t){if(this.isOfferSelected(t))this.isConfigurator&&this.dataLayerPush("Configurator","Results","Deactivate special offer"),this.selectedOffers=this.selectedOffers.filter((function(e){return e!==t}));else{this.isConfigurator&&this.dataLayerPush("Configurator","Results","Activate special offer");var e=r()(this.selectedOffers);e.push(t);var n=this.offersById[t].excludes;if(n.length>0){var i=u()(e,n);i.length>0&&(e=c()(e,i)),this.selectedOffers=e}else this.selectedOffers.push(t)}this.$emit("select-offer",t,this.selectedOffers)},showPopupInfo:function(t){this.offer=t,this.isPopupShown=!0,this.dataLayerPush("Info pop-up","Special offer description","Open")},closePopupInfo:function(){this.isPopupShown=!1}},components:{IconInfo:_.a,IconPlus:h.a,Popup:d.a,CloseIcon:v.a,PopupInfo:p.a}},b=(n(1170),n(2)),y=Object(b.a)(g,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"car-params is-offers"},[n("div",{staticClass:"car-params__section car-params__section_odd"},[n("div",{staticClass:"car-params__section__title text-x5 tablet:text-x4 mb-6 flex flex-wrap items-center"},[n("span",{staticClass:"mr-2"},[t._v(t._s(t.title)+" "+t._s(t.endTitle))]),t._v(" "),t.selectedOffers.length>1?n("span",{staticClass:"car-params__section__title__label"},[t._v("\n        Суммарная выгода "),n("span",[t._v(t._s(t.formatMoney(t.totalPrice)))])]):t._e()]),t._v(" "),n("nav",{staticClass:"car-params__section__items"},[n("ul",{staticClass:"flex tablet:flex-row tablet:flex-wrap"},t._l(t.offers,(function(e){return n("li",{key:e.id,on:{click:function(){return t.addSpecialOffer(e.id)}}},[n("div",{class:["car-params__section__button",{active:t.isOfferSelected(e.id)}]},[n("div",{staticClass:"car-params__section__button__name flex items-center cursor-pointer"},[n("figure",{staticClass:"flex items-center justify-center"},[n("icon-plus")],1),t._v(" "),n("div",[t._v("\n                "+t._s(e.name)+"\n              ")])]),t._v(" "),e.price?n("div",{staticClass:"car-params__section__button__value text-s2i-b desktop:text-s1"},[t._v("\n              Выгода "+t._s(t.formatMoney(e.price))+"\n            ")]):t._e(),t._v(" "),e.description||e.advantage_text||e.condition_text?n("icon-info",{staticClass:"icon-info",on:{click:function(n){return n.stopPropagation(),t.showPopupInfo(e)}}}):t._e()],1)])})),0)]),t._v(" "),t.isPopupOpen?n("Popup",{attrs:{disableBodyScroll:""}},[n("div",{staticClass:"car-params__popup-wrapper flex items-center justify-center"},[n("div",{staticClass:"car-params__popup w-full px-22 pb-20 pt-16"},[n("button",{staticClass:"car-params__close-button",on:{click:function(){return t.closePopup()}}},[n("CloseIcon")],1),t._v(" "),n("div",[t._v(t._s(t.offerPopupDescription))])])])]):t._e(),t._v(" "),n("PopupInfo",{attrs:{offer:t.offer,"is-popup-shown":t.isPopupShown},on:{"toggle-info-popup":t.closePopupInfo}})],1)])}),[],!1,null,null,null);e.a=y.exports},1188:function(t,e,n){"use strict";n(7),n(3),n(33),n(38),n(26),n(9),n(10),n(8),n(6),n(69),n(27),n(43),n(5);var i=n(15),r=n(19),s=n.n(r),a=n(18),o=n(62),c=n(107),l=n(162),u=n(112),d=n(998),p=n(24),f=n(1184),m=n(1185),h=n(1183),_=n(0),v=n(997),g=n(534);function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var C={mixins:[d.a,p.a],props:{car:{type:Object,default:function(){return{}}},skipLoading:{type:Boolean,default:function(){return!1}},showOffers:{type:Boolean,default:function(){return!0}}},data:function(){return{currentStepIndex:0,isFormShort:!1,needClearForm:!1,vin:null,userData:{},result:{id:null,price:null},isResultLoading:!0,steps:{brands:{name:"Марка вашего авто",component:f.a},form:{name:"Характеристики авто",component:m.a},results:{name:"Результаты оценки",component:h.a}}}},mounted:function(){Object(o.disableBodyScroll)(this.$refs.popup,{reserveScrollBarGap:!0})},beforeDestroy:function(){Object(o.enableBodyScroll)(this.$refs.popup)},computed:y({},Object(a.e)("trade-in",["brand","model","year","generation","configuration","modification","complectation","drive","engine","gearbox","ptsType","mileage","ownerCount","steeringWheel","city","price","marginalityPrice","tradeInId","date","unique_code","brands","models","years","drives","engines","gearboxes","ptsTypes","generations","configurations","modifications","complectations","cities","tradeInRequestAgreement"]),{currentStep:{get:function(){return this.steps[this.currentStepName]},set:function(t){this.currentStepIndex=t}},currentStepName:function(){return this.stepNames[this.currentStepIndex]},stepNames:function(){return Object.keys(this.steps)},progressSteps:function(){return Object.values(this.steps).map((function(t){return{name:t.name}}))},isDictionariesLoaded:function(){return 0!==this.drives.length||0!==this.engines.length||0!==this.gearboxes.length||0!==this.ptsTypes.length},isTradeInCalcForm:function(){return"form"===this.currentStepName},brandsById:function(){return s()(this.brands,"id")},modelsById:function(){return s()(this.models,"id")},yearsById:function(){return s()(this.years,"id")},generationsById:function(){return s()(this.generations,"id")},configurationsById:function(){return s()(this.configurations,"id")},modificationsById:function(){return s()(this.modifications,"id")},complectationsById:function(){return s()(this.complectations,"id")},enginesById:function(){return s()(this.engines,"id")},drivesById:function(){return s()(this.drives,"id")},gearboxesById:function(){return s()(this.gearboxes,"id")},ptsTypesById:function(){return s()(this.ptsTypes,"id")},isStepDataEmpty:function(){switch(this.currentStepName){case"brands":return!this.brands.length;case"form":case"results":default:return!1}}}),methods:y({},Object(a.b)("trade-in",["loadCities","commitDecodeVin","checkIsFavorite","loadDictionaries","loadTradeInRequestAgreement"]),{},Object(a.d)("trade-in",["setModels","setYears","setGenerations","setConfigurations","setModifications","setComplectations","setTradeInId","setBrand","setModel","setYear","setGeneration","setConfiguration","setModification","setComplectation","setDrive","setEngine","setGearbox","setPtsType","setOwnerCount","setMileage","setSteeringWheel","setCity","clearStates"]),{},Object(a.d)("cars-detail",["setTradeInBenefit","setTradeInData"]),{},Object(a.b)("watched",["addWatched"]),{setBrandById:function(t){this.setBrand(this.brandsById[t]||null)},selectStepHandler:function(t){this.currentStep=t},nextStep:function(){this.currentStep=this.currentStepIndex+1},prevStep:function(){this.currentStep=this.currentStepIndex-1},firstStep:function(){this.currentStep=0,this.clearFormStateData(),this.brands.length||Object(v.a)(this.$store,this.error,"trade-in/loadBrands",null)},getBrandsStepProps:function(){return{brands:this.brands,currentVin:this.vin,isPopup:!0}},getFormStepProps:function(){return{isFormShort:this.isFormShort,needClearForm:this.needClearForm,isDictionariesLoaded:this.isDictionariesLoaded,selected:this.getSelectedFields(),enginesById:this.enginesById,drivesById:this.drivesById,gearboxesById:this.gearboxesById,isPopup:!0,options:{brands:this.brands,models:this.models,years:this.years,generations:this.generations,configurations:this.configurations,modifications:this.modifications,complectations:this.complectations,drives:this.drives,engines:this.engines,ptsTypes:this.ptsTypes,gearboxes:this.gearboxes},cities:this.cities}},getSelectedFields:function(){return{brand:this.brand,model:this.model,year:this.year,generation:this.generation,configuration:this.configuration,modification:this.modification,complectation:this.complectation,drive:this.drive,engine:this.engine,gearbox:this.gearbox,ptsType:this.ptsType,mileage:this.mileage,ownerCount:this.ownerCount,city:this.city}},getResultsStepProps:function(){return{result:this.result,selected:this.getSelectedFields(),isResultLoading:this.isResultLoading,tradeInRequestAgreement:this.tradeInRequestAgreement,isPopup:!0,showOffers:this.showOffers}},getCurrentStepProps:function(){switch(this.currentStepName){case"brands":return this.getBrandsStepProps();case"form":return this.getFormStepProps();case"results":return this.getResultsStepProps();default:return{}}},selectBrandHandler:function(t){if(!this.$refs.currentStep.isLoading){var e=null!==this.vin||this.isFormShort;this.brand&&this.brand.id===t&&!e?(this.needClearForm=!1,this.nextStep()):(this.clearFormStateData(),this.needClearForm=!0,this.vin=null,this.isFormShort=!1,this.checkDictionaries(),this.checkCities(),this.nextStep(),this.selectFormBrandHandler(t))}},clearFormStateData:function(){this.clearStates(["brand","model","year","generation","configuration","modification","complectation","drive","engine","gearbox","ptsType","mileage","steeringWheel","ownerCount","isFavorite"])},decodeVinHandler:function(t){var e=this;if(this.checkDictionaries(),this.checkCities(),this.vin!==t){var n=null!==this.brand;n&&this.clearFormStateData(),this.needClearForm=n,_.a.decodeTradeInVin(t).then((function(n){0===n.data.error&&0!==n.data.content.length?(e.commitDecodeVin(n.data.content),e.isFormShort=!0,e.vin=t):e.isFormShort=!1})).catch((function(t){e.isFormShort=!1})).finally((function(){e.$refs.currentStep.hideLoader(),e.nextStep(),e.addToDataLayer("Select car brand","VIN check")}))}else this.nextStep()},clearFormFieldsHandler:function(t){this.clearStates(t)},selectFormEntityHandler:function(t,e){switch(t){case"brand":this.selectFormBrandHandler(e);break;case"model":this.selectFormModelHandler(e);break;case"generation":this.selectFormGenerationHandler(e);break;case"year":this.selectFormYearHandler(e);break;case"configuration":this.selectFormConfigurationHandler(e);break;case"modification":this.selectFormModificationHandler(e);break;case"complectation":this.selectFormComplectationHandler(e);break;case"engine":this.selectFormEngineHandler(e);break;case"drive":this.selectFormDriveHandler(e);break;case"gearbox":this.selectFormGearboxHandler(e);break;case"pts_type":this.selectFormPtsTypeHandler(e);break;case"owner_count":this.selectFormOwnerCountHandler(e);break;case"mileage":this.selectFormMileageHandler(e);break;case"wheel-right":this.selectFormWheelRightHandler(e);break;case"city":this.selectFormCityHandler(e)}},selectFormBrandHandler:function(t){var e=this;this.setBrandById(t),_.a.getTradeInModels(t).then((function(t){0===t.data.error&&void 0!==t.data.content.models&&(e.setModels(t.data.content.models),e.$refs.currentStep.onModelsLoaded())}))},selectFormModelHandler:function(t){var e=this;this.setModel(this.modelsById[t]||null),_.a.getTradeInYears(t).then((function(t){0===t.data.error&&void 0!==t.data.content.years&&(e.setYears(t.data.content.years),e.$refs.currentStep.onYearsLoaded())}))},selectFormYearHandler:function(t){var e=this;this.setYear(this.yearsById[t]||null),_.a.getTradeInGenerations(this.model.id,t).then((function(t){0===t.data.error&&void 0!==t.data.content.generations&&(e.setGenerations(t.data.content.generations),e.$refs.currentStep.onGenerationsLoaded())}))},selectFormGenerationHandler:function(t){var e=this;this.setGeneration(this.generationsById[t]||null),_.a.getTradeInConfigurations(this.model.id,t,this.year.id).then((function(t){0===t.data.error&&void 0!==t.data.content.body_configurations&&(e.setConfigurations(t.data.content.body_configurations),e.$refs.currentStep.onConfigurationsLoaded())}))},selectFormConfigurationHandler:function(t){var e=this;this.setConfiguration(this.configurationsById[t]||null),_.a.getTradeInModifications(this.model.id,this.generation.id,t,this.year.id).then((function(t){0===t.data.error&&void 0!==t.data.content.modifications&&(e.setModifications(t.data.content.modifications),e.$refs.currentStep.onModificationsLoaded())}))},selectFormModificationHandler:function(t){var e=this;this.setModification(this.modificationsById[t]||null),_.a.getTradeInComplectations(t).then((function(t){0===t.data.error&&void 0!==t.data.content.complectations&&(e.setComplectations(t.data.content.complectations),e.$refs.currentStep.onComplectationsLoaded())}))},selectFormComplectationHandler:function(t){this.setComplectation(this.complectationsById[t]||null)},selectFormEngineHandler:function(t){this.setEngine(this.enginesById[t]||null)},selectFormDriveHandler:function(t){this.setDrive(this.drivesById[t]||null)},selectFormGearboxHandler:function(t){this.setGearbox(this.gearboxesById[t]||null)},selectFormPtsTypeHandler:function(t){this.setPtsType(this.ptsTypesById[t]||null)},selectFormOwnerCountHandler:function(t){this.setOwnerCount(t)},selectFormMileageHandler:function(t){this.setMileage(t)},selectFormCityHandler:function(t){this.setCity(t)},submitFormHandler:function(t){this.needClearForm=!1,this.checkCities(),this.nextStep(),t&&(this.tradeInRequestAgreement.id||this.loadTradeInRequestAgreement(),this.getTradeInExpressRating())},selectFormWheelRightHandler:function(t){this.setSteeringWheel(t)},getTradeInExpressRating:function(){var t=this,e=new FormData;e.append("source","trade_in"),e.append("brand_id",this.brand.id),e.append("model_id",this.model.id),this.car.model_id&&e.append("kia_model_id",this.car.model_id),this.generation&&e.append("generation_id",this.generation.id),this.configuration&&e.append("body_configuration_id",this.configuration.id),this.modification&&e.append("modification_id",this.modification.id),this.complectation&&e.append("complectation_id",this.complectation.id),e.append("year",this.year.id),e.append("city_id",this.city.id),e.append("latitude",this.city.lat),e.append("longitude",this.city.lng),this.drive&&e.append("drive_id",this.drive.id),this.engine&&e.append("engine_id",this.engine.id),this.gearbox&&e.append("gearbox_id",this.gearbox.id),this.ptsType&&e.append("pts_type_id",this.ptsType.id),e.append("mileage",this.mileage),this.ownerCount&&e.append("owner_count",this.ownerCount),e.append("steering_wheel",this.steeringWheel||"left"),this.vin&&e.append("vin",this.vin),this.isResultLoading=!0,_.a.tradeInExpressRating(e).then((function(e){t.isResultLoading=!1,0!==e.data.error?t.clearExpressRatingResult():(void 0!==e.data.content.marginality_price&&e.data.content.marginality_price>0&&(t.setTradeInId(e.data.content.id),t.result={id:e.data.content.id,marginalityPrice:e.data.content.marginality_price,price:void 0!==e.data.content.price?e.data.content.price:null,unique_code:e.data.content.unique_code,created_at:e.data.content.created_at,kiaModel:t.kiaModel,kiaModelPriceDisclaimer:t.kiaModelPriceDisclaimer}),0!==e.data.content.length&&void 0!==e.data.content.price&&0!==e.data.content.price||(t.setTradeInId(null),t.result={id:null,price:0,kiaModel:t.kiaModel,created_at:e.data.content.created_at,kiaModelPriceDisclaimer:t.kiaModelPriceDisclaimer}),void 0!==e.data.content.unique_code&&t.checkIsFavorite(e.data.content.id))})).catch((function(e){t.clearExpressRatingResult()}))},clearExpressRatingResult:function(){this.isResultLoading=!1,this.setTradeInId(null),this.result={id:null,price:null}},preparePhone:function(t){return t.replace(/[^0-9]/g,"")},checkDictionaries:function(){this.isDictionariesLoaded||this.loadDictionaries()},checkCities:function(){0===this.cities.length&&this.loadCities()},addToDataLayer:function(t,e){this.dataLayerPush("Trade-in",t,e,null,!1)}}),created:function(){this.skipLoading&&(this.isResultLoading=!1),this.unique_code?(this.currentStepIndex=this.stepNames.indexOf("results"),this.marginalityPrice&&this.marginalityPrice>0&&(this.result={id:this.tradeInId,price:this.price,marginalityPrice:this.marginalityPrice,created_at:this.date,unique_code:this.unique_code}),this.checkIsFavorite(this.result.id)):this.brands.length||Object(v.a)(this.$store,this.error,"trade-in/loadBrands",null)},activated:function(){this.brands.length||Object(v.a)(this.$store,this.error,"trade-in/loadBrands",null),this.tradeInId&&this.addWatched({type:g.watchedTypes.tradeIn,id:this.tradeInId})},components:{IconTickLeft:l.a,IconClose:u.a,Loader:c.a}},P=(n(1205),n(2)),O=Object(P.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"popup",staticClass:"popup-tradein"},[n("div",{staticClass:"popup-tradein__overlay",on:{click:function(e){return t.$emit("close-popup")}}}),t._v(" "),n("div",{staticClass:"popup-tradein__body"},[n("div",{staticClass:"popup-tradein__content"},[n("IconClose",{staticClass:"cursor-pointer ml-auto mr-4 block",on:{click:function(e){return t.$emit("close-popup")}}}),t._v(" "),n("div",[n("keep-alive",[t.isStepDataEmpty?n("Loader"):t._e(),t._v(" "),n(t.currentStep.component,t._b({ref:"currentStep",tag:"component",on:{"select-brand":t.selectBrandHandler,"decode-vin":t.decodeVinHandler,"select-form-entity":t.selectFormEntityHandler,"clear-form-fields":t.clearFormFieldsHandler,"submit-form":t.submitFormHandler,"prev-step":function(e){return t.prevStep()},"first-step":t.firstStep,"submit-popup":function(e){return t.$emit("submit-popup")},"clear-credit":function(e){return t.$emit("clear-credit")}}},"component",t.getCurrentStepProps(),!1))],1)],1)],1)])])}),[],!1,null,null,null);e.a=O.exports},1203:function(t,e,n){"use strict";var i=n(1076);n.n(i).a},1204:function(t,e,n){"use strict";var i=n(1077);n.n(i).a},1205:function(t,e,n){"use strict";var i=n(1078);n.n(i).a},1206:function(t,e,n){"use strict";var i=n(1079);n.n(i).a},1207:function(t,e,n){"use strict";var i=n(1080);n.n(i).a},1208:function(t,e,n){"use strict";var i=n(1081);n.n(i).a},1221:function(t,e,n){"use strict";n(7),n(3),n(36),n(9),n(10),n(8),n(5);var i=n(15),r=n(1117),s=n.n(r),a=n(18),o=n(37),c=n(377),l=(n(17),n(13),n(6),["class","staticClass","style","staticStyle","attrs"]);function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},s=Object.keys(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var f={functional:!0,render:function(t,e){var n=e._c,i=(e._v,e.data),r=e.children,s=void 0===r?[]:r,a=i.class,o=i.staticClass,c=i.style,f=i.staticStyle,m=i.attrs,h=void 0===m?{}:m,_=p(i,l);return n("svg",function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({class:[a,o],style:[c,f],attrs:Object.assign({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},h)},_),s.concat([n("path",{attrs:{d:"M15 14l-5-5-5 5",stroke:"currentColor","stroke-width":"2"}})]))}},m=n(83),h=n(374),_={mixins:[o.a],props:{resalePrice:Number},data:function(){return{popupData:{title:"Максимальная цена перепродажи",description:"\n        <p><b>".concat(this.formatMoney(this.resalePrice),'</b> — максимальная цена перепродажи автомобиля, установленная ООО "Киа Россия и СНГ".</p>\n        '),buttonClose:!0,noMarginTitle:!0}}},components:{Popup:m.a,PopupContent:h.a}},v=n(2),g=Object(v.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Popup",[n("PopupContent",{attrs:{popup:t.popupData},on:{"toggle-info-popup":function(e){return t.$emit("toggle-resale-price-popup")}}})],1)}),[],!1,null,null,null).exports,b=n(1038),y={mixins:[o.a],props:{dealerPrice:Number,resalePrice:Number},data:function(){return{popupData:{title:"Цена с учетом выгод и доп. оборудования",description:"\n        <p><b>".concat(this.formatMoney(this.dealerPrice),"</b> — розничная цена продажи, установленная дилером Kia, и которая может включать стоимость установленного доп. оборудования и/или выгод, предоставляемых дилером.</p>\n        <p><b>").concat(this.formatMoney(this.resalePrice),'</b> — максимальная цена перепродажи автомобиля, установленная ООО "Киа Россия и СНГ".</p>\n        '),buttonClose:!0,noMarginTitle:!0}}},components:{Popup:m.a,PopupContent:h.a}},C=Object(v.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Popup",[n("PopupContent",{attrs:{popup:t.popupData},on:{"toggle-info-popup":function(e){return t.$emit("toggle-resale-price-popup")}}})],1)}),[],!1,null,null,null).exports;function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}var O={name:"price",mixins:[o.a],data:function(){return{isBenefitOpened:!1,isResalePricePopupOpened:!1,isDealerPricePopupOpened:!1}},props:{isPopup:Boolean,totalPrice:Number,priceDependence:{type:Array,default:[]}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(a.e)("cars-detail",["car"]),{benefitPrice:function(){var t=0;return s()(this.priceDependence,(function(e){t=e.isAdd?t-e.value:t+e.value})),t},hasDealerPrice:function(){return this.car.price!==this.car.resale_price}}),methods:{benefitToggle:function(){this.isBenefitOpened=!this.isBenefitOpened},toggleResalePricePopup:function(){this.isResalePricePopupOpened=!this.isResalePricePopupOpened},toggleDealerPricePopup:function(){this.isDealerPricePopupOpened=!this.isDealerPricePopupOpened}},components:{IconInfo:c.a,TickUpIcon:f,TickDownIcon:b.a,PopupResalePrice:g,PopupDealerPrice:C}},x=(n(1277),Object(v.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"calculator-popup__price"},[n("div",{staticClass:"calculator-popup__price-result",class:t.isPopup?"mt-3":"mt-0"},[n("div",{staticClass:"text-x4"},[t._v("\n      "+t._s(t.formatMoney(t.car.price-t.benefitPrice))+"\n    ")]),t._v(" "),t.hasDealerPrice?n("div",{staticClass:"calculator-popup__price-popup mt-1"},[n("span",{staticClass:"calculator-popup__price-popup-text text-s2 color-dark-gray"},[t._v("Цена с учетом выгод и доп. опций")]),t._v(" "),n("IconInfo",{staticClass:"calculator-popup__price-popup-btn",on:{click:t.toggleDealerPricePopup}})],1):n("div",{staticClass:"calculator-popup__price-popup mt-1"},[n("span",{staticClass:"calculator-popup__price-popup-text text-s2 color-dark-gray"},[t._v("Максимальная цена перепродажи")]),t._v(" "),n("IconInfo",{staticClass:"calculator-popup__price-popup-btn",on:{click:t.toggleResalePricePopup}})],1)]),t._v(" "),t.benefitPrice?n("div",{staticClass:"calculator-popup__price-benefit pb-2 mt-2"},[n("div",{staticClass:"flex justify-between items-center mb-2 cursor-pointer",on:{click:t.benefitToggle}},[t._v("\n      Суммарная выгода "+t._s(t.formatMoney(t.benefitPrice))+"\n      "),t.isBenefitOpened?n("TickUpIcon"):n("TickDownIcon")],1),t._v(" "),t._l(t.priceDependence,(function(e){return n("div",{directives:[{name:"show",rawName:"v-show",value:t.isBenefitOpened,expression:"isBenefitOpened"}],key:e.id,staticClass:"flex justify-between calculator-popup__price-benefit-item text-s3 mt-2 mb-1"},[n("div",[t._v(t._s(e.label))]),t._v(" "),n("div",[e.value?n("div",{staticClass:"no-wrap-price"},[t._v("\n          "+t._s((e.isAdd?"+":"-")+" "+t.formatMoney(e.value))+"\n        ")]):t._e()])])}))],2):t._e(),t._v(" "),t.isResalePricePopupOpened?n("PopupResalePrice",{attrs:{"resale-price":t.car.resale_price},on:{"toggle-resale-price-popup":t.toggleResalePricePopup}}):t._e(),t._v(" "),t.isDealerPricePopupOpened?n("PopupDealerPrice",{attrs:{"dealer-price":t.car.price-t.benefitPrice,"resale-price":t.car.resale_price},on:{"toggle-resale-price-popup":t.toggleDealerPricePopup}}):t._e()],1)}),[],!1,null,null,null));e.a=x.exports},1222:function(t,e,n){"use strict";var i=n(998),r=n(31),s=n(37),a=n(1005),o={name:"advantages",mixins:[i.a,r.a,s.a],props:{items:{type:Array,default:function(){return[]}}},data:function(){return{swiperOptions:{navigation:{prevEl:".advantages-carousel__button_prev",nextEl:".advantages-carousel__button_next"},slidesPerView:"auto"},resize:"375x211"}},components:{RoundArrowButton:a.a}},c=(n(1203),n(2)),l=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"advantages-carousel"},[t._t("header"),t._v(" "),n("div",{staticClass:"advantages-carousel__slider"},[n("div",{staticClass:"advantages-carousel__items"},[n("div",{directives:[{name:"swiper",rawName:"v-swiper:slider",value:t.swiperOptions,expression:"swiperOptions",arg:"slider"}],staticClass:"advantages-carousel__slider-container"},[n("div",{staticClass:"advantages-carousel__slider-wrapper swiper-wrapper"},[t._l(t.items,(function(e,i){return[n("div",{staticClass:"advantages-carousel__item swiper-slide"},[n("div",{staticClass:"advantages-carousel__item-image"},[n("img",{staticClass:"advantages-carousel__item-image-img",attrs:{src:t.getResizeImagePath(e.image,t.resize),alt:""}})]),t._v(" "),n("div",{staticClass:"advantages-carousel__item-name"},[t._v("\n                "+t._s(e.name)+"\n              ")])])]}))],2)])]),t._v(" "),n("RoundArrowButton",{staticClass:"advantages-carousel__button advantages-carousel__button_prev swiper-button-disabled",attrs:{isTransparent:!0}}),t._v(" "),n("RoundArrowButton",{staticClass:"advantages-carousel__button advantages-carousel__button_next swiper-button-disabled",attrs:{isRight:!0,isTransparent:!0}})],1)],2)}),[],!1,null,"2ff84d26",null);e.a=l.exports},1223:function(t,e,n){"use strict";n(36);var i={props:{label:String,oldValue:[String,Number],value:[String,Number],hideValue:{type:Boolean,default:!1}}},r=(n(1208),n(2)),s=Object(r.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex justify-between cheque-row"},[n("div",{staticClass:"text-s2"},[t._v(t._s(t.label))]),t._v(" "),n("div",{staticClass:"text-s2-b ml-6 cheque-row-value"},[!t.hideValue&&t.oldValue?n("div",{staticClass:"cheque-row-value--old relative color-disabled-gray"},[t._v("\n      "+t._s(t.oldValue)+"\n    ")]):t._e(),t._v(" "),t.hideValue?t._e():n("div",[t._v(t._s(t.value))])])])}),[],!1,null,null,null);e.a=s.exports},1225:function(t,e,n){"use strict";n(7),n(3),n(84),n(9),n(10),n(8),n(69),n(111),n(5);var i=n(15),r=n(1027),s=n(37),a=n(1070),o=n(18);function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var u={name:"calc-offers",mixins:[s.a],props:{inCredit:{type:Boolean,default:!1}},data:function(){return{popupOffer:{},isOfferPopupOpen:!1,needOfferConfirm:!1}},computed:l({},Object(o.e)("calculator",["offers","selectedOffers","disabledOffers","isPopupCreditSelected"]),{specialOffers:function(){return Object.values(this.offers).filter((function(t){return!t.is_calc&&!t.is_traid_in&&!t.is_base}))}}),methods:l({},Object(o.d)("calculator",["setOffer"]),{isDisabledOffer:function(t){return this.disabledOffers.includes(t)},selectOffer:function(t,e){this.isPopupCreditSelected&&!this.inCredit?(e.preventDefault(),this.popupOffer=t,this.needOfferConfirm=!0):this.setOffer(t)},showPopupOffer:function(t){this.popupOffer=t,this.isOfferPopupOpen=!0},closePopupOffer:function(){this.isOfferPopupOpen=!1},closeOfferConfirmPopup:function(){this.needOfferConfirm=!1},applyOfferConfirmPopup:function(){this.needOfferConfirm=!1,this.$emit("clear-credit"),this.setOffer(this.popupOffer)}}),components:{PopupOffer:r.a,ConfirmOfferPopup:a.a}},d=(n(1273),n(2)),p=Object(d.a)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.specialOffers.length>0?n("div",{staticClass:"catalog-detail-summary__offers"},[n("div",{staticClass:"catalog-detail-summary__offers-title"},[t._v("Спецпредложения")]),t._v(" "),t._l(t.specialOffers,(function(e){return n("div",{key:e.id,staticClass:"catalog-detail-summary__offers-item"},[n("div",{staticClass:"catalog-detail-summary__offers-item-row"},[n("g-checkbox",{attrs:{id:e.id,val:e.id,label:e.name,value:t.selectedOffers,disabled:t.isDisabledOffer(e.id)},on:{click:function(n){return t.selectOffer(e,n)}}}),t._v(" "),e.description||e.advantage_text||e.condition_text?n("span",{staticClass:"block ml-2",on:{click:function(n){return n.stopPropagation(),t.showPopupOffer(e)}}},[n("g-info-icon",{staticClass:"block",attrs:{theme:"black"}})],1):t._e()],1),t._v(" "),n("div",{staticClass:"catalog-detail-summary__offers-item-price"},[t._v("\n      Выгода - "+t._s(t.formatMoney(e.price))+"\n    ")])])})),t._v(" "),t.needOfferConfirm?n("ConfirmOfferPopup",{on:{cancel:t.closeOfferConfirmPopup,apply:t.applyOfferConfirmPopup}}):t._e(),t._v(" "),n("PopupOffer",{attrs:{offer:t.popupOffer,"is-popup-shown":t.isOfferPopupOpen},on:{"toggle-info-popup":t.closePopupOffer}})],2):t._e()}),[],!1,null,null,null);e.a=p.exports},1226:function(t,e,n){"use strict";var i={props:{buttonText:{type:String,default:" Заявка на онлайн одобрение"},currentBank:Object,calcResultParams:Object},methods:{handleIntersectLeave:function(t){t[0].boundingClientRect.top>=0&&this.$emit("show-panel")}}},r=(n(1206),n(2)),s=Object(r.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mt-6 desktop:mt-8"},[n("intersect",{attrs:{threshold:[1]},on:{enter:function(e){return t.$emit("hide-panel")},leave:t.handleIntersectLeave}},[n("g-button",{staticClass:"approval__button mb-7 tablet:mb-0 desktop1440:mr-4",attrs:{as:"nuxt-link",to:{name:"buy-credit",params:{calcResult:t.calcResultParams}}}},[t._v("\n      "+t._s(t.buttonText)+"\n    ")])],1)],1)}),[],!1,null,null,null);e.a=s.exports},1227:function(t,e,n){"use strict";var i=n(48),r={props:{isSlider:{type:Boolean,default:!1},popup:{type:Object,default:function(){return{}}},fullActions:{Boolean:Boolean,default:!1}},data:function(){return{bBuyBlockFixed:!0}},mounted:function(){this.handleScrollPopup(),window.addEventListener("resize",this.handleScrollPopup)},beforeDestroy:function(){window.removeEventListener("resize",this.handleScrollPopup)},methods:{emitClose:function(){this.$emit("toggle-popup"),this.$parent.$emit("toggle-popup")},handleScrollPopup:function(){var t=document.querySelector(".popup"),e=document.querySelector(".popup-accessory-content"),n=(t.scrollTop,t.scrollHeight,t.clientHeight),i=e.clientHeight;this.bBuyBlockFixed=i>n,t.addEventListener("scroll",(function(){}))}},components:{Close:i.a}},s=(n(1207),n(2)),a=Object(s.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"popup-accessory-content bg-white pt-6 desktop:pt-16 px-6 desktop:px-22"},[n("Close",{staticClass:"popup-accessory-content__close color-black cursor-pointer",on:{click:t.emitClose}}),t._v(" "),n("div",{staticClass:"popup-accessory-content__body"},[t._t("title"),t._v(" "),n("div",{staticClass:"popup-accessory-content__gallery"},[n("div",{class:["popup-accessory-content__gallery-body",{"popup-accessory-content__gallery-body-width":t.isSlider}]},[t._t("gallery"),t._v(" "),n("div",{class:["text-s3i color-disabled-gray mt-2",{"popup-accessory-content__gallery-body-notify":t.isSlider}]},[t._v("\n          Изображение может не соответствовать выбранной комплектации. Цвет аксессуара может\n          отличаться от представленного на данном сайте.\n        ")])],2)]),t._v(" "),n("div",{staticClass:"popup-accessory-content__descr text-s2i"},[t._t("description")],2),t._v(" "),n("div",{class:["popup-accessory-content__actions",{"popup-accessory-content__actions_fixed":t.bBuyBlockFixed},{"full-width":t.fullActions}]},[t._t("actions")],2)],2)],1)}),[],!1,null,null,null);e.a=a.exports},1264:function(t,e,n){"use strict";n(7),n(13),n(3),n(9),n(10),n(8),n(5);var i=n(15),r=(n(51),n(21)),s=n(18),a=n(56),o=n.n(a),c=n(14),l=n.n(c),u=n(998),d=n(31),p=n(1131),f=n(997),m=n(121),h=n(120),_=n(1005),v=n(398),g=n(24);function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}var y={mixins:[u.a,d.a,g.a],props:{smallButton:{type:Boolean,default:!1},title:{type:String,default:"Авто в наличии"},model:{type:Object,default:function(){return{}}},isConfigurator:{type:Boolean,default:!1}},mounted:function(){var t=this;return Object(f.a)(this.$store,this.error,"cars-in-stock/getCars",{models:this.getModelLineId,cities:[this.city.id],radius:this.extraRadius||0}).then(Object(r.a)(regeneratorRuntime.mark((function e(){var n,i,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!1,i=t.swiper,l()(t.cars)||(n=!0),t.$emit("cars-in-stock-loaded",n),!i){e.next=8;break}return e.next=6,i.init();case 6:i.slideTo(0,0),"function"==typeof Event?window.dispatchEvent(new Event("resize")):((r=window.document.createEvent("UIEvents")).initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(r));case 8:case"end":return e.stop()}}),e)}))),(function(){}))},data:function(){return{filterState:{cities:[],models:[]},swiperCarsOptions:{slidesPerView:"auto",spaceBetween:0,navigation:{prevEl:"[data-catalog-carousel-button-prev]",nextEl:"[data-catalog-carousel-button-next]"},breakpoints:{962:{spaceBetween:15}}},resize:"445x250",defaultImage:"/images/car.png"}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(s.e)("cars-in-stock",["cars","cities","currentCityId"]),{},Object(s.e)("geo-position",["city","extraRadius"]),{},Object(s.c)("cars-in-stock",["getCurrentCity","getDefaultCityCode"]),{swiper:function(){return this.sliderCars},getModelLineId:function(){return[this.model.model_line_id]},hasCars:function(){return!l()(this.cars)},hasModel:function(){return!l()(this.model)},currentCityCode:function(){return o()(this.city,"code",this.getDefaultCityCode)}}),methods:{goToAll:function(){this.isConfigurator&&this.$emit("allInStock")},sendAnalytic:function(){this.isConfigurator&&this.dataLayerPush("Configurator","Results","Click on car in car locator")},prepareState:function(){return Object.assign({},this.filterState,{cities:[o()(this.city,"id",this.currentCityId)],radius:this.extraRadius||0,models:this.getModelLineId})},applyFilter:function(){var t=this;this.$store.dispatch("cars-in-stock/filterCars",Object.assign({},this.prepareState())).then((function(){t.$emit("cars-in-stock-loaded",!l()(t.cars))}))},getImage:function(t){return t.photo?this.getResizeImagePath(t.photo,this.resize):this.defaultImage},getDetailUrl:function(t){return this.hasModel?{name:"models-code-cars-city-id",params:{code:this.model.code,id:t.code,city:t.city_code}}:{name:"buy-cars-city-code",params:{code:t.code,city:t.city_code}}},getDealersCount:function(t){var e=this.choice(t.dealer_cnt,["дилера","дилеров","дилеров"]);return"".concat(t.dealer_cnt," ").concat(e)}},watch:{city:function(){this.applyFilter(),this.$forceUpdate()},extraRadius:function(){this.applyFilter()}},components:{Car:p.a,GeoIP:v.a,IconArrowLeftCircle:m.a,IconArrowRightCircle:h.a,RoundArrowButton:_.a}},C=(n(1310),n(2)),P=Object(C.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.hasCars?n("div",{staticClass:"catalog-carousel mb-8 desktop:mb-20"},[n("div",{staticClass:"catalog-carousel__header mb-6"},[n("div",{staticClass:"catalog-carousel__header__descr flex items-baseline justify-between"},[n("span",{staticClass:"text-x5 tablet:text-x4"},[t._v("\n        "+t._s(t.title)+"\n      ")])])]),t._v(" "),t.cities.length>0?n("div",{staticClass:"catalog-carousel__select"},[n("GeoIP",{staticClass:"mt-6",attrs:{"filtered-cities":t.cities,isCarLocator:t.isConfigurator}})],1):t._e(),t._v(" "),n("div",{staticClass:"catalog-items"},[n("div",{directives:[{name:"swiper",rawName:"v-swiper:sliderCars",value:t.swiperCarsOptions,expression:"swiperCarsOptions",arg:"sliderCars"}]},[n("div",{staticClass:"swiper-wrapper"},t._l(t.cars,(function(e){return n("Car",{key:e.id,attrs:{car:e,"detail-url":t.getDetailUrl(e),"is-slide":!0},nativeOn:{click:function(e){return t.sendAnalytic(e)}}},[n("template",{slot:"image"},[n("img",{attrs:{src:t.getImage(e),alt:e.model_name}})]),t._v(" "),n("template",{slot:"name"},[t._v(t._s(e.model_name)+" "+t._s(e.complectation_name)+"\n          ")]),t._v(" "),n("template",{slot:"description"},[n("div",[t._v(t._s(e.year)+" год производства / "+t._s(e.model_year)+" модельный год")]),t._v(" "),n("div",[t._v("Цвет: "+t._s(e.exterior_color_name))]),t._v(" "),n("div",[t._v("Салон: "+t._s(e.interior_color_name))])]),t._v(" "),n("template",{slot:"location"},[t._v(t._s(e.city_name)+", "+t._s(e.dealership_name)+"\n          ")])],2)})),1),t._v(" "),n("RoundArrowButton",{class:["catalog-carousel__button catalog-carousel__button_prev"],attrs:{"data-catalog-carousel-button-prev":""}}),t._v(" "),n("RoundArrowButton",{class:["catalog-carousel__button catalog-carousel__button_next"],attrs:{"is-right":!0,"data-catalog-carousel-button-next":""}})],1)]),t._v(" "),n("div",{staticClass:"flex justify-center"},[n("g-button",{class:["button_secondary",{"button-max-width":t.smallButton}],attrs:{as:"nuxt-link",to:{name:"models-code-cars-city",params:{code:t.model.code,city:t.currentCityCode}}},nativeOn:{click:function(e){return t.goToAll(e)}}},[t._v("\n      Все авто в наличии\n    ")])],1)]):t._e()}),[],!1,null,"64d71fd4",null);e.a=P.exports},1268:function(t,e,n){"use strict";var i=n(1094);n.n(i).a},1269:function(t,e,n){"use strict";var i=n(1095);n.n(i).a},1270:function(t,e,n){"use strict";var i=n(1096);n.n(i).a},1271:function(t,e,n){"use strict";var i=n(1097);n.n(i).a},1272:function(t,e,n){"use strict";var i=n(1098);n.n(i).a},1273:function(t,e,n){"use strict";var i=n(1099);n.n(i).a},1274:function(t,e,n){"use strict";var i=n(1100);n.n(i).a},1275:function(t,e,n){"use strict";var i=n(1101);n.n(i).a},1276:function(t,e,n){"use strict";var i=n(1102);n.n(i).a},1277:function(t,e,n){"use strict";var i=n(1103);n.n(i).a},1278:function(t,e,n){"use strict";var i=n(1104);n.n(i).a},1279:function(t,e,n){"use strict";var i=n(1105);n.n(i).a},1280:function(t,e,n){"use strict";var i=n(1106);n.n(i).a},1281:function(t,e,n){"use strict";var i=n(1107);n.n(i).a},1282:function(t,e,n){"use strict";var i=n(1108);n.n(i).a},1283:function(t,e,n){"use strict";var i=n(1109);n.n(i).a},1284:function(t,e,n){"use strict";var i=n(1110);n.n(i).a},1285:function(t,e,n){"use strict";var i=n(1111);n.n(i).a},1292:function(t,e,n){"use strict";n(7),n(3),n(49),n(38),n(26),n(9),n(10),n(8),n(69),n(5);var i=n(15),r=n(1118),s=(n(36),n(33),n(1353),n(108),n(27),n(43),n(18)),a=n(37),o={mixins:[a.a],props:{isUnderlined:Boolean,label:String,value:Number,hasPopup:Boolean,hasGradient:Boolean,popupDescription:String,color:String,className:String}},c=(n(1268),n(2)),l=Object(c.a)(o,(function(){var t,e=this,n=e.$createElement,i=e._self._c||n;return i("div",{staticClass:"first-payment-table-row flex flex-col items-start tablet:flex-row tablet:justify-between"},[i("div",{staticClass:"flex items-baseline"},[i("div",{class:["first-payment-table-row-bullet mr-2",(t={},t["bg-"+e.color]=!e.hasGradient,t[""+e.className]=e.hasGradient,t)]}),e._v(" "),i("div",{staticClass:"text-s2i"},[e._v(e._s(e.label))]),e._v(" "),e.hasPopup?i("button",{staticClass:"self-center ml-1 p-0",on:{click:function(t){return t.stopPropagation(),e.$emit("open-info-popup",e.popupDescription)}}},[i("g-info-icon")],1):e._e()]),e._v(" "),i("div",{class:["text-s1 relative ml-5 mt-2 tablet:ml-0 tablet:mt-0",{"first-payment-table-row-amount--underlined":e.isUnderlined}]},[e._v("\n    "+e._s(e.formatMoney(e.value))+"\n  ")])])}),[],!1,null,null,null).exports,u=n(83),d=n(48),p=n(24);function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function m(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var h={mixins:[a.a,p.a],props:{totalPrice:Number,currentCredit:Number,maxFirstPayment:Number,minFirstPayment:Number,residualPayment:Number,minFirstPaymentPercent:Number,residualPaymentPercent:Number},computed:m({},Object(s.e)("calculator",["firstPayment","tradeIn"]),{},Object(s.c)("calculator",["currentProgram"]),{firstPaymentClasses:function(){return["first-payment-table-row-bullet","mr-2",this.tradeIn>0?"trade-in-first-payment-gradient":"bg-black"]},firstPaymentLabel:function(){return"Первый взнос (от ".concat(this.minFirstPaymentPercent," %)")},rows:function(){return[{label:"Трейд-ин",value:this.tradeIn,color:"forest-green",isHidden:!this.tradeIn||this.tradeIn<=0},{label:"Доплата",value:this.firstPayment-this.tradeIn,color:"black",hasPopup:!0,popupDescription:"Сумма, которую Вам нужно добавить к выбранному первоначальному взносу за вычетом стоимости автомобиля в трейд-ин.",isHidden:!this.tradeIn||this.firstPayment-this.tradeIn<=0},{label:"Сумма кредита",value:this.currentCredit,hasGradient:Boolean(this.currentProgram.is_residual_payment),color:"white",className:"residual-payment-gradient"},{label:"Остаточный платеж (".concat(this.residualPaymentPercent," %)"),value:this.residualPayment,color:"gray",hasPopup:!0,popupDescription:"Часть суммы кредита, которую клиент не выплачивает в течении срока кредита, однако должен погасить в конце срока кредита.</br></br>Варианты погашения остаточного платежа:<ul><li>Погасить отложенную сумму за счет собственных средств</li><li>Сдать автомобиль дилеру по программе «Trade-In» в зачет стоимости покупки нового автомобиля</li><li>Сдать автомобиль в Банк для выкупа по гарантированной остаточной стоимости или выше.</li></ul>",isHidden:!this.currentProgram.is_residual_payment}]}}),data:function(){return{isPopupShow:!1,popupDescription:null}},methods:m({},Object(s.d)("calculator",["setFirstPayment"]),{openInfoPopup:function(t){var e="";-1!==t.indexOf("в трейд-ин")&&(e="On the road price"),-1!==t.indexOf("погашения остаточного платежа")&&(e="Optional final payment"),this.dataLayerPush("Info pop-up",e,"Open"),this.popupDescription=t,this.isPopupShow=!0},closeInfoPopup:function(t){this.isPopupShow=!1},handleFirstPaymentChange:function(t){var e=t.target.value.replace(" ","");if(this.firstPayment!=e)if(Number.isNaN(parseInt(e))||e.replace(/\D/g,"")!=e)t.target.value=this.firstPayment;else{var n=null;(n=parseInt(e)>this.maxFirstPayment?this.maxFirstPayment:parseInt(e)<this.minFirstPayment?this.minFirstPayment:e)&&(t.target.value=n,this.setFirstPayment(parseInt(n)),this.$emit("first-payment-change"))}},handleTradeInBlur:function(t){this.$refs.first_payment_input.classList.toggle("hide-block"),this.$refs.first_payment_label.classList.toggle("hide-block")},handleFirstPaymentClick:function(t){this.$refs.first_payment_input.classList.toggle("hide-block"),this.$refs.first_payment_label.classList.toggle("hide-block"),this.$refs.first_payment_input.focus()},formatFirstPayment:function(t){return this.formatNumber(t," "," ")}}),components:{TableRow:l,Popup:u.a,CloseIcon:d.a}},_=(n(1269),Object(c.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"first-payment-table"},[n("div",{staticClass:"first-payment-table-row flex flex-col items-start tablet:flex-row tablet:justify-between"},[n("div",{staticClass:"flex items-baseline"},[n("div",{class:t.firstPaymentClasses}),t._v(" "),n("div",{staticClass:"text-s2i"},[t._v(t._s(t.firstPaymentLabel))])]),t._v(" "),n("div",{staticClass:"text-s1 relative ml-5 mt-2 tablet:ml-0 fix-height tablet:mt-0 first-payment-table-row-amount--underlined"},[n("span",{ref:"first_payment_label",staticClass:"first-payment-table-label",on:{click:t.handleFirstPaymentClick}},[t._v("\n        "+t._s(t.formatFirstPayment(t.firstPayment))+"\n      ")]),t._v(" "),n("input",{ref:"first_payment_input",staticClass:"hide-block text-s1 first-payment-table-input",attrs:{type:"number"},domProps:{value:t.firstPayment},on:{change:t.handleFirstPaymentChange,blur:t.handleTradeInBlur}}),t._v(" "),n("span",[t._v("₽")])])]),t._v(" "),t._l(t.rows,(function(e,i){return e.isHidden?t._e():n("table-row",t._b({key:i,on:{"open-info-popup":t.openInfoPopup}},"table-row",e,!1))})),t._v(" "),t.isPopupShow?n("Popup",{attrs:{disableBodyScroll:""}},[n("div",{staticClass:"step2__popup-wrapper flex items-center justify-center"},[n("div",{staticClass:"step2__popup w-full p-6 pt-16 desktop:px-22 desktop:pb-20 desktop:pt-16"},[n("button",{staticClass:"step2__close-button",on:{click:t.closeInfoPopup}},[n("CloseIcon")],1),t._v(" "),n("div",{domProps:{innerHTML:t._s(t.popupDescription)}})])])]):t._e()],2)}),[],!1,null,"29f243f3",null).exports),v={props:{value:Number,color:String}},g=(n(1270),Object(c.a)(v,(function(){var t=this.$createElement;return(this._self._c||t)("div",{class:["bg-"+this.color,"first-payment-range-segment relative"],style:"width: "+100*this.value+"%"})}),[],!1,null,null,null).exports);function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var C={props:{totalPrice:Number,maxFirstPayment:Number,minFirstPayment:Number,residualPayment:Number},computed:y({},Object(s.e)("calculator",["price","firstPayment","tradeIn","tradeIn"]),{},Object(s.c)("calculator",["currentProgram"]),{segments:function(){var t=this.totalPrice-this.firstPayment-this.residualPayment,e=this.tradeIn?Math.min(this.tradeIn,this.firstPayment):0,n=Math.max(this.firstPayment-e,0);return[{value:e/this.totalPrice,color:"forest-green",isHidden:!this.tradeIn},{value:n/this.totalPrice,color:"black",isHidden:0===n},{value:t/this.totalPrice,color:"white"},{value:this.residualPayment/this.totalPrice,color:"gray",isHidden:!Boolean(this.currentProgram.is_residual_payment)}]},totalCreditPrice:function(){return this.totalPrice-this.residualPayment},availableSegments:function(){return this.segments.filter((function(t){return!0!==t.isHidden}))},input:function(){var t=Math.max(this.minFirstPayment/this.totalPrice,this.tradeIn?Math.min(this.tradeIn,this.minFirstPayment)/this.totalPrice:0);return{left:t,width:1-t-(this.totalPrice-this.maxFirstPayment)/this.totalPrice,min:t*this.totalPrice,max:this.maxFirstPayment,value:this.firstPayment}}}),methods:y({},Object(s.d)("calculator",["setFirstPayment"]),{handleInputChange:function(t){var e=parseInt(t.target.value);this.setFirstPayment(e),this.$emit("first-payment-change")}}),components:{Segment:g}},P=(n(1271),Object(c.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"first-payment-range mx-4"},[n("div",{staticClass:"relative"},[n("div",{staticClass:"flex"},t._l(t.availableSegments,(function(e,i){return n("segment",t._b({key:i},"segment",e,!1))})),1),t._v(" "),n("div",{staticClass:"absolute bg-black first-payment-range-separator",style:"left: "+100*t.input.left+"%;"}),t._v(" "),n("div",{staticClass:"first-payment-range-control"},[n("input",{staticClass:"first-payment-range-input absolute",style:"left: "+100*t.input.left+"%; width: calc("+100*t.input.width+"% + 40px);",attrs:{type:"range",min:t.input.min,max:t.input.max,step:parseInt(t.totalPrice/100)},domProps:{value:t.input.value},on:{input:t.handleInputChange,change:t.handleInputChange}})]),t._v(" "),n("div",{staticClass:"first-payment-range-values mt-2 flex justify-between color-gray text-s3 tablet:text-s4",style:"width: 100%;"},t._l(11,(function(e){return n("span",{staticClass:"relative"},[n("span",{staticClass:"absolute first-payment-range-values-item"},[t._v(t._s(10*(e-1)))])])})),0),t._v(" "),n("div",{staticClass:"first-payment-range-indicator relative text-s3 tablet:text-s2i",style:"left: "+t.input.value/t.totalPrice*100+"%"},[n("span",{staticClass:"absoltue first-payment-range-indicator-content bg-white"},[t._v("\n        "+t._s(Math.round(t.input.value/t.totalPrice*100))+"%\n      ")])])])])}),[],!1,null,null,null).exports);function O(t,e,n){return Math.max(e,Math.min(t,n))}var x={name:"multirange",props:{tradeIn:{type:Number,default:0},initialPaymentMin:{type:Number,default:0},initialPaymentMax:{type:Number,default:100},initialPaymentStep:{type:Number,default:1},initialPaymentValue:{type:Number,default:0},residualPaymentMin:{type:Number,default:0},residualPaymentMax:{type:Number,default:100},residualPaymentStep:{type:Number,default:1},residualPaymentValue:{type:Number,default:0}},data:function(){return{trackValue:0,initialPayment:this.initialPaymentValue,residualPayment:this.residualPaymentValue}},watch:{residualPaymentValue:function(t){this.residualPayment=t},initialPaymentValue:function(t){this.initialPayment=t,this.recalcResidualPayment()}},computed:{classes:function(){return{"has-trade-in":this.tradeIn>0}},tradeInStyles:function(){return{width:"".concat(Math.min(this.tradeIn,this.initialPayment),"%")}},initialPaymentStyles:function(){return{width:"".concat(this.initialPayment,"%")}},initialPaymentThumbLeftArrowColor:function(){return this.initialPayment===this.initialPaymentMin?"rgba(0, 0, 0, 0.2)":"black"},initialPaymentThumbRightArrowColor:function(){return this.initialPayment===this.initialPaymentMax?"rgba(0, 0, 0, 0.2)":"black"},residualPaymentStyles:function(){return{width:"".concat(this.residualPayment,"%")}},residualPaymentThumbLeftArrowColor:function(){return this.residualPayment===this.residualPaymentMax?"rgba(0, 0, 0, 0.2)":"black"},residualPaymentThumbRightArrowColor:function(){return this.residualPayment===this.residualPaymentMin?"rgba(0, 0, 0, 0.2)":"black"},leftThumbStyles:function(){return{}},rightThumbStyles:function(){return{}},leftSeparatorStyles:function(){return{left:"".concat(this.initialPaymentMin,"%")}},rightSeparatorStyles:function(){return{right:"".concat(this.residualPaymentMin,"%")}},remainingPayment:function(){return 100-(this.initialPayment+this.residualPayment)}},methods:{emitChange:function(){this.$emit("change",{initialPayment:this.initialPayment,remainingPayment:this.remainingPayment,residualPayment:this.residualPayment})},recalcResidualPayment:function(){if(this.initialPayment+this.residualPayment>100){var t=this.residualPayment;do{t-=this.residualPaymentStep}while(this.initialPayment+t>100||t<=this.residualPaymentMin);this.residualPayment=t}},getTrackBounds:function(){return this.$refs.track.getBoundingClientRect()},getTrackPercentSize:function(){return this.getTrackBounds().width/100},update:function(t){this.updateTrackValue(t),this.updateInitialPayment(),this.updateResidualPayment()},updateTrackValue:function(t){var e=Math.max(t-this.getTrackBounds().left,0)/this.getTrackPercentSize();this.trackValue=Math.min(e,100)},updateInitialPayment:function(){if(this.trackValue<this.remainingPayment/2+this.initialPayment){var t=Math.ceil(this.trackValue/this.initialPaymentStep)*this.initialPaymentStep;100-this.residualPayment>=t&&(this.initialPayment=O(t,this.initialPaymentMin,this.initialPaymentMax))}},updateResidualPayment:function(){if(100-this.trackValue<this.remainingPayment/2+this.residualPayment){var t=Math.ceil((100-this.trackValue)/this.residualPaymentStep)*this.residualPaymentStep;100-this.initialPayment>=t&&(this.residualPayment=O(t,this.residualPaymentMin,this.residualPaymentMax))}},handleTrackMouseDown:function(t){this.update(t.pageX),this.emitChange(),document.addEventListener("mousemove",this.handleDocumentMouseMove),document.addEventListener("mouseup",this.handleDocumentMouseUp)},handleDocumentMouseMove:function(t){this.update(t.pageX),this.emitChange()},handleDocumentMouseUp:function(){document.removeEventListener("mousemove",this.handleDocumentMouseMove),document.removeEventListener("mouseup",this.handleDocumentMouseUp)},handleTrackTouchStart:function(t){this.update(t.touches[0].pageX),this.emitChange(),document.addEventListener("touchmove",this.handleDocumentTouchMove,{passive:!1}),document.addEventListener("touchend",this.handleDocumentTouchEnd)},handleDocumentTouchMove:function(t){t.preventDefault(),this.update(t.touches[0].pageX),this.emitChange()},handleDocumentTouchEnd:function(){document.removeEventListener("touchmove",this.handleDocumentTouchMove,{passive:!1}),document.removeEventListener("touchend",this.handleDocumentTouchEnd)}}},w=(n(1272),Object(c.a)(x,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"multirange mt-6 mb-8 tablet:mt-8",class:t.classes,on:{mousedown:function(e){return e.preventDefault(),t.handleTrackMouseDown(e)},touchstart:function(e){return e.preventDefault(),t.handleTrackTouchStart(e)}}},[n("div",{staticClass:"multirange-body"},[n("div",{staticClass:"multirange-separator left bg-black",style:t.leftSeparatorStyles}),t._v(" "),n("div",{staticClass:"multirange-separator right bg-black",style:t.rightSeparatorStyles}),t._v(" "),n("div",{staticClass:"multirange-segment trade-in bg-forest-green",style:t.tradeInStyles}),t._v(" "),n("div",{ref:"track",staticClass:"multirange-track bg-white flex justify-between"},[n("div",{staticClass:"multirange-segment initial-payment bg-black",style:t.initialPaymentStyles},[n("div",{staticClass:"multirange-thumb left",style:t.leftThumbStyles},[n("svg",{staticClass:"multirange-thumb-icon",attrs:{width:"28",height:"20",viewBox:"0 0 28 20",fill:"none"}},[n("path",{attrs:{d:"M11.5 6L7.5 10L11.5 14",stroke:t.initialPaymentThumbLeftArrowColor,"stroke-width":"2"}}),t._v(" "),n("path",{attrs:{d:"M16.5 6L20.5 10L16.5 14",stroke:t.initialPaymentThumbRightArrowColor,"stroke-width":"2"}})]),t._v(" "),n("span",{staticClass:"multirange-thumb-label"},[t._v(" "+t._s(t.initialPayment)+"% ")])])]),t._v(" "),n("div",{staticClass:"multirange-segment residual-payment bg-gray",style:t.residualPaymentStyles},[n("div",{staticClass:"multirange-thumb right",style:t.rightThumbStyles},[n("svg",{staticClass:"multirange-thumb-icon",attrs:{width:"28",height:"20",viewBox:"0 0 28 20",fill:"none"}},[n("path",{attrs:{d:"M11.5 6L7.5 10L11.5 14",stroke:t.residualPaymentThumbLeftArrowColor,"stroke-width":"2"}}),t._v(" "),n("path",{attrs:{d:"M16.5 6L20.5 10L16.5 14",stroke:t.residualPaymentThumbRightArrowColor,"stroke-width":"2"}})]),t._v(" "),n("span",{staticClass:"multirange-thumb-label"},[t._v(" "+t._s(t.residualPayment)+"% ")])])])])])])}),[],!1,null,"18c65342",null).exports),I=(n(6),n(1188)),j=n(1009);function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?k(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var D={mixins:[p.a],props:{calcModel:{type:Object,default:function(){return{}}}},created:function(){var t=this,e=!(!this.calcResult.trade_in_payment||!this.calcResult.trade_in_result_id);null!==this.tradeInResultId&&this.tradeInId!==this.tradeInResultId?this.loadTradeInByCode(this.tradeInResult.unique_code).then((function(){t.setCurrentTradeIn(e)})).finally((function(){t.isLoading=!1})):(this.isLoading=!1,this.setCurrentTradeIn(e))},data:function(){return{isPopupOpen:!1,isResultLoaded:!1,currentTradeIn:{},isLoading:!0}},computed:S({},Object(s.e)("trade-in",["brand","model","year","generation","configuration","modification","complectation","drive","engine","gearbox","ptsType","mileage","steeringWheel","ownerCount","city","price","marginalityPrice","unique_code","tradeInId"]),{},Object(s.e)("calculator",["tradeInResultId","tradeInResult","calcResult","isTradeInChecked"]),{car:function(){return this.calcModel?{model_id:this.calcModel.id}:null}}),methods:S({},Object(s.d)("calculator",["setTradeIn","setTradeInResultId","setIsTradeInChecked"]),{},Object(s.d)("trade-in",["setUniqueCode","clearStates","updateTradeIn"]),{},Object(s.b)("trade-in",["loadTradeInByCode"]),{openTradeInPopup:function(){this.dataLayerPush("Calculator pop-up","Trade-in","Open"),this.setCurrentTradeIn(this.isTradeInChecked),this.isPopupOpen=!0,this.unique_code&&(this.isResultLoaded=!0)},closeTradeInPopup:function(){this.isPopupOpen=!1,this.rollbackTradeIn()},submitTradeInPopup:function(){this.setCurrentTradeIn(!0),this.closeTradeInPopup()},setCurrentTradeIn:function(t){this.currentTradeIn={brand:this.brand,model:this.model,year:this.year,generation:this.generation,configuration:this.configuration,modification:this.modification,complectation:this.complectation,drive:this.drive,engine:this.engine,gearbox:this.gearbox,ptsType:this.ptsType,mileage:this.mileage,steeringWheel:this.steeringWheel,ownerCount:this.ownerCount,city:this.city,price:this.price,marginalityPrice:this.marginalityPrice,unique_code:this.unique_code,tradeInId:this.tradeInId},this.onTradeInChecked(t,!1)},rollbackTradeIn:function(){this.updateTradeIn(this.currentTradeIn)},onTradeInChecked:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&this.dataLayerPush("Calculator pop-up","Trade-in",t?"Activate trade-in":"Deactivate trade-in"),this.setIsTradeInChecked(t),t?(this.setTradeIn(this.marginalityPrice),this.setTradeInResultId(this.currentTradeIn.tradeInId)):(this.setTradeIn(0),this.setTradeInResultId(null))}}),components:{PopupTradeIn:I.a,SummaryTradeIn:r.a,Preloader:j.a}},L=Object(c.a)(D,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mb-6"},[t.isLoading?[n("Preloader",{attrs:{inline:!0}})]:[n("SummaryTradeIn",{ref:"summary-trade-in",staticClass:"mt-6",attrs:{prefix:"calculator","current-trade-in":t.currentTradeIn,"check-over":!0,"show-offers":!1,"is-trade-in-checked":t.isTradeInChecked,"is-credit-page":!0},on:{open:t.openTradeInPopup,"set-trade-in":function(e){return t.setCurrentTradeIn(t.isTradeInChecked)},"select-offer":function(e){return t.$emit("select-offer")},"trade-in-checked":t.onTradeInChecked}}),t._v(" "),t.isPopupOpen?n("PopupTradeIn",{attrs:{car:t.car,"show-offers":!1,skipLoading:this.isResultLoaded},on:{"close-popup":t.closeTradeInPopup,"submit-popup":t.submitTradeInPopup}}):t._e()]],2)}),[],!1,null,null,null).exports,T=n(1054);function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function B(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var M={mixins:[T.a],props:{validation:Object,totalPrice:Number,currentCredit:Number,maxFirstPayment:Number,minFirstPayment:Number,residualPaymentParams:Object,isPopup:{type:Boolean,default:!1},model:{type:Object,default:function(){return{}}}},components:{PaymentTable:_,Range:P,Multirange:w,TradeIn:L},computed:B({},Object(s.e)("calculator",["residualPayment","firstPayment","tradeIn"]),{firstPaymentPercent:function(){return this.calcPercentByValue(this.firstPayment,this.totalPrice)},tradeInPercent:function(){return this.calcPercentByValue(this.tradeIn,this.totalPrice)},maxFirstPaymentPercent:function(){return this.calcPercentByValue(this.maxFirstPayment,this.totalPrice)},minFirstPaymentPercent:function(){return this.calcPercentByValue(this.minFirstPayment,this.totalPrice)},residualPaymentPercent:function(){return this.calcPercentByValue(this.residualPayment,this.totalPrice)}}),methods:B({},Object(s.d)("calculator",["setFirstPayment"]),{handleMultirangeChange:function(t){var e=t.initialPayment,n=t.remainingPayment,i=t.residualPayment;e===this.calcPercentByValue(this.firstPayment,this.totalPrice)&&i===this.calcPercentByValue(this.residualPayment,this.totalPrice)||this.$emit("handle-multirange-change",{initialPayment:e,remainingPayment:n,residualPayment:i})}})},F=Object(c.a)(M,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"first-payment"},[t.isPopup?t._e():n("trade-in",{attrs:{calcModel:t.model},on:{"select-offer":function(e){return t.$emit("select-offer")}}}),t._v(" "),n("h3",{staticClass:"s1 mb-2"},[t._v("Выберите первый взнос")]),t._v(" "),n("div",{staticClass:"mt-2 text-s2i"},[t._v("\n    По умолчанию выбраны условия с самым низким ежемесячным платежом. Вы можете изменить их на\n    более подходящие.\n  ")]),t._v(" "),n("payment-table",{class:["mt-8",{"first-payment-table_popup":t.isPopup}],attrs:{totalPrice:t.totalPrice,currentCredit:t.currentCredit,maxFirstPayment:t.maxFirstPayment,minFirstPayment:t.minFirstPayment,residualPayment:t.residualPayment,minFirstPaymentPercent:t.minFirstPaymentPercent,residualPaymentPercent:t.residualPaymentPercent},on:{"first-payment-change":function(e){return t.$emit("first-payment-change")}}}),t._v(" "),t.residualPayment?t._e():n("range",{staticClass:"mt-6 tablet:mt-8",attrs:{totalPrice:t.totalPrice,maxFirstPayment:t.maxFirstPayment,minFirstPayment:t.minFirstPayment,residualPayment:t.residualPayment},on:{"first-payment-change":function(e){return t.$emit("first-payment-change")}}}),t._v(" "),t.residualPayment?n("multirange",{attrs:{"total-price":t.totalPrice,"trade-in":t.tradeInPercent,"initial-payment-min":t.minFirstPaymentPercent,"initial-payment-max":t.maxFirstPaymentPercent,"initial-payment-step":1,"initial-payment-value":t.firstPaymentPercent,"residual-payment-min":t.residualPaymentParams.minPercent,"residual-payment-max":t.residualPaymentParams.maxPercent,"residual-payment-step":t.residualPaymentParams.step,"residual-payment-value":t.residualPaymentPercent},on:{change:t.handleMultirangeChange}}):t._e()],1)}),[],!1,null,null,null).exports,R=n(1225),$=n(1114),A=n(1074);function N(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function q(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?N(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var H={mixins:[p.a],data:function(){return{isPopupOpen:!1,isInsuranceActSended:!1,isInsuranceDeactSended:!1}},computed:q({},Object(s.e)("calculator",["insuranceDiscount","bankOffers","currentInsuranceIndex"]),{currentBankOffers:function(){var t=this.currentProgram();return t?this.bankOffers.filter((function(e){return e.bank_id===t.bank_id})):[]}}),methods:q({},Object(s.d)("calculator",["setInsuranceIndex"]),{},Object(s.c)("calculator",["currentProgram"]),{togglePopup:function(){this.isPopupOpen||this.dataLayerPush("Info pop-up","Life insurance description","Open"),this.isPopupOpen=!this.isPopupOpen},selectInsurance:function(t){(!this.isInsuranceActSended&&!this.isInsuranceSelected(t)||!this.isInsuranceDeactSended&&this.isInsuranceSelected(t))&&(this.dataLayerPush("Loan Calculator","Loan condition",this.isInsuranceSelected(t)?"Deactivate life insurance":"Activate life insurance"),this.isInsuranceSelected(t)?this.isInsuranceDeactSended=!0:this.isInsuranceActSended=!0),this.isInsuranceSelected(t)?this.setInsuranceIndex(null):this.setInsuranceIndex(t),this.$emit("insurance-select")},isInsuranceSelected:function(t){return this.currentInsuranceIndex===t}}),components:{IconCheck:$.a,IconPlus:A.a,CloseIcon:d.a,Popup:u.a}},z=(n(1274),Object(c.a)(H,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._l(t.currentBankOffers,(function(e,i){return n("div",{key:i,class:["\n        insurance\n        flex flex-col\n        tablet:flex-row tablet:items-center\n        relative px-6 py-6\n        tablet:py-0\n        cursor-pointer\n      ",{"insurance--inactive bg-pale-beige":!t.isInsuranceSelected(e.id)}],on:{click:function(n){return t.selectInsurance(e.id)}}},[n("button",{staticClass:"insurance-info absolute p-0",on:{click:function(e){return e.stopPropagation(),t.togglePopup(e)}}},[n("g-info-icon")],1),t._v(" "),n("div",{staticClass:"flex items-center mb-6 tablet:mb-0"},[t.isInsuranceSelected(e.id)?n("icon-check",{}):n("icon-plus",{staticClass:"cursor-pointer"}),t._v(" "),n("span",{staticClass:"text-s2i-b ml-4 insurance-title--mobile"},[t._v("Страхование жизни")])],1),t._v(" "),n("span",{staticClass:"text-s2i tablet:ml-4"},[n("span",{staticClass:"text-s2i-b insurance-title"},[t._v("Страхование жизни")]),t._v(" "),n("span",{staticClass:"insurance-dash"},[t._v(" —")]),t._v("\n      "+t._s(e.name)+"\n    ")])])})),t._v(" "),t.isPopupOpen?n("Popup",[n("div",{staticClass:"step2__popup-wrapper flex items-center justify-center"},[n("div",{staticClass:"step2__popup w-full p-6 pt-16 desktop:px-22 desktop:pb-20 desktop:pt-16"},[n("button",{staticClass:"step2__close-button",on:{click:function(e){return e.stopPropagation(),t.togglePopup(e)}}},[n("CloseIcon")],1),t._v(" "),n("div",[t._v("\n          Оформление данного продукта позволит погасить Вашу задолженность по кредиту полностью\n          или частично Страховой компанией при наступлении страхового случая. Программа финансовой\n          защиты подключается по желанию Клиента и может быть включена в кредит, выданный Банком.\n        ")])])])]):t._e()],2)}),[],!1,null,null,null).exports),V=(n(313),n(52),n(161)),G=n(1397),Y=n.n(G);function U(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function W(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?U(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var K={mixins:[a.a,T.a],props:{program:Object,index:String},computed:W({},Object(s.e)("calculator",["currentProgramIndex","complectation","selectedOffers","offers"]),{monthlyPay:function(){return"".concat(this.formatMoney(this.getCreditProgramMinMonthlyPay(this.program,this.totalPrice),"₽/мес"))},benefitPopupDescription:function(){return"Выгода при выборе кредитной программы ".concat(this.program.name)},residualPayment:function(){return"от ".concat(this.formatMoney(this.getCreditProgramMinResidualPayment(this.program,this.totalPrice)))},firstPayment:function(){return"от ".concat(this.formatMoney(this.getCreditProgramMinFirstPayment(this.program,this.totalPrice)))},activeTo:function(){var t;if(this.program.active_to)t=this.program.active_to;else{var e=new Date;t=new Date(e.getFullYear(),e.getMonth()+1,0).getTime()/1e3}return"до ".concat(this.formatDate(t))},minRate:function(){return"от ".concat(this.formatNumber(this.getCreditProgramMinRate(this.program),1," ",",")," %")},totalPrice:function(){var t=this.complectation.price;return this.priceDependence.forEach((function(e){t-=e})),t},priceDependence:function(){var t=this,e=[];return this.selectedOffers.forEach((function(n){void 0!==t.offers[n]&&e.push(t.offers[n].price)})),this.complectation.discount&&e.push(this.complectation.discount),this.program.benefit_price&&e.push(this.program.benefit_price),e}}),methods:W({},Object(s.d)("calculator",["setCurrentProgramIndex"]),{selectProgram:function(){this.setCurrentProgramIndex(this.index),this.$emit("program-select")}}),components:{IconPlus:A.a,IconCheck:$.a}},Q=(n(1275),Object(c.a)(K,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:[t.index===t.currentProgramIndex?"program-card--selected bg-white":"program-card cursor-pointer","p-6 relative bg-pale-beige"],on:{click:t.selectProgram}},[null!==t.program.description?n("button",{staticClass:"program-card-icon absolute p-0",on:{click:function(e){return e.stopPropagation(),t.$emit("open-info-popup",t.program.description)}}},[n("g-info-icon")],1):t._e(),t._v(" "),n("div",{staticClass:"program-card__top"},[n("div",{staticClass:"flex items-center"},[[t.index===t.currentProgramIndex?n("IconCheck"):n("IconPlus")],t._v(" "),n("div",{staticClass:"ml-4"},[t._v(t._s(t.program.name))])],2),t._v(" "),n("div",{staticClass:"program-card-preview mt-6",domProps:{innerHTML:t._s(t.program.preview_text)}})]),t._v(" "),n("div",{staticClass:"program-card__bottom"},[n("div",{staticClass:"program-card-numbers mt-6 pt-2"},[n("div",{staticClass:"color-disabled-gray"},[t._v("Ежемесячный платёж")]),t._v(" "),n("div",{staticClass:"text-s1"},[t._v(t._s(t.monthlyPay))]),t._v(" "),t.program.hide_credit_rate?t._e():[n("div",{staticClass:"color-disabled-gray mt-2"},[t._v("Процентная ставка")]),t._v(" "),n("div",{staticClass:"text-s1"},[t._v(t._s(t.minRate))])],t._v(" "),n("div",{staticClass:"color-disabled-gray mt-2"},[t._v("Первый взнос")]),t._v(" "),n("div",{staticClass:"text-s1"},[t._v(t._s(t.firstPayment))]),t._v(" "),t.program.is_residual_payment?[n("div",{staticClass:"color-disabled-gray mt-2"},[t._v("Остаточный платёж")]),t._v(" "),n("div",{staticClass:"text-s1"},[t._v(t._s(t.residualPayment))])]:[n("div",{staticClass:"color-disabled-gray mt-2"},[t._v(" ")]),t._v(" "),n("div",{staticClass:"text-s1"},[t._v(" ")])],t._v(" "),t.program.hide_credit_rate?[n("div",{staticClass:"color-disabled-gray mt-2"},[t._v(" ")]),t._v(" "),n("div",{staticClass:"text-s1"},[t._v(" ")])]:t._e()],2),t._v(" "),n("div",{staticClass:"program-card-profit mt-6 pt-2"},[t.program.benefit_price?[n("div",{staticClass:"flex items-center"},[n("g-red-label",{staticClass:"program-card-benefit-label mr-2"},[t._v("\n            Выгода — "+t._s(t.formatMoney(t.program.benefit_price))+"\n          ")]),t._v(" "),n("button",{staticClass:"program-card-benefit-icon p-0 ml-1",on:{click:function(e){return e.stopPropagation(),t.$emit("open-info-popup",t.benefitPopupDescription)}}},[n("g-info-icon")],1)],1)]:t._e(),t._v(" "),n("div",[t._v(t._s(t.activeTo))])],2)])])}),[],!1,null,null,null).exports),X=(n(17),n(13),["class","staticClass","style","staticStyle","attrs"]);function J(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Z(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tt(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},s=Object.keys(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var et={functional:!0,render:function(t,e){var n=e._c,i=(e._v,e.data),r=e.children,s=void 0===r?[]:r,a=i.class,o=i.staticClass,c=i.style,l=i.staticStyle,u=i.attrs,d=void 0===u?{}:u,p=tt(i,X);return n("svg",function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?J(Object(n),!0).forEach((function(e){Z(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({class:[a,o],style:[c,l],attrs:Object.assign({width:"25",height:"25",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},d)},p),s.concat([n("circle",{attrs:{r:"11.75",transform:"matrix(-1 0 0 1 12.5 12.5)",stroke:"currentColor","stroke-width":"1.5"}}),n("path",{attrs:{d:"M13 16.5l-4-4 4-4M9.5 12.5h7",stroke:"currentColor","stroke-width":"1.5"}})]))}},nt=["class","staticClass","style","staticStyle","attrs"];function it(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function rt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function st(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},s=Object.keys(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var at={functional:!0,render:function(t,e){var n=e._c,i=(e._v,e.data),r=e.children,s=void 0===r?[]:r,a=i.class,o=i.staticClass,c=i.style,l=i.staticStyle,u=i.attrs,d=void 0===u?{}:u,p=st(i,nt);return n("svg",function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?it(Object(n),!0).forEach((function(e){rt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({class:[a,o],style:[c,l],attrs:Object.assign({width:"25",height:"25",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},d)},p),s.concat([n("circle",{attrs:{cx:"12.5",cy:"12.5",r:"11.75",stroke:"currentColor","stroke-width":"1.5"}}),n("path",{attrs:{d:"M12 16.5l4-4-4-4M15.5 12.5h-7",stroke:"currentColor","stroke-width":"1.5"}})]))}};function ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function ct(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ot(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var lt={mixins:[a.a,p.a],props:{programs:Object,isPopup:{type:Boolean,default:!1}},data:function(){return{isPopupShow:!1,popupDescription:null,swiperOptions:{initialSlide:this.currentProgramIndex,navigation:{nextEl:".programs-slider-buttons-next",prevEl:".programs-slider-buttons-prev"},spaceBetween:2,slidesPerView:"auto"}}},computed:ct({},Object(s.e)("calculator",["currentProgramIndex"])),methods:ct({},Object(s.d)("calculator",["setCurrentProgramIndex"]),{unifyCardPreviewHeights:function(){var t=Array.from(this.$refs.cards.querySelectorAll(".program-card-preview")),e=Math.max.apply(Math,Object(V.a)(t.map((function(t){return t.getBoundingClientRect().height}))));t.forEach((function(t){return t.style.height="".concat(e,"px")}))},getDefaultProgram:function(){return Object.keys(this.programs)[0]},openInfoPopup:function(t){this.dataLayerPush("Info pop-up","Financial program description","Open"),this.popupDescription=t,this.isPopupShow=!0},closeInfoPopup:function(t){this.isPopupShow=!1}}),mounted:function(){new Y.a("KiaSignature",{weight:500}).load().then(this.unifyCardPreviewHeights,this.unifyCardPreviewHeights)},created:function(){this.currentProgramIndex||(this.setCurrentProgramIndex(this.getDefaultProgram()),this.$emit("program-select"))},components:{Popup:u.a,CloseIcon:d.a,ProgramCard:Q,ArrowCircledLeft:et,ArrowCircledRight:at}},ut=(n(1276),Object(c.a)(lt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isPopup?n("div",{staticClass:"text-x4 mb-6"},[t._v("Расчет кредита")]):t._e(),t._v(" "),n("div",{staticClass:"text-s1"},[t._v("Выберите финансовую программу")]),t._v(" "),n("div",{staticClass:"programs relative mt-6"},[t.programs.length>3?n("div",{staticClass:"programs-slider-buttons absolute flex"},[n("button",{staticClass:"programs-slider-buttons-prev"},[n("arrow-circled-left")],1),t._v(" "),n("button",{staticClass:"programs-slider-buttons-next"},[n("arrow-circled-right")],1)]):t._e(),t._v(" "),n("div",{directives:[{name:"swiper",rawName:"v-swiper:slider",value:t.swiperOptions,expression:"swiperOptions",arg:"slider"}],ref:"cards",staticClass:"programs__cards"},[n("div",{staticClass:"swiper-wrapper"},t._l(t.programs,(function(e,i){return n("program-card",{key:i,staticClass:"swiper-slide",attrs:{program:e,index:i},on:{"program-select":function(e){return t.$emit("program-select",!0)},"open-info-popup":t.openInfoPopup}})})),1),t._v(" "),t.isPopupShow?n("Popup",{attrs:{disableBodyScroll:""}},[n("div",{staticClass:"step2__popup-wrapper flex items-center justify-center"},[n("div",{staticClass:"step2__popup w-full p-6 pt-16 desktop:px-22 desktop:pb-20 desktop:pt-16"},[n("button",{staticClass:"step2__close-button",on:{click:t.closeInfoPopup}},[n("CloseIcon")],1),t._v(" "),n("div",[t._v(t._s(t.popupDescription))])])])]):t._e()],1)])])}),[],!1,null,null,null).exports),dt=n(1221),pt=n(162),ft=n(539);function mt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function ht(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?mt(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var _t={mixins:[a.a,p.a],props:{maxMonthlyPay:Number,minMonthlyPay:Number,alt:{type:Object,default:function(){return{description:"Kia Cerato Classic Premium <br /> всего за + 2 990 Р/мес",url:"/path-to-alt",image:"/images/alt-image.png"}}},hasBorder:{type:Boolean,default:!0}},data:function(){return{monthStep:12}},computed:ht({},Object(s.e)("calculator",["term","monthlyPayment"]),{},Object(s.c)("calculator",["currentProgram"]),{currentMonthlyPayment:function(){return parseInt(this.monthlyPayment)},terms:function(){for(var t=[],e=this.currentProgram.min_credit_period;e<=this.currentProgram.max_credit_period;e+=this.monthStep)t.push({label:e/this.monthStep,value:e});return t},selectedTerm:{get:function(){return this.term},set:function(t){this.setTerm(t),this.$emit("term-change")}}}),methods:ht({},Object(s.d)("calculator",["setTerm","setMonthlyPayment"]),{addToDataLayer:function(t,e){this.dataLayerPush("Loan Calculator",t,e)}}),components:{Button:ft.default}},vt=(n(1278),Object(c.a)(_t,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["credit-term",{"credit-term_bordered":t.hasBorder}]},[n("div",{staticClass:"credit-term__period"},[n("div",{staticClass:"text-s2i-b mb-3"},[t._v("\n      Срок кредита, лет\n    ")]),t._v(" "),n("div",{staticClass:"credit-term__period-items"},[t._l(t.terms,(function(e){return[n("label",{staticClass:"credit-term__period-item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedTerm,expression:"selectedTerm"}],staticClass:"credit-term__period-item-control",attrs:{type:"radio"},domProps:{value:e.value,checked:t._q(t.selectedTerm,e.value)},on:{change:function(n){t.selectedTerm=e.value}}}),t._v(" "),n("span",{staticClass:"credit-term__period-item-label"},[t._v("\n            "+t._s(e.label)+"\n          ")])])]}))],2)]),t._v(" "),n("div",{staticClass:"credit-term__payment"},[n("div",{staticClass:"text-s2i-b mb-3 tablet:mb-4"},[t._v("\n      Ежемесячный платеж\n    ")]),t._v(" "),n("div",{staticClass:"text-s1"},[t._v("\n      "+t._s(t.formatMoney(t.currentMonthlyPayment,"₽/мес"))+"\n    ")])])])}),[],!1,null,null,null).exports),gt=n(14),bt=n.n(gt),yt=n(55),Ct=n.n(yt);function Pt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ot(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pt(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var xt={mixins:[p.a],props:{stepData:Object,currentTradeIn:Object},data:function(){return{validation:{},isButtonsScrolled:!1,isSelectProgramSended:!1}},methods:Ot({},Object(s.d)("step-manager",["nextStep","prevStep","setCurrentStepIndex"]),{},Object(s.d)("calculator",["setTradeIn","setTradeInResultId","setIsTradeInChecked"]),{isOffersEmpty:function(){return bt()(this.offers)},prevStepCheck:function(){this.dataLayerPush("Loan Calculator","Loan condition","Back"),this.isOffersEmpty()?this.setCurrentStepIndex(this.stepIndices.complectation):this.prevStep()},nextStepOpen:function(){var t=this,e={financeProduct:Ct()(this.programs,{id:this.currentProgramIndex}).name_en,customerDeposit:this.firstPayment,tradeInOffer:this.tradeIn,amountOfCredit:Math.round(this.stepData.currentCredit),optionalFinalPayment:this.residualPayment,creditterm:this.term,monthlyPayments:this.monthlyPayment},n=this.firstPayment-this.tradeIn;n>0&&this.tradeIn>0&&(e.onTheRoadPrice=n),this.selectedOffers.length>0&&(e.specialOffer=Object.values(this.selectedOffers).map((function(e){return Ct()(t.offers,{id:e}).name})).join("|")),this.dataLayerPush("Loan Calculator","Loan condition","Next",e),this.nextStep()},handleScrollButtons:function(){var t=window.scrollY,e=Math.round(window.innerHeight),n=Math.round(document.getElementsByClassName("page-wrapper__footer")[0].offsetTop);this.isButtonsScrolled=t+e>n+1},handleMultirangeChange:function(t){this.$emit("handle-multirange-change",t)},openTradeInPopup:function(){this.$emit("close-credit-popup",!0)},popupNextStep:function(){document.getElementsByClassName("popup-credit")[0].scrollTo(0,0),this.nextStep()},onTradeInChecked:function(t){this.setIsTradeInChecked(t),this.dataLayerPush("Loan Calculator","Loan condition",t?"Activate trade-in":"Deactivate trade-in"),t?(this.setTradeIn(this.marginalityPrice),this.setTradeInResultId(this.currentTradeIn.tradeInId)):(this.setTradeIn(0),this.setTradeInResultId(null))},addToDataLayer:function(t,e){this.dataLayerPush("Loan Calculator",t,e)},programSelect:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$emit("program-select"),!this.isSelectProgramSended&&t&&(this.dataLayerPush("Loan Calculator","Loan condition","Select financial program"),this.isSelectProgramSended=!0)}}),mounted:function(){this.stepData.isPopup||window.scrollTo(0,0),window.addEventListener("load",this.handleScrollButtons),window.addEventListener("resize",this.handleScrollButtons),window.addEventListener("scroll",this.handleScrollButtons),this.dataLayerPush("Loan Calculator","Loan condition","Start",null,!0)},beforeDestroy:function(){window.removeEventListener("load",this.handleScrollButtons),window.removeEventListener("resize",this.handleScrollButtons),window.removeEventListener("scroll",this.handleScrollButtons)},components:{CreditPopupOffers:R.a,SummaryTradeIn:r.a,Programs:ut,PopupPrice:dt.a,FirstPayment:F,Term:vt,Insurance:z,IconLeft:pt.a},computed:Ot({},Object(s.c)("configurator",["currentModel"]),{},Object(s.e)("calculator",["currentProgramIndex","offers","selectedOffers","model","isTradeInChecked","programs","firstPayment","residualPayment","tradeIn","price","term","monthlyPayment"]),{},Object(s.e)("step-manager",["stepIndices"]),{},Object(s.e)("trade-in",["marginalityPrice"]),{isProgramsEmpty:function(){return bt()(this.stepData.availablePrograms)},isTradeInOfferSelected:function(){var t=this;return!this.selectedOffers.every((function(e){return void 0!==t.offers[e]&&!t.offers[e].is_traid_in}))}})},wt=(n(1279),Object(c.a)(xt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isProgramsEmpty?t._e():n("programs",{attrs:{isPopup:t.stepData.isPopup,programs:t.stepData.availablePrograms},on:{"program-select":t.programSelect}}),t._v(" "),t.stepData.isPopup&&!t.isProgramsEmpty?n("SummaryTradeIn",{ref:"summary-trade-in",staticClass:"mt-8",attrs:{prefix:"calculator-popup","current-trade-in":t.currentTradeIn,"check-over":!0,"is-trade-in-checked":t.isTradeInChecked,"is-credit-page":!0},on:{open:t.openTradeInPopup,"trade-in-checked":t.onTradeInChecked}}):t._e(),t._v(" "),t.stepData.isPopup?n("credit-popup-offers"):t._e(),t._v(" "),t.stepData.isPopup&&!t.isProgramsEmpty?n("popup-price",{staticClass:"mt-6",attrs:{"is-popup":!0,"total-price":t.stepData.totalPrice,"price-dependence":t.stepData.priceDependence}}):t._e(),t._v(" "),t.isProgramsEmpty?t._e():n("first-payment",{ref:"first-payment",class:t.stepData.isPopup?"mt-8":"mt-8 tablet:mt-6 desktop1440:mt-8",attrs:{model:t.model,validation:t.validation,totalPrice:t.stepData.totalPrice,tradeInResult:t.stepData.tradeInResult,currentCredit:t.stepData.currentCredit,maxFirstPayment:t.stepData.maxFirstPayment,minFirstPayment:t.stepData.minFirstPayment,residualPaymentParams:t.stepData.residualPaymentParams,isPopup:t.stepData.isPopup},on:{"first-payment-change":function(e){return t.$emit("first-payment-change")},"handle-multirange-change":t.handleMultirangeChange}}),t._v(" "),t.isProgramsEmpty?t._e():n("term",{staticClass:"mt-10",attrs:{maxMonthlyPay:t.stepData.maxMonthlyPay,minMonthlyPay:t.stepData.minMonthlyPay},on:{"term-change":function(e){return t.$emit("term-change")},"monthly-payment-change":function(e){return t.$emit("monthly-payment-change")}}}),t._v(" "),t.isProgramsEmpty?t._e():n("insurance",{staticClass:"mt-6",on:{"insurance-select":function(e){return t.$emit("insurance-select")}}}),t._v(" "),t.isProgramsEmpty?n("div",[t.stepData.isPopup?n("div",{staticClass:"text-x4 mb-6"},[t._v("Расчет кредита")]):t._e(),t._v("\n    Кредитные программы не найдены\n  ")]):t._e(),t._v(" "),t.stepData.isPopup&&!t.isProgramsEmpty?n("div",{staticClass:"my-6"},[n("g-button",{staticClass:"button button_primary calculator-popup__buttons",nativeOn:{click:[function(e){return t.popupNextStep(e)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"n",void 0,e.key,void 0)?null:t.addToDataLayer("Loan condition","End")}]}},[t._v("\n      Результат расчёта\n    ")])],1):t._e(),t._v(" "),t.stepData.isPopup?t._e():n("nav",{staticClass:"constructor__buttons is-custom"},[n("div",{class:["constructor__buttons__container",{"is-scrolled":t.isButtonsScrolled}]},[n("g-container",[n("ul",{staticClass:"flex desktop:justify-end"},[n("li",[n("button",{staticClass:"button button_text",attrs:{inverted:""},on:{click:function(e){return e.preventDefault(),t.prevStepCheck(e)}}},[n("icon-left"),t._v(" "),n("span",{staticClass:"button__span-after"},[t._v("\n                Шаг назад\n              ")])],1)]),t._v(" "),t.isProgramsEmpty?t._e():n("li",[n("button",{staticClass:"button button_primary",on:{click:function(e){return e.preventDefault(),t.nextStepOpen(e)}}},[n("span",{staticClass:"button__span-after"},[t._v("\n                Результат расчёта\n              ")])])])])])],1)])],1)}),[],!1,null,null,null));e.a=wt.exports},1293:function(t,e,n){"use strict";n(7),n(13),n(3),n(33),n(49),n(38),n(26),n(9),n(10),n(8),n(6),n(69),n(108),n(53),n(5);var i=n(161),r=n(15),s=n(96),a=n.n(s),o=n(137),c=n.n(o),l=n(98),u=n.n(l),d=n(392),p=n.n(d),f=n(55),m=n.n(f),h=n(0),_=n(11),v=n(18),g=n(83),b=n(374),y=n(1036),C=(n(36),n(37));function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}var O={mixins:[C.a],props:{totalPrice:Number,priceDependence:Array,creditRows:Array,isPopup:Boolean},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(v.c)("calculator",["currentProgram","currentBankOffer"]),{},Object(v.e)("cars-detail",["car"]),{},Object(v.e)("calculator",["monthlyPayment","complectation","firstPayment","tradeIn","gifts","term"]),{creditData:function(){var t={items_loan:[{label:"Программа",value:this.currentProgram.name}],monthly:this.formatMoney(this.monthlyPayment,"₽/мес")};return t.items_loan=t.items_loan.concat(this.creditRows),t}})},x=(n(1280),n(2)),w=Object(x.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"total"},[t._m(0),t._v(" "),n("div",{staticClass:"total__amounts desktop1440:p-5 flex flex-wrap"},[n("div",{staticClass:"total__table w-full mb-15 tablet:mb-12 desktop1440:mb-0 desktop1440:w-1/2 pt-2 tablet:p-5 desktop1440:pl-0 desktop1440:py-0 desktop1440:pr-6 flex flex-col justify-between"},[n("div",[n("div",{staticClass:"flex justify-between mb-1"},[n("div",{staticClass:"total__item-title text-s2i"},[t._v("Стоимость автомобиля")]),t._v(" "),n("div",{staticClass:"total__value text-s2i-b"},[n("div",{staticClass:"no-wrap-price"},[t._v("\n              "+t._s(t.formatMoney(t.isPopup?t.car.price:t.complectation.price))+"\n            ")])])]),t._v(" "),t._l(t.priceDependence,(function(e){return n("div",{key:e.id,staticClass:"flex justify-between mb-1"},[n("div",{staticClass:"total__item-title text-s2i"},[t._v("\n            "+t._s(e.label)+"\n          ")]),t._v(" "),n("div",{staticClass:"total__value text-s2i-b"},[e.value?n("div",{staticClass:"no-wrap-price"},[t._v("\n              "+t._s((e.isAdd?"+":"-")+" "+t.formatMoney(e.value))+"\n            ")]):t._e()])])})),t._v(" "),t._l(t.gifts,(function(e,i){return n("div",{key:i,staticClass:"flex justify-between"},[n("div",[n("span",{staticClass:"total__value text-s2i"},[t._v(t._s(e.name))])]),t._v(" "),n("div",{staticClass:"text-s2i-b"},[t._v("В комплекте")])])}))],2),t._v(" "),n("div",{staticClass:"total__total-block pt-2 tablet:pt-0 mt-5 tablet:mt-12 flex items-center justify-between"},[n("div",{staticClass:"text-s2i"},[t._v("\n          Итого\n        ")]),t._v(" "),n("div",{staticClass:"total__total-amount text-s1 tablet:text-x5 no-wrap-price"},[t._v("\n          "+t._s(t.formatMoney(t.totalPrice))+"\n        ")])])]),t._v(" "),n("div",{staticClass:"total__title_mobile total__title w-full text-s1 mb-6"},[t._v("\n      Расчет Kia Finance\n    ")]),t._v(" "),n("div",{staticClass:"total__table w-full desktop1440:w-1/2 pt-2 tablet:p-5 desktop1440:pr-0 desktop1440:py-0 desktop1440:pl-6 flex flex-col justify-between"},[n("div",t._l(t.creditData.items_loan,(function(e){return n("div",{key:e.id,staticClass:"flex justify-between mb-1"},[n("div",{staticClass:"total__item-title text-s2i"},[t._v("\n            "+t._s(e.label)+"\n          ")]),t._v(" "),n("div",{staticClass:"total__value text-s2i-b"},[e.oldValue?n("div",{staticClass:"no-wrap-price"},[t._v("\n              "+t._s(e.oldValue)+"\n            ")]):t._e(),t._v(" "),e.value?n("div",{staticClass:"no-wrap-price"},[t._v("\n              "+t._s(e.value)+"\n            ")]):t._e()])])})),0),t._v(" "),n("div",{staticClass:"total__total-block pt-2 tablet:pt-0 mt-5 tablet:mt-12 flex items-center justify-between"},[n("div",{staticClass:"text-s2i"},[t._v("\n          Платёж в месяц\n        ")]),t._v(" "),n("div",{staticClass:"no-wrap-price text-s2i-b tablet:text-x5"},[t._v("\n          "+t._s(t.creditData.monthly)+"\n        ")])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"flex mb-6 text-s1"},[e("div",{staticClass:"total__title desktop1440:w-1/2"},[this._v("\n      Итоговая стоимость\n    ")]),this._v(" "),e("div",{staticClass:"total__title total__title_loan w-1/2"},[this._v("\n      Расчет Kia Finance\n    ")])])}],!1,null,null,null).exports,I=n(61),j={props:{calculation:Object},data:function(){return{}},components:{DocumentIcon:I.a}},k=(n(1281),Object(x.a)(j,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"calculation p-6"},[n("div",{staticClass:"desktop1440:flex justify-between"},[n("div",{staticClass:"flex desktop1440:items-center"},[n("div",{staticClass:"calculation__document-icon mr-2"},[n("DocumentIcon")],1),t._v(" "),n("div",{staticClass:"text-s1 desktop1440:text-s2i"},[t._v("\n        "+t._s(t.calculation.title)+"\n      ")])]),t._v(" "),n("div",{staticClass:"pl-6 desktop1440:pl-0 flex flex-col tablet:flex-row items-baseline tablet:items-center"},[n("a",{staticClass:"calculation__link-button calculation__link text-s2i tablet:mr-4 mb-2 tablet:mb-0",attrs:{href:t.calculation.link,target:"_blank"}},[t._v("\n        Скачать\n      ")]),t._v(" "),n("a",{staticClass:"calculation__link-button text-s2i",attrs:{href:"#"},on:{click:function(t){t.preventDefault()}}},[t._v("\n        Отправить на почту\n      ")])])])])}),[],!1,null,null,null).exports),S=n(1226),D=n(48),L=(n(27),n(59),n(384)),T=n.n(L),E={mixins:[n(34).a],props:{calcResultCode:{type:String,default:null}},data:function(){return{cookieName:"saved_calc_results",cookiePath:"/",cookieDomain:"",cookieExpiryDays:90}},methods:{handleCalcResultCode:function(){if(this.calcResultCode){var t=this.getCookie(this.cookieName),e=[];void 0!==t&&(e=t.split(",")),e.push(this.calcResultCode),e=T()(e).join(","),this.setCookie(this.cookieName,e,this.cookieExpiryDays,this.cookieDomain,this.cookiePath)}}},mounted:function(){this.handleCalcResultCode()},watch:{calcResultCode:function(){this.handleCalcResultCode()}}},B=Object(x.a)(E,(function(){var t=this.$createElement;return(this._self._c||t)("div")}),[],!1,null,null,null).exports,M={link:"https://www.vision.ee.ethz.ch/publications/papers/articles/eth_biwi_00546.pdf",title:"Kia Cerato, расчет кредита / pdf, 137 kb"},F=n(31),R=n(24),$=n(1049),A=n(1038),N=n(107),q=n(1009),H=n(1113),z=n(1028),V=n(534);function G(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?G(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var U={mixins:[F.a,R.a,z.a,C.a],props:{stepData:Object,isPopup:{type:Boolean,default:!1}},data:function(){return{CalculationMockData:M,smsPopupIsOpen:!1,creditRows:this.stepData.creditRows,totalPrice:this.stepData.totalPrice,priceDependence:this.stepData.priceDependence,bankLogoResize:"115x27",loadingPdf:!1,isPopupFavoriteOpened:!1,isPopupPdfSendingOpened:!1,popupFormComponent:"AddedCredit",popupFormProps:{},popupCalcResultId:{data:{},isOpened:!1},calcResultId:null,dateCreateOptions:{month:"2-digit",day:"2-digit",year:"numeric"}}},computed:Y({},Object(v.c)("calculator",["currentProgram","currentBankOffer","menuLinks"]),{},Object(v.e)("cars-detail",["car"]),{},Object(v.e)("calculator",["banks","model","complectationId","complectation","selectedOffers","monthlyPayment","firstPayment","term","tradeIn","currentCity","gifts","offers","calcResult","isFavoriteChecked","isFavoriteLoading","isFavorite","tradeInResultId","isTradeInChecked","tradeInResult"]),{},Object(v.e)("step-manager",["currentStepIndex"]),{menuButtons:function(){return{mainButton:{title:"Заявка на онлайн одобрение"},links:[].concat(Object(i.a)(this.menuLinks),[{title:"Заявка дилеру",name:"models-code-calc-step_6-unique-preorder",params:{code:this.model.code,unique:this.calcResult.unique_code,isLoaded:!0}}])}},pdfSendingProps:function(){return{page:"calculator",uniqueId:this.stepData.calcResultId,formData:this.formData,modelName:this.model.name,modelId:this.model.id,header:"Отправить ссылку на расчет кредита по email",uniqueUrl:this.uniqueUrl}},smsSendingProps:function(){return{header:"Отправить ссылку на расчет кредита по sms",linkOn:"расчет кредита",code:"credit",dynamic_variables:{credit_id:this.stepData.calcResultId,model_name:this.model.name}}},formData:function(){var t=new FormData;t.append("term",this.term),t.append("trade_in",this.tradeIn),t.append("first_payment",this.firstPayment),t.append("monthly_payment",this.monthlyPayment),t.append("credit_program",this.currentProgram.id),t.append("current_rate",this.stepData.currentRate),t.append("unique_id",this.complectation.unique_id),t.append("residual_payment",this.stepData.residualPayment),t.append("current_insurance_rate",this.stepData.currentInsuranceRate),t.append("credit_total_insurance_price",this.stepData.currentCredit),t.append("calc_result_id",this.calcResult.unique_code),t.append("created_at",this.calcResult.created_at),this.isPopup&&t.append("car_price",this.car.price);var e=a()(this.selectedOffersWithTradeIn,(function(t){return t.id}));for(var n in e)t.append("special_offers[]",e[n]);return t},selectedOffersWithTradeIn:function(){var t=this;return c()(this.offers,(function(e){return-1!==u()(t.selectedOffers,e.id)&&!(t.stepData.isPopup&&e.is_traid_in&&!t.isTradeInChecked)}))},uniqueUrl:function(){return window.location.origin+"/r/"+this.calcResult.unique_code+"/"}}),methods:Y({},Object(v.b)("calculator",["saveCalcResultId","checkIsFavorite"]),{},Object(v.b)("watched",["addWatched"]),{},Object(v.d)("step-manager",["prevStep"]),{},Object(v.d)("calculator",["setIsPopupCreditSelected","setIsFavoriteChecked","setIsFavoriteLoading","setIsFavorite"]),{toggleSmsPopup:function(){this.smsPopupIsOpen||this.dataLayerPush("Saving","Send by sms"),this.smsPopupIsOpen=!this.smsPopupIsOpen},notClean:function(t){var e=this,n=null,i={vehicleModelYear:this.complectation.model_code.substr(4,4),vehicleNameplate:this.model.name,vehicleTransmission:this.complectation.gearbox_name_en,vehicleTrim:this.complectation.name,financeProduct:this.currentProgram.name_en,vehicleEngine:"".concat(this.complectation.engine_name," | ").concat(this.complectation.engine_power_hp," h.p. | ").concat(this.complectation.fuel_type_name_en),driveUnit:this.complectation.drive_name_en,calculationId:this.stepData.calcResultId,lifeInsurance:this.stepData.currentRate===this.stepData.currentInsuranceRate?"No":"Yes",customerDeposit:this.firstPayment,tradeInOffer:this.tradeIn,amountOfCredit:Math.round(this.stepData.currentCredit),optionalFinalPayment:parseInt(this.stepData.residualPayment),creditterm:this.term,monthlyPayments:this.monthlyPayment},r=this.firstPayment-this.tradeIn;r>0&&this.tradeIn>0&&(i.onTheRoadPrice=r),this.selectedOffers.length>0&&(i.specialOffer=Object.values(this.selectedOffers).map((function(t){return m()(e.offers,{id:t}).name})).join("|")),this.$auth.user&&(i.kiaCustomerId=this.$auth.user.id),this.tradeInResult&&(i.tradeInId=this.tradeIn.unique_code),"models-code-calc-step_6-unique-preorder"===t.buttonName&&(this.$emit("not-clean-store"),n="Loan request to dealer"),-1!==t.buttonName.indexOf("/cars")&&(n="Car locator"),-1!==t.buttonName.indexOf("buy/trade-in")&&(n="Trade-in"),this.dataLayerPush("Navigation","Sticky menu",n,i)},buyCreditApprovalRedirect:function(){this.dataLayerPush("Navigation","Sticky menu","Application for online approval"),this.$emit("not-clean-store"),this.$router.push({name:"models-code-calc-step_6-unique-preapproval",params:{code:this.model.code,unique:this.calcResult.unique_code}})},createCreditPdf:function(){var t=this;this.loadingPdf||(this.loadingPdf=!0,h.a.createCreditPdf(this.formData,this.model.code).finally((function(){h.a.getCreditPdfLink(t.formData).then((function(e){t.dataLayerPush("Saving","Download pdf",e)})),t.loadingPdf=!1})))},calcResultChanged:function(t){return"undefined"===this.calcResult.unique_code||(!p()(t.gifts,this.calcResult.gifts)||t.car_id!==this.calcResult.car_id||t.total_price!==this.calcResult.total_price||t.credit_rate!==this.calcResult.credit_rate||t.credit_price!==this.calcResult.credit_price||t.credit_period!==this.calcResult.credit_period||t.benefit_price!==this.calcResult.benefit_price||t.bank_offer_id!==this.calcResult.bank_offer_id||t.first_payment!==this.calcResult.first_payment||t.insurance_rate!==this.calcResult.insurance_rate||t.monthly_payment!==this.calcResult.monthly_payment||t.insurance_price!==this.calcResult.insurance_price||t.trade_in_payment!==this.calcResult.trade_in_payment||t.residual_payment!==this.calcResult.residual_payment||t.complectation_id!==this.calcResult.complectation_id||t.credit_program_id!==this.calcResult.credit_program_id||!p()(t.special_offers,this.calcResult.special_offers)||t.trade_in_result_id!==this.calcResult.trade_in_result_id||t.complectation_price!==this.calcResult.complectation_price||this.currentProgram.has_additional_services&&t.additional_services_price!==this.calcResult.additional_services_price)},onFavoriteClick:function(){var t=this;this.dataLayerPush("Saving","Add loan calculator to favorites"),this.setIsFavoriteLoading(!0),this.$axios(_.a.addFavorite("credit",this.stepData.resultId)).then((function(e){t.popupFormProps={modelLineName:"".concat(t.stepData.modelLineName," ").concat(t.stepData.complectationName," ").concat(t.stepData.year),calcResultId:t.stepData.calcResultId,alreadyAdded:!1,success:!1},e.data.content.success?(t.setIsFavorite(!0),t.popupFormProps.success=!0):1==e.data.error&&"favorite_already_added_exception"===e.data.content.error_code&&(t.setIsFavorite(!0),t.popupFormProps.alreadyAdded=!0),t.isPopupFavoriteOpened=!0})).finally((function(){t.setIsFavoriteLoading(!1)}))},openPopupCalcResultId:function(){Object.assign(this,{popupCalcResultId:{data:{title:"Уникальный ID результата расчета кредита",description:"\n                <p>Уникальный ID результата расчета кредита — это код, который хранит данные о подобранном вами автомобиле, его характеристики и комплектации, а так же произведённые ранее расчёты цен.</p>\n                <p>Сохраните ссылку или код и откройте ваш результат расчета кредита в любое время с любого устройства.</p>\n                <p>Код действует 3 месяца.</p>\n              ",buttonClose:!0},isOpened:!0}}),this.dataLayerPush("Info pop-up","loan calculator id description","Open")},closePopupCalcResultId:function(){Object.assign(this,{popupCalcResultId:{data:{},isOpened:!1}})},closePopupFavorite:function(){this.isPopupFavoriteOpened=!1},copyUrlToClipboard:function(t){this.dataLayerPush("Saving","Copy link");var e,n=this.$refs.copyButton,i=this.$refs.copyInput;clearTimeout(e),i.value=this.uniqueUrl,i.select(),document.execCommand("copy"),n.classList.add("hinted_callback-done"),e=setTimeout((function(){n.classList.remove("hinted_callback-done")}),2e3)},closePdfSubmissionForm:function(){this.isPopupPdfSendingOpened=!1},openPdfSubmissionForm:function(){this.dataLayerPush("Saving","Send loan calculator to email"),this.isPopupPdfSendingOpened=!0},submitPopupCredit:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setIsPopupCreditSelected(!0),this.$emit("submit-credit-popup",t)},popupReset:function(){this.dataLayerPush("Calculator pop-up","Loan calculator","Recalculate"),this.prevStep()},dealerRequest:function(){this.dataLayerPush("Loan Calculator","Results","Loan request to dealer"),this.stepData.isPopup?this.submitPopupCredit(!0):this.$router.push({name:"models-code-calc-step_6-unique-preorder",params:{code:this.model.code,unique:this.calcResult.unique_code,isLoaded:!0}})},preapprovalRequest:function(){this.dataLayerPush("Loan Calculator","Results","Application for online approval"),this.stepData.isPopup?(this.submitPopupCredit(),this.$router.push({name:"models-code-cars-city-id-preapproval",params:{car:this.car}})):this.$router.push({name:"models-code-calc-step_6-unique-preapproval",params:{code:this.model.code,unique:this.calcResult.unique_code,isLoaded:!0}})}}),created:function(){var t=this,e=a()(this.selectedOffersWithTradeIn,(function(t){return{id:t.id,name:t.name,price:t.price.toString()}})),n=a()(this.gifts,(function(t){return t.id})),i=Math.round(this.stepData.currentCredit),r={credit_period:this.term,credit_price:i,trade_in_payment:this.tradeIn,first_payment:this.firstPayment,monthly_payment:this.monthlyPayment,total_price:this.stepData.totalPrice,car_id:this.isPopup&&this.car.id||null,credit_rate:this.stepData.currentRate,complectation_id:this.complectation.id,credit_program_id:this.currentProgram.id,complectation_price:this.complectation.price,car_external_id:this.$route.params.id||null,benefit_price:this.currentProgram.benefit_price,residual_payment:parseInt(this.stepData.residualPayment),gifts:n.length>0?{gifts:n}:null,bank_offer_id:this.currentBankOffer?this.currentBankOffer.id:null,trade_in_result_id:this.isTradeInChecked?this.tradeInResultId:null,additional_services_price:this.currentProgram.additional_services_price,insurance_price:i-(this.stepData.totalPrice-this.firstPayment),insurance_rate:this.stepData.currentRate-this.stepData.currentInsuranceRate,special_offers:e.length>0?{special_offers:e}:null};this.calcResultId=this.calcResult.unique_code,this.calcResultChanged(r)&&this.saveCalcResultId(r).then((function(e){t.calcResult.unique_code&&!t.stepData.isPopup&&history.pushState({},null,t.$route.path+"step_".concat(t.currentStepIndex+1,"/").concat(t.calcResult.unique_code,"/")),t.setIsFavoriteChecked(!1),t.checkIsFavorite(e.data.content.calc_result_id),t.addWatched({type:V.watchedTypes.credit,id:e.data.content.calc_result_id})})),this.stepData.resultId&&(this.isFavoriteChecked||this.checkIsFavorite(this.stepData.resultId),this.addWatched({type:V.watchedTypes.credit,id:this.stepData.resultId}))},mounted:function(){var t=this,e={vehicleModelYear:this.complectation.model_code.substr(4,4),vehicleNameplate:this.model.name,vehicleTransmission:this.complectation.gearbox_name_en,vehicleTrim:this.complectation.name,financeProduct:this.currentProgram.name_en,vehicleEngine:"".concat(this.complectation.engine_name," | ").concat(this.complectation.engine_power_hp," h.p. | ").concat(this.complectation.fuel_type_name_en),driveUnit:this.complectation.drive_name_en,calculationId:this.stepData.calcResultId,lifeInsurance:this.stepData.currentRate===this.stepData.currentInsuranceRate?"No":"Yes",customerDeposit:this.firstPayment,tradeInOffer:this.tradeIn,amountOfCredit:Math.round(this.stepData.currentCredit),optionalFinalPayment:parseInt(this.stepData.residualPayment),creditterm:this.term,monthlyPayments:this.monthlyPayment},n=this.firstPayment-this.tradeIn;n>0&&this.tradeIn>0&&(e.onTheRoadPrice=n),this.selectedOffers.length>0&&(e.specialOffer=Object.values(this.selectedOffers).map((function(e){return m()(t.offers,{id:e}).name})).join("|")),this.tradeInResult&&(e.tradeInId=this.tradeIn.unique_code),this.$auth.user&&(e.kiaCustomerId=this.$auth.user.id),this.dataLayerPush("Loan Calculator","Results","Complete",e,!0),this.stepData.isPopup||window.scrollTo(0,0)},components:{Popup:g.a,PopupContent:b.a,PopupContentForm:y.a,Total:w,Calculation:k,Approval:S.a,IconLink:$.a,CloseIcon:D.a,DocumentIcon:I.a,TrickRightIcon:A.a,Loader:N.a,Preloader:q.a,MenuButtons:H.a,CalculatorResults:B}},W=(n(1282),Object(x.a)(U,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isPopup?n("div",{staticClass:"text-x4 mb-6"},[t._v("Расчет кредита")]):t._e(),t._v(" "),n("div",{staticClass:"mb-6"},[n("Total",{attrs:{totalPrice:t.totalPrice,priceDependence:t.priceDependence,creditRows:t.creditRows,isPopup:t.stepData.isPopup}})],1),t._v(" "),t.stepData.isPopup?n("div",{staticClass:"mt-6"},[n("div",{staticClass:"w-full tablet:w-1/2 desktop:w-full desktop1440:w-2/3"},[n("g-button",{staticClass:"step3__control mb-2 mr-4",nativeOn:{click:function(e){return t.submitPopupCredit(!1)}}},[t._v("\n          Применить\n        ")]),t._v(" "),n("g-button",{staticClass:"step3__control mb-2",attrs:{inverted:"",hasBorder:""},nativeOn:{click:function(e){return t.popupReset()}}},[t._v("\n          Пересчитать\n        ")])],1)]):t._e(),t._v(" "),t.stepData.calcResultId?n("div",{class:["mt-6",{"text-s3":t.stepData.isPopup}]},[n("span",[t._v("Дата расчета: "+t._s(t.formatDate(t.calcResult.created_at/1e3,t.dateCreateOptions)))])]):t._e(),t._v(" "),n("div",{staticClass:"unique-id unique-id_asided my-6"},[t.stepData.calcResultId?n("div",{staticClass:"unique-id__info"},[n("div",{staticClass:"unique-id__info-title text-s2-b"},[n("div",{staticClass:"inline-flex items-center"},[n("div",[t._v("\n              ID расчёта\n            ")]),t._v(" "),n("g-button-info",{staticClass:"unique-id__info-button hinted hinted_bottom",on:{click:t.openPopupCalcResultId}})],1)]),t._v(" "),n("div",{staticClass:"unique-id__info-code text-x5",on:{click:t.copyUrlToClipboard}},[n("div",{ref:"copyButton",staticClass:"unique-id__info-code-content hinted hinted_bottom hinted_callback"},[n("input",{ref:"copyInput",staticClass:"unique-id__info-code-input",attrs:{name:"copyInput",value:""}}),t._v("\n\n            "+t._s(t.stepData.calcResultId)+"\n\n            "),n("div",{staticClass:"hinted-text"},[t._v("\n              Ссылка скопирована\n            ")])]),t._v(" "),n("IconLink",{staticClass:"ml-2"})],1)]):t._e(),t._v(" "),n("div",{staticClass:"unique-id__links"},[t.stepData.calcResultId?n("div",{staticClass:"unique-id__links-item"},[t.isFavorite?n("div",[t._v("\n            Сохранено в избранном\n          ")]):n("div",[t.isFavoriteLoading?[n("Loader",{attrs:{inline:!0}})]:[n("a",{attrs:{href:"javascript:"},on:{click:t.onFavoriteClick}},[t._v("\n                Сохранить в избранное\n              ")])]],2)]):t._e(),t._v(" "),n("div",{staticClass:"unique-id__links-item"},[n("a",{attrs:{href:"javascript:"},on:{click:t.createCreditPdf}},[t._v("\n            Загрузить в pdf\n          ")])]),t._v(" "),n("div",{staticClass:"unique-id__links-item"},[n("a",{attrs:{href:"javascript:"},on:{click:t.openPdfSubmissionForm}},[t._v("\n            Отправить на email\n          ")])]),t._v(" "),t.stepData.calcResultId?n("div",{staticClass:"unique-id__links-item"},[n("a",{attrs:{href:"javascript:"},on:{click:t.toggleSmsPopup}},[t._v("\n            Отправить по sms\n          ")])]):t._e()])]),t._v(" "),n("div",{staticClass:"flex flex-wrap mb-12 tablet:mb-16"},[n("div",{staticClass:"w-full tablet:w-1/2 desktop:w-full desktop1440:w-1/3 text-s1 mb-2 tablet:mb-0 desktop:mb-6 desktop1440:mb-0"},[t._v("\n        Онлайн-одобрение кредита\n      ")]),t._v(" "),n("div",{staticClass:"w-full tablet:w-1/2 desktop:w-full desktop1440:w-2/3"},[n("div",{staticClass:"text-s2 mb-6 tablet:mb-4 desktop:mb-6"},[t._v("\n          Воспользуйтесь удобным сервисом для отправки онлайн-заявки на одобрение кредита на покупку\n          автомобиля. Заполнение заявки на сайте займет несколько минут.\n        ")]),t._v(" "),n("div",{staticClass:"w-full tablet:w-1/2 desktop:w-full desktop1440:w-2/3",on:{click:function(e){return t.$emit("not-clean-store")}}},[n("g-button",{staticClass:"button_fixed-width",nativeOn:{click:function(e){return t.preapprovalRequest(e)}}},[t._v("\n            Заявка на онлайн-одобрение\n          ")])],1)])]),t._v(" "),n("div",{staticClass:"flex flex-wrap mb-12 tablet:mb-16"},[n("div",{staticClass:"w-full tablet:w-1/2 desktop:w-full desktop1440:w-1/3 text-s1 mb-2 tablet:mb-0 desktop:mb-6 desktop1440:mb-0"},[t._v("\n        Нужна консультация?\n      ")]),t._v(" "),n("div",{staticClass:"w-full tablet:w-1/2 desktop:w-full desktop1440:w-2/3"},[n("div",{staticClass:"text-s2 mb-6 tablet:mb-4 desktop:mb-6"},[t._v("\n          Закажите звонок и дилер проконсультирует Вас по вопросам оформления кредита.\n        ")]),t._v(" "),n("div",{staticClass:"w-full tablet:w-1/2 desktop:w-full desktop1440:w-2/3",on:{click:function(e){return t.$emit("not-clean-store")}}},[n("g-button",{staticClass:"button_fixed-width",attrs:{inverted:"",hasBorder:""},nativeOn:{click:function(e){return t.dealerRequest(e)}}},[t._v("\n            Заявка дилеру\n          ")])],1)])]),t._v(" "),t.isPopupFavoriteOpened?n("Popup",[n("PopupContentForm",{attrs:{"component-name":t.popupFormComponent,"component-props":t.popupFormProps},on:{"close-popup":t.closePopupFavorite}})],1):t._e(),t._v(" "),t.isPopupPdfSendingOpened?n("Popup",[n("PopupContentForm",{attrs:{"component-name":"SendPdf","component-props":t.pdfSendingProps},on:{"close-popup":t.closePdfSubmissionForm}})],1):t._e(),t._v(" "),t.smsPopupIsOpen?n("Popup",[n("PopupContentForm",{attrs:{"component-name":"LinkBySms","component-props":t.smsSendingProps},on:{"close-popup":t.toggleSmsPopup}})],1):t._e(),t._v(" "),t.popupCalcResultId.isOpened?n("Popup",[n("PopupContent",{attrs:{popup:t.popupCalcResultId.data},on:{"toggle-info-popup":t.closePopupCalcResultId}})],1):t._e(),t._v(" "),t.isPopup?t._e():n("MenuButtons",{attrs:{params:t.menuButtons,isCalculator:!0},on:{"button-menu":t.notClean,"main-button-callback":t.buyCreditApprovalRedirect}}),t._v(" "),n("CalculatorResults",{attrs:{"calc-result-code":t.calcResult.unique_code}})],1)}),[],!1,null,null,null));e.a=W.exports},1294:function(t,e,n){"use strict";n(7),n(3),n(84),n(33),n(38),n(26),n(36),n(9),n(10),n(8),n(108),n(5);var i=n(32),r=n(15),s=n(14),a=n.n(s),o=n(107),c=n(24),l=(n(13),n(49),n(1223)),u=n(1181),d=n(31),p=n(37),f=n(62),m=n(18);function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}var _={mixins:[d.a,p.a],props:{creditRows:Array,totalPrice:Number,priceDependence:Array},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(m.e)("ui",["header"]),{},Object(m.e)("calculator",["currentProgramIndex","complectation","monthlyPayment","model"]),{complectationName:function(){return"".concat(this.complectation.model_line_name," ").concat(this.complectation.name)},modelMonthlyPayment:function(){return this.monthlyPayment?this.formatMoney(this.monthlyPayment,"₽/мес"):this.model.min_credit_price?"от ".concat(this.formatMoney(this.model.min_credit_price,"₽/мес")):null},complectationDescription:function(){var t=[];return this.complectation.engine_name&&t.push(this.complectation.engine_name),this.complectation.engine_power_hp&&t.push("".concat(Math.round(this.complectation.engine_power_hp)," л.с.")),this.complectation.fuel_type_name&&t.push(this.complectation.fuel_type_name),this.complectation.gearbox_name&&t.push(this.complectation.gearbox_name),this.complectation.drive_name&&t.push("".concat(this.complectation.drive_name," привод")),this.complectation.year&&t.push("".concat(this.complectation.year," год производства")),t.join(" / ")},translateY:function(){var t=this.isUnderInitialHeader,e=this.isOpen,n=this.header.isFixedHeaderVisible||t?60:0,i=e?"0":"calc(-100% + ".concat(70,"px + ").concat(n,"px)");return i}}),data:function(){return{isOpen:!1,isUnderInitialHeader:!0,disableTransition:!0,forceTransition:!1,isChequeFixed:!1,isChequeScrolled:!1,resize:"300x200"}},mounted:function(){window.addEventListener("load",this.handleScroll,{passive:!0}),window.addEventListener("resize",this.handleScroll,{passive:!0}),window.addEventListener("scroll",this.handleScroll,{passive:!0}),this.$refs.bottom.addEventListener("touchmove",this.handleTouchMove,{passive:!1})},beforeDestroy:function(){window.removeEventListener("load",this.handleScroll),window.removeEventListener("resize",this.handleScroll),window.removeEventListener("scroll",this.handleScroll),this.$refs.bottom.removeEventListener("touchmove",this.handleTouchMove)},methods:{handleTouchMove:function(t){t.preventDefault()},handleScroll:function(){var t=window.scrollY,e=Math.round(window.innerHeight),n=Math.round(document.getElementsByClassName("page-wrapper__footer")[0].offsetTop);t<60?this.isUnderInitialHeader=!this.header.isFixedHeaderVisible:(this.disableTransition=this.isUnderInitialHeader,this.isUnderInitialHeader=!1);var i=Math.round(this.$refs.cheque.offsetTop);this.isChequeFixed=t>i,this.isChequeScrolled=t+e>n+1},toggle:function(){this.isOpen=!this.isOpen,this.forceTransition=!0,this.isOpen?Object(f.disableBodyScroll)(this.$refs.chequeContent):Object(f.enableBodyScroll)(this.$refs.chequeContent)}},components:{Row:l.a,Dot:u.a}},v=(n(1283),n(2)),g=Object(v.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("aside",{ref:"cheque",class:["cheque desktop:bg-pale-beige",t.isUnderInitialHeader?"absolute":"fixed",{"cheque--open":t.isOpen},{"cheque--no-transition":!t.forceTransition&&(t.isUnderInitialHeader||t.disableTransition)},{"is-fixed":t.isChequeFixed},{"is-scrolled":t.isChequeScrolled}],style:"transform: translateY("+t.translateY+");"},[t.isOpen?n("div",{directives:[{name:"touch",rawName:"v-touch:tap",value:t.toggle,expression:"toggle",arg:"tap"},{name:"touch",rawName:"v-touch:swipe.bottom.top",value:t.toggle,expression:"toggle",arg:"swipe",modifiers:{bottom:!0,top:!0}}],staticClass:"cheque-overlay"}):t._e(),t._v(" "),n("div",{staticClass:"cheque-wrap"},[n("div",{ref:"chequeContent",staticClass:"cheque-content flex flex-col"},[n("div",{staticClass:"text-x5"},[t._v(t._s(t.complectationName))]),t._v(" "),n("div",{staticClass:"text-x5"},[t._v(t._s(t.formatMoney(t.complectation.price)))]),t._v(" "),t.modelMonthlyPayment?n("div",{staticClass:"text-x5"},[t._v(t._s(t.modelMonthlyPayment))]):t._e(),t._v(" "),n("div",{staticClass:"text-s2i mt-1",domProps:{innerHTML:t._s(t.complectationDescription)}}),t._v(" "),n("button",{staticClass:"cheque-edit text-s2i my-2 mx-0 p-0 color-disabled-gray",on:{click:function(e){return t.$emit("calculator-change-model")}}},[t._v("\n        Изменить\n      ")]),t._v(" "),t.model.image_side_view?n("img",{staticClass:"cheque-image mt-3 mb-6",attrs:{src:t.getResizeImagePath(t.model.image_side_view,t.resize)}}):t._e(),t._v(" "),n("div",{staticClass:"pb-12 desktop:pb-0"},[n("row",{attrs:{value:t.formatMoney(t.complectation.price),label:"Стоимость авто"}}),t._v(" "),t._l(t.priceDependence,(function(e,i){return n("row",{key:i,attrs:{label:e.label,value:(e.isAdd?"+":"-")+" "+t.formatMoney(e.value),hideValue:!Boolean(e.value)}})})),t._v(" "),t.priceDependence.length>0?[n("hr",{staticClass:"cheque-separator m-0 my-2"}),t._v(" "),n("row",{staticClass:"cheque-row_total",attrs:{value:t.formatMoney(t.totalPrice),label:"Итоговая стоимость"}})]:t._e()],2),t._v(" "),t.currentProgramIndex||t.modelMonthlyPayment?n("div",{staticClass:"mt-8 pb-12 desktop:pb-0"},[n("row",{attrs:{label:"Расчет Kia Finance"}}),t._v(" "),n("hr",{staticClass:"cheque-separator--pale m-0 my-2"}),t._v(" "),t.currentProgramIndex?[t._l(t.creditRows,(function(e,i){return n("row",t._b({key:i},"row",e,!1))})),t._v(" "),n("hr",{staticClass:"cheque-separator m-0 my-2"})]:t._e(),t._v(" "),n("row",{staticClass:"is-summary",attrs:{value:t.modelMonthlyPayment,label:"Ежемесячный платеж"}})],2):t._e()])]),t._v(" "),n("div",{directives:[{name:"touch",rawName:"v-touch:tap",value:t.toggle,expression:"toggle",arg:"tap"},{name:"touch",rawName:"v-touch:swipe.bottom.top",value:t.toggle,expression:"toggle",arg:"swipe",modifiers:{bottom:!0,top:!0}}],ref:"bottom",class:["cheque-bottom flex flex-col justify-end items-center pb-2",t.isOpen?"bg-transparent":"bg-black"]},[t.isOpen?t._e():n("div",{staticClass:"flex justify-between items-baseline w-full color-white px-6 tablet:px-12"},[n("div",{staticClass:"text-s2-b tablet:text-x5"},[t._v(t._s(t.complectationName))]),t._v(" "),n("div",{staticClass:"flex flex-col items-end tablet:items-start tablet:flex-row text-s3 tablet:text-s2-b"},[n("span",[t._v(t._s(t.formatMoney(t.totalPrice)))]),t._v(" "),n("dot",{staticClass:"cheque-bottom-dot mx-1"}),t._v(" "),t.modelMonthlyPayment?n("span",{staticClass:"mt-1 tablet:mt-0"},[t._v(t._s(t.modelMonthlyPayment))]):t._e()],1)]),t._v(" "),n("div",{class:["cheque-bottom-handle mt-1",t.isOpen?"bg-gray":"bg-dark-gray"]})])])}),[],!1,null,null,null).exports,b=n(1002),y=n(163),C=n(170),P={props:{description:{type:String,default:"Данное предложение по расчету страховой премии носит исключительно информационный характер, не является публичной офертой (ст. 437 ГК РФ). Расчет кредита является предварительным, носит ориентировочный характер и подлежит уточнению перед или непосредственно при заключении договоров кредитования/страхования. Доступны иные варианты расчетов при разных параметрах кредита. Информация о ставках кредита и иных параметрах кредитного предложения предоставлена банками-партнерами ООО «Киа Россия и СНГ», которые предоставляют кредит: ПАО «РОСБАНК» (Лицензия №1792 от 13.02.2013г.) и ООО «Сетелем Банк» ООО (Лицензия №2168 от 27.06.2013г.). Общие условия кредитования: валюта кредита рубли РФ, первоначальный взнос от 0% от стоимости автомобиля; срок кредита: от 12 до 60 мес.; процентная ставка банка от 6.4% до 17.1% годовых; минимальная сумма кредита 100 000 руб., максимальная сумма кредита 4 000 000 руб. Обеспечение кредита – залог автомобиля. Предполагается возможность включения в сумму кредита страховых премий по страхованию жизни и здоровья заемщика. Условия могут быть изменены в одностороннем порядке банками-партнерами. Подробные условия кредитования, требования к условиям страхования и заемщикам уточняйте у банков-партнеров и менеджеров в официальных дилерских центрах ООО «Киа Россия и СНГ»."},isPopup:{type:Boolean,default:!1}},mixins:[d.a],data:function(){return{banks:[{id:"1",name:"Русфин Банк",logo:"/images/rusfin-bank-logo.png"},{id:"2",name:"Сетелем",logo:this.generateFilePath("/sale-data/banks/logo/logo_setelem_gray.jpg")},{id:"3",name:"Совкомбанк",logo:"/images/sovcom-bank-logo.svg"},{id:"4",name:"Major Leasing",logo:"/images/logo_major_leasing_black.png"},{id:"5",name:"Совкомбанк лизинг",logo:"/images/sovkom-leasing_black.png"}],program:{logo:"/images/kia-finance-logo.png"}}},components:{VClamp:b.a,IconTickDown:y.a,IconTickUp:C.a}},O=(n(1284),Object(v.a)(P,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["color-disabled-gray",{"mt-6":t.isPopup}]},[n("div",{staticClass:"bottom-logos flex flex-col tablet:flex-row pb-6"},[n("div",[n("div",{staticClass:"text-s2i "},[t._v("\n        Программа\n      ")]),t._v(" "),n("img",{staticClass:"mt-4",attrs:{src:t.program.logo,alt:""}})]),t._v(" "),n("div",{staticClass:"mt-6 tablet:mt-0 tablet:ml-16"},[n("div",{staticClass:"text-s2i"},[t.banks.length>1?[t._v("\n          Официальные банки-партнеры\n        ")]:[t._v("\n          Официальный банк-партнер\n        ")]],2),t._v(" "),n("div",{staticClass:"flex flex-wrap items-center"},t._l(t.banks,(function(t){return n("img",{staticClass:"mt-3 mr-6",attrs:{src:t.logo,alt:""}})})),0)])]),t._v(" "),t.isPopup?n("div",{staticClass:"mt-4"},[n("v-clamp",{attrs:{autoresize:"","max-lines":5,ellipsis:"..."},scopedSlots:t._u([{key:"after",fn:function(e){var i=e.toggle,r=e.expanded,s=e.clamped;return n("div",{staticClass:"mt-1 text-s2-b color-black",on:{click:i}},[s?n("span",{staticClass:"inline-flex items-center cursor-pointer"},[t._v("\n          Подробнее\n          "),n("icon-tick-down")],1):t._e(),t._v(" "),r?n("span",{staticClass:"inline-flex items-center cursor-pointer"},[t._v("\n          Свернуть\n          "),n("icon-tick-up")],1):t._e()])}}],null,!1,1384775888)},[t._v("\n      "+t._s(t.description)+"\n      ")])],1):t._e()])}),[],!1,null,null,null).exports),x=n(1087),w=n(1054),I=n(532);function j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?j(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var S={mixins:[p.a,w.a,c.a],props:{steps:Array,pageTitle:String,currentStepIndex:Number,currentTradeIn:Object,isPopup:{type:Boolean,default:!1}},data:function(){return{insurancePercent:3.9,calcResultChanged:!1,isCustomerDepositSended:!1,isOptionalFinalSended:!1,isCreditTerm:!1}},methods:k({},Object(m.d)("calculator",["clearCurrentProgramIndex","setCurrentProgramIndex","clearSelectedOffers","setCurrentStepIndex","setResidualPayment","setMonthlyPayment","setSelectedOffers","setDisabledOffers","setLoadingResult","setFirstPayment","selectOffer","disclaimers","setTradeIn","nextStep","setTerm"]),{},Object(m.d)("step-manager",["setCurrentStepIndex"]),{},Object(m.b)("calculator",["loadPage","loadBottomDisclaimer"]),{getStepData:function(t){return t===this.stepIndices.offers?this.firstStepData:t===this.stepIndices.credit?this.secondStepData:t===this.stepIndices.calculator_final?this.thirdStepData:{}},isStepDataLoaded:function(){return!1},monthlyPaymentChangeHandler:function(){this.setFirstPayment(parseInt(this.calculateFirstPay()))},firstPaymentChangeHandler:function(){this.updateMonthlyPay(),this.isCustomerDepositSended||(this.dataLayerPush("Loan Calculator","Loan condition","Customer deposit"),this.isCustomerDepositSended=!0)},handleMultirangeChange:function(t){var e=this.calcValueByPercent(t.initialPayment,this.totalPrice),n=this.calcValueByPercent(t.residualPayment,this.totalPrice);this.firstPayment!==e&&(this.isCustomerDepositSended||(this.dataLayerPush("Loan Calculator","Loan condition","Customer deposit"),this.isCustomerDepositSended=!0)),this.residualPayment!==n&&(this.isOptionalFinalSended||(this.dataLayerPush("Loan Calculator","Loan condition","Optional final payment"),this.isOptionalFinalSended=!0)),this.setFirstPayment(e),this.setResidualPayment(n),this.updateMonthlyPay()},checkParamsCreditProgramByTerm:function(t){return t&&t.settings&&t.settings.residual&&t.settings.residual.params&&t.settings.residual.period===this.term},insuranceSelectHandler:function(){this.updateMonthlyPay()},closeCreditPopup:function(t){this.$emit("close-popup",t)},programSelectHandler:function(){var t=this.currentProgram;this.setTerm(t.max_credit_period),this.setFirstPayment(this.defaultFirstPayment),this.setResidualPayment(this.defaultResidualPayment),this.updateMonthlyPay()},selectStepHandler:function(t){this.setCurrentStepIndex({index:t,fromProgressBar:!0})},updateCalc:function(){if(this.isCreditTerm||36===this.term||(this.dataLayerPush("Loan Calculator","Loan condition","Credit term"),this.isCreditTerm=!0),this.currentProgram&&this.currentProgram.is_residual_payment){var t=this.calcPercentByValue(this.residualPayment,this.totalPrice);(t<this.minResidualPaymentPercent||t>this.maxResidualPaymentPercent||t%this.residualPaymentStep!=0)&&this.setResidualPayment(this.defaultResidualPayment)}this.firstPayment>this.maxFirstPayment?this.setFirstPayment(this.maxFirstPayment):this.firstPayment<this.minFirstPayment&&this.setFirstPayment(this.minFirstPayment),this.updateMonthlyPay()},updateMonthlyPay:function(){this.setMonthlyPayment(this.calculateMonthlyPay())},calculateMinMaxMonthlyPay:function(t){if(!this.currentProgram)return 0;var e=this.getCreditProgramMonthRate(this.currentProgram.rate_conditions,this.totalPrice,t),n=(e=e/100/12)/(1-Math.pow(1+e,-this.term));return this.insurancePrice,(this.totalPrice-t-this.residualPayment+this.additionalServicesPrice)*n+e*this.residualPayment},calculateMonthlyPay:function(){if(!this.currentProgram)return 0;var t=this.monthRate(),e=t/(1-Math.pow(1+t,-this.term)),n=0;return n=this.currentBankOffer?(this.totalPrice-this.firstPayment+this.additionalServicesPrice)/(1-this.insurancePercent*(this.term/12)/100)-this.residualPayment:this.totalPrice-this.firstPayment-this.residualPayment+this.additionalServicesPrice,parseInt(n*e+t*this.residualPayment)},calculateFirstPay:function(){if(!this.currentProgram)return 0;var t=this.monthRate(),e=t/(1-Math.pow(1+t,-this.term));return this.insurancePrice,this.totalPrice-this.residualPayment+t*this.residualPayment/e-this.monthlyPayment/e},formatRowPercent:function(t){return"".concat(this.formatNumber(t,1," ",",")," %")},monthRate:function(){return this.currentInsuranceRate()/100/12},currentRate:function(){return this.getCreditProgramMonthRate(this.currentProgram.rate_conditions,this.totalPrice,this.firstPayment)},currentBankOfferDiscount:function(){if(this.currentBankOffer){var t=JSON.parse(this.currentBankOffer.settings),e=t.map((function(t){return t.program})).indexOf(this.currentProgram.code);return-1==e?0:this.getCreditProgramMonthRate(t[e].discount,this.totalPrice,this.firstPayment)}return 0},currentInsuranceRate:function(){return this.currentRate()-this.currentBankOfferDiscount()},setCalcResult:function(){var t=this,e=!0;if(this.calcResult.special_offers){var n=function(){var e=t.calcResult.special_offers.special_offers,n=[];for(var i in e){if(void 0===t.offers[e[i].id])return t.clearSelectedOffers(),t.calcResultChanged=!0,t.setCurrentStepIndex(t.steps.length-3),{v:void 0};n.push(e[i].id)}for(var r in n)if(t.offers[n[r]].excludes.filter((function(t){return n.includes(t)})).length>0)return t.clearSelectedOffers(),t.calcResultChanged=!0,t.setCurrentStepIndex(t.steps.length-3),{v:void 0}}();if("object"===Object(i.a)(n))return n.v}if(!this.currentProgram)return this.calcResultChanged=!0,this.clearCurrentProgramIndex(),void this.setCurrentStepIndex(this.steps.length-2);if(!this.isPopup&&this.tradeIn>0&&!this.tradeInResult)return this.setTradeIn(0),this.calcResultChanged=!0,void this.setCurrentStepIndex(this.steps.length-2);if((this.calcResult.first_payment<this.minFirstPayment||this.calcResult.first_payment>this.maxFirstPayment)&&(this.setFirstPayment(this.defaultFirstPayment),e=!1),this.term<this.currentProgram.min_credit_period?(this.setTerm(this.currentProgram.min_credit_period),e=!1):this.term>this.currentProgram.max_credit_period&&(this.setTerm(this.currentProgram.max_credit_period),e=!1),this.currentProgram.is_residual_payment){var r=this.calcPercentByValue(this.calcResult.residual_payment,this.totalPrice);(r<this.minResidualPaymentPercent||r>this.maxResidualPaymentPercent||r%this.residualPaymentStep!=0)&&(this.setResidualPayment(this.defaultResidualPayment),e=!1)}this.updateMonthlyPay(),e||this.setCurrentStepIndex(this.steps.length-2),e&&this.calculateMonthlyPay()===this.calcResult.monthly_payment&&this.complectation.price===this.calcResult.complectation_price&&this.totalPrice===this.calcResult.total_price||(this.calcResultChanged=!0)}}),computed:k({},Object(m.e)("step-manager",["stepIndices"]),{},Object(m.e)("cars-detail",["car"]),{},Object(m.e)("calculator",["defaultResidualPaymentPercent","isTradeInChecked","currentProgramIndex","bottomDisclaimer","residualPayment","isLoadingResult","selectedOffers","monthlyPayment","disabledOffers","complectation","tradeInResult","isDataLoaded","firstPayment","defaultStep","calcResult","isLoading","programs","tradeIn","offers","model","term"]),{},Object(m.c)("calculator",["availablePrograms","currentProgram","currentBankOffer"]),{breadcrumbRoutes:function(){return[{name:"Модели",href:{name:"models"}},{name:this.complectation.model_line_name,href:{name:"models-code-desc",params:{code:this.model.code}}},{name:this.pageTitle}]},getTitleCalc:function(){return this.complectation?"Расчет кредита "+this.complectation.model_line_name:"Расчет кредита"},isComplectationEmpty:function(){return a()(this.complectation)},firstStepData:function(){return{complectationName:this.complectationName}},secondStepData:function(){return{totalPrice:this.totalPrice,priceDependence:this.priceDependence,currentCredit:this.creditTotalInsurancePrice,maxFirstPayment:this.maxFirstPayment,minFirstPayment:this.minFirstPayment,minFirstPaymentPercent:this.minFirstPaymentPercent,residualPaymentPercent:this.residualPaymentPercent,residualPaymentParams:this.residualPaymentParams,maxMonthlyPay:parseInt(this.calculateMinMaxMonthlyPay(this.minFirstPayment)),minMonthlyPay:parseInt(this.calculateMinMaxMonthlyPay(this.maxFirstPayment)),availablePrograms:this.availablePrograms,isPopup:this.isPopup,tradeInResult:this.tradeInResult}},thirdStepData:function(){return{creditRows:this.creditRows,totalPrice:this.totalPrice,residualPayment:this.residualPayment,currentRate:this.currentRate(),priceDependence:this.priceDependence,currentCredit:this.creditTotalInsurancePrice,currentInsuranceRate:this.currentInsuranceRate(),calcResultId:this.calcResult.unique_code,resultId:this.calcResult.id,modelLineName:this.complectation.model_line_name,complectationName:this.complectation.name,year:this.complectation.year,isPopup:this.isPopup}},minFirstPayment:function(){return this.currentProgram?this.getCreditProgramMinFirstPayment(this.currentProgram,this.totalPrice):0},maxFirstPayment:function(){return this.currentProgram?this.getCreditProgramMaxFirstPayment(this.currentProgram,this.totalPrice,this.minDefaultResidualPayment):0},minResidualPaymentPercent:function(){return this.checkParamsCreditProgramByTerm(this.currentProgram)?this.currentProgram.settings.residual.params.min_percent:this.calcPercentByValue(this.defaultResidualPayment,this.totalPrice)||this.defaultResidualPaymentPercent},minDefaultResidualPayment:function(){return this.checkParamsCreditProgramByTerm(this.currentProgram)?null:this.totalPrice-this.defaultResidualPayment||this.totalPrice-this.calcValueByPercent(this.defaultResidualPaymentPercent,this.totalPrice)},maxResidualPaymentPercent:function(){return this.checkParamsCreditProgramByTerm(this.currentProgram)?this.currentProgram.settings.residual.params.max_percent:this.calcPercentByValue(this.defaultResidualPayment,this.totalPrice)||this.defaultResidualPaymentPercent},residualPaymentStep:function(){return this.checkParamsCreditProgramByTerm(this.currentProgram)?this.currentProgram.settings.residual.params.step:this.defaultStep},residualPaymentParams:function(){return{maxPercent:this.maxResidualPaymentPercent,minPercent:this.minResidualPaymentPercent,step:this.residualPaymentStep}},defaultFirstPayment:function(){return this.currentProgram&&this.currentProgram.settings&&this.currentProgram.settings.default_persent?this.calcCreditProgramFirstPayment(this.currentProgram.settings.default_persent,this.totalPrice):this.maxFirstPayment},minFirstPaymentPercent:function(){return this.currentProgram?this.getCreditProgramMinFirstPaymentPercent(this.currentProgram):0},residualPaymentPercent:function(){return this.currentProgram&&this.currentProgram.is_residual_payment?this.getCreditProgramResidualPaymentPercent(this.currentProgram.residual_payment_conditions,this.term)||this.defaultResidualPaymentPercent:0},defaultResidualPayment:function(){return this.currentProgram&&this.currentProgram.is_residual_payment?this.getCreditProgramResidualPayment(this.currentProgram,this.totalPrice,this.term)||this.calcValueByPercent(this.defaultResidualPaymentPercent,this.totalPrice):0},additionalServicesPrice:function(){return this.currentProgram&&this.currentProgram.has_additional_services?this.currentProgram.additional_services_price:0},creditTotalPrice:function(){return this.totalPrice-this.firstPayment},creditTotalInsurancePrice:function(){var t=this.creditTotalPrice;return this.currentBankOffer?t/(1-this.insurancePercent*(this.term/12)/100):t},insurancePrice:function(){return this.currentBankOffer?this.creditTotalPrice/(1-this.insurancePercent*(this.term/12)/100)-this.creditTotalPrice:0},totalPrice:function(){var t=this.isPopup?this.car.price:this.complectation.price;return this.priceDependence.forEach((function(e){t=e.isAdd?t+e.value:t-e.value})),t},priceDependence:function(){var t=this,e=[];return this.selectedOffers.forEach((function(n){void 0===t.offers[n]||t.isPopup&&t.offers[n].is_traid_in&&!t.isTradeInChecked||e.push({label:t.offers[n].name,value:t.offers[n].price,unit:"₽"})})),this.currentProgram&&this.currentProgram.benefit_price&&e.push({label:"Выгода ".concat(this.currentProgram.name),value:this.currentProgram.benefit_price,unit:"₽"}),e},creditRows:function(){if(!this.currentProgram)return[];var t=[{label:"Первый взнос",value:this.formatMoney(this.firstPayment)}];return this.tradeIn>0&&this.isTradeInChecked&&(t.push({label:"Трейд-ин",value:"".concat(this.formatMoney(this.tradeIn))}),this.firstPayment-this.tradeIn>0&&t.push({label:"Доплата",value:"".concat(this.formatMoney(this.firstPayment-this.tradeIn))})),t.push({label:"Сумма кредита / лизинга",value:this.formatMoney(this.creditTotalInsurancePrice)}),this.residualPayment&&t.push({label:"Остаточный платеж",value:this.formatMoney(this.residualPayment)}),this.currentProgram.has_additional_services&&t.push({label:"КАСКО и ТО на 3г.",value:"+ ".concat(this.formatMoney(this.currentProgram.additional_services_price))}),t.push({label:"Срок",value:this.term+" мес"}),this.currentBankOffer?t.push({label:"Кредитная ставка со страхованием жизни",oldValue:this.formatRowPercent(this.currentRate()),value:this.formatRowPercent(this.currentInsuranceRate())}):this.currentProgram.hide_credit_rate||t.push({label:"Процентная ставка",value:this.formatRowPercent(this.currentRate())}),t},fixDiscountName:function(){return"Фиксированная скидка на ".concat(this.complectationName)},complectationName:function(){return"Kia ".concat(this.complectation.model_line_name)}}),created:function(){this.isLoading||this.isDataLoaded||this.isPopup||this.loadPage(),this.isPopup&&this.loadBottomDisclaimer(),this.isPopup&&!this.isTradeInChecked&&this.setTradeIn(0),this.isLoadingResult&&this.setCalcResult()},mounted:function(){this.isPopup||window.scrollTo(0,0),this.isLoadingResult&&this.setLoadingResult(!1)},watch:{totalPrice:function(){this.updateCalc()}},components:{Loader:o.a,ProgressBar:x.a,Breadcrumbs:I.default,Cheque:g,Bottom:O}},D=(n(1285),Object(v.a)(S,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isDataLoaded&&!t.isLoadingResult?n("div",[n("div",{staticClass:"calculator",class:t.isPopup?"pt-0":"constructor pt-12 desktop1440:pt-16"},[t.isComplectationEmpty?[t._v("\n      Модель не найдена\n    ")]:[t.isPopup?t._e():n("g-padding",{staticClass:"pt-0 desktop:pt-4"},[n("g-container",{staticClass:"flex justify-between"},[n("Breadcrumbs",{attrs:{items:t.breadcrumbRoutes}})],1),t._v(" "),n("g-container",[n("div",{staticClass:"page-title pt-8 tablet:pt-6 pb-6 tablet:pb-8"},[n("h1",{staticClass:"model-banner__title text-x5 desktop:text-x3"},[t._v(t._s(t.getTitleCalc))])])])],1),t._v(" "),t.isPopup?t._e():n("g-padding",[n("g-container",[n("progress-bar",{attrs:{steps:t.steps,currentStepIndex:t.currentStepIndex,stepClickEmitFunction:"select-step"},on:{"select-step":t.selectStepHandler}})],1)],1),t._v(" "),n("div",{staticClass:"constructor__body",class:t.isPopup?"isPopup":"mt-6"},[n("g-padding",[n("g-container",{staticClass:"flex"},[t.isPopup?t._e():n("cheque",{attrs:{totalPrice:t.totalPrice,creditRows:t.creditRows,priceDependence:t.priceDependence},on:{"calculator-change-model":function(e){return t.$emit("calculator-change-model")}}}),t._v(" "),n("main",{staticClass:"constructor__content calculator__main"},[t.calcResultChanged?n("div",[t._v("\n                Условия кредита были изменены. Пожалуйста, выберите новую программу.\n              ")]):t._e(),t._v(" "),n(t.steps[t.currentStepIndex].component,{tag:"component",attrs:{stepData:t.getStepData(t.currentStepIndex),isPopup:t.isPopup,"current-trade-in":t.currentTradeIn},on:{"term-change":t.updateCalc,"program-select":t.programSelectHandler,"monthly-payment-change":t.monthlyPaymentChangeHandler,"first-payment-change":t.firstPaymentChangeHandler,"not-clean-store":function(e){return t.$emit("not-clean-store")},"handle-multirange-change":t.handleMultirangeChange,"insurance-select":t.insuranceSelectHandler,"submit-credit-popup":function(e){return t.$emit("submit-popup",e)},"close-credit-popup":t.closeCreditPopup}}),t._v(" "),t.currentStepIndex!==t.stepIndices.offers?n("bottom",{staticClass:"mb-20",attrs:{"is-popup":t.isPopup,description:t.bottomDisclaimer}}):t._e()],1)],1)],1)],1)]],2)]):n("div",[n("Loader")],1)}),[],!1,null,null,null));e.a=D.exports},1296:function(t,e,n){"use strict";n(17),n(13),n(8),n(7),n(3),n(6),n(9),n(5),n(10);var i=["class","staticClass","style","staticStyle","attrs"];function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},s=Object.keys(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}e.a={functional:!0,render:function(t,e){var n=e._c,o=(e._v,e.data),c=e.children,l=void 0===c?[]:c,u=o.class,d=o.staticClass,p=o.style,f=o.staticStyle,m=o.attrs,h=void 0===m?{}:m,_=a(o,i);return n("svg",function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({class:[u,d],style:[p,f],attrs:Object.assign({width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},h)},_),l.concat([n("circle",{attrs:{cx:"5",cy:"5",r:"5",fill:"currentColor"}})]))}}},1297:function(t,e,n){"use strict";n(7),n(13),n(3),n(375),n(84),n(49),n(38),n(26),n(9),n(10),n(8),n(69),n(111),n(5);var i=n(32),r=n(15),s=n(0),a=n(56),o=n.n(a),c=n(14),l=n.n(c),u=n(533),d=n(24),p=n(1050),f=n(109),m=n(1022),h=n(1017),_=n(76),v=n(1028),g=n(165),b=n(1016),y=(n(55),n(18));function C(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?C(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var O={mixins:[d.a,v.a,b.a],props:{isConfigurator:{type:Boolean,default:!1},source:String,sms:{type:Object,default:function(){}},model:Object,offers:Array,offersId:Array,endTitle:String,complectation:{type:Object,default:function(){return{}}},dealershipIds:{type:Array,default:function(){return[]}},accessories:{type:Object,default:function(){}},data:{type:Object,default:function(){return{title:"Заказать звонок дилера",buttonText:"Отправить",success:{title:"Заявка успешно отправлена!",description:"Сотрудник дилерского центра Kia свяжется с Вами в ближайшее время."}}}},agreement:{type:Object,default:function(){return{}}},analyticData:{type:Object,default:function(){return{}}}},computed:P({},Object(y.e)("geo-position",["city"]),{carName:function(){return this.model.name+" "+this.complectation.name+" "+o()(this.$store.state,"complectation.engine.name","")},explanText:function(){switch(this.source){case"dealer_comp":return"После отправки заявки выбранный дилер свяжется с вами для уточнения деталей бронирования.";case"dealer_conf":return"После отправки заявки выбранный дилер свяжется с вами для уточнения деталей.";default:return"После отправки заявки выбранный дилер свяжется с Вами для уточнения деталей спецпредложения."}}}),data:function(){return{form:{name:null,surname:null,email:null,phone:null,dealer:null},isSended:!1,isBanned:!1,unlockDate:null,banType:null}},created:function(){this.fillFormUserData(this.form)},mounted:function(){this.loadAllCities()},methods:P({},Object(y.b)("geo-position",["loadAllCities"]),{bindObject:function(t,e,n){var r=this;Object.keys(t).forEach((function(s){"object"===Object(i.a)(t[s])?r.bindObject(t[s],"".concat(e,"[").concat(s,"]"),n):n.append("".concat(e,"[").concat(s,"]"),t[s])}))},onSubmit:function(){var t=this,e=new FormData;if(e.append("source",this.source),e.append("name",this.form.name),e.append("email",this.form.email),e.append("last_name",this.form.surname),e.append("agree",+this.form.agree),e.append("agreement_id",this.agreement.id),e.append("dealership_id",this.form.dealer.id),e.append("phone",this.preparePhone(this.form.phone)),e.append("complectation_id",o()(this.complectation,"id",null)),e.append("model_code",this.model.external_id),l()(this.sms)||this.bindObject(this.sms,"sms",e),!l()(this.accessories))for(var n in this.accessories)e.append("accessories[".concat(n,"][id]"),this.accessories[n].id),e.append("accessories[".concat(n,"][count]"),this.accessories[n].quantity);for(var i in this.offersId)e.append("offers[".concat(i,"]"),this.offersId[i]);"dealer_comp"===this.source&&this.sendDataLayerAnalyticsComp(),"dealer_conf"===this.source&&this.sendDataLayerAnalyticsConf(),"special_offer"===this.source&&this.sendDataLayerAnalyticsSpecOffer(),this.$axios(s.a.createPurchaseRequest(e)).then((function(e){var n=e.data;n.content.unlock_date&&(t.unlockDate=n.content.unlock_date,t.banType=n.content.ban_type,t.isBanned=!0,t.$nextTick((function(){window.scrollTo(0,t.$refs.successBlock.offsetTop-150)}))),n.content.success&&(t.isSended=!0,t.$nextTick((function(){window.scrollTo(0,t.$refs.successBlock.offsetTop-150)})))})).catch((function(e){e instanceof g.a&&t.$refs.form.setErrors(t.prepareValidateErrors(e.data,{last_name:"surname",dealership_id:"dealer"}))}))},sendDataLayerAnalyticsConf:function(){var t={vehicleColorExterior:this.analyticData.currentExteriorColor,vehicleColorInterior:this.analyticData.currentInteriorColor,vehicleModelYear:this.complectation.model_year,vehicleNameplate:this.model.name,vehicleTransmission:this.analyticData.gearbox,vehicleTrim:this.complectation.name,dealershipId:this.form.dealer.code,dealershipName:this.form.dealer.name_en,userLocation:this.city.name_en,vehicleEngine:this.analyticData.engine,driveUnit:this.analyticData.drive,configurationId:this.analyticData.configurationId,city:this.city.name_en,priceDealership:this.analyticData.totalPrice};l()(this.accessories)||(t.accessoryCode=Object.values(this.accessories).map((function(t){return t.article})).join("|")),l()(this.analyticData.selectedOffers)||(t.specialOffer=this.analyticData.selectedOffers.join("|")),this.$auth.user&&(t.kiaCustomerId=this.$auth.user.id),this.dataLayerPush("Lead","Configurator","Lead submit",t)},sendDataLayerAnalyticsSpecOffer:function(){var t={dealershipId:this.form.dealer.code,dealershipName:this.form.dealer.name_en,specialOffer:this.analyticData.offerCode,userLocation:this.city.name_en};this.$auth.user&&(t.kiaCustomerId=this.$auth.user.id),this.dataLayerPush("Lead","Special offer Purchase","Lead submit",t)},sendDataLayerAnalyticsComp:function(){var t=this,e={vehicleModelYear:this.model.model_year,vehicleNameplate:this.model.name,vehicleTransmission:this.analyticData.transmission,vehicleTrim:this.complectation.name_en,dealershipId:this.form.dealer.code,dealershipName:this.form.dealer.name_en,userLocation:this.city.name_en,vehicleEngine:this.analyticData.engine,driveUnit:this.analyticData.driveUnit,city:this.city.name_en,priceDealership:this.complectation.min_price};this.$auth.user&&(e.kiaCustomerId=this.$auth.user.id),l()(this.offersId)||(e.specialOffer=this.offers.filter((function(e){return t.offersId.includes(e.id)})).map((function(t){return t.name})).join("|")),this.dataLayerPush("Lead","Price and Options","Lead submit",e)},preparePrice:function(){var t=this;if(this.complectation){var e=this.complectation.price,n=this.complectation.offers||this.offers,i=function(i){e-=n.find((function(e){return e.id===t.offersId[i]})).price};for(var r in this.offersId)i(r);return e}},phoneStatistic:function(){"dealer_conf"===this.source&&this.dataLayerPush("Form","Results","Phone")},nameStatistic:function(){"dealer_conf"===this.source&&this.dataLayerPush("Form","Results","First name")}}),components:{NavLink:u.default,IconEdit:f.a,LeadBanned:p.a,DealerChoice:m.a,LicenseButton:h.a,ValidationObserver:_.a,ValidationProvider:_.b}},x=(n(1311),n(2)),w=Object(x.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isSended?n("div",{ref:"successBlock"},[n("div",{staticClass:"text-x4 mb-4"},[t._v(t._s(t.data.success.title))]),t._v(" "),n("p",[t._v("\n      "+t._s(t.data.success.description)+"\n    ")]),t._v(" "),n("div",{staticClass:"form__footer__buttons flex flex-wrap"},[n("div",{staticClass:"form__footer__button"},[n("nuxt-link",{tag:"NavLink",staticClass:"button button_primary",attrs:{to:"/"}},[t._v("На главную")])],1)])]):t._e(),t._v(" "),t.isBanned?n("div",{ref:"successBlock"},[n("LeadBanned",{attrs:{unlockDate:t.unlockDate,banType:t.banType}})],1):t._e(),t._v(" "),t.isSended||t.isBanned?t._e():n("div",{staticClass:"text-x5 desktop:text-x4 mb-2 desktop:mb-4"},[t._v("\n    "+t._s(t.data.title)+" "),"dealer_comp"===t.source?n("span",[t._v(t._s(t.carName))]):t._e(),t._v(" "),t.endTitle?n("span",[t._v(t._s(t.endTitle))]):t._e()]),t._v(" "),t.isSended||t.isBanned?t._e():[n("div",[t._v("\n      "+t._s(t.explanText)+"\n    ")]),t._v(" "),n("div",{staticClass:"text-s1 pt-4"},[t._v("\n      Ваши контакты\n    ")])],t._v(" "),t.isSended||t.isBanned?t._e():n("ValidationObserver",{ref:"form",scopedSlots:t._u([{key:"default",fn:function(e){var i=e.handleSubmit;return[n("form",{on:{submit:function(e){return e.preventDefault(),i(t.onSubmit)}}},[n("fieldset",[n("ul",{class:["form-fields",{"flex-wrap":!t.isConfigurator},{"flex-col":t.isConfigurator}]},[n("li",[n("ValidationProvider",{attrs:{vid:"name",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[n("g-form-control",{attrs:{type:"text",label:"Имя ",error:i[0]},on:{"out-of-focus":t.nameStatistic},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})]}}],null,!0)})],1),t._v(" "),n("li",[n("ValidationProvider",{attrs:{vid:"phone",rules:"required|phone"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[n("g-form-control",{directives:[{name:"mask",rawName:"v-mask",value:"+7 (###) ###-##-##",expression:"'+7 (###) ###-##-##'"}],attrs:{type:"text",label:"Телефон ",placeholder:"+7 (___) ___-__-__",error:i[0],baloon:""},on:{"out-of-focus":t.phoneStatistic},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})]}}],null,!0)})],1),t._v(" "),n("li",[n("ValidationProvider",{attrs:{vid:"dealer",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[null===t.form.dealer?n("div",{staticClass:"text-s1 pt-4"},[t._v("\n                Дилер\n              ")]):t._e(),t._v(" "),n("DealerChoice",{attrs:{autoFill:!0,model:t.model,error:i[0],"dealership-ids":t.dealershipIds,isConfigurator:t.isConfigurator},model:{value:t.form.dealer,callback:function(e){t.$set(t.form,"dealer",e)},expression:"form.dealer"}})]}}],null,!0)})],1)])]),t._v(" "),n("div",{staticClass:"form-agree color-dark text-s3i"},[n("ValidationProvider",{attrs:{vid:"agree",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.errors;return[n("g-form-control",{attrs:{id:"agree",name:"agree",type:"checkbox",error:i[0],"has-label":!1},model:{value:t.form.agree,callback:function(e){t.$set(t.form,"agree",e)},expression:"form.agree"}},[n("template",{slot:"label"},[n("LicenseButton",{attrs:{agreement:t.agreement}})],1)],2)]}}],null,!0)})],1),t._v(" "),n("div",{staticClass:"form-button button-max-width"},[n("button",{staticClass:"button button_primary",attrs:{type:"submit"}},[n("span",{staticClass:"button__span-after"},[t._v("\n            "+t._s(t.data.buttonText)+"\n          ")])])])])]}}],null,!1,192122908)})],2)}),[],!1,null,null,null);e.a=w.exports},1306:function(t,e,n){"use strict";var i=n(1122);n.n(i).a},1307:function(t,e,n){"use strict";var i=n(1123);n.n(i).a},1308:function(t,e,n){"use strict";var i=n(1124);n.n(i).a},1309:function(t,e,n){"use strict";var i=n(1126);n.n(i).a},1310:function(t,e,n){"use strict";var i=n(1128);n.n(i).a},1311:function(t,e,n){"use strict";var i=n(1130);n.n(i).a},1330:function(t,e,n){"use strict";n(7),n(13),n(3),n(375),n(84),n(49),n(38),n(26),n(36),n(9),n(10),n(8),n(6),n(69),n(111),n(5);var i=n(15),r=n(0),s=n(11),a=n(14),o=n.n(a),c=n(18),l=n(37),u=n(377);function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var f={mixins:[l.a],props:{totalPrice:{type:Number,default:0},isDetailPage:{type:Boolean,default:!1},model:{type:Object,default:function(){return{}}},settings:{type:Object,default:function(){return{mode:"default"}}},complectation:{type:Object,default:function(){return{}}}},data:function(){return{isInited:!1}},computed:p({},Object(c.e)("ui",["header"]),{},Object(c.c)("configurator",["enginesById","gearboxesById"]),{},Object(c.e)("configurator",["currentEngineId","currentGearboxId","currentGearsNumber"]),{modelName:function(){return this.isDetailPage?"".concat(this.model.name?this.model.name:""," ").concat(this.complectation.name?this.complectation.name:""):"".concat(this.complectation.name?this.complectation.name:"","\n      ").concat(this.enginesById[this.currentEngineId].name,"\n      ").concat(this.currentGearsNumber?this.currentGearsNumber:"","\n      ").concat(this.gearboxesById[this.currentGearboxId].code)},isPopupStore:function(){return"popup_store"===this.settings.mode},modelCode:function(){return{code:this.model.code}},calculatorRouteParams:function(){return{code:this.model.code,complectationId:this.complectation.id,offers:!0}},testdriveRoute:function(){return{name:"popup-store-code-testdrive",params:{code:this.model.code},query:this.$route.query}}}),methods:p({},Object(c.d)("step-manager",["prevStep"])),components:{IconInfo:u.a}},m=(n(1306),n(2)),h=Object(m.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"constructorSummaryHeader",staticClass:"constructor-summary-header mb-8 pb-4 desktop:pt-4"},[n("div",{class:["constructor-summary-header__body"]},[n("div",{ref:"constructorSummaryHeaderContent",staticClass:"constructor-summary-header__content tablet:flex items-center justify-between pb-4 tablet:pt-4"},[n("div",{staticClass:"constructor-summary-header__info"},[n("h2",{staticClass:"constructor-summary-header__model text-x5 desktop:text-x4"},[t._v("\n          "+t._s(t.modelName)+"\n        ")]),t._v(" "),n("div",{staticClass:"constructor-summary-header__price flex flex-wrap items-center"},[t.totalPrice?n("div",{staticClass:"constructor-summary-header__price__value text-s1 desktop:text-x5"},[t._v("\n            "+t._s(t.formatMoney(t.totalPrice))+"\n          ")]):t._e(),t._v(" "),t.complectation.min_credit_amount?n("div",{staticClass:"constructor-summary-header__price__credit flex tablet:items-center desktop:items-baseline"},[n("span",{staticClass:"mx-1"},[t._v("·")]),t._v(" "),n("div",{staticClass:"constructor-summary-header__price__value"},[t._v("\n              "+t._s(t.formatMoney(t.complectation.min_credit_amount,"₽/мес"))+"\n            ")]),t._v(" "),n("icon-info",{on:{click:function(e){return t.$emit("credit-popup-open")}}})],1):t._e()])])])])])}),[],!1,null,null,null).exports;function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}var v={mixins:[l.a],props:{totalPrice:{type:Number,default:0},model:{type:Object,default:function(){return{}}},complectation:{type:Object,default:function(){return{}}}},data:function(){return{isInited:!1,isConstructorSummaryHeaderFixed:!1,isConstructorOrderInvisible:!1,constructorSummaryHeaderHeight:"auto"}},mounted:function(){window.addEventListener("load",this.handleScrollConstructor),window.addEventListener("resize",this.handleScrollConstructor),window.addEventListener("scroll",this.handleScrollConstructor)},beforeDestroy:function(){window.removeEventListener("load",this.handleScrollConstructor),window.removeEventListener("resize",this.handleScrollConstructor),window.removeEventListener("scroll",this.handleScrollConstructor)},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(c.e)("ui",["header"]),{modelName:function(){return"".concat(this.model.name?this.model.name:""," ").concat(this.complectation.name?this.complectation.name:"")},hasOffset:function(){return!(!this.header.isFixedHeaderVisible&&!this.isInited)},calculatorRouteParams:function(){return{code:this.model.code,complectationId:this.complectation.id,offers:!0}},constructorSummaryHeaderHeightValue:function(){return{height:"auto"!==this.constructorSummaryHeaderHeight?this.constructorSummaryHeaderHeight+"px":"auto"}}}),methods:{handleScrollConstructor:function(){this.constructorSummaryHeaderHeight=this.$refs.constructorSummaryHeaderContent.offsetHeight;var t=window.scrollY,e=window.innerHeight,n=document.getElementsByClassName("page-wrapper__footer")[0].offsetTop,i=this.$refs.constructorSummaryHeader.offsetTop+this.constructorSummaryHeaderHeight+60;this.isConstructorSummaryHeaderFixed=t>i,this.isConstructorOrderInvisible=t+e>n}},components:{IconInfo:u.a}},g=(n(1307),Object(m.a)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"constructorSummaryHeader",staticClass:"constructor-summary-header mb-8 pb-4 desktop:pt-4"},[n("div",{class:["constructor-summary-header__body",{"has-offset":t.hasOffset}]},[n("div",{ref:"constructorSummaryHeaderContent",staticClass:"constructor-summary-header__content tablet:flex items-center justify-between pb-4 tablet:pt-4"},[n("div",{staticClass:"constructor-summary-header__info"},[n("h2",{staticClass:"constructor-summary-header__model text-x5 desktop:text-x4"},[t._v("\n          "+t._s(t.modelName)+"\n        ")]),t._v(" "),n("div",{staticClass:"constructor-summary-header__price flex flex-wrap items-center"},[t.totalPrice?n("div",{staticClass:"constructor-summary-header__price__value text-s1 desktop:text-x5"},[t._v("\n            "+t._s(t.formatMoney(t.totalPrice))+"\n          ")]):t._e(),t._v(" "),t.complectation.min_credit_amount?n("div",{staticClass:"constructor-summary-header__price__credit flex tablet:items-center desktop:items-baseline"},[n("span",{staticClass:"mx-1"},[t._v("·")]),t._v(" "),n("div",{staticClass:"constructor-summary-header__price__value"},[t._v("\n              "+t._s(t.formatMoney(t.complectation.min_credit_amount,"₽/мес"))+"\n            ")]),t._v(" "),n("icon-info",{on:{click:function(e){return t.$emit("credit-popup-open")}}})],1):t._e()])])])])])}),[],!1,null,null,null).exports),b=n(31),y=n(24),C=n(391),P=n(1134),O=(n(75),n(83)),x=n(1084),w=n(85),I={mixins:[y.a],props:{groupedSpecifications:{type:Array,default:[]},groupedOptions:{type:Array,default:function(){return[]}},specifications:{type:Object,default:function(){return{}}},isConfigurator:{type:Boolean,default:!1}},data:function(){return{optionPopupOpened:!1,description:{}}},computed:{isOptionsEmpty:function(){return 0===this.groupedOptions.length}},methods:{toggleInfoSection:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.$refs[t].classList.toggle("is-opened"),this.isConfigurator&&this.$refs[t].classList.contains("is-opened")&&this.dataLayerPush("Option accordion",e,"Open")},openOptionInfoPopup:function(t){this.optionPopupOpened=!0,this.description={title:t.name,file:t.file_id,description:t.description},this.isConfigurator&&this.dataLayerPush("Info pop-up",t.name,"Open")},closeOptionInfoPopup:function(){this.optionPopupOpened=!1},getDescription:function(){return this.description}},components:{IconAngleArrowDown:w.a,Popup:O.a,OptionInfoContent:x.a}},j=(n(1308),Object(m.a)(I,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"info-sections"},[t.isOptionsEmpty?t._e():n("div",{ref:"infoParams",staticClass:"info-section"},[n("div",{staticClass:"info-section__header cursor-pointer flex items-center justify-between py-4 desktop:py-6",on:{click:function(e){return t.toggleInfoSection("infoParams","Опции комплектации")}}},[n("div",{staticClass:"text-s1 desktop:text-x5"},[t._v("Опции комплектации")]),t._v(" "),n("icon-angle-arrow-down")],1),t._v(" "),n("div",{staticClass:"info-section__body pt-4 desktop:pt-6"},[n("div",{staticClass:"info-section__params text-s2i"},[n("div",{staticClass:"info-section__params__item"},t._l(t.groupedOptions,(function(e,i){return n("div",{key:i,staticClass:"info-section__params__item__body"},[n("div",{staticClass:"text-s2i-b"},[t._v(t._s(e.name))]),t._v(" "),n("ul",t._l(e.options,(function(e,i){return n("li",{key:i},[t._v("\n                "+t._s(e.name)+"\n                "),e.description||e.file_id?n("g-button-info",{on:{click:function(n){return t.openOptionInfoPopup(e)}}}):t._e()],1)})),0)])})),0)])])]),t._v(" "),t.groupedSpecifications.length?n("div",{ref:"infoTtc",staticClass:"info-section"},[n("div",{staticClass:"info-section__header cursor-pointer flex items-center justify-between py-4 desktop:py-6",on:{click:function(e){return t.toggleInfoSection("infoTtc","Технические характеристики")}}},[n("div",{staticClass:"text-s1 desktop:text-x5"},[t._v("Технические характеристики")]),t._v(" "),n("icon-angle-arrow-down")],1),t._v(" "),n("div",{staticClass:"info-section__body pt-4 desktop:pt-6"},t._l(t.groupedSpecifications,(function(e){return n("div",{key:e.code,staticClass:"mb-6"},[n("div",{staticClass:"car-params__section__title text-s1 mb-6 flex flex-wrap items-center"},[n("span",[t._v(t._s(e.name))])]),t._v(" "),n("div",{staticClass:"info-section__ttc flex flex-row flex-wrap text-s2i"},t._l(e.specifications,(function(e){return n("dl",{key:e.code},[n("dt",[t._v(t._s(e.name))]),t._v(" "),n("dd",[t._v(t._s(e.value))])])})),0)])})),0)]):t._e(),t._v(" "),t.specifications.elements&&t.specifications.elements.length?n("div",{ref:"infoSpec",staticClass:"info-section"},[n("div",{staticClass:"info-section__header cursor-pointer flex items-center justify-between py-4 desktop:py-6",on:{click:function(e){return t.toggleInfoSection("infoSpec","Спецификация")}}},[n("div",{staticClass:"text-s1 desktop:text-x5"},[t._v("Спецификация")]),t._v(" "),n("icon-angle-arrow-down")],1),t._v(" "),n("div",{staticClass:"info-section__body pt-4 desktop:pt-6"},[n("div",{staticClass:"mb-6"},[n("div",{staticClass:"info-section__ttc flex flex-row flex-wrap text-s2i"},t._l(t.specifications.elements,(function(e,i){return n("dl",{key:i},[n("dt",[t._v(t._s(e.name))]),t._v(" "),n("dd",[t._v(t._s(e.value))])])})),0)])])]):t._e(),t._v(" "),t.optionPopupOpened?n("popup",[n("option-info-content",{attrs:{popup:t.getDescription()},on:{"toggle-info-popup":t.closeOptionInfoPopup}})],1):t._e()],1)}),[],!1,null,null,null).exports),k=n(1187),S=n(1113),D=n(61),L=n(1038),T=(n(17),["class","staticClass","style","staticStyle","attrs"]);function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function B(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function M(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},s=Object.keys(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var F={functional:!0,render:function(t,e){var n=e._c,i=(e._v,e.data),r=e.children,s=void 0===r?[]:r,a=i.class,o=i.staticClass,c=i.style,l=i.staticStyle,u=i.attrs,d=void 0===u?{}:u,p=M(i,T);return n("svg",function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach((function(e){B(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({class:[a,o],style:[c,l],attrs:Object.assign({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},d)},p),s.concat([n("path",{attrs:{stroke:"currentColor","stroke-width":"1.5",d:"M10.75.75h8.5v8.5h-8.5z"}}),n("path",{attrs:{stroke:"currentColor","stroke-width":"1.5",d:"M13.75 3.75h2.5v2.5h-2.5z"}}),n("path",{attrs:{fill:"currentColor",d:"M4 12h3v3H4zM4 6h3v3H4zM1 3h3v3H1zM4 0h3v3H4zM1 12h3v3H1zM4 15h3v3H4zM13 15h3v3h-3zM16 15h3v3h-3zM10 12h3v3h-3zM13 12h3v3h-3z"}})]))}},R=n(109),$=n(1049),A=n(175),N=["class","staticClass","style","staticStyle","attrs"];function q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function H(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function z(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},s=Object.keys(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var V={functional:!0,render:function(t,e){var n=e._c,i=(e._v,e.data),r=e.children,s=void 0===r?[]:r,a=i.class,o=i.staticClass,c=i.style,l=i.staticStyle,u=i.attrs,d=void 0===u?{}:u,p=z(i,N);return n("svg",function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?q(Object(n),!0).forEach((function(e){H(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({class:[a,o],style:[c,l],attrs:Object.assign({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},d)},p),s.concat([n("path",{attrs:{stroke:"currentColor","stroke-width":"1.5",d:"M1.75 3.75h16.5v12.5H1.75z"}}),n("path",{attrs:{d:"M2 6l7.4 5.55a1 1 0 001.2 0L18 6M2 14l6-4M18 14l-5-4",stroke:"currentColor","stroke-width":"1.5"}})]))}},G=["class","staticClass","style","staticStyle","attrs"];function Y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function U(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function W(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},s=Object.keys(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var K={functional:!0,render:function(t,e){var n=e._c,i=(e._v,e.data),r=e.children,s=void 0===r?[]:r,a=i.class,o=i.staticClass,c=i.style,l=i.staticStyle,u=i.attrs,d=void 0===u?{}:u,p=W(i,G);return n("svg",function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Y(Object(n),!0).forEach((function(e){U(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({class:[a,o],style:[c,l],attrs:Object.assign({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},d)},p),s.concat([n("path",{attrs:{stroke:"currentColor","stroke-width":"1.5",d:"M3.75.75h12.5v18.5H3.75z"}}),n("circle",{attrs:{cx:"10",cy:"15",r:"1",fill:"currentColor"}}),n("path",{attrs:{stroke:"currentColor",d:"M7 2.5h6"}})]))}},Q=n(1009),X=n(374),J=n(1036),Z=n(107),tt=n(1222),et=n(70);function nt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function it(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nt(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var rt={mixins:[b.a,y.a,l.a,et.a],props:{canEdit:{type:Boolean,default:!1},isDetailPage:{type:Boolean,default:!1},isConfiguratorPage:{type:Boolean,default:!1},showColors:{type:Boolean,default:!1},showColorCode:{type:Boolean,default:!1},showExteriorColors:{type:Boolean,default:!1},showInteriorColors:{type:Boolean,default:!0},settings:{type:Object,default:function(){return{mode:"default"}}},offers:{type:Array,default:function(){return[]}},groupedSpecifications:{type:Array,default:function(){return[]}},groupedOptions:{type:Array,default:function(){return[]}},specifications:{type:Object,default:function(){return{}}},options:{type:Object,default:function(){return{}}},accessories:{type:Object,default:function(){return{}}},optionsBase:{type:Array,default:function(){return[]}},complectation:{type:Object,default:function(){return{}}},interiorColor:{type:Object,default:function(){return{}}},exteriorColor:{type:Object,default:function(){return{}}},overviews:{type:Object,default:function(){return{complectations:[],colors:[]}}},panoramas:{type:Object,default:function(){return{complectations:[],colors:[]}}},totalPrice:{type:Number,default:0},model:{type:Object,default:function(){return{}}},engine:{type:Object,default:function(){return{}}},gearbox:{type:Object,default:function(){return{}}},drive:{type:Object,default:function(){return{}}},fuelType:{type:Object,default:function(){return{}}},transmission:{type:Object,default:function(){return{}}},exteriorColorId:{type:String,default:null},interiorColorId:{type:String,default:null},uniqueId:{type:String,default:""},menuLinks:{type:Object,default:{}},resultId:{type:String,default:""},createdAt:{type:Number,default:0},advantages:{type:Array,default:function(){return[]}},analitycsProperties:{type:Object,default:function(){}}},data:function(){return{loadingPdf:!1,smsPopupIsOpen:!1,popupConfigId:{data:{},isOpened:!1},isPopupFavoriteOpened:!1,isPopupPdfSendingOpened:!1,popupFormComponent:"AddedConfiguration",popupFormProps:{},currentExteriorColor:this.exteriorColor,currentInteriorColor:this.interiorColor,dateCreateOptions:{month:"2-digit",day:"2-digit",year:"numeric"},isDesktopScreen:!1,currentOffers:[]}},computed:it({getTotalPrice:function(){var t=this.totalPrice;return this.currentExteriorColor&&this.isDetailPage&&(t+=this.currentExteriorColor.price),t}},Object(c.e)("configurator",["isFavoriteLoading","isFavorite"]),{calculatorRouteParams:function(){return{code:this.model.code,complectationId:this.complectation.id,offers:!0}},isPopupStore:function(){return"popup_store"===this.settings.mode},showColorsBlock:function(){return this.showColors},isDataEmpty:function(){return o()(this.complectation)},fuelTypeName:function(){return this.fuelType?this.fuelType.name:null},transmissionName:function(){return this.gearbox?this.transmission.gears_number?"".concat(this.gearbox.name,", ").concat(this.transmission.gears_number).concat(this.gearbox.code):"".concat(this.gearbox.name,", ").concat(this.gearbox.code):null},engineName:function(){return this.engine?"".concat(this.engine.name," / ").concat(Math.round(this.engine.power_hp)," л.с. / ").concat(this.fuelTypeName):""},driveName:function(){return this.drive?this.drive.name:null},defaultExteriorColorId:function(){return this.exteriorColor?this.exteriorColor.id:null},testdriveRoute:function(){return{name:"popup-store-code-testdrive",params:{code:this.model.code},query:this.$route.query}},defaultInteriorColorId:function(){return this.interiorColor?this.interiorColor.id:null},pdfSendingProps:function(){return{page:this.pageName,formData:this.formData,modelName:this.model.name,header:"Отправить ссылку на ".concat("configurator"===this.pageName?"конфигурацию":"комплектацию"," по email"),uniqueUrl:this.uniqueUrl,source:"configurator"===this.pageName?"configurator":"calculator"}},smsSendingProps:function(){return{header:"Отправить ссылку на конфигурацию по sms",linkOn:"конфигурацию",code:"configurator",dynamic_variables:{configuration_id:this.uniqueId,model_name:this.model.name}}},formData:function(){var t=new FormData;return t.append("unique_id",this.complectation.unique_id),t.append("model_code",this.model.code),this.currentInteriorColor?t.append("interior",this.currentInteriorColor.id):this.defaultInteriorColorId&&t.append("interior",this.defaultInteriorColorId),this.currentExteriorColor?t.append("exterior",this.currentExteriorColor.id):this.defaultExteriorColorId&&t.append("exterior",this.defaultExteriorColorId),this.uniqueId&&t.append("configuration_id",this.uniqueId),this.createdAt&&t.append("created_at",this.createdAt),t},pageName:function(){return this.isConfiguratorPage?"configurator":this.isDetailPage?"complectation":void 0},hasAccessories:function(){return!o()(this.accessories)},accessoryTotal:function(){return Object.values(this.accessories).reduce((function(t,e){return t+e.price*e.quantity}),0)},uniqueUrl:function(){return this.isConfiguratorPage?window.location.origin+"/c/"+this.uniqueId+"/":""},hasInterior:function(){var t=this.panoramas.complectations[0];return t.panoramas&&t.panoramas.length&&this.panoramas.colors.length}}),mounted:function(){this.resize(),window.addEventListener("resize",this.resize)},beforeDestroy:function(){window.removeEventListener("resize",this.resize)},methods:it({},Object(c.d)("configurator",["setIsFavoriteLoading","setIsFavorite"]),{toggleSmsPopup:function(){this.isConfiguratorPage&&!this.smsPopupIsOpen&&this.dataLayerPush("Saving","Send configuration in sms"),this.smsPopupIsOpen=!this.smsPopupIsOpen},onFavoriteClick:function(){var t=this;this.isConfiguratorPage&&this.dataLayerPush("Saving","Add configuration to favorites"),this.setIsFavoriteLoading(!0),this.$axios(s.a.addFavorite("configuration",this.resultId)).then((function(e){t.popupFormProps={model:t.model,uniqueId:t.uniqueId,alreadyAdded:!1,success:!1},e.data.content.success?(t.setIsFavorite(!0),t.popupFormProps.success=!0):1==e.data.error&&"favorite_already_added_exception"===e.data.content.error_code&&(t.setIsFavorite(!0),t.popupFormProps.alreadyAdded=!0),t.isPopupFavoriteOpened=!0})).finally((function(){t.setIsFavoriteLoading(!1)}))},selectedOffers:function(t,e){this.currentOffers=e,this.$emit("select-offer",e)},createComplectationPdf:function(){var t=this;this.loadingPdf||(this.loadingPdf=!0,r.a.createComplectationPdf(this.formData,this.model.code).finally((function(){r.a.getComplectationPdfLink(t.formData).then((function(e){t.dataLayerPush("Saving","Download pdf",e)})),t.loadingPdf=!1})))},copyUrlToClipboard:function(t){this.dataLayerPush("Saving","Copy link");var e,n=this.$refs.copyButton,i=this.$refs.copyInput;clearTimeout(e),i.value=this.uniqueUrl,i.select(),document.execCommand("copy"),n.classList.add("hinted_callback-done"),e=setTimeout((function(){n.classList.remove("hinted_callback-done")}),2e3)},changeExteriorHandler:function(t){t&&(this.currentExteriorColor=t)},changeInteriorHandler:function(t){t&&(this.currentInteriorColor=t)},openPopupConfigId:function(){Object.assign(this,{popupConfigId:{data:{title:"Уникальный ID конфигурации",description:"\n                <p>Уникальный ID конфигурации — это код, который хранит данные о подобранном вами автомобиле, его характеристики и комплектации, а так же произведённые ранее расчёты цен.</p>\n                <p>Сохраните ссылку или код и откройте вашу конфигурацию в любое время с любого устройства.</p>\n                <p>Код действует 3 месяца.</p>\n              ",buttonClose:!0},isOpened:!0}}),this.isConfiguratorPage&&this.dataLayerPush("Info pop-up","Configuration id description","Open")},closePopupConfigId:function(){Object.assign(this,{popupConfigId:{data:{},isOpened:!1}})},closePopupFavorite:function(){this.isPopupFavoriteOpened=!1},closePdfSubmissionForm:function(){this.isPopupPdfSendingOpened=!1},openPdfSubmissionForm:function(){this.isConfiguratorPage&&this.dataLayerPush("Saving","Send configuration to email"),this.isPopupPdfSendingOpened=!0},resize:function(){this.isDesktopScreen=!!this.isDesktop()},toTraidIn:function(){this.isConfiguratorPage&&this.dataLayerPush("Configurator","Results","Trade-in",this.prepareAnalyticProperties()),this.$router.push({name:"buy-trade-in"})},toCredit:function(){this.isConfiguratorPage&&this.dataLayerPush("Configurator","Results","Loan calculator",this.prepareAnalyticProperties()),this.$router.push({name:"models-code-calc",params:this.calculatorRouteParams})},toTestDrive:function(){this.isConfiguratorPage&&this.dataLayerPush("Configurator","Results","Test drive",this.prepareAnalyticProperties()),this.$router.push({name:"models-code-testdrive",params:{code:this.model.code}})},prepareAnalyticProperties:function(){var t=this,e=this.analitycsProperties;return this.$auth.user&&(e.kiaCustomerId=this.$auth.user.id),o()(this.currentOffers)||(e.specialOffer=this.offers.filter((function(e){return t.currentOffers.includes(e.id)})).map((function(t){return t.name})).join("|")),e},buttonMenuHandler:function(t){var e=null,n=this.prepareAnalyticProperties();switch(t.buttonName){case"calc":e="Loan calculator";break;case"testdrive":e="Test drive";break;case"trade-in":e="Trade-in";break;case"cars":e="Car Locator";break;case"cars-in-stock":this.dataLayerPush("Configurator","Results","Car Locator",n)}"cars-in-stock"!==t.buttonName&&this.dataLayerPush("Navigation","Sticky menu",e,n),"calc"===t.buttonName&&this.$router.push(this.menuLinks.links.find((function(t){return"calc"===t.code})).path)}}),components:{Showroom:C.a,InfoSections:j,SpecialOffers:k.a,SummaryHeader:h,SummaryHeaderOptions:g,IconEdit:R.a,OptionsList:P.a,DocumentIcon:D.a,TrickRightIcon:L.a,Preloader:Q.a,UniqueCode:F,IconLink:$.a,MenuButtons:S.a,Popup:O.a,PopupContent:X.a,PopupContentForm:J.a,Loader:Z.a,Advantages:tt.a,IconFavorite:A.a,IconDocument:D.a,IconMail:V,IconPhone:K}},st=(n(1309),Object(m.a)(rt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"constructor__step"},[t.isDataEmpty?t._e():n("div",{staticClass:"constructor__summary mb-8 desktop:mb-20"},[n("SummaryHeader",{attrs:{totalPrice:t.getTotalPrice,complectation:t.complectation,model:t.model,isDetailPage:t.isDetailPage},on:{"trade-in-form-click":function(e){return t.$emit("trade-in-form-click")},"credit-popup-open":function(e){return t.$emit("credit-popup-open")}}}),t._v(" "),n("showroom",{staticClass:"showroom__three-sixty_wrapper_thin",attrs:{overviews:t.overviews,panoramas:t.panoramas,showExteriorColors:t.showExteriorColors,showInteriorColors:t.showInteriorColors,showNotice:!0,showColorPrice:!0,"is-configurator":t.isConfiguratorPage,showColorCode:t.showColorCode,exteriorColorId:t.defaultExteriorColorId,interiorColorId:t.defaultInteriorColorId,source:"configurator-result"},on:{"change-exterior":t.changeExteriorHandler,"change-interior":t.changeInteriorHandler}}),t._v(" "),t.uniqueId&&t.createdAt?n("div",{staticClass:"flex flex-col tablet:flex-row py-4 justify-between"},[n("div",{staticClass:"text-s1"},[t._v("\n        Сохранить конфигурацию\n      ")]),t._v(" "),n("div",{staticClass:"text-s3 pt-1 tablet:pt-0"},[t._v("\n        Дата расчета: "+t._s(t.formatDate(t.createdAt/1e3,t.dateCreateOptions))+"\n      ")])]):t._e(),t._v(" "),t.isPopupStore?t._e():n("div",{staticClass:"unique-id mb-6"},[t.uniqueId?n("div",{staticClass:"unique-id__info"},[n("div",{staticClass:"unique-id__info-title title-max-width"},[n("div",{staticClass:"inline-flex items-center"},[n("div",{staticClass:"text-s1"},[t._v("ID конфигурации "+t._s(t.uniqueId))]),t._v(" "),n("g-button-info",{staticClass:"unique-id__info-button hinted hinted_bottom",on:{click:t.openPopupConfigId}})],1),t._v(" "),n("div",{staticClass:"text-s3 pt-2"},[t._v("\n            Сохраните ссылку или код и откройте вашу конфигурацию в любое время с любого\n            устройства. Код действует 3 месяца\n          ")])])]):t._e(),t._v(" "),n("div",{staticClass:"unique-id__links"},[t.uniqueId?n("div",{staticClass:"unique-id__info-code unique-id__links-item flex items-center desktop:flex-col",on:{click:t.copyUrlToClipboard}},[n("IconLink",{staticClass:"mr-2 desktop:mr-0 desktop:mb-2"}),t._v(" "),n("div",{ref:"copyButton",class:["unique-id__info-code-content hinted hinted_bottom hinted_callback text-s2-b",{"text-center":t.isDesktopScreen}]},[n("input",{ref:"copyInput",staticClass:"unique-id__info-code-input",attrs:{name:"copyInput",value:""}}),t._v("\n\n            Скопировать"),n("br",{staticClass:"hidden desktop:block"}),t._v("\n            ссылку\n\n            "),n("div",{staticClass:"hinted-text"},[t._v("\n              Ссылка скопирована\n            ")])])],1):t._e(),t._v(" "),t.uniqueId?n("div",{staticClass:"unique-id__links-item flex items-center desktop:flex-col"},[n("IconFavorite",{staticClass:"mr-2 desktop:mr-0 desktop:mb-2"}),t._v(" "),t.isFavorite?n("div",{class:[{"text-center":t.isDesktopScreen}]},[t._v("\n            Сохранено"),n("br",{staticClass:"hidden desktop:block"}),t._v("\n            в избранном\n          ")]):n("div",{staticClass:"text-s2-b"},[t.isFavoriteLoading?[n("Loader",{attrs:{inline:!0}})]:[n("a",{class:[{"text-center":t.isDesktopScreen}],attrs:{href:"javascript:"},on:{click:t.onFavoriteClick}},[t._v("\n                Сохранить"),n("br",{staticClass:"hidden desktop:block"}),t._v("\n                в избранное\n              ")])]],2)],1):t._e(),t._v(" "),n("div",{staticClass:"unique-id__links-item flex items-center desktop:flex-col text-s2-b"},[n("IconDocument",{staticClass:"mr-2 desktop:mr-0 desktop:mb-2"}),t._v(" "),n("a",{class:[{"text-center":t.isDesktopScreen}],attrs:{href:"javascript:"},on:{click:t.createComplectationPdf}},[t._v("\n            Загрузить"),n("br",{staticClass:"hidden desktop:block"}),t._v("\n            в PDF\n          ")])],1),t._v(" "),t.isConfiguratorPage?n("div",{staticClass:"unique-id__links-item flex items-center desktop:flex-col text-s2-b"},[n("IconMail",{staticClass:"mr-2 desktop:mr-0 desktop:mb-2"}),t._v(" "),n("a",{class:[{"text-center":t.isDesktopScreen}],attrs:{href:"javascript:"},on:{click:t.openPdfSubmissionForm}},[t._v("\n            Отправить на"),n("br",{staticClass:"hidden desktop:block"}),t._v("\n            почту\n          ")])],1):t._e(),t._v(" "),t.uniqueId?n("div",{staticClass:"unique-id__links-item flex items-center desktop:flex-col text-s2-b"},[n("IconPhone",{staticClass:"mr-2 desktop:mr-0 desktop:mb-2"}),t._v(" "),n("a",{class:[{"text-center":t.isDesktopScreen}],attrs:{href:"javascript:"},on:{click:t.toggleSmsPopup}},[t._v("\n            Отправить"),n("br",{staticClass:"hidden desktop:block"}),t._v("\n            ссылку по СМС\n          ")])],1):t._e()])]),t._v(" "),n("div",{staticClass:"constructor__summary__params tablet:flex mb-12"},[n("div",{staticClass:"constructor__summary__params__item flex flex-col mt-8 desktop:mt-0"},[n("div",{staticClass:"constructor__summary__params__item__title flex items-center text-s1 mb-6"},[n("span",[t._v("Двигатель и трансмиссия")]),t._v(" "),t.canEdit?n("g-button-edit",{staticClass:"hinted hinted_bottom",on:{click:function(e){return t.$emit("characteristics-click")}}},[n("span",{staticClass:"hinted-text"},[t._v("\n              Изменить\n            ")])]):t._e()],1),t._v(" "),n("div",{class:[{constructor__summary__params__item__body:t.showColorsBlock,constructor__summary__params__item__full:!t.showColorsBlock}]},[t.model.year?n("dl",[n("dt",[t._v("Год производства")]),t._v(" "),n("dd",[t._v(t._s(t.model.year))])]):t._e(),t._v(" "),t.engineName?n("dl",[n("dt",[t._v("Двигатель")]),t._v(" "),n("dd",[t._v(t._s(t.engineName))])]):t._e(),t._v(" "),t.transmissionName?n("dl",[n("dt",[t._v("Коробка передач")]),t._v(" "),n("dd",[t._v(t._s(t.transmissionName))])]):t._e(),t._v(" "),t.driveName?n("dl",[n("dt",[t._v("Привод")]),t._v(" "),n("dd",[t._v(t._s(t.driveName))])]):t._e()])]),t._v(" "),t.showColorsBlock?n("div",{staticClass:"constructor__summary__params__item constructor__summary__params__item_colors flex flex-col mt-8 desktop:mt-0"},[n("div",{staticClass:"constructor__summary__params__item__title flex items-center text-s1 mb-6"},[n("span",[t._v("Цвет")]),t._v(" "),t.canEdit?n("g-button-edit",{staticClass:"hinted hinted_bottom",on:{click:function(e){return t.$emit("colors-click")}}},[n("span",{staticClass:"hinted-text"},[t._v("\n              Изменить\n            ")])]):t._e()],1),t._v(" "),n("div",{staticClass:"constructor__summary__params__item__body"},[t.currentExteriorColor?n("dl",[n("dt",[t._v("Экстерьер")]),t._v(" "),n("dd",[n("div",{staticClass:"flex items-center"},[n("span",[t._v(t._s(t.currentExteriorColor.name)+" ("+t._s(t.currentExteriorColor.code)+")")]),t._v(" "),n("figure",{style:"background-image: url("+t.currentExteriorColor.image+");"})])])]):t._e(),t._v(" "),t.hasInterior&&t.currentInteriorColor?n("dl",[n("dt",[t._v("Интерьер")]),t._v(" "),n("dd",[n("div",{staticClass:"flex items-center"},[n("span",[t._v(t._s(t.currentInteriorColor.name)+" ("+t._s(t.currentInteriorColor.code)+")")]),t._v(" "),n("figure",{style:"background-image: url("+t.currentInteriorColor.image+");"})])])]):t._e()])]):t._e()]),t._v(" "),t.hasAccessories?[n("div",{staticClass:"flex items-center text-s1 mb-6"},[n("span",[t._v("\n          Аксессуары\n        ")]),t._v(" "),t.canEdit?n("g-button-edit",{staticClass:"hinted hinted_bottom",on:{click:function(e){return t.$emit("accessories-click")}}},[n("span",{staticClass:"hinted-text"},[t._v("\n            Изменить\n          ")])]):t._e()],1),t._v(" "),n("div",{staticClass:"constructor__summary-frame mb-12"},[t._l(t.accessories,(function(e){return[n("dl",{staticClass:"constructor__summary-accessory"},[n("dt",[n("div",[t._v("\n                "+t._s(e.name)+"\n              ")]),t._v(" "),n("div",{staticClass:"constructor__summary-accessory-article text-s3 color-disabled-gray pt-1 pb-2"},[t._v("\n                "+t._s(e.article)+"\n              ")])]),t._v(" "),n("dd",{staticClass:"flex-shrink-0 text-right"},[n("div",[n("span",[t._v(" "+t._s(t.formatMoney(e.price*e.quantity))+" ")]),t._v(" "),n("span",{staticClass:"constructor__summary-accessory-price"},[t._v("\n                  "+t._s(e.quantity)+" шт\n                ")])]),t._v(" "),e.quantity>1?n("div",{staticClass:"constructor__summary-accessory-price-disabled"},[n("span",{staticClass:"color-disabled-gray text-s3"},[t._v("\n                  "+t._s(t.formatMoney(e.price))+"\n                ")]),t._v(" "),n("span",{staticClass:"constructor__summary-accessory-price color-disabled-gray text-s3"},[t._v("\n                  1 шт\n                ")])]):t._e()])])]})),t._v(" "),n("dl",{staticClass:"constructor__summary-accessory"},[n("dt",[t._v("Итого за аксессуары:")]),t._v(" "),n("dd",{staticClass:"flex-shrink-0"},[t._v("\n            "+t._s(t.formatMoney(t.accessoryTotal))+"\n          ")])])],2)]:t._e(),t._v(" "),t.offers.length?n("SpecialOffers",{staticClass:"mt-12",attrs:{offers:t.offers,"is-configurator":t.isConfiguratorPage},on:{"select-offer":t.selectedOffers}}):t._e(),t._v(" "),t.isPopupStore?t._e():n("div",{staticClass:"mb-8 desktop:mb-12 tablet:flex"},[n("div",{staticClass:"tablet:mr-2"},[n("div",{staticClass:"button button_secondary",on:{click:t.toTraidIn}},[n("span",{staticClass:"button__span-after"},[t._v("\n            Рассчитать трейд-ин\n          ")])])]),t._v(" "),n("div",{staticClass:"mt-2 tablet:mt-0 tablet:mr-2"},[n("div",{staticClass:"button button_secondary",on:{click:t.toCredit}},[n("span",{staticClass:"button__span-after"},[t._v("\n            Рассчитать кредит\n          ")])])]),t._v(" "),n("div",{staticClass:"mt-2 tablet:mt-0 tablet:mr-2"},[n("div",{staticClass:"button button_secondary",on:{click:t.toTestDrive}},[n("span",{staticClass:"button__span-after"},[t._v("\n            Запись на тест-драйв\n          ")])])])]),t._v(" "),t.advantages.length?n("div",[n("Advantages",{attrs:{items:t.advantages}},[n("template",{slot:"header"},[n("div",{staticClass:"text-x5 tablet:text-x4 mb-6"},[t._v("\n            Основные опции "+t._s(t.model.name)+" "+t._s(t.complectation.name)+"\n          ")])])],2),t._v(" "),n("div",{staticClass:"hr mt-6 hidden tablet:block"})],1):t._e(),t._v(" "),n("OptionsList",{attrs:{"is-configurator":t.isConfiguratorPage,"get-options-list":t.optionsBase,title:"Стандартное оборудование"}}),t._v(" "),n("InfoSections",{attrs:{"is-configurator":t.isConfiguratorPage,groupedOptions:t.groupedOptions,groupedSpecifications:t.groupedSpecifications,specifications:t.specifications}}),t._v(" "),t.isPopupStore?t._e():n("MenuButtons",{attrs:{"is-configurator":t.isConfiguratorPage,params:t.menuLinks},on:{"button-menu":t.buttonMenuHandler,"main-button-callback":function(e){return t.$emit("trade-in-form-click")}}})],2),t._v(" "),t.popupConfigId.isOpened?n("Popup",[n("PopupContent",{attrs:{popup:t.popupConfigId.data},on:{"toggle-info-popup":t.closePopupConfigId}})],1):t._e(),t._v(" "),t.isPopupFavoriteOpened?n("Popup",[n("PopupContentForm",{attrs:{"component-name":t.popupFormComponent,"component-props":t.popupFormProps},on:{"close-popup":t.closePopupFavorite}})],1):t._e(),t._v(" "),t.isConfiguratorPage&&t.smsPopupIsOpen?n("Popup",[n("PopupContentForm",{attrs:{"component-name":"LinkBySms","component-props":t.smsSendingProps},on:{"close-popup":t.toggleSmsPopup}})],1):t._e(),t._v(" "),t.isConfiguratorPage&&t.isPopupPdfSendingOpened?n("Popup",[n("PopupContentForm",{attrs:{"component-name":"SendPdf","component-props":t.pdfSendingProps},on:{"close-popup":t.closePdfSubmissionForm}})],1):t._e()],1)}),[],!1,null,null,null));e.a=st.exports},1343:function(t,e,n){"use strict";var i=n(1147);n.n(i).a},1344:function(t,e,n){"use strict";var i=n(1148);n.n(i).a},1345:function(t,e,n){"use strict";var i=n(1149);n.n(i).a},1346:function(t,e,n){"use strict";var i=n(1150);n.n(i).a},1347:function(t,e,n){"use strict";var i=n(1151);n.n(i).a},1348:function(t,e,n){"use strict";var i=n(1152);n.n(i).a},1349:function(t,e,n){"use strict";var i=n(1154);n.n(i).a},1350:function(t,e,n){"use strict";var i=n(1155);n.n(i).a},1351:function(t,e,n){"use strict";var i=n(1156);n.n(i).a},1356:function(t,e,n){"use strict";var i=n(1158);n.n(i).a},1357:function(t,e,n){"use strict";var i=n(1159);n.n(i).a},1358:function(t,e,n){"use strict";var i=n(1160);n.n(i).a},1359:function(t,e,n){"use strict";var i=n(1161);n.n(i).a},1366:function(t,e,n){"use strict";n(7),n(3),n(26),n(9),n(10),n(8),n(5);var i=n(32),r=n(15),s=(n(13),n(18)),a=n(162),o=n(24),c=n(55),l=n.n(c);function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var p={mixins:[o.a],props:{showNextBtn:{type:Boolean,default:!0},showPrevBtn:{type:Boolean,default:!0},showFinalBtn:{type:Boolean,default:!1},previewButtonEmitFunction:{type:String,default:null},nextButtonEmitFunction:{type:String,default:null},finalBtnLink:{type:Object,default:null},finalBtnText:{type:String,default:null}},data:function(){return{isButtonsScrolled:!1}},mounted:function(){window.addEventListener("load",this.handleScrollButtons),window.addEventListener("resize",this.handleScrollButtons),window.addEventListener("scroll",this.handleScrollButtons)},beforeDestroy:function(){window.removeEventListener("load",this.handleScrollButtons),window.removeEventListener("resize",this.handleScrollButtons),window.removeEventListener("scroll",this.handleScrollButtons)},methods:d({},Object(s.d)("step-manager",["nextStep","prevStep"]),{handleScrollButtons:function(){var t=window.scrollY,e=Math.round(window.innerHeight),n=Math.round(document.getElementsByClassName("page-wrapper__footer")[0].offsetTop);this.isButtonsScrolled=t+e>n+1},onPreviewButtonClick:function(){1!==this.currentStepIndex&&2!==this.currentStepIndex||!this.isCalc||this.dataLayerPush("Loan Calculator",1===this.currentStepIndex?"Engine and transmission":"Equipment","Back"),this.previewButtonEmitFunction?this.$emit(this.previewButtonEmitFunction):this.prevStep()},onNextButtonClick:function(){if(1===this.currentStepIndex&&this.isCalc){var t={vehicleTransmission:this.getTransmission(),vehicleEngine:this.getEngine(),driveUnit:l()(this.drives,{id:this.currentDriveId}).name_en};this.dataLayerPush("Loan Calculator","Engine and transmission","Next",t)}2===this.currentStepIndex&&this.isCalc&&this.dataLayerPush("Loan Calculator","Equipment","Next",{vehicleTrim:l()(this.complectations,{id:this.currentComplectationId}).name}),this.nextButtonEmitFunction?this.$emit(this.nextButtonEmitFunction):this.nextStep()},getTransmission:function(){var t=l()(this.gearboxes,{id:this.currentGearboxId});return"".concat(t.name_en," ").concat(this.currentGearsNumber).concat(t.code)},getEngine:function(){var t=l()(this.engines,{id:this.currentEngineId}),e=l()(this.fuelTypes,{id:t.fuel_type_id});return"".concat(t.name," | ").concat(t.power_hp," h.p. | ").concat(e.name_en)}}),computed:d({},Object(s.e)("step-manager",["currentStepIndex"]),{},Object(s.e)("configurator",["isCalc","drives","engines","fuelTypes","gearboxes","complectations","currentDriveId","currentEngineId","currentGearboxId","currentGearsNumber","currentComplectationId"])),components:{IconLeft:a.a}},f=(n(1343),n(2)),m=Object(f.a)(p,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"constructor__buttons"},[n("div",{class:["constructor__buttons__container",{"is-scrolled":t.isButtonsScrolled}]},[n("g-container",[n("ul",{staticClass:"flex justify-around desktop:justify-end"},[t.showPrevBtn?t._e():n("li",[n("div")]),t._v(" "),t.showPrevBtn?n("li",[n("button",{staticClass:"button button_text",on:{click:function(e){return e.preventDefault(),t.onPreviewButtonClick()}}},[n("icon-left"),t._v(" "),n("span",{staticClass:"button__span-after"},[t._v("\n              Шаг назад\n            ")])],1)]):t._e(),t._v(" "),t.showNextBtn?n("li",[n("button",{staticClass:"button button_primary",on:{click:function(e){return e.preventDefault(),t.onNextButtonClick()}}},[n("span",{staticClass:"button__span-after"},[t._v("\n              Далее\n            ")])])]):t._e(),t._v(" "),t.showFinalBtn&&t.finalBtnText?n("li",[n("nuxt-link",{staticClass:"button button_primary",attrs:{to:t.finalBtnLink}},[n("span",{staticClass:"button__span-after"},[t._v("\n              "+t._s(t.finalBtnText)+"\n            ")])])],1):t._e()])])],1)])}),[],!1,null,null,null).exports,h=n(1368);function _(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var g={mixins:[o.a],mounted:function(){"/buy/configurator/"!==this.$route.path&&"/buy/calc/"!==this.$route.path||this.dataLayerPush(this.isCalc?"Loan Calculator":"Configurator","Model selection","Start",null,!0)},data:function(){return{activeModelId:null,isSelectModelSended:!1}},computed:v({},Object(s.e)("configurator",["carcassTypes","models","modelLines","currentModelId","isCalc"]),{},Object(s.c)("configurator",["onSaleModels"]),{isModelsEmpty:function(t){return!Boolean(this.onSaleModels.length)}}),methods:v({},Object(s.d)("configurator",["setCurrentModelId","clearModificationStepData","clearComplectationStepData","clearColorStepData","clearAccessoriesStepData"]),{modelSelectHandler:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e||this.isSelectModelSended||"/buy/configurator/"!==this.$route.path&&"/buy/calc/"!==this.$route.path||(this.dataLayerPush(this.isCalc?"Loan Calculator":"Configurator","Model selection","Select model"),this.isSelectModelSended=!0),this.activeModelId=t},nextButtonClickHandler:function(t){this.currentModelId!==this.activeModelId&&(this.setCurrentModelId(this.activeModelId),this.clearModificationStepData(),this.clearComplectationStepData(),this.clearColorStepData(),this.clearAccessoriesStepData());var e=l()(this.models,{id:this.activeModelId}),n=l()(this.modelLines,{id:e.model_line_id});this.dataLayerPush(this.isCalc?"Loan Calculator":"Configurator","Model selection","Next",{vehicleModelYear:e.unique_id.substr(4,4),vehicleNameplate:n.name}),this.$emit("model-select")}}),components:{ModelSelect:h.a,StepButtons:m}},b=Object(f.a)(g,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"constructor__step"},[t.isModelsEmpty?n("div",[t._v("\n    Модели не найдены\n  ")]):n("div",[n("ModelSelect",{staticClass:"mt-6 desktop:mt-8",attrs:{carcassTypes:t.carcassTypes,models:t.onSaleModels,modelLines:t.modelLines,currentModelId:t.currentModelId},on:{"model-select":t.modelSelectHandler,"model-img-click":function(e){return t.nextButtonClickHandler()}}}),t._v(" "),n("StepButtons",{attrs:{showPrevBtn:!1,nextButtonEmitFunction:"next-button-click"},on:{"next-button-click":function(e){return t.nextButtonClickHandler()}}})],1)])}),[],!1,null,null,null).exports,y=(n(33),n(38),n(69),n(1073)),C=n(377),P=n(107),O=n(138),x=n.n(O),w=n(1121),I=n.n(w),j=n(1136),k=n.n(j);function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var L={mixins:[o.a],props:{stepOptions:{type:Object,default:function(){return{showNextBtn:!0,showPrevBtn:!0}}},isCalculator:{type:Boolean,default:!1}},data:function(){return{isTransmissionSended:!1,isEngineSended:!1,isDriveSended:!1}},methods:D({},Object(s.d)("step-manager",["nextStep","prevStep"]),{},Object(s.d)("configurator",["setCurrentEngineId","setCurrentGearsNumber","setCurrentGearboxId","setCurrentDriveId","clearComplectationStepData","clearColorStepData","setCurrentYear"]),{isStepDataLoaded:function(){return void 0!==this.modelsData[this.currentModel.code]},clearStepData:function(){this.clearComplectationStepData(),this.clearColorStepData()},selectEngine:function(t){this.setCurrentEngineId(t),this.checkTransmission(),this.clearStepData(),this.isEngineSended||(this.dataLayerPush(this.isCalculator?"Loan Calculator":"Configurator","Engine and transmission","Select engine"),this.isEngineSended=!0)},checkTransmission:function(){var t=this.getTransmissionUniqueKey(this.currentGearboxId,this.currentGearsNumber),e=this.availableTransmissions();void 0===e[t]?this.selectTransmission(Object.keys(e)[0]):this.checkDrive()},selectTransmission:function(t){this.isTransmissionSended||(this.dataLayerPush(this.isCalculator?"Loan Calculator":"Configurator","Engine and transmission","Select transmission"),this.isTransmissionSended=!0);var e=this.allTransmissions();void 0===e[t]||e[t].disabled||(this.setCurrentGearsNumber(e[t].gearsNumber),this.setCurrentGearboxId(e[t].gearboxId),this.clearStepData(),this.checkDrive())},selectYearHandler:function(t){if(this.setCurrentYear(t),!this.isComplectationsEmpty){var e=k()(this.currentYearComplectations,["price"])[0];this.setCurrentEngineId(e.engine_id),this.setCurrentGearsNumber(this.transmissionsById[e.transmission_id].gears_number),this.setCurrentGearboxId(this.transmissionsById[e.transmission_id].gearbox_id),this.setCurrentDriveId(this.transmissionsById[e.transmission_id].drive_id)}this.clearStepData()},checkDrive:function(){var t=this.availableDrives();void 0===t[this.currentDriveId]&&this.selectDrive(Object.keys(t)[0])},selectDrive:function(t){this.isDriveSended||(this.dataLayerPush(this.isCalculator?"Loan Calculator":"Configurator","Engine and transmission","Select drive unit"),this.isDriveSended=!0),void 0!==this.availableDrives()[t]&&(this.setCurrentDriveId(t),this.clearStepData())},availableTransmissions:function(){var t=this,e={};return this.complectationsData.forEach((function(n){if(n.engineId===t.currentEngineId){var i=t.getTransmissionUniqueKey(n.gearboxId,n.gearsNumber);e[i]=i}})),e},availableDrives:function(){var t=this,e={};return this.complectationsData.forEach((function(n){n.engineId===t.currentEngineId&&n.gearsNumber===t.currentGearsNumber&&n.gearboxId===t.currentGearboxId&&(e[n.driveId]=n.driveId)})),e},getTransmissionUniqueKey:function(t,e){return t+e},sortTransmissionsByGearbox:function(){var t=[],e=(this.filteredTransmissionsId(),I()(this.transmissions,"gearbox_id")),n=this.filteredGearboxesId();return this.gearboxes.forEach((function(i){-1!==n.indexOf(i.id)&&e[i.id]&&(t=t.concat(e[i.id]))})),t},filteredTransmissionsId:function(){var t=this,e={};return this.complectationsData.forEach((function(n){t.transmissionsById[n.transmissionId]&&(e[n.transmissionId]=t.transmissionsById[n.transmissionId])})),Object.values(e)},filteredGearboxesId:function(){var t={};return this.complectationsData.forEach((function(e){t[e.gearboxId]=e.gearboxId})),Object.values(t)},allTransmissions:function(){var t=this,e=this.availableTransmissions(),n=this.sortTransmissionsByGearbox(),i={};return n.forEach((function(n){var r=t.getTransmissionUniqueKey(n.gearbox_id,n.gears_number);void 0===i[r]&&(i[r]={gearsNumber:n.gears_number,gearboxId:n.gearbox_id,gearboxCode:t.gearboxesById[n.gearbox_id].code,gearboxName:t.gearboxesById[n.gearbox_id].name,disabled:void 0===e[r],classes:{active:n.gears_number===t.currentGearsNumber&&t.currentGearboxId===n.gearbox_id,disabled:void 0===e[r]}},i[r].name=i[r].gearsNumber?"".concat(i[r].gearsNumber).concat(i[r].gearboxCode):i[r].gearboxCode)})),i},allDrives:function(){var t=this,e=[],n=this.availableDrives(),i=this.filteredDrivesId();return this.drives.forEach((function(r){-1!==i.indexOf(r.id)&&e.push({id:r.id,code:r.code,name:r.name,classes:{active:r.id===t.currentDriveId,disabled:void 0===n[r.id]}})})),e},filteredDrivesId:function(){var t={};return this.complectationsData.forEach((function(e){t[e.driveId]=e.driveId})),Object.values(t)},nextButtonClickHandler:function(){var t={vehicleTransmission:this.gearboxesById[this.currentGearboxId].name_en,vehicleEngine:this.enginesById[this.currentEngineId].name,driveUnit:this.drivesById[this.currentDriveId].name_en};this.isCalculator||this.dataLayerPush("Configurator","Engine and transmission","Next",t),this.nextStep()},previewButtonClickHandler:function(){this.isCalculator||this.dataLayerPush("Configurator","Engine and transmission","Back"),this.prevStep()}}),computed:D({},Object(s.c)("configurator",["currentModel","transmissionsById","gearboxesById","enginesById","drivesById","complectationsYears","currentYearComplectations"]),{},Object(s.e)("configurator",["engines","complectations","transmissions","fuelTypes","drives","gearboxes","currentEngineId","currentGearsNumber","currentGearboxId","currentDriveId","modelsData","currentYear","isDataLoading"]),{availableYears:function(){var t=this,e=[];return this.complectationsYears.forEach((function(n){e.push({year:n,active:n==t.currentYear})})),e},complectationsData:function(){var t=this;return this.currentYearComplectations.map((function(e){return{id:e.id,engineId:e.engine_id,transmissionId:e.transmission_id,gearboxId:t.transmissionsById[e.transmission_id].gearbox_id,gearsNumber:t.transmissionsById[e.transmission_id].gears_number,driveId:t.transmissionsById[e.transmission_id].drive_id}}))},availableEngines:function(){var t=this,e=[];return this.engines.forEach((function(n){-1!==t.filteredEnginesId.indexOf(n.id)&&e.push({id:n.id,power:Math.round(n.power_hp),name:n.name,fuelTypeName:t.fuelTypes[n.fuel_type_id].name})})),x()(e,"power")},filteredEnginesId:function(){var t={};return this.complectationsData.forEach((function(e){t[e.engineId]=e.engineId})),Object.values(t)},isComplectationsEmpty:function(){return 0===this.complectations.length}}),mounted:function(){window.scrollTo(0,0),"models-code-calc"===this.$route.name&&this.dataLayerPush(this.hasCalculator?"Loan Calculator":"Configurator","Engine and transmission","Start",null,!0)},components:{StepButtons:m,IconPlus:y.a,IconInfo:C.a,Loader:P.a}},T=(n(1344),Object(f.a)(L,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isDataLoading?n("div",[n("Loader")],1):n("div",{staticClass:"constructor__step"},[!t.isComplectationsEmpty&&Boolean(t.currentEngineId)?n("div",{staticClass:"car-params"},[t.availableYears.length>1?n("div",{staticClass:"car-params__section"},[n("div",{staticClass:"car-params__section__title text-s1 mb-6"},[t._v("Год производства")]),t._v(" "),n("nav",{staticClass:"car-params__section__items"},[n("ul",{staticClass:"flex tablet:flex-row tablet:flex-wrap"},t._l(t.availableYears,(function(e){return n("li",{key:e.year},[n("div",{class:["car-params__section__button",{active:e.active}],on:{click:function(){return t.selectYearHandler(e.year)}}},[n("div",{staticClass:"flex items-center cursor-pointer"},[n("figure",{staticClass:"flex items-center justify-center"},[n("icon-plus")],1),t._v(" "),n("div",[n("div",[n("strong",[t._v(t._s(e.year))])])])])])])})),0)])]):t._e(),t._v(" "),n("div",{staticClass:"car-params__section"},[n("div",{staticClass:"car-params__section__title text-s1 mb-6"},[t._v("Двигатель")]),t._v(" "),n("nav",{staticClass:"car-params__section__items"},[n("ul",{staticClass:"flex tablet:flex-row tablet:flex-wrap"},t._l(t.availableEngines,(function(e,i){return n("li",{key:i},[n("div",{class:["car-params__section__button",{active:e.id===t.currentEngineId}],on:{click:function(){return t.selectEngine(e.id)}}},[n("div",{staticClass:"flex items-center cursor-pointer"},[n("figure",{staticClass:"flex items-center justify-center"},[n("icon-plus")],1),t._v(" "),n("div",[n("div",[n("strong",[t._v(t._s(e.name))])]),t._v("\n                  "+t._s(e.power)+" л.c., "+t._s(e.fuelTypeName.toLowerCase())+"\n                ")])])])])})),0)])]),t._v(" "),n("div",{staticClass:"car-params__section"},[n("div",{staticClass:"car-params__section__title text-s1 mb-6"},[t._v("Коробка передач")]),t._v(" "),n("nav",{staticClass:"car-params__section__items"},[n("ul",{staticClass:"flex tablet:flex-row tablet:flex-wrap"},t._l(t.allTransmissions(),(function(e,i){return n("li",{key:i},[n("div",{class:["car-params__section__button",e.classes],on:{click:function(){return t.selectTransmission(i)}}},[n("div",{staticClass:"flex items-center cursor-pointer"},[n("figure",{staticClass:"flex items-center justify-center"},[n("icon-plus")],1),t._v(" "),n("div",[n("div",[n("strong",[t._v(t._s(e.gearboxName))])]),t._v("\n                  "+t._s(e.name)+"\n                ")])])])])})),0)])]),t._v(" "),n("div",{staticClass:"car-params__section"},[n("div",{staticClass:"car-params__section__title text-s1 mb-6"},[t._v("Привод")]),t._v(" "),n("nav",{staticClass:"car-params__section__items"},[n("ul",{staticClass:"flex tablet:flex-row tablet:flex-wrap"},t._l(t.allDrives(),(function(e,i){return n("li",{key:i},[n("div",{class:["car-params__section__button",e.classes],on:{click:function(){return t.selectDrive(e.id)}}},[n("div",{staticClass:"flex items-center cursor-pointer"},[n("figure",{staticClass:"flex items-center justify-center"},[n("icon-plus")],1),t._v(" "),n("div",[n("div",[n("strong",[t._v(t._s(e.name))])]),t._v("\n                  "+t._s(e.code)+"\n                ")])])])])})),0)])])]):n("div",[t._v("\n    Не найдено комплектаций для выбранного автомобиля\n  ")]),t._v(" "),n("StepButtons",{attrs:{showNextBtn:!t.isComplectationsEmpty&&Boolean(t.currentEngineId)&&t.stepOptions.showNextBtn,showPrevBtn:t.stepOptions.showPrevBtn,nextButtonEmitFunction:"next-button-click",previewButtonEmitFunction:"preview-button-click"},on:{"next-button-click":function(e){return t.nextButtonClickHandler()},"preview-button-click":function(e){return t.previewButtonClickHandler()}}})],1)}),[],!1,null,null,null).exports),E=(n(75),n(375),n(84),n(77),n(376),n(108),n(111),n(96)),B=n.n(E),M=n(389),F=n.n(M),R=n(88),$=n.n(R),A=n(14),N=n.n(A),q=n(83),H=n(1084),z=n(19),V=n.n(z),G=n(31),Y=n(171),U=n(409),W=n(180),K=(n(36),n(56)),Q=n.n(K),X=n(408),J=n.n(X),Z=n(37),tt={mixins:[Z.a],props:{colors:Array,prefix:String,theme:{type:String,default:"black",validator:function(t){return-1!==["black","white"].indexOf(t)}},activeColorIndex:Number,showColorPrice:{type:Boolean,default:!1},showColorCode:{type:Boolean,default:!1},idPrefix:{type:String,default:null}},data:function(){return{checkColorSrc:J.a}},computed:{activeColor:function(){return this.colors[this.activeColorIndex]},name:function(){var t=Q()(this.activeColor,"name","");return this.showColorCode&&this.activeColor.code&&(t="".concat(t," (").concat(this.activeColor.code,")")),this.activeColor.isDoubleColor?t="".concat(t,", двухцветный"):this.activeColor.isMetallic&&(t="".concat(t,", металлик")),t},price:function(){return this.activeColor.price?" + ".concat(this.formatMoney(this.activeColor.price)):""}},methods:{getColorSwitchId:function(t,e){return this.idPrefix+(e+1)+"/"+t.name}}},et=(n(1345),Object(f.a)(tt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"color-select"},[n("div",[n("span",{staticClass:"color-disabled-gray"},[t._v(t._s(t.prefix))]),t._v(" "),n("span",{class:"text-s2i-b color-"+t.theme},[t._v("\n      "+t._s(t.name)+"\n    ")]),t._v(" "),t.showColorPrice?n("span",{class:"text-s2i nowrap color-"+t.theme},[t._v("\n      "+t._s(t.price)+"\n    ")]):t._e()]),t._v(" "),n("div",{staticClass:"color-select__colors-box overflow-auto"},[n("div",{staticClass:"color-select__colors flex mt-3 tablet:flex-wrap"},t._l(t.colors,(function(e,i){return n("div",{staticClass:"color-select__color color-white flex items-center justify-center mr-2 mb-2",style:e.image?"background-image: url("+e.image+")":"background-color: "+e.code,attrs:{id:t.getColorSwitchId(e,i)},on:{click:function(e){return t.$emit("select-color",i)}}},[i===t.activeColorIndex?n("div",{staticClass:"color-select__color__check",style:{backgroundImage:"url("+t.checkColorSrc+")"}}):t._e()])})),0)])])}),[],!1,null,null,null).exports),nt=n(411),it=n(412),rt={props:{isInteriorOn:Boolean,theme:{type:String,default:"black",validator:function(t){return-1!==["black","white"].indexOf(t)}},idPrefix:{type:String,default:null}}},st=Object(f.a)(rt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:"flex color-"+t.theme},[n("div",{staticClass:"flex mr-5 tablet:mr-3 items-center",attrs:{id:t.idPrefix+1}},[n("g-radio",{staticClass:"mr-2 cursor-pointer",attrs:{isOn:!t.isInteriorOn,disabled:!t.isInteriorOn,theme:t.theme,id:t.idPrefix+1},nativeOn:{click:function(e){return t.$emit("switch-mode")}}}),t._v(" "),n("span",[t._v("Экстерьер")])],1),t._v(" "),n("div",{staticClass:"flex items-center",attrs:{id:t.idPrefix+2}},[n("g-radio",{staticClass:"mr-2 cursor-pointer",attrs:{isOn:t.isInteriorOn,disabled:t.isInteriorOn,theme:t.theme,id:t.idPrefix+2},nativeOn:{click:function(e){return t.$emit("switch-mode")}}}),t._v(" "),n("span",[t._v("Интерьер")])],1)])}),[],!1,null,null,null).exports,at={mixins:[G.a],props:{options:Array,overviews:{type:Object,default:function(){return{complectations:[],colors:[]}}},panoramas:{type:Object,default:function(){return{complectations:[],colors:[]}}},exteriorColorId:{type:String,default:null},interiorColorId:{type:String,default:null},showTabs:{type:Boolean,default:!0},showModeSwitch:{type:Boolean,default:!0},showExteriorColors:{type:Boolean,default:!0},showInteriorColors:{type:Boolean,default:!0},showColorPrice:{type:Boolean,default:!1},showColorCode:{type:Boolean,default:!1},showNotice:{type:Boolean,default:!1},lookIdPrefix:{type:String,default:null},colorIdPrefix:{type:String,default:null}},data:function(){return{activeColorIndex:0,activeInteriorColorIndex:0,activeComplectationIndex:0,fileTemplate:"{index}.png",notice:"Изображение может не соответствовать выбранной комплектации. Цвет автомобиля может отличаться от представленного на данном сайте.",innerWidth:0,showInterior:!0,isInteriorOn:!1,panoramicViewer:null,isMobile:!1,swiperOptions:{preloadImages:!1,autoplay:!1,lazy:{loadPrevNext:!0}}}},computed:{tabs:function(){return(this.overviews.complectations||[]).map((function(t){return t.name}))},show:function(){return!N()(this.activeComplectationOverview)||!N()(this.activeComplectationPanaram)},activeComplectationOverview:function(){return void 0===this.overviews.complectations?{}:this.overviews.complectations[this.activeComplectationIndex]||{}},activeComplectationPanaram:function(){return void 0===this.panoramas.complectations?{}:this.panoramas.complectations[this.activeComplectationIndex]||{}},activeExteriorColors:function(){var t=[],e=V()(this.overviews.colors,"id"),n=this.activeComplectationOverview;for(var i in n.overviews){var r=n.overviews[i],s=e[r.color_id];void 0!==s&&t.push({id:s.id,name:s.name,code:s.code,sort:s.sort,count:+r.amount,price:s.price?s.price:null,isMetallic:s.is_metallic,isDoubleColor:s.is_double_color,image:this.generateFilePath(s.image),path:this.generateFilePath(r.path)})}return x()(t,"sort","desc")},activeInteriorColors:function(){var t=[],e=V()(this.panoramas.colors,"id"),n=this.activeComplectationPanaram;for(var i in n.panoramas){var r=n.panoramas[i],s=e[r.color_id];void 0!==s&&t.push({id:s.id,name:s.name,code:s.code,image:this.generateFilePath(s.image),path:this.generateFilePath(r.path)})}return t},exterior:function(){return this.activeExteriorColors[this.activeColorIndex]||{}},interior:function(){return this.activeInteriorColors[this.activeInteriorColorIndex]||{}},isAltTheme:function(){return this.isInteriorOn&&!this.isMobile}},methods:{selectColor:function(t){this.turnExteriorMode(),this.activeColorIndex=t,this.$emit("change-exterior",this.exterior)},selectInteriorColor:function(t){this.activeInteriorColorIndex=t,this.$emit("change-interior",this.interior)},toggleInterior:function(){this.isInteriorOn=!this.isInteriorOn},turnExteriorMode:function(){this.isInteriorOn=!1},selectOption:function(t){Object.assign(this,{activeColorIndex:0,activeInteriorColorIndex:0,activeComplectationIndex:t})},handleResize:function(){Math.abs(this.innerWidth-window.innerWidth)>10&&(this.innerWidth=window.innerWidth),this.isMobile=window.innerWidth<770},checkExteriorColor:function(){if(this.exteriorColorId){var t=$()(this.activeExteriorColors,{id:this.exteriorColorId});t?this.activeColorIndex=parseInt(t):this.$emit("change-exterior",this.exterior)}else this.$emit("change-exterior",this.exterior)},checkInteriorColor:function(){if(this.interiorColorId){var t=$()(this.activeInteriorColors,{id:this.interiorColorId});t?this.activeInteriorColorIndex=parseInt(t):this.$emit("change-interior",this.interior)}else this.$emit("change-interior",this.interior)},hasInterior:function(){var t=this.activeComplectationPanaram;this.showInterior=t.panoramas&&t.panoramas.length&&this.panoramas.colors.length}},created:function(){this.checkExteriorColor(),this.checkInteriorColor(),this.hasInterior()},watch:{overviews:function(){this.checkExteriorColor()}},mounted:function(){this.innerWidth=window.innerWidth,this.handleResize(),window.addEventListener("resize",this.handleResize)},beforeDestroy:function(){window.removeEventListener("resize",this.handleResize)},components:{Tabs:Y.a,Panorama:it.a,CheckColour:U.a,ThreeSixty:W.a,View360:nt.a,ColorSelect:et,ModeSwitch:st}},ot=(n(1346),Object(f.a)(at,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show?n("g-padding",{staticClass:"showroom py-12 tablet:pt-16 tablet:pb-14 relative"},[t.isInteriorOn?n("div",{class:["showroom__interior-viewer absolute w-full",{"showroom__interior-viewer--hidden":!t.isInteriorOn}]},[t.interior.path?n("Panorama",{attrs:{path:t.interior.path}}):t._e()],1):t._e(),t._v(" "),n("g-container",[n("div",{staticClass:"flex justify-between relative z-10"},[t._t("title",null,{isAltTheme:t.isAltTheme}),t._v(" "),t.showModeSwitch&&t.showInterior?n("mode-switch",{staticClass:"showroom__mode-switch--top",attrs:{theme:t.isAltTheme?"white":"black",isInteriorOn:t.isInteriorOn,idPrefix:t.lookIdPrefix},on:{"switch-mode":t.toggleInterior}}):t._e()],2),t._v(" "),t.showTabs&&t.tabs.length>1?n("tabs",{class:["showroom__tabs mt-4",t.isAltTheme?"color-white":"color-black"],attrs:{tabs:t.tabs,activeTabIndex:t.activeComplectationIndex},on:{"select-tab":t.selectOption}}):t._e(),t._v(" "),n("div",{class:["flex flex-col items-center mt-6 tablet:mt-8 showroom__three-sixty",{"showroom__three-sixty--hidden":t.isInteriorOn}]},[t.exterior.path?n("view-360",{staticClass:"showroom__three-sixty-box",attrs:{imageFolder:t.exterior.path,imageCount:t.exterior.count,imageFileName:t.fileTemplate},on:{"start-360":function(e){return t.$emit("start-360")}}}):t._e(),t._v(" "),n("three-sixty",{staticClass:"showroom__three-sixty-icon"}),t._v(" "),t.showNotice?n("div",{staticClass:"showroom__notice text-s3i color-disabled-gray mt-2 text-center"},[t._v("\n        "+t._s(t.notice)+"\n      ")]):t._e()],1),t._v(" "),t.showModeSwitch&&t.showInterior?n("mode-switch",{staticClass:"showroom__mode-switch--bottom mt-5 relative",attrs:{theme:t.isAltTheme?"white":"black",isInteriorOn:t.isInteriorOn},on:{"switch-mode":t.toggleInterior}}):t._e(),t._v(" "),n("div",{staticClass:"flex flex-col tablet:flex-row tablet:justify-between mt-4 desktop:mt-6 relative z-10"},[n("div",{staticClass:"flex showroom__colors"},[t.activeExteriorColors.length&&t.showExteriorColors?n("color-select",{class:["showroom__colors__color-select",{"showroom__colors__color-select--hidden":t.isInteriorOn}],attrs:{prefix:"Цвет:",colors:t.activeExteriorColors,theme:t.isAltTheme?"white":"black",activeColorIndex:t.activeColorIndex,showColorPrice:t.showColorPrice,showColorCode:t.showColorCode,idPrefix:t.colorIdPrefix},on:{"select-color":t.selectColor}}):t._e(),t._v(" "),t.activeInteriorColors.length&&t.showInteriorColors?n("color-select",{class:["showroom__colors__color-select",{"showroom__colors__color-select--hidden":!t.isInteriorOn}],attrs:{prefix:"Интерьер:",colors:t.activeInteriorColors,theme:t.isAltTheme?"white":"black",activeColorIndex:t.activeInteriorColorIndex,showColorCode:t.showColorCode,idPrefix:t.lookIdPrefix},on:{"select-color":t.selectInteriorColor}}):t._e()],1),t._v(" "),t._t("footer-buttons",null,{isAltTheme:t.isAltTheme})],2)],1)],1):t._e()}),[],!1,null,null,null).exports),ct=n(1134),lt=n(48),ut=n(110),dt=n(85),pt=n(178),ft=n(998);function mt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function ht(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?mt(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var _t={mixins:[Z.a,ft.a,G.a,o.a],props:{stepOptions:{type:Object,default:function(){return{mode:"default"}}},isCalculator:{type:Boolean,default:!1}},data:function(){return{opendComplectations:[],isOverviewLoaded:!1,isPopupShow:!1,popupComplectationOptions:null,complectationLabels:["комплектация","комплектации","комплектаций"],stepRoute:null,optionPopupOpened:!1,description:{}}},methods:ht({},Object(s.b)("configurator",["lazyLoadComplectationsOverviews"]),{},Object(s.d)("configurator",["setCurrentComplectationId","clearColorStepData"]),{},Object(s.d)("step-manager",["nextStep","prevStep"]),{togglePopupInfo:function(t){this.$refs[t].length>0&&this.$refs[t][0].classList.toggle("is-opened")},selectComplectationHandler:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.opendComplectations.indexOf(t);-1===n?(this.opendComplectations.push(t),this.isCalculator||this.dataLayerPush("Trim accordion",this.prepareComplectations.find((function(e){return e.id===t})).name,"Open")):t===this.currentComplectationId&&this.opendComplectations.splice(n,1),this.selectComplectation(t),setTimeout((function(){window.dispatchEvent(new Event("scroll"));var t=window.document.createEvent("UIEvents");t.initUIEvent("scroll",!0,!1,window,0),window.dispatchEvent(t)}),1),this.isCalc&&e&&this.dataLayerPush("Trim accordion",e,"Open")},selectComplectation:function(t){-1!==this.availableComplectationsId.indexOf(t)&&(this.setCurrentComplectationId(t),this.clearColorStepData(),this.$emit("complectation-select"))},openInfoPopup:function(t){this.popupName="".concat(this.currentModel.name," ").concat(t.name),this.popupComplectationOptions=t.options,this.isPopupShow=!0,this.dataLayerPush("Info pop-up","Trim description","Open")},closeInfoPopup:function(){this.isPopupShow=!1},preparePopupComplectation:function(){var t={};return this.popupComplectationOptions.forEach((function(e){t[e.group]?t[e.group].options.push({id:e.id,name:e.name}):t[e.group]={options:[{id:e.id,name:e.name}],name:e.group,sort:parseInt(e.sort)}})),x()(Object.values(t),["sort"],["desc"])},isOverviewDataLoaded:function(){return void 0!==this.complectationsData.overviews[this.currentComplectation.id]},openOptionInfoPopup:function(t){this.optionPopupOpened=!0,this.description={title:t.name,file:t.file_id,description:t.description},this.dataLayerPush("Info pop-up",t.name,"Open")},closeOptionInfoPopup:function(){this.optionPopupOpened=!1},getDescription:function(){return this.description},sendDataLayer:function(t){var e="Compare trims";"360"===t&&(e="360 exterior preview"),this.dataLayerPush(this.isCalc?"Loan Calculator":"Configurator","Equipment",e)},nextButtonClickHandler:function(){var t=this,e={vehicleTrim:this.prepareComplectations.find((function(e){return e.id===t.currentComplectationId})).name};this.isCalculator||this.dataLayerPush("Configurator","Equipment","Next",e),this.nextStep()},previewButtonClickHandler:function(){this.isCalculator||this.dataLayerPush("Configurator","Equipment","Back"),this.prevStep()}}),computed:ht({},Object(s.c)("configurator",["currentModel","currentComplectation","options","exteriorColorsById","interiorColorsById","filteredComplectations","enginesById","gearboxesById"]),{},Object(s.e)("configurator",["complectations","currentComplectationId","currentExteriorColorId","complectationsData","isDataLoading","optionsBase","currentEngineId","currentGearboxId","currentGearsNumber","isCalc"]),{complectationCount:function(){return"".concat(this.prepareComplectations.length," ").concat(this.choice(this.prepareComplectations.length,this.complectationLabels))},prepareComplectations:function(){var t={},e=this.availableComplectationsId;for(var n in this.filteredComplectations.forEach((function(n){-1!==e.indexOf(n.id)&&(t[n.id]=n)})),t){var i=t[n],r=i.baseComplectationId;N()(t[r])||(t[r].child.push(i),delete t[n])}return k()(F()(t),"price")},isOverviewDataEmpty:function(){return 0===this.complectationsData.overviews[this.currentComplectation.id].length},currentOverview:function(){var t=this;if(this.isOverviewDataEmpty)return{};var e=this.complectationsData.overviews[this.currentComplectation.id],n=[];return e.forEach((function(e){t.exteriorColorsById[e.color_id]&&n.push(t.exteriorColorsById[e.color_id])})),{complectations:[{overviews:e}],colors:n}},availableComplectationsId:function(){var t=[];return this.filteredComplectations.forEach((function(e){t.push(e.id)})),t},seo:function(){return{title:this.$store.state.configurator.seo.title,meta:[{hid:"description",name:"description",content:this.$store.state.configurator.seo.description}]}},engineAndGearbox:function(){return"".concat(this.enginesById[this.currentEngineId].name,"\n      ").concat(this.currentGearsNumber?this.currentGearsNumber:"","\n      ").concat(this.gearboxesById[this.currentGearboxId].code)}}),created:function(){var t=this;this.currentComplectation||this.selectComplectation(this.prepareComplectations[0].id),this.isOverviewDataLoaded()||this.lazyLoadComplectationsOverviews({modelId:this.currentModel.id,complectations:B()(this.filteredComplectations,"id")}).then((function(){t.isOverviewLoaded=t.isOverviewDataLoaded()})),this.$route.name.includes("configurator")?this.stepRoute="configurator":this.$route.name.includes("calc")&&(this.stepRoute="calc")},mounted:function(){window.scrollTo(0,0),this.isOverviewLoaded=this.isOverviewDataLoaded();var t=$()(this.prepareComplectations,{id:this.currentComplectationId});t&&this.prepareComplectations[t].advantageOptions.length>0&&this.opendComplectations.push(this.currentComplectationId),this.dataLayerPush(this.isCalc?"Loan Calculator":"Configurator","Equipment","Start",null,!0)},components:{CloseIcon:lt.a,Popup:q.a,OptionInfoContent:H.a,IconInfo:C.a,IconPlus:y.a,Showroom:ot,IconCompare:pt.a,IconAngleArrowDown:dt.a,IconTickRight:ut.a,StepButtons:m,Loader:P.a,OptionsList:ct.a}},vt=(n(1347),Object(f.a)(_t,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isDataLoading?n("div",[n("Loader")],1):n("div",[n("div",{staticClass:"constructor__step"},[t.isOverviewLoaded?[t.isOverviewDataEmpty?t._e():n("showroom",{staticClass:"showroom__three-sixty_wrapper_thin",attrs:{overviews:t.currentOverview,showExteriorColors:!1,showInteriorColors:!1,showModeSwitch:!1,showNotice:!0,exteriorColorId:this.currentExteriorColorId||t.currentModel.overview_default_color_id},on:{"start-360":function(e){return t.sendDataLayer("360")}}},[n("template",{slot:"title"},[n("h1",{staticClass:"text-x6 desktop:text-x5"},[t._v("\n            "+t._s(t.engineAndGearbox)+"\n          ")])])],2)]:[n("Loader")],t._v(" "),n("div",{staticClass:"constructor__kits"},[n("div",{staticClass:"constructor__kits-header mb-4 tablet:flex items-center justify-between"},[t.stepRoute?n("div",{staticClass:"constructor__kits-title text-s2-b mb-2 tablet:mb-0"},[t.prepareComplectations.length>1&&"popup_store"!==t.stepOptions.mode?n("nuxt-link",{staticClass:"button button_secondary constructor__kits-button",attrs:{to:{name:"models-code-"+this.stepRoute+"-compare",params:{name:t.currentModel.name,complectations:t.prepareComplectations,currentComplectationId:this.currentComplectationId,seo:t.seo}}}},[n("span",{staticClass:"button__span-after",on:{click:t.sendDataLayer}},[t._v("\n              Сравнить "+t._s(t.complectationCount)+"\n            ")])]):t._e()],1):t._e()]),t._v(" "),t._l(t.prepareComplectations,(function(e,i){return n("div",{key:i,class:["constructor__kits__section",{active:e.id===t.currentComplectationId,"is-opened":-1!==t.opendComplectations.indexOf(e.id)}]},[n("div",{staticClass:"constructor__kits__section__header flex flex-row flex-wrap items-end justify-between cursor-pointer",on:{click:function(){return t.selectComplectationHandler(e.id,e.name)}}},[n("div",{staticClass:"flex items-center"},[n("figure",{staticClass:"flex items-center justify-center"},[n("icon-plus")],1),t._v(" "),n("div",{staticClass:"constructor__kits__section__header__info"},[n("div",{staticClass:"flex flex-wrap"},[n("strong",[t._v(t._s(e.name))])]),t._v(" "),n("div",[n("strong",[t._v(t._s(t.formatMoney(e.price)))])])])]),t._v(" "),e.advantageOptions.length>0?n("div",{staticClass:"constructor__kits__section__header__toggle flex items-center"},[n("strong",[t._v("Что включено")]),t._v(" "),n("icon-angle-arrow-down")],1):t._e()]),t._v(" "),n("div",{staticClass:"constructor__kits__section__body"},[n("div",[n("div",{staticClass:"constructor__kits__section__list"},[n("div",{staticClass:"constructor__kits__section__list_header pb-6 text-s2i-b"},[t._v("\n                Основные опции\n              ")]),t._v(" "),n("ul",t._l(e.advantageOptions,(function(e,i){return n("li",{key:i},[t._v("\n                  "+t._s(e.name)+"\n                  "),e.description||e.file_id?n("g-button-info",{on:{click:function(n){return t.openOptionInfoPopup(e)}}}):t._e()],1)})),0),t._v(" "),n("div",{staticClass:"constructor__kits__section__list__all text-s2i-b"},[n("a",{staticClass:"inline-flex items-center",attrs:{href:"javascript:"},on:{click:function(n){return n.stopPropagation(),t.openInfoPopup(e)}}},[t._v("\n                  Показать все\n                  "),n("icon-tick-right")],1)])]),t._v(" "),n("div",{staticClass:"constructor__kits__section__images"})])])])})),t._v(" "),t.isPopupShow?n("Popup",{attrs:{disableBodyScroll:""}},[n("div",{staticClass:"constructor__popup-wrapper flex items-center justify-center"},[n("div",{staticClass:"constructor__popup w-full"},[n("button",{staticClass:"constructor__close-button",on:{click:t.closeInfoPopup}},[n("CloseIcon")],1),t._v(" "),n("div",{staticClass:"constructor__popup__content p-6 desktop:p-12 desktop1440:px-22"},[n("div",{staticClass:"text-x5 desktop:text-x3 mb-4"},[t._v(t._s(t.popupName))]),t._v(" "),t._l(t.preparePopupComplectation(),(function(e,i){return n("div",{key:i,ref:"options_"+e.name,refInFor:!0,staticClass:"is-opened"},[n("div",{staticClass:"options-group__title text-s1 desktop:text-x5 flex items-center justify-between py-4 desktop:py-6",on:{click:function(n){return n.preventDefault(),t.togglePopupInfo("options_"+e.name)}}},[n("span",[t._v(t._s(e.name))]),t._v(" "),n("icon-angle-arrow-down")],1),t._v(" "),n("ul",{staticClass:"options-group__list"},t._l(e.options,(function(e,i){return n("li",{key:i},[t._v(t._s(e.name))])})),0)])})),t._v(" "),n("OptionsList",{attrs:{"get-options-list":t.optionsBase,isOpened:!0,isPopup:t.isPopupShow,title:"Стандартное оборудование"}})],2)])])]):t._e(),t._v(" "),t.optionPopupOpened?n("popup",[n("option-info-content",{attrs:{popup:t.getDescription()},on:{"toggle-info-popup":t.closeOptionInfoPopup}})],1):t._e()],2),t._v(" "),n("StepButtons",{attrs:{nextButtonEmitFunction:"next-button-click",previewButtonEmitFunction:"preview-button-click"},on:{"next-button-click":function(e){return t.nextButtonClickHandler()},"preview-button-click":function(e){return t.previewButtonClickHandler()}}})],2)])}),[],!1,null,null,null).exports),gt=n(391),bt=n(312),yt=n.n(bt);function Ct(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Pt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ct(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ot={mixins:[Z.a,G.a,o.a],data:function(){return{isPanoramaLoaded:!1}},methods:Pt({},Object(s.b)("configurator",["lazyLoadComplectationsPanoramas"]),{},Object(s.d)("configurator",["nextStep","setCurrentInteriorColorId","setCurrentExteriorColorId"]),{},Object(s.d)("step-manager",{nextMStep:"nextStep",prevMStep:"prevStep"}),{isPanoramasDataLoaded:function(){return void 0!==this.complectationsData.panoramas[this.currentComplectation.id]},changeExteriorHandler:function(t){t&&this.setCurrentExteriorColorId(t.id)},changeInteriorHandler:function(t){t&&this.setCurrentInteriorColorId(t.id)},nextButtonClickHandler:function(){var t=this,e={vehicleColorExterior:this.currentOverview.colors.find((function(e){return e.id===t.currentExteriorColorId})).code,vehicleColorInterior:this.currentPanorama.colors.find((function(e){return e.id===t.currentInteriorColorId})).code};this.dataLayerPush("Configurator","Colors and finishes","Next",e),this.nextMStep()},previewButtonClickHandler:function(){this.dataLayerPush("Configurator","Colors and finishes","Back"),this.prevMStep()}}),computed:Pt({},Object(s.c)("configurator",["currentComplectation","currentModel","exteriorColorsById","filteredComplectations"]),{},Object(s.e)("configurator",["interiorColors","exteriorColors","complectationsData","isDataLoading","currentExteriorColorId","currentInteriorColorId","owerviewBgImages"]),{isPanoramasDataEmpty:function(){return 0===this.complectationsData.panoramas[this.currentComplectation.id].length},isOverviewDataEmpty:function(){return 0===this.complectationsData.overviews[this.currentComplectation.id].length},currentOverview:function(){if(this.isOverviewDataEmpty)return{};var t=this.complectationsData.overviews[this.currentComplectation.id],e=this.currentComplectation.exterior_colors,n=[];return yt()(t,(function(t,i){-1!==e.indexOf(t.color_id)&&(n[i]=t)})),{complectations:[{overviews:n}],colors:this.exteriorColors,bg_images:this.owerviewBgImages}},currentPanorama:function(){return this.isPanoramasDataEmpty?{}:{complectations:[{panoramas:this.complectationsData.panoramas[this.currentComplectation.id]}],colors:this.interiorColors}}}),created:function(){var t=this;if(this.isPanoramasDataLoaded()||this.lazyLoadComplectationsPanoramas({modelId:this.currentModel.id,complectations:B()(this.filteredComplectations,"id")}).then((function(){t.isPanoramaLoaded=t.isPanoramasDataLoaded()})),null===this.currentExteriorColorId&&this.currentModel.overview_default_color_id){var e=V()(this.complectationsData.overviews[this.currentComplectation.id],"color_id");if(e[this.currentModel.overview_default_color_id]&&!e[this.currentModel.overview_default_color_id].color_price)this.setCurrentExteriorColorId(this.currentModel.overview_default_color_id);else{var n=l()(e,{color_price:null});n&&this.setCurrentExteriorColorId(n.color_id)}}},mounted:function(){this.dataLayerPush("Configurator","Colors and finishes","Start",null,!0),window.scrollTo(0,0),this.isPanoramaLoaded=this.isPanoramasDataLoaded()},components:{Loader:P.a,StepButtons:m,Showroom:gt.a}},xt=(n(1348),Object(f.a)(Ot,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"constructor__step"},[t.isPanoramaLoaded&&!t.isDataLoading?[t.isOverviewDataEmpty&&t.isPanoramasDataEmpty?t._e():n("showroom",{staticClass:"showroom__three-sixty_wrapper_thin",attrs:{"is-configurator":!0,overviews:t.currentOverview,panoramas:t.currentPanorama,"show-color-price":!0,"show-color-code":!0,"show-interior-colors":!0,showNotice:!0,"exterior-color-id":t.currentExteriorColorId,"interior-color-id":t.currentInteriorColorId,source:"configurator-color"},on:{"change-exterior":t.changeExteriorHandler,"change-interior":t.changeInteriorHandler}},[n("template",{slot:"title"},[n("h1",{staticClass:"text-x6 desktop:text-x5"},[t._v("\n          "+t._s(t.currentComplectation.name)+"\n        ")])])],2)]:[n("Loader")],t._v(" "),n("StepButtons",{attrs:{showNextBtn:Boolean(t.currentExteriorColorId&&t.currentInteriorColorId),nextButtonEmitFunction:"next-button-click",previewButtonEmitFunction:"preview-button-click"},on:{"next-button-click":function(e){return t.nextButtonClickHandler()},"preview-button-click":function(e){return t.previewButtonClickHandler()}}})],2)}),[],!1,null,null,null).exports),wt=(n(49),n(1330)),It=n(1264),jt=(n(27),n(59),n(384)),kt=n.n(jt),St={mixins:[n(34).a],props:{configurationCode:{type:String,default:null}},data:function(){return{cookieName:"saved_configurations",cookiePath:"/",cookieDomain:"",cookieExpiryDays:90}},methods:{handleConfigurationCode:function(){if(this.configurationCode){var t=this.getCookie(this.cookieName),e=[];void 0!==t&&(e=t.split(",")),e.push(this.configurationCode),e=kt()(e).join(","),this.setCookie(this.cookieName,e,this.cookieExpiryDays,this.cookieDomain,this.cookiePath)}}},mounted:function(){this.handleConfigurationCode()},watch:{configurationCode:function(){this.handleConfigurationCode()}}},Dt=Object(f.a)(St,(function(){var t=this.$createElement;return(this._self._c||t)("div")}),[],!1,null,null,null).exports,Lt=n(392),Tt=n.n(Lt),Et=n(1028),Bt=n(534);function Mt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ft(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Mt(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Rt={mixins:[o.a,Et.a,Z.a,G.a],props:{stepData:{type:Object,default:function(){return{}}},stepOptions:{type:Object,default:function(){return{mode:"default"}}}},data:function(){return{isComplectationDataLoaded:!1,defaultImage:"/images/landing/about/img-brand.jpg",selectedOffers:""}},computed:Ft({},Object(s.e)("step-manager",["stepIndices","currentStepIndex"]),{},Object(s.e)("configurator",["complectationsData","isDataLoading","currentExteriorColorId","currentInteriorColorId","drives","engines","gearboxes","fuelTypes","optionsBase","currentDriveId","currentGearboxId","currentGearsNumber","currentEngineId","currentYear","carcassTypes","configuration","isFavoriteChecked","currentCity","createdAt","advantages","owerviewBgImages"]),{},Object(s.c)("configurator",["currentComplectation","currentModel","options","exteriorColorsById","interiorColorsById","menuLinks","selectedAccessoriesForSave","selectedAccessories"]),{menuButtons:function(){return{mainButton:{title:"Заявка дилеру"},links:this.menuLinks}},isPopupStore:function(){return"popup_store"===this.stepOptions.mode},model:function(){return Object.assign({},this.currentModel,{year:this.currentYear})},engine:function(){return V()(this.engines,"id")[this.currentEngineId]},gearbox:function(){return V()(this.gearboxes,"id")[this.currentGearboxId]},drive:function(){return V()(this.drives,"id")[this.currentDriveId]},fuelType:function(){return this.fuelTypes[this.engine.fuel_type_id]},transmission:function(){return{gears_number:this.currentGearsNumber}},specialOffers:function(){return this.complectationsData.offers[this.currentComplectation.id]},groupedSpecifications:function(){return this.complectationsData.specifications[this.currentComplectation.id]},specifications:function(){return{name:"Спецификация",elements:[{name:"Код модели",value:this.currentComplectation.modification_code},{name:"OCN",value:this.currentComplectation.ocn},{name:"Модельный год",value:this.currentComplectation.model_year},{name:"Год производства",value:this.currentComplectation.year}]}},isPanoramasDataEmpty:function(){return void 0===this.complectationsData.panoramas[this.currentComplectation.id]||0===this.complectationsData.panoramas[this.currentComplectation.id].length},isOverviewDataEmpty:function(){return void 0===this.complectationsData.overviews[this.currentComplectation.id]||0===this.complectationsData.overviews[this.currentComplectation.id].length},groupedOptions:function(){var t=this;if(0===this.currentComplectation.options.length)return[];var e=[];return this.currentComplectation.options.forEach((function(n){void 0!==t.options[n]&&(void 0!==e[t.options[n].group]?e[t.options[n].group].options.push({id:n,name:t.options[n].name,file_id:t.options[n].file_id,description:t.options[n].description}):e[t.options[n].group]={name:t.options[n].group,options:[{id:n,name:t.options[n].name,file_id:t.options[n].file_id,description:t.options[n].description}]})})),Object.values(e)},currentOverview:function(){return this.isOverviewDataEmpty?{}:{complectations:[{overviews:this.complectationsData.overviews[this.currentComplectation.id]}],colors:[this.exteriorColorsById[this.currentExteriorColorId]],bg_images:this.owerviewBgImages}},currentPanorama:function(){return this.isPanoramasDataEmpty?{}:{complectations:[{panoramas:this.complectationsData.panoramas[this.currentComplectation.id]}],colors:[this.interiorColorsById[this.currentInteriorColorId]]}}}),methods:Ft({},Object(s.b)("configurator",["saveConfigurationId","lazyLoadComplectationInfo","checkIsFavorite","lazyLoadComplectationsOptions"]),{},Object(s.b)("watched",["addWatched"]),{},Object(s.d)("step-manager",["setCurrentStepIndex"]),{},Object(s.d)("configurator",["setConfiguration","setIsFavoriteChecked"]),{checkComplectationData:function(){return void 0!==this.complectationsData.specifications[this.currentComplectation.id]},colorsClickHandler:function(){this.dataLayerPush("Configurator","Results","Edit colors and finishes"),this.setCurrentStepIndex(this.stepIndices.color)},accessoriesClickHandler:function(){this.setCurrentStepIndex(this.stepIndices.accessories)},characteristicsClickHandler:function(){this.dataLayerPush("Configurator","Results","Edit engine and transmission"),this.setCurrentStepIndex(this.stepIndices.modification)},configurationChanged:function(t){return void 0===this.configuration||(t.model_code!==this.configuration.model_code||t.complectation_id!==this.configuration.complectation_id||t.exterior_colors_id!==this.configuration.exterior_colors_id||t.interior_colors_id!==this.configuration.interior_colors_id||!Tt()(t.accessories,this.configuration.accessories))},sendAnalytics:function(){var t={"car brand":"kia","car model":this.model.code,"production year":this.model.year,"car generation":this.currentComplectation.model_year,"interior color":this.getLocalizedName(this.stepData.currentInteriorColor),Region:this.getLocalizedName(this.currentCity),"Complete Sets":this.getLocalizedName(this.currentComplectation),Price:this.stepData.totalPrice,"Exterior Color":this.getLocalizedName(this.stepData.currentExteriorColor)};if(this.engine){var e=this.fuelType?this.getLocalizedName(this.fuelType):null;t.engine="".concat(this.getLocalizedName(this.engine)," / ").concat(Math.round(this.engine.power_hp)," л.с. / ").concat(e)}this.gearbox&&(t.transmission=this.transmission.gears_number?"".concat(this.getLocalizedName(this.gearbox),", ").concat(this.transmission.gears_number).concat(this.gearbox.code):"".concat(this.getLocalizedName(this.gearbox),", ").concat(this.gearbox.code)),this.drive&&(t["drive unit"]=this.getLocalizedName(this.drive));var n=l()(this.carcassTypes,{id:this.model.carcass_type_id});n&&(t["body type"]=this.getLocalizedName(n))},prepareProperties:function(){return{vehicleColorExterior:this.stepData.currentExteriorColor.name_en,vehicleColorInterior:this.stepData.currentInteriorColor.name_en,vehicleModelYear:this.model.unique_id.substr(4,4),vehicleNameplate:this.model.name,accessoryCode:Object.values(this.stepData.selectedAccessories).map((function(t){return t.article})).join("|"),vehicleTransmission:"".concat(this.gearbox.name_en,", ").concat(this.transmission.gears_number).concat(this.gearbox.code),vehicleTrim:this.currentComplectation.name_en,vehicleEngine:"".concat(this.engine.name," ").concat(this.fuelType.name_en),driveUnit:this.drive.name_en,"сonfigurationId":this.configuration.unique_code,priceDealership:this.stepData.totalPrice}},selectOffer:function(t){this.selectedOffers=this.specialOffers.filter((function(e){return t.includes(e.id)})).map((function(t){return t.name})),this.$emit("select-offer",this.selectedOffers)}}),created:function(){var t=this,e={model_code:this.currentModel.external_id,complectation_id:this.currentComplectation.id,exterior_colors_id:this.currentExteriorColorId,interior_colors_id:this.currentInteriorColorId};N()(this.selectedAccessoriesForSave.accessories)||(e.accessories=this.selectedAccessoriesForSave),this.configurationChanged(e)&&(this.isPopupStore?this.setConfiguration(e):this.saveConfigurationId(e).then((function(e){t.configuration.unique_code&&history.pushState({},null,t.$route.path+"step_".concat(t.currentStepIndex+1,"/").concat(t.configuration.unique_code,"/")),t.setIsFavoriteChecked(!1),t.checkIsFavorite(e.data.content.result_id),t.addWatched({type:Bt.watchedTypes.configuration,id:e.data.content.result_id})}))),this.currentComplectation.unique_id&&this.currentModel.code&&this.lazyLoadComplectationsOptions({uniqueId:this.currentComplectation.unique_id,code:this.currentModel.code}),this.checkComplectationData()?(this.sendAnalytics(),this.isComplectationDataLoaded=!0):this.lazyLoadComplectationInfo(this.currentComplectation.id).then((function(){t.sendAnalytics(),t.isComplectationDataLoaded=!0})),this.configuration.id&&(this.isFavoriteChecked||this.checkIsFavorite(this.configuration.id),this.addWatched({type:Bt.watchedTypes.configuration,id:this.configuration.id}))},mounted:function(){var t=this;window.scrollTo(0,0),window.onpopstate=function(e){t.$router.push({name:"buy-configurator"})}},watch:{isComplectationDataLoaded:function(t){t&&this.dataLayerPush("Configurator","Results","Complete",this.prepareProperties(),!0)}},beforeDestroy:function(){window.onpopstate=function(){}},components:{CarsInStock:It.a,Complectation:wt.a,Loader:P.a,ConfigurationResults:Dt}},$t=Object(f.a)(Rt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"constructor__step mb-8 desktop:mb-12"},[t.isComplectationDataLoaded&&!t.isDataLoading?[n("Complectation",{ref:"complectation",attrs:{canEdit:!0,showColors:!0,offers:t.specialOffers,groupedOptions:t.groupedOptions,groupedSpecifications:t.groupedSpecifications,specifications:t.specifications,complectation:t.currentComplectation,uniqueId:t.configuration.unique_code,resultId:t.configuration.id,totalPrice:t.stepData.totalPrice,model:t.model,transmission:t.transmission,drive:t.drive,gearbox:t.gearbox,engine:t.engine,fuelType:t.fuelType,overviews:t.currentOverview,panoramas:t.currentPanorama,settings:t.stepOptions,optionsBase:t.optionsBase,exteriorColor:t.stepData.currentExteriorColor,interiorColor:t.stepData.currentInteriorColor,exteriorColorId:t.currentExteriorColorId,interiorColorId:t.currentInteriorColorId,showInteriorColors:!1,isConfiguratorPage:!0,menuLinks:t.menuButtons,accessories:t.selectedAccessories,createdAt:t.createdAt,advantages:t.advantages,"analitycs-properties":t.prepareProperties()},on:{"characteristics-click":t.characteristicsClickHandler,"colors-click":t.colorsClickHandler,"accessories-click":t.accessoriesClickHandler,"trade-in-form-click":function(e){return t.$emit("trade-in-form-click")},"credit-popup-open":function(e){return t.$emit("credit-popup-open")},"select-offer":t.selectOffer}}),t._v(" "),n("ConfigurationResults",{attrs:{"configuration-code":t.configuration.unique_code}}),t._v(" "),t.isPopupStore?t._e():n("CarsInStock",{staticClass:"mb-8 desktop:mb-12",attrs:{model:t.model,"small-button":!0,isConfigurator:!0},on:{allInStock:function(e){return t.$refs.complectation.buttonMenuHandler({buttonName:"cars-in-stock"})}}})]:t.isComplectationDataLoaded?t._e():[n("Loader")]],2)}),[],!1,null,null,null).exports,At=n(1190),Nt=n.n(At),qt=n(1116),Ht=n.n(qt),zt=n(117),Vt=n.n(zt),Gt=n(1074),Yt=n(1114),Ut={props:{offer:Object,isSelected:Boolean},mixins:[Z.a],data:function(){return{}},components:{PlusIcon:Gt.a,CheckIcon:Yt.a}},Wt=(n(1349),Object(f.a)(Ut,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:[t.isSelected&&"selected-offer","offer px-6 pb-7 pt-5"]},[t.offer.description||t.offer.advantage_text||t.offer.condition_text?n("button",{staticClass:"offer__info-button",on:{click:function(e){return e.stopPropagation(),t.$emit("open-info-popup")}}},[n("g-info-icon")],1):t._e(),t._v(" "),n("div",{staticClass:"offer__title-section mb-6 desktop1440:mb-5 flex items-center"},[n("div",[t.isSelected?n("CheckIcon",{staticClass:"mr-4"}):t._e(),t._v(" "),t.isSelected?t._e():n("PlusIcon",{staticClass:"mr-4"})],1),t._v(" "),n("span",{class:[t.isSelected&&"offer__title_selected","text-s2i"],domProps:{innerHTML:t._s(t.$options.filters.typograph(t.offer.name))}})]),t._v(" "),t.offer.price?n("div",{staticClass:"text-s1 pl-12"},[t._v("Выгода "+t._s(t.formatMoney(t.offer.price)))]):t._e()])}),[],!1,null,null,null).exports),Kt={mixins:[G.a],props:{discounts:Array},data:function(){return{resize:"180x165"}}},Qt=(n(1350),Object(f.a)(Kt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:[t.discounts.length<2&&"desktop1440:w-1/2 single-discount"]},[n("div",{staticClass:"discounts desktop1440:flex flex-wrap"},t._l(t.discounts,(function(e){return n("div",{staticClass:"w-full flex desktop:justify-between"},[n("div",{class:[e.cover?"w-1/2 tablet:w-4/7 desktop:w-4/7 desktop1440:w-1/2":"w-full pl-r tablet:pr-6","discounts__text-block pb-9 pt-3 pl-4 tablet:mb-4 tablet:pb-4 tablet:pl-6 tablet:pt-1 tablet:mt-4"]},[n("div",{staticClass:"flex items-center tablet:mb-2"},[n("div",{staticClass:"discounts__subtitle mr-1 text-s3"},[t._v("\n            "+t._s(e.subtitle)+"\n          ")]),t._v(" "),e.description?n("button",{on:{click:function(n){return t.$emit("toggle-discount-popup",e.description)}}},[n("g-info-icon")],1):t._e()]),t._v(" "),n("div",{staticClass:"discounts__title text-s2i tablet:text-s1",domProps:{innerHTML:t._s(e.title)}})]),t._v(" "),e.cover?n("div",{staticClass:"w-1/2 tablet:w-3/7 desktop:w-3/7 desktop1440:w-1/2 flex justify-end"},[n("div",{staticClass:"discounts__cover-block w-full"},[n("img",{attrs:{src:t.getResizeImagePath(e.cover,t.resize)}})])]):t._e()])})),0)])}),[],!1,null,null,null).exports),Xt=n(1027);function Jt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Zt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Jt(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var te={mixins:[Z.a,o.a],props:{stepData:Object},data:function(){return{openedOfferInfoPopup:null,isDescriptionPopupShown:!1,discountPopupDescription:"",offerPopupDescription:"",isButtonsScrolled:!1,offer:{},isPopupShown:!1}},methods:Zt({},Object(s.d)("calculator",["selectOffer","setSelectedOffers","clearSelectedOffers","clearCurrentProgramIndex"]),{},Object(s.d)("step-manager",["nextStep","prevStep"]),{showPopupOffer:function(t){this.dataLayerPush("Info pop-up","Special offer description","Open"),this.offer=t,this.isPopupShown=!0},closePopupInfo:function(){this.isPopupShown=!1},toggleInfoPopup:function(t){this.openedOfferInfoPopup===t.id?this.openedOfferInfoPopup=null:this.openedOfferInfoPopup=t.id,this.offerPopupDescription=t.description},addSpecialOffer:function(t){if(this.clearCurrentProgramIndex(),this.dataLayerPush("Loan Calculator","Loan condition",this.isOfferSelected(t)?"Deactivate special offer":"Activate special offer"),this.isOfferSelected(t))this.setSelectedOffers(this.selectedOffers.filter((function(e){return e!==t})));else{var e=Nt()(this.selectedOffers);e.push(t);var n=this.offers[t].excludes;if(n.length>0){var i=Vt()(e,n);i.length>0&&(e=Ht()(e,i)),this.setSelectedOffers(e)}else this.selectOffer(t)}},toggleDiscountPopup:function(t){this.isDescriptionPopupShown=!this.isDescriptionPopupShown,this.discountPopupDescription=t},nextStepWithoutOffers:function(){this.clearSelectedOffers(),this.addBaseOffer(),this.nextStep()},isOfferSelected:function(t){return Boolean(this.selectedOffers.find((function(e){return e===t})))},handleScrollButtons:function(){var t=window.scrollY,e=Math.round(window.innerHeight),n=Math.round(document.getElementsByClassName("page-wrapper__footer")[0].offsetTop);this.isButtonsScrolled=t+e>n+1},addBaseOffer:function(){if(!N()(this.offers))for(var t in this.offers)if(this.offers[t].is_base&&!this.isOfferSelected(t)){var e=Nt()(this.selectedOffers);e.push(t);var n=this.offers[t].excludes;if(n.length>0){var i=Vt()(e,n);i.length>0&&(e=Ht()(e,i)),this.setSelectedOffers(e)}else this.selectOffer(t)}}}),created:function(){this.addBaseOffer(),this.isOffersEmpty&&!this.fromProgressBar&&this.nextStep()},mounted:function(){window.scrollTo(0,0),window.addEventListener("load",this.handleScrollButtons),window.addEventListener("resize",this.handleScrollButtons),window.addEventListener("scroll",this.handleScrollButtons),this.handleScrollButtons()},beforeDestroy:function(){window.removeEventListener("load",this.handleScrollButtons),window.removeEventListener("resize",this.handleScrollButtons),window.removeEventListener("scroll",this.handleScrollButtons)},computed:Zt({},Object(s.c)("calculator",["offers","selectedOffers"]),{},Object(s.e)("calculator",["complectation","gifts"]),{},Object(s.e)("step-manager",["stepIndices","fromProgressBar"]),{isOffersEmpty:function(){var t=0;if(!N()(this.offers))for(var e in this.offers)this.offers[e].is_base||t++;return 0===t},disconts:function(){var t=[];for(var e in this.offers)this.offers[e].is_base&&t.push({title:this.offers[e].name+' - выгода <span class="no-wrap-price">'+this.formatMoney(this.offers[e].price)+"</span>",subtitle:"выгода",description:null});return t}}),components:{Offer:Wt,Popup:q.a,Discounts:Qt,CloseIcon:lt.a,IconLeft:a.a,PopupInfo:Xt.a}},ee=(n(1351),Object(f.a)(te,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"step1"},[t.isOffersEmpty?n("div",{staticClass:"mb-8 text-x5"},[t._v("\n    Для данной модели нет спецпредложений\n  ")]):n("div",{staticClass:"mb-8"},[n("div",{staticClass:"step1__subtitle text-s1 mb-7 tablet:mb-6"},[t._v("\n      Выберите спецпрограмму\n    ")]),t._v(" "),n("div",{staticClass:"step1__offers flex flex-wrap"},t._l(t.offers,(function(e){return e.is_base?t._e():n("div",{staticClass:"w-full desktop1440:w-1/2"},[n("div",{staticClass:"cursor-pointer",on:{click:function(){return t.addSpecialOffer(e.id)}}},[n("Offer",{attrs:{offer:e,isSelected:t.isOfferSelected(e.id)},on:{"open-info-popup":function(){return t.showPopupOffer(e)}}})],1)])})),0)]),t._v(" "),t._l(t.offers,(function(e){return e.is_base?n("div",[n("Discounts",{attrs:{discounts:t.disconts},on:{"toggle-discount-popup":t.toggleDiscountPopup}}),t._v(" "),t.isDescriptionPopupShown?n("Popup",{attrs:{disableBodyScroll:""}},[n("div",{staticClass:"step1__popup-wrapper flex items-center justify-center"},[n("div",{staticClass:"step1__popup w-full px-22 pb-20 pt-16"},[n("button",{staticClass:"step1__close-button",on:{click:t.toggleDiscountPopup}},[n("CloseIcon")],1),t._v(" "),n("div",[t._v(t._s(t.discountPopupDescription))])])])]):t._e()],1):t._e()})),t._v(" "),n("PopupInfo",{attrs:{offer:t.offer,"is-popup-shown":t.isPopupShown},on:{"toggle-info-popup":t.closePopupInfo}}),t._v(" "),n("div",{staticClass:"step1__buttons my-12"},[t.isOffersEmpty?t._e():n("g-button",{staticClass:"step1__buttons-no-specials button-border text-s2i-b",attrs:{inverted:""},nativeOn:{click:function(e){return t.nextStepWithoutOffers(e)}}},[n("span",[t._v("Продолжить без спецпредложений")])])],1),t._v(" "),n("nav",{staticClass:"constructor__buttons"},[n("div",{class:["constructor__buttons__container",{"is-scrolled":t.isButtonsScrolled}]},[n("g-container",[n("ul",{staticClass:"flex desktop:justify-end"},[0!==t.stepIndices.offers?n("li",[n("button",{staticClass:"button button_text",attrs:{inverted:""},on:{click:function(e){return e.preventDefault(),t.prevStep(e)}}},[n("icon-left"),t._v(" "),n("span",{staticClass:"button__span-after"},[t._v("\n                Шаг назад\n              ")])],1)]):t._e(),t._v(" "),n("li",[n("button",{staticClass:"button button_primary",on:{click:function(e){return e.preventDefault(),t.nextStep(e)}}},[n("span",{staticClass:"button__span-after"},[t._v("\n                Далее\n              ")])])])])])],1)])],2)}),[],!1,null,null,null).exports),ne=n(1292),ie=n(1293),re=(n(1355),n(1009)),se={name:"accessory",mixins:[Z.a,o.a],props:{accessory:{type:Object,default:function(){return{}}},isSlide:{type:Boolean,default:!1}},data:function(){return{isPopupOpened:!1}},methods:{togglePopup:function(){this.isPopupOpened=!this.isPopupOpened,this.isPopupOpened&&this.dataLayerPush("Product pop-up",this.accessory.name,"Open")}},components:{Popup:q.a}},ae=(n(1356),Object(f.a)(se,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["configurator-accessory",{"swiper-slide":t.isSlide}]},[n("div",{staticClass:"configurator-accessory__image"},[n("figure",{staticClass:"is-large cursor-pointer",on:{click:t.togglePopup}},[t._t("image-labels"),t._v(" "),n("div",{staticClass:"configurator-accessory__image_bg"},[t._t("image")],2)],2)]),t._v(" "),n("div",{staticClass:"configurator-accessory__descr"},[n("div",{staticClass:"configurator-accessory__descr-header"},[n("div",{staticClass:"mb-1"},[t._t("name"),t._v(" "),t._t("name-labels")],2),t._v(" "),n("div",{staticClass:"mb-1 color-dark text-s3"},[t._t("article")],2)]),t._v(" "),t._t("lable"),t._v(" "),n("div",{staticClass:"configurator-accessory__buy mt-2"},[t._t("description")],2)],2),t._v(" "),t.isPopupOpened?n("Popup",{on:{"toggle-popup":t.togglePopup}},[t._t("popup")],2):t._e()],1)}),[],!1,null,null,null).exports),oe=n(539),ce=n(70),le=n(387),ue=n(1227);function de(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function pe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?de(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var fe={mixins:[ft.a,G.a,Z.a,ce.a,o.a],props:{mode:{type:String,default:"table"},loading:{type:Boolean,default:!1},accessories:{type:Object,default:function(){}}},data:function(){return{resize:{small:"445x337",large:"620x470",slider:"1295x632"},defaultImage:"/images/landing/about/img-brand.jpg",defaultQuantity:1}},computed:pe({},Object(s.c)("configurator",["selectedAccessories"])),methods:pe({},Object(s.d)("configurator",["addToSelectedAccessories","removeFromSelectedAccessories","setSelectedAccessoryQuantity"]),{getImage:function(t){return t.image?this.getResizeImagePath(t.image,this.resize.small):this.defaultImage},setQuantity:function(t,e){this.setSelectedAccessoryQuantity({id:t,quantity:e})},changeConfigurationAccessories:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.hasSelectedAccessories(t)?(this.removeFromSelectedAccessories(t),this.resetQuantity(t)):(this.addToSelectedAccessories(pe({},this.accessories[t],{quantity:this.defaultQuantity})),this.dataLayerPush(e?"Product pop-up":"Configurator","Accessories",e?"Add accessory from pop-up":"Add accessory from list"))},hasSelectedAccessories:function(t){return this.selectedAccessories.hasOwnProperty(t)},resetQuantity:function(t){this.$refs["quantity_".concat(t)][0].quantity=this.defaultQuantity},getSelectedQuantity:function(t){return this.hasSelectedAccessories(t)?Number(this.selectedAccessories[t].quantity):this.defaultQuantity},getImageLarge:function(t){return t.image?this.getResizeImagePath(t.image,this.resize.large):this.defaultImage},closePopup:function(t){this.$refs["popup_".concat(t)][0].emitClose()},hasFiles:function(t){return void 0!==t[0]&&!N()(t[0].files)},files:function(t){var e=this;return t[0].files.map((function(t){return e.getResizeImagePath(t.path,e.resize.large)}))}}),components:{Button:oe.default,Accessory:ae,Popup:q.a,Preloader:re.a,PopupContentAccessory:ue.a,ImagesSlider:le.a}},me=(n(1357),Object(f.a)(fe,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["catalog-items flex flex-row flex-wrap",{"view-list":"list"===t.mode}]},[t.loading?n("Preloader"):t._e(),t._v(" "),t._l(t.accessories,(function(e){return n("Accessory",{key:e.id,attrs:{accessory:e}},[n("template",{slot:"image"},[n("img",{attrs:{src:t.getImage(e),alt:e.name}})]),t._v(" "),n("template",{slot:"name"},[t._v("\n      "+t._s(e.name)+"\n    ")]),t._v(" "),n("template",{slot:"article"},[t._v("\n      "+t._s(e.article)+"\n    ")]),t._v(" "),n("template",{slot:"description"},[n("div",{staticClass:"flex items-center mr-2"},[t.hasSelectedAccessories(e.id)?t._e():n("div",{staticClass:"button button_primary mr-2 text-s2 card-button",attrs:{isAdded:t.hasSelectedAccessories(e.id)},on:{click:function(n){return t.changeConfigurationAccessories(e.id)}}},[n("span",{staticClass:"button__span-after"}),t._v("\n          Добавить\n        ")]),t._v(" "),t.hasSelectedAccessories(e.id)?n("div",{staticClass:"mr-2"},[n("g-quantity",{ref:"quantity_"+e.id,refInFor:!0,attrs:{vModel:t.getSelectedQuantity(e.id),isAccessories:!0,disabled:!t.hasSelectedAccessories(e.id)},on:{setQuantity:function(n){return t.setQuantity(e.id,n)},removeAccessory:function(n){return t.changeConfigurationAccessories(e.id)}}})],1):t._e(),t._v(" "),n("span",{staticClass:"text-s1 color-black"},[t._v("\n          "+t._s(t.formatMoney(e.price))+"\n        ")])])]),t._v(" "),n("template",{slot:"popup"},[n("PopupContentAccessory",{ref:"popup_"+e.id,refInFor:!0,attrs:{isSlider:t.hasFiles(e.albums),"full-actions":!0}},[n("template",{slot:"title"},[n("div",{staticClass:"text-s1 tablet:text-x5 mb-4"},[t._v("\n            "+t._s(e.name)+"\n          ")]),t._v(" "),n("div",{staticClass:"border-header pb-4 desktop:mb-6"},[n("div",{staticClass:"price text-s1 tablet:text-x5"},[t._v("\n              "+t._s(t.formatMoney(e.price))+"\n            ")])])]),t._v(" "),n("template",{slot:"gallery"},[t.hasFiles(e.albums)?[n("ImagesSlider",{staticClass:"images-slider_620x470 images-slider_offset-gadget images-slider_no-pager-offset",attrs:{images:t.files(e.albums),hasOffset:!1,"is-accessory":!0}})]:[n("div",{staticClass:"popup-accessory-content__gallery-image popup-accessory-content__gallery-image_bg"},[n("img",{staticClass:"popup-accessory-content__gallery-image-img",attrs:{src:t.getImageLarge(e),alt:e.name}})])]],2),t._v(" "),n("template",{slot:"description"},[e.text?n("div",{staticClass:"popup-accessory-content__descr-section"},[t._v("\n            "+t._s(e.text)+"\n          ")]):t._e(),t._v(" "),n("div",{staticClass:"popup-accessory-content__descr-section desktop:flex flex-wrap"},[n("dl",{staticClass:"popup-accessory-content__param"},[n("dt",{staticClass:"popup-accessory-content__param-name"},[t._v("Артикул")]),t._v(" "),n("dd",{staticClass:"popup-accessory-content__param-value"},[t._v(t._s(e.article))])]),t._v(" "),e.material?n("dl",{staticClass:"popup-accessory-content__param"},[n("dt",{staticClass:"popup-accessory-content__param-name"},[t._v("Материал")]),t._v(" "),n("dd",{staticClass:"popup-accessory-content__param-value"},[t._v(t._s(e.material.name))])]):t._e(),t._v(" "),e.color?n("dl",{staticClass:"popup-accessory-content__param"},[n("dt",{staticClass:"popup-accessory-content__param-name"},[t._v("Цвет")]),t._v(" "),n("dd",{staticClass:"popup-accessory-content__param-value"},[t._v(t._s(e.color.name))])]):t._e(),t._v(" "),e.complect?n("dl",{staticClass:"popup-accessory-content__param"},[n("dt",{staticClass:"popup-accessory-content__param-name"},[t._v("Комплект")]),t._v(" "),n("dd",{staticClass:"popup-accessory-content__param-value"},[t._v(t._s(e.complect.name))])]):t._e(),t._v(" "),e.size?n("dl",{staticClass:"popup-accessory-content__param"},[n("dt",{staticClass:"popup-accessory-content__param-name"},[t._v("Размер")]),t._v(" "),n("dd",{staticClass:"popup-accessory-content__param-value"},[t._v(t._s(e.size.name))])]):t._e(),t._v(" "),n("dl",{staticClass:"popup-accessory-content__param"},[n("dt",{staticClass:"popup-accessory-content__param-name"},[t._v("Группа")]),t._v(" "),n("dd",{staticClass:"popup-accessory-content__param-value"},[t._v(t._s(e.group.name))])])]),t._v(" "),e.technical_features?n("div",{staticClass:"popup-accessory-content__descr-section"},[n("div",{staticClass:"mb-4 color-disabled-gray"},[t._v("\n              Технические особенности:\n            ")]),t._v(" "),n("div",{staticClass:"text-s2",domProps:{innerHTML:t._s(e.technical_features)}})]):t._e()]),t._v(" "),n("template",{slot:"actions"},[n("div",{staticClass:"popup-accessory-content__actions-buy"},[n("div",{staticClass:"popup-accessory-content__actions-buy-body"},[n("div",{staticClass:"popup-accessory-content__actions-buy-content"},[n("div",{staticClass:"popup-accessory-content__actions-buy-main"},[t.hasSelectedAccessories(e.id)?t._e():n("div",{staticClass:"popup-accessory-content__actions-buy-action"},[n("div",{staticClass:"button button_primary button_small button_no-padding",attrs:{isAdded:t.hasSelectedAccessories(e.id)},on:{click:function(n){return t.changeConfigurationAccessories(e.id,!0)}}},[n("span",{staticClass:"button__span-after"}),t._v("\n                      Добавить\n                    ")])]),t._v(" "),t.hasSelectedAccessories(e.id)?n("div",{staticClass:"popup-accessory-content__actions-buy-action"},[n("g-quantity",{ref:"quantity_"+e.id,refInFor:!0,attrs:{vModel:t.getSelectedQuantity(e.id),isAccessories:!0,isPopup:!0,disabled:!t.hasSelectedAccessories(e.id)},on:{setQuantity:function(n){return t.setQuantity(e.id,n)},removeAccessory:function(n){return t.changeConfigurationAccessories(e.id)}}})],1):t._e(),t._v(" "),n("div",{staticClass:"popup-accessory-content__actions-buy-price text-s1 color-black"},[t._v("\n                    "+t._s(t.formatMoney(e.price))+"\n                  ")])])])])])])],2)],1)],2)}))],2)}),[],!1,null,null,null).exports);function he(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function _e(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?he(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ve={mixins:[o.a],data:function(){return{currentTabIndex:0,currentTabAccessories:{},defaultTabIndex:0}},created:function(){var t=this;this.loadRecommendedAccessories(this.currentModel.unique_id).then((function(){t.hasAccessories||t.fromProgressBar?t.switchTab(t.defaultTabIndex,!1):t.nextStep()}))},mounted:function(){window.scrollTo(0,0),this.dataLayerPush("Configurator","Accessories","Start",null,!0)},computed:_e({},Object(s.e)("configurator",["accessoryGroups","accessories","isDataLoading"]),{},Object(s.e)("step-manager",["fromProgressBar"]),{},Object(s.c)("configurator",["currentModel","recommendedAccessories","selectedAccessories"]),{tabs:function(){var t=this.accessoryGroups.map((function(t){return t.name}));return t.unshift("Рекомендуемые"),t},hasAccessories:function(){return this.accessoryGroups.length||!N()(this.recommendedAccessories)}}),methods:_e({},Object(s.b)("configurator",["loadRecommendedAccessories","loadAccessoryGroup"]),{},Object(s.d)("step-manager",["nextStep","prevStep"]),{switchTab:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.currentTabIndex=t,n&&this.dataLayerPush("Configurator","Accessories",this.tabs[t]),0===t)this.currentTabAccessories=this.recommendedAccessories;else{var i=this.accessoryGroups[t-1].id;this.accessories.hasOwnProperty(i)?this.currentTabAccessories=V()(this.accessories[i],"id"):this.loadAccessoryGroup(i).then((function(){e.currentTabAccessories=V()(e.accessories[i],"id")}))}},nextButtonClickHandler:function(){var t={accessoryCode:Object.values(this.selectedAccessories).map((function(t){return t.article})).join("|")};this.isCalculator||this.dataLayerPush("Configurator","Accessories","Next",t),this.nextStep()},previewButtonClickHandler:function(){this.isCalculator||this.dataLayerPush("Configurator","Accessories","Back"),this.prevStep()}}),components:{DataLoader:P.a,Tabs:Y.a,StepButtons:m,Accessories:me}},ge=Object(f.a)(ve,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.isDataLoading?[n("DataLoader")]:t.hasAccessories?[n("div",{staticClass:"mb-6"},[n("Tabs",{attrs:{tabs:t.tabs,activeTabIndex:t.currentTabIndex,atLeft:!0},on:{"select-tab":t.switchTab}})],1),t._v(" "),n("Accessories",{attrs:{accessories:t.currentTabAccessories}})]:[n("div",{staticClass:"mb-8 text-x5"},[t._v("\n      Для данной модели нет аксессуаров\n    ")])],t._v(" "),n("StepButtons",{attrs:{nextButtonEmitFunction:"next-button-click",previewButtonEmitFunction:"preview-button-click"},on:{"next-button-click":function(e){return t.nextButtonClickHandler()},"preview-button-click":function(e){return t.previewButtonClickHandler()}}})],2)}),[],!1,null,"37d4f45a",null).exports,be=n(1294),ye=n(532),Ce=n(1087),Pe=n(374),Oe=n(109),xe=n(1296),we=n(1052),Ie=(n(17),n(6),["class","staticClass","style","staticStyle","attrs"]);function je(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function ke(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Se(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},s=Object.keys(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)n=s[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var De={functional:!0,render:function(t,e){var n=e._c,i=(e._v,e.data),r=e.children,s=void 0===r?[]:r,a=i.class,o=i.staticClass,c=i.style,l=i.staticStyle,u=i.attrs,d=void 0===u?{}:u,p=Se(i,Ie);return n("svg",function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?je(Object(n),!0).forEach((function(e){ke(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({class:[a,o],style:[c,l],attrs:Object.assign({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},d)},p),s.concat([n("path",{attrs:{d:"M12.25 15.647V10M8 15.647V10M15.6 7.647L15 18H5L4.4 7.647m11.2 0H17V4.824h-4.667M15.6 7.647H4.4m0 0H3V4.824h4.667m0 0v-.49A2.333 2.333 0 0110 2v0a2.333 2.333 0 012.333 2.333v.49m-4.666 0h4.666",stroke:"currentColor","stroke-width":"1.5"}})]))}};function Le(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Te(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Le(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ee={mixins:[G.a,Z.a,o.a],props:{currentStepIndex:Number,totalPrice:{type:Number,default:null},currentInteriorColor:{type:Object,default:function(){return{}}},currentExteriorColor:{type:Object,default:function(){return{}}},showInteriorColor:{type:Boolean,default:!0}},data:function(){return{resize:"300x200",isOpened:!1,isInited:!0,atTop:!0,isResultFixed:!1,isResultScrolled:!1,popupContent:null,isAnalyticEngineSended:!1,isAnalyticEquipSended:!1}},computed:Te({},Object(s.e)("ui",["header"]),{},Object(s.e)("configurator",["currentEngineId","currentGearsNumber","currentGearboxId","currentDriveId","currentYear","fuelTypes","currentInteriorColorId","currentExteriorColorId","complectationsData","isCalc"]),{},Object(s.e)("step-manager",["stepIndices"]),{},Object(s.c)("configurator",["enginesById","currentModel","gearboxesById","drivesById","currentComplectation","interiorColorsById","exteriorColorsById","filteredComplectations","selectedAccessories"]),{modelName:function(){return"".concat(this.currentModel.name)},modelPrice:function(){if(this.totalPrice)return"от ".concat(this.formatMoney(this.totalPrice));if(this.filteredComplectations.length){var t=[];if(this.filteredComplectations.forEach((function(e){e.price&&t.push(e.price)})),t.length){var e=Math.min.apply(Math,t);if(e)return"от ".concat(this.formatMoney(e))}}return this.currentModel&&this.currentModel.min_price?"от ".concat(this.formatMoney(this.currentModel.min_price)):null},modelCreditPrice:function(){if(this.currentComplectation&&this.currentComplectation.min_credit_amount)return this.formatMoney(this.currentComplectation.min_credit_amount,"₽/мес");if(this.filteredComplectations.length){var t=[];if(this.filteredComplectations.forEach((function(e){e.creditPrice&&t.push(e.creditPrice)})),t.length){var e=Math.min.apply(Math,t);if(e)return this.formatMoney(e,"₽/мес")}}return this.currentModel&&this.currentModel.min_credit_month_price?this.formatMoney(this.currentModel.min_credit_month_price,"₽/мес"):null},engineName:function(){var t=this.enginesById[this.currentEngineId];return t?"".concat(t.name,", ").concat(Math.round(t.power_hp)," л.с., ").concat(this.fuelTypes[t.fuel_type_id].name.toLowerCase()):null},transmissionName:function(){var t=this.gearboxesById[this.currentGearboxId];return t?this.currentGearsNumber?"".concat(this.currentGearsNumber).concat(t.code,", ").concat(t.name.toLowerCase()):"".concat(t.code,", ").concat(t.name.toLowerCase()):null},driveName:function(){var t=this.drivesById[this.currentDriveId];return t?"".concat(t.code,", ").concat(t.name.toLowerCase()):null},accessoryTotal:function(){return Object.values(this.selectedAccessories).reduce((function(t,e){return t+e.price*e.quantity}),0)},hasOffset:function(){return!(!this.header.isFixedHeaderVisible&&!this.isInited)}}),mounted:function(){window.addEventListener("load",this.handleScrollResult),window.addEventListener("resize",this.handleScrollResult),window.addEventListener("scroll",this.handleScrollResult)},beforeDestroy:function(){window.removeEventListener("load",this.handleScrollResult),window.removeEventListener("resize",this.handleScrollResult),window.removeEventListener("scroll",this.handleScrollResult)},methods:Te({},Object(s.d)("step-manager",["setCurrentStepIndex"]),{},Object(s.d)("configurator",["removeFromSelectedAccessories"]),{handleTouchMove:function(t){t.preventDefault()},isAccessoriesPresent:function(){return!N()(this.selectedAccessories)},changeStep:function(t){this.isOpened=!1;var e="";switch(t){case 1:e="Edit engine and transmission",this.isAnalyticEngineSended||(this.dataLayerPush(this.isCalc?"Navigation":"Configurator","Configurator menu",e),this.isAnalyticEngineSended=!0);break;case 2:e="Edit equipment",this.isAnalyticEquipSended||(this.dataLayerPush(this.isCalc?"Navigation":"Configurator","Configurator menu",e),this.isAnalyticEquipSended=!0);break;case 3:e="Edit colors and finishes"}3===t&&this.dataLayerPush("Navigation","Configurator menu",e),this.setCurrentStepIndex(t)},togglePopup:function(){this.isOpened=!this.isOpened},handleScrollResult:function(){var t=window.scrollY,e=Math.round(window.innerHeight),n=Math.round(document.getElementsByClassName("page-wrapper__footer")[0].offsetTop);t<60?this.isInited=!this.header.isFixedHeaderVisible:(this.atTop=this.isInited,this.isInited=!1);var i=Math.round(this.$refs.result.offsetTop);this.isResultFixed=t>i,this.isResultScrolled=t+e>n+1}}),components:{Popup:q.a,IntroPopupContent:Pe.a,IconEdit:Oe.a,IconCircle:xe.a,IconInfo:C.a,IconEllipsis:we.a,IconBin:De}},Be=(n(1358),Object(f.a)(Ee,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("aside",{ref:"result",class:["constructor-result",t.isInited?"absolute":"fixed",{"constructor-result_top":t.isInited||t.atTop},{"constructor-result_offset":t.hasOffset},{"constructor-result_fixed":t.isResultFixed},{"constructor-result_scrolled":t.isResultScrolled}]},[n("div",{staticClass:"constructor-result__header",on:{click:t.togglePopup}},[n("div",{staticClass:"constructor-result__header-title text-s2i-b"},[t._v("\n      "+t._s(t.modelName)+"\n\n      "),n("IconEllipsis",{staticClass:"block ml-3"})],1),t._v(" "),n("div",{staticClass:"constructor-result__header-sum text-s2-1"},[t.modelPrice?n("div",{staticClass:"constructor-result__header-sum-item"},[t._v("\n        "+t._s(t.modelPrice)+"\n      ")]):t._e(),t._v(" "),t.modelCreditPrice?n("div",{staticClass:"constructor-result__header-sum-item text-s3"},[t._v("\n        "+t._s(t.modelCreditPrice)+"\n      ")]):t._e()])]),t._v(" "),n("div",{staticClass:"constructor-result__body"},[n("div",{ref:"resultContent",staticClass:"constructor-result__content"},[n("div",{staticClass:"text-x5"},[t._v("\n        "+t._s(t.modelName)+"\n      ")]),t._v(" "),n("div",{staticClass:"text-x5"},[t._v("\n        "+t._s(t.modelPrice)+"\n        "),n("span",{staticClass:"text-s2 color-disabled-gray pl-3"},[t._v("\n          "+t._s(t.modelCreditPrice)+"\n        ")])]),t._v(" "),n("div",{ref:"popupContent"},[t.currentModel.image_side_view?n("figure",{staticClass:"constructor-result__image"},[n("img",{staticClass:"constructor-result__image-img",attrs:{src:t.getResizeImagePath(t.currentModel.image_side_view,t.resize),alt:t.modelName}})]):t._e(),t._v(" "),t.currentYear?n("div",{staticClass:"constructor-result__section"},[n("dl",{staticClass:"constructor-result__param"},[n("dt",{staticClass:"constructor-result__param-name"},[t._v("\n              "+t._s(t.currentYear+" год производства")+"\n            ")])])]):t._e(),t._v(" "),t.currentEngineId?n("div",{staticClass:"constructor-result__section"},[t.stepIndices.modification!==t.currentStepIndex?n("icon-edit",{staticClass:"cursor-pointer",on:{click:function(e){return t.changeStep(t.stepIndices.modification)}}}):t._e(),t._v(" "),t.stepIndices.modification===t.currentStepIndex?n("icon-circle",{staticClass:"constructor-result__dot"}):t._e(),t._v(" "),n("p",[t._v("Двигатель и трансмиссия")]),t._v(" "),t.engineName?n("dl",{staticClass:"constructor-result__param"},[n("dt",{staticClass:"constructor-result__param-name"},[t._v("\n              "+t._s(t.engineName)+"\n            ")])]):t._e(),t._v(" "),t.transmissionName?n("dl",{staticClass:"constructor-result__param"},[n("dt",{staticClass:"constructor-result__param-name"},[t._v("\n              "+t._s(t.transmissionName)+"\n            ")])]):t._e(),t._v(" "),t.driveName?n("dl",{staticClass:"constructor-result__param"},[n("dt",{staticClass:"constructor-result__param-name"},[t._v("\n              "+t._s(t.driveName)+"\n            ")])]):t._e()],1):t._e(),t._v(" "),t.currentComplectation?n("div",{staticClass:"constructor-result__section"},[t.stepIndices.complectation!==t.currentStepIndex?n("icon-edit",{staticClass:"cursor-pointer",on:{click:function(e){return t.changeStep(t.stepIndices.complectation)}}}):t._e(),t._v(" "),t.stepIndices.complectation===t.currentStepIndex?n("icon-circle",{staticClass:"constructor-result__dot"}):t._e(),t._v(" "),n("dl",{staticClass:"constructor-result__param"},[n("dt",{staticClass:"constructor-result__param-name"},[n("strong",[t._v(t._s(t.currentComplectation.name))])]),t._v(" "),n("dd",{staticClass:"constructor-result__param-value"},[n("strong",[t._v(t._s(t.formatMoney(t.currentComplectation.price)))])])])],1):t._e(),t._v(" "),t.currentExteriorColor||t.currentInteriorColor?n("div",{staticClass:"constructor-result__section"},[t.stepIndices.color!==t.currentStepIndex?n("icon-edit",{staticClass:"cursor-pointer",on:{click:function(e){return t.changeStep(t.stepIndices.color)}}}):t._e(),t._v(" "),t.stepIndices.color===t.currentStepIndex?n("icon-circle",{staticClass:"constructor-result__dot"}):t._e(),t._v(" "),t.currentExteriorColor?n("dl",{staticClass:"constructor-result__param"},[n("dt",{staticClass:"constructor-result__param-name"},[n("strong",[t._v("Цвет: "+t._s(t.currentExteriorColor.name))])]),t._v(" "),t.currentExteriorColor.price?n("dd",{staticClass:"constructor-result__param-value"},[n("strong",[t._v("+ "+t._s(t.formatMoney(t.currentExteriorColor.price)))])]):t._e()]):t._e(),t._v(" "),n("dl",{staticClass:"constructor-result__param"},[t.showInteriorColor&&t.currentInteriorColor?n("dt",{staticClass:"constructor-result__param-name"},[n("strong",[t._v("Интерьер: "+t._s(t.currentInteriorColor.name))])]):t._e()])],1):t._e(),t._v(" "),t.isAccessoriesPresent()?n("div",{staticClass:"constructor-result__section"},[t.stepIndices.accessories!==t.currentStepIndex?n("icon-edit",{staticClass:"cursor-pointer",on:{click:function(e){return t.changeStep(t.stepIndices.accessories)}}}):t._e(),t._v(" "),t.stepIndices.accessories===t.currentStepIndex?n("icon-circle",{staticClass:"constructor-result__dot"}):t._e(),t._v(" "),n("p",[t._v("Аксессуары")]),t._v(" "),n("ul",{staticClass:"constructor-result__list"},[t._l(t.selectedAccessories,(function(e){return[n("li",{staticClass:"constructor-result__list-item-accessory mb-4"},[n("div",[n("icon-bin",{staticClass:"cursor-pointer constructor-result__list-item-accessory-bin",on:{click:function(n){return t.removeFromSelectedAccessories(e.id)}}}),t._v("\n\n                  "+t._s(e.name)+"\n                ")],1),t._v(" "),n("div",{staticClass:"text-s3i-b mt-1"},[t._v("\n                  "+t._s(t.formatMoney(e.price*e.quantity))+" /\n                  "+t._s(e.quantity)+"шт\n                  "),e.quantity>1?n("span",{staticClass:"color-disabled-gray constructor-result__list-item-accessory-span"},[t._v("\n                     "+t._s(t.formatMoney(e.price))+" / 1шт\n                  ")]):t._e()])])]})),t._v(" "),n("li",{staticClass:"constructor-result__list-item-accessory"},[n("div",[t._v("\n                Итого за аксессуары:\n              ")]),t._v(" "),n("div",{staticClass:"text-s3i-b mt-1"},[t._v("\n                "+t._s(t.formatMoney(t.accessoryTotal))+"\n              ")])])],2)],1):t._e(),t._v(" "),t.modelPrice?n("div",{staticClass:"constructor-result__summary"},[n("dl",{staticClass:"constructor-result__param"},[n("dt",{staticClass:"constructor-result__param-name"},[t._v("\n              Итоговая стоимость\n            ")]),t._v(" "),n("dd",{staticClass:"constructor-result__param-value"},[n("strong",{staticClass:"text-s1"},[t._v("\n                "+t._s(t.modelPrice)+"\n              ")])])])]):t._e(),t._v(" "),t.modelCreditPrice?n("div",{staticClass:"constructor-result__summary"},[n("p",[t._v("Кредитный расчет")]),t._v(" "),n("dl",{staticClass:"constructor-result__param"},[n("dt",{staticClass:"constructor-result__param-name"},[t._v("\n              Ежемесячный платеж\n            ")]),t._v(" "),n("dd",{staticClass:"constructor-result__param-value"},[n("strong",[t._v("\n                "+t._s(t.modelCreditPrice)+"\n              ")]),t._v(" "),n("g-info-icon",{staticClass:"hidden-in-popup",nativeOn:{click:function(e){return t.$emit("credit-popup-open")}}})],1)])]):t._e()])])]),t._v(" "),t.isOpened?n("Popup",[n("IntroPopupContent",{on:{"toggle-info-popup":t.togglePopup}},[n("template",{slot:"title"},[t._v("\n        "+t._s(t.modelName)+"\n      ")]),t._v(" "),n("template",{slot:"description"},[n("div",[t.currentModel.image_side_view?n("figure",{staticClass:"constructor-result__image"},[n("img",{staticClass:"constructor-result__image-img",attrs:{src:t.getResizeImagePath(t.currentModel.image_side_view,t.resize),alt:t.modelName}})]):t._e(),t._v(" "),t.currentYear?n("div",{staticClass:"constructor-result__section"},[n("dl",{staticClass:"constructor-result__param"},[n("dt",{staticClass:"constructor-result__param-name"},[t._v("\n                "+t._s(t.currentYear+" год производства")+"\n              ")])])]):t._e(),t._v(" "),t.currentEngineId?n("div",{staticClass:"constructor-result__section"},[t.stepIndices.modification!==t.currentStepIndex?n("icon-edit",{staticClass:"cursor-pointer",on:{click:function(e){return t.changeStep(t.stepIndices.modification)}}}):t._e(),t._v(" "),t.stepIndices.modification===t.currentStepIndex?n("icon-circle",{staticClass:"constructor-result__dot"}):t._e(),t._v(" "),n("p",[t._v("Двигатель и трансмиссия")]),t._v(" "),t.engineName?n("dl",{staticClass:"constructor-result__param"},[n("dt",{staticClass:"constructor-result__param-name"},[t._v("\n                "+t._s(t.engineName)+"\n              ")])]):t._e(),t._v(" "),t.transmissionName?n("dl",{staticClass:"constructor-result__param"},[n("dt",{staticClass:"constructor-result__param-name"},[t._v("\n                "+t._s(t.transmissionName)+"\n              ")])]):t._e(),t._v(" "),t.driveName?n("dl",{staticClass:"constructor-result__param"},[n("dt",{staticClass:"constructor-result__param-name"},[t._v("\n                "+t._s(t.driveName)+"\n              ")])]):t._e()],1):t._e(),t._v(" "),t.currentComplectation?n("div",{staticClass:"constructor-result__section"},[t.stepIndices.complectation!==t.currentStepIndex?n("icon-edit",{staticClass:"cursor-pointer",on:{click:function(e){return t.changeStep(t.stepIndices.complectation)}}}):t._e(),t._v(" "),t.stepIndices.complectation===t.currentStepIndex?n("icon-circle",{staticClass:"constructor-result__dot"}):t._e(),t._v(" "),n("dl",{staticClass:"constructor-result__param"},[n("dt",{staticClass:"constructor-result__param-name"},[n("strong",[t._v(t._s(t.currentComplectation.name))])]),t._v(" "),n("dd",{staticClass:"constructor-result__param-value"},[n("strong",[t._v(t._s(t.formatMoney(t.currentComplectation.price)))])])])],1):t._e(),t._v(" "),t.currentExteriorColor||t.currentInteriorColor?n("div",{staticClass:"constructor-result__section"},[t.stepIndices.color!==t.currentStepIndex?n("icon-edit",{staticClass:"cursor-pointer",on:{click:function(e){return t.changeStep(t.stepIndices.color)}}}):t._e(),t._v(" "),t.stepIndices.color===t.currentStepIndex?n("icon-circle",{staticClass:"constructor-result__dot"}):t._e(),t._v(" "),t.currentExteriorColor?n("dl",{staticClass:"constructor-result__param"},[n("dt",{staticClass:"constructor-result__param-name"},[n("strong",[t._v("Цвет: "+t._s(t.currentExteriorColor.name))])]),t._v(" "),t.currentExteriorColor.price?n("dd",{staticClass:"constructor-result__param-value"},[n("strong",[t._v("+ "+t._s(t.formatMoney(t.currentExteriorColor.price)))])]):t._e()]):t._e(),t._v(" "),n("dl",{staticClass:"constructor-result__param"},[t.showInteriorColor&&t.currentInteriorColor?n("dt",{staticClass:"constructor-result__param-name"},[n("strong",[t._v("Интерьер: "+t._s(t.currentInteriorColor.name))])]):t._e()])],1):t._e(),t._v(" "),t.isAccessoriesPresent()?n("div",{staticClass:"constructor-result__section"},[t.stepIndices.accessories!==t.currentStepIndex?n("icon-edit",{staticClass:"cursor-pointer",on:{click:function(e){return t.changeStep(t.stepIndices.accessories)}}}):t._e(),t._v(" "),t.stepIndices.accessories===t.currentStepIndex?n("icon-circle",{staticClass:"constructor-result__dot"}):t._e(),t._v(" "),n("p",[t._v("Аксессуары")]),t._v(" "),n("ul",{staticClass:"constructor-result__list"},[t._l(t.selectedAccessories,(function(e){return[n("li",{staticClass:"constructor-result__list-item-accessory mb-4"},[n("div",[n("icon-bin",{staticClass:"cursor-pointer constructor-result__list-item-accessory-bin",on:{click:function(n){return t.removeFromSelectedAccessories(e.id)}}}),t._v("\n\n                    "+t._s(e.name)+"\n                  ")],1),t._v(" "),n("div",{staticClass:"text-s3i-b mt-1"},[t._v("\n                    "+t._s(t.formatMoney(e.price*e.quantity))+" /\n                    "+t._s(e.quantity)+"шт\n                    "),e.quantity>1?n("span",{staticClass:"color-disabled-gray constructor-result__list-item-accessory-span"},[t._v("\n                       "+t._s(t.formatMoney(e.price))+" / 1шт\n                    ")]):t._e()])])]})),t._v(" "),n("li",{staticClass:"constructor-result__list-item-accessory"},[n("div",[t._v("\n                  Итого за аксессуары:\n                ")]),t._v(" "),n("div",{staticClass:"text-s3i-b mt-1"},[t._v("\n                  "+t._s(t.formatMoney(t.accessoryTotal))+"\n                ")])])],2)],1):t._e(),t._v(" "),t.modelPrice?n("div",{staticClass:"constructor-result__summary"},[n("dl",{staticClass:"constructor-result__param"},[n("dt",{staticClass:"constructor-result__param-name"},[t._v("\n                Итоговая стоимость\n              ")]),t._v(" "),n("dd",{staticClass:"constructor-result__param-value"},[n("strong",{staticClass:"text-s1"},[t._v("\n                  "+t._s(t.modelPrice)+"\n                ")])])])]):t._e(),t._v(" "),t.modelCreditPrice?n("div",{staticClass:"constructor-result__summary"},[n("p",[t._v("Кредитный расчет")]),t._v(" "),n("dl",{staticClass:"constructor-result__param"},[n("dt",{staticClass:"constructor-result__param-name"},[t._v("\n                Ежемесячный платеж\n              ")]),t._v(" "),n("dd",{staticClass:"constructor-result__param-value"},[n("strong",[t._v("\n                  "+t._s(t.modelCreditPrice)+"\n                ")]),t._v(" "),n("g-info-icon",{staticClass:"hidden-in-popup",nativeOn:{click:function(e){return t.$emit("credit-popup-open")}}})],1)])]):t._e()])])],2)],1):t._e()],1)}),[],!1,null,"562bca02",null).exports),Me=n(1297),Fe=n(1138);function Re(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function $e(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Re(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Re(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ae={name:"configurator",mixins:[ce.a,o.a],props:{steps:Array,currentStepIndex:Number,pageTitle:String,options:{type:Object,default:function(){return{showBreadcrumb:!0,showForm:!0,mode:"default"}}},isCalculator:{type:Boolean,default:!1}},data:function(){return{openCreditPopup:!1,formData:{title:"Забронировать авто",buttonText:"Отправить заявку",success:{title:"Ваше бронирование успешно отправлено!",description:"Сотрудник дилерского центра Kia свяжется с вами в течение 3 часов для подтверждения бронирования."}},selectedOffers:""}},computed:$e({},Object(s.e)("configurator",["currentInteriorColorId","currentExteriorColorId","recommendedAccessories","complectationsData","currentGearsNumber","currentGearboxId","currentEngineId","configuration","complectations","currentModelId","currentDriveId","isDataLoading","disclaimers","currentYear","modelLines","fuelTypes","gearboxes","agreement","engines","drives","models"]),{},Object(s.e)("step-manager",["stepIndices","pageParams"]),{},Object(s.c)("configurator",["selectedAccessoriesForSave","currentYearComplectations","currentComplectation","selectedAccessories","interiorColorsById","exteriorColorsById","transmissionsById","currentModel","defaultYear","enginesById"]),{breadcrumbRoutes:function(){return 0!==this.currentStepIndex&&this.currentModel?[{name:"Модели",href:{name:"models"}},{name:this.currentModel.name,href:{name:"models-code-desc",params:{code:this.currentModel.code}}},{name:this.pageTitle}]:[{name:this.pageTitle}]},showBreadcrumb:function(){return"boolean"!=typeof this.options.showBreadcrumb||this.options.showBreadcrumb},smsConfirmProps:function(){return{code:"confirm-configurator",dynamic_variables:{configuration_id:this.configuration.unique_code,model_name:this.currentModel.name}}},showForm:function(){return"boolean"!=typeof this.options.showForm||this.options.showForm},getClass:function(){switch(this.options.mode){case"popup_store":return["constructor","step-".concat(this.currentStepIndex),{"is-full":this.showFullForm}];default:return["constructor pt-12 desktop1440:pt-16","step-".concat(this.currentStepIndex),{"is-full":this.showFullForm}]}},progressSteps:function(){return this.steps.map((function(t){return{name:t.name}}))},showFullForm:function(){return(this.currentStepIndex===this.stepIndices.model||this.currentStepIndex===this.stepIndices.configurator_final)&&!this.isDataLoading},isLastStep:function(){return this.currentStepIndex>=Object.keys(this.steps).length-1},totalPrice:function(){if(!this.currentComplectation)return null;var t=this.currentComplectation.price;return this.currentExteriorColor&&this.currentExteriorColor.price&&(t+=this.currentExteriorColor.price),N()(this.selectedAccessories)||Object.values(this.selectedAccessories).map((function(e){t+=+e.price*+e.quantity})),t},currentInteriorColor:function(){if(!this.currentComplectation||!this.currentInteriorColorId)return null;var t=this.interiorColorsById[this.currentInteriorColorId];return{name:t.code?"".concat(t.name," (").concat(t.code,") "):t.name,name_en:t.code?"".concat(t.name_en," (").concat(t.code,") "):t.name_en,image:t.image}},currentExteriorColor:function(){if(!this.currentComplectation||!this.currentExteriorColorId)return null;var t=this.exteriorColorsById[this.currentExteriorColorId],e=t.code?"".concat(t.name," (").concat(t.code,") "):t.name,n=t.code?"".concat(t.name_en," (").concat(t.code,") "):t.name_en;t.is_double_color?e+=", двухцветный":t.is_metallic&&(e+=", металлик");var i=l()(this.complectationsData.overviews[this.currentComplectation.id],{color_id:this.currentExteriorColorId});return{name:e,name_en:n,price:i&&i.color_price?i.color_price:null,image:t.image}},finalStepData:function(){return{currentExteriorColor:this.currentExteriorColor,currentInteriorColor:this.currentInteriorColor,selectedAccessories:this.selectedAccessories,totalPrice:this.totalPrice}},creditPopup:function(){return{data:{description:this.disclaimers.credit?this.disclaimers.credit.text:""}}},engineName:function(){var t=this.enginesById[this.currentEngineId];return t?"".concat(t.name):null},currentAccessoriesPrice:function(){},gearbox:function(){return V()(this.gearboxes,"id")[this.currentGearboxId]},transmissionName:function(){return this.gearbox?this.currentGearsNumber?"".concat(this.gearbox.name_en,", ").concat(this.currentGearsNumber).concat(this.gearbox.code):"".concat(this.gearbox.name_en,", ").concat(this.gearbox.code):null},engine:function(){return V()(this.engines,"id")[this.currentEngineId]},engineInfo:function(){return this.engine?"".concat(this.engine.name," | ").concat(Math.round(this.engine.power_hp)," h.p. | ").concat(this.fuelTypes[this.engine.fuel_type_id].name_en):null},drive:function(){return V()(this.drives,"id")[this.currentDriveId]},preparedAccessories:function(){return V()(this.recommendedAccessories,"id")},analyticData:function(){return{currentInteriorColor:this.currentInteriorColor.name_en,currentExteriorColor:this.currentExteriorColor.name_en,gearbox:this.transmissionName,engine:this.engineInfo,drive:this.drive.name_en,configurationId:this.configuration.unique_code,preparedAccessories:this.preparedAccessories,selectedOffers:this.selectedOffers,totalPrice:this.finalStepData.totalPrice}}}),methods:$e({},Object(s.d)("configurator",["clearAccessoriesStepData","setCurrentModelId","setCurrentEngineId","setCurrentGearsNumber","setCurrentGearboxId","setCurrentDriveId","setCurrentModelIdByCode","setCurrentYear"]),{},Object(s.d)("step-manager",["setCurrentStepIndex"]),{closeCreditInfoPopup:function(){this.openCreditPopup=!1},openCreditInfoPopup:function(){this.openCreditPopup=!0,this.dataLayerPush("Info pop-up","Loan calculator description","Open")},isStepDataAlradySet:function(){return null!==this.currentEngineId&&null!==this.currentGearsNumber&&null!==this.currentGearboxId&&null!==this.currentDriveId},tradeInFormClickHandler:function(){var t=this.$refs["purchase-form"].$el.offsetTop;this.isDesktop()&&(t-=110),this.dataLayerPush("Navigation","Sticky menu","Loan request to dealer"),window.scrollTo(0,t)},selectStepHandler:function(t){this.setCurrentStepIndex({index:t,fromProgressBar:!0})},getStepData:function(t){return t===this.stepIndices.configurator_final?this.finalStepData:{}},isComplectationsEmpty:function(){return 0===this.complectations.length},formDataNew:function(){return this.formData.title="Заявка дилеру на авто "+this.currentModel.name+" "+this.currentComplectation.name+" "+this.engineName},addAccessory:function(t){t.map((function(t){}))},selectOffer:function(t){this.selectedOffers=t}}),destroyed:function(){this.clearAccessoriesStepData()},created:function(){if(!this.currentModelId&&this.pageParams.code&&this.setCurrentModelIdByCode(this.pageParams.code),this.currentYear||this.setCurrentYear(this.currentComplectation?this.currentComplectation.year:this.defaultYear),!(this.stepIndices.modification!==this.currentStepIndex&&this.stepIndices.complectation!==this.currentStepIndex||this.isStepDataAlradySet()||this.isComplectationsEmpty())){var t=this.currentComplectation?this.currentComplectation:k()(this.currentYearComplectations,["price"])[0];this.setCurrentEngineId(t.engine_id),this.setCurrentGearsNumber(this.transmissionsById[t.transmission_id].gears_number),this.setCurrentGearboxId(this.transmissionsById[t.transmission_id].gearbox_id),this.setCurrentDriveId(this.transmissionsById[t.transmission_id].drive_id)}},components:{Breadcrumbs:ye.default,ProgressBar:Ce.a,Result:Be,PurchaseCarForm:Me.a,CreditInfoContent:Fe.a,Popup:q.a,CloseIcon:lt.a}},Ne=(n(1359),Object(f.a)(Ae,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{class:t.getClass},[n("g-padding",{staticClass:"pt-0 desktop:pt-4"},[t.showBreadcrumb?n("g-container",{staticClass:"flex justify-between"},[n("Breadcrumbs",{attrs:{items:t.breadcrumbRoutes}})],1):t._e(),t._v(" "),n("g-container",[n("div",{staticClass:"page-title pt-8 tablet:pt-6 pb-6 tablet:pb-8"},[n("h1",{staticClass:"model-banner__title text-x5 desktop:text-x3"},[t._v(t._s(t.pageTitle))])])])],1),t._v(" "),n("g-padding",[n("g-container",[n("progress-bar",{attrs:{steps:t.progressSteps,currentStepIndex:t.currentStepIndex,stepClickEmitFunction:"select-step"},on:{"select-step":t.selectStepHandler}})],1)],1),t._v(" "),n("div",{staticClass:"constructor__body mt-6"},[t.showFullForm?[n("g-padding",[n("g-container",[n("div",{staticClass:"constructor__content is-full"},[n(t.steps[t.currentStepIndex].component,{tag:"component",attrs:{"is-calculator":t.isCalculator,stepData:t.getStepData(t.currentStepIndex),stepOptions:t.steps[t.currentStepIndex].options},on:{"model-select":function(e){return t.$emit("model-select")},"complectation-select":function(e){return t.$emit("complectation-select")},"trade-in-form-click":t.tradeInFormClickHandler,"credit-popup-open":t.openCreditInfoPopup,"select-offer":t.selectOffer}})],1)])],1),t._v(" "),t.currentStepIndex===t.stepIndices.configurator_final&&"popup_store"!==t.options.mode?n("g-form-wrapper",{staticClass:"flex justify-center"},[n("PurchaseCarForm",{ref:"purchase-form",staticClass:"form-max-width",attrs:{source:"dealer_conf",complectation:t.currentComplectation,model:t.currentModel,dataNew:t.formDataNew(),data:t.formData,agreement:t.agreement,accessories:t.selectedAccessories,sms:t.smsConfirmProps,"is-configurator":!0,analyticData:t.analyticData}})],1):t._e()]:[n("g-padding",[n("g-container",{staticClass:"flex"},[n("Result",{attrs:{totalPrice:t.totalPrice,currentStepIndex:t.currentStepIndex,currentInteriorColor:t.currentInteriorColor,currentExteriorColor:t.currentExteriorColor},on:{"credit-popup-open":t.openCreditInfoPopup}}),t._v(" "),n("div",{staticClass:"constructor__content"},[n(t.steps[t.currentStepIndex].component,{tag:"component",attrs:{"is-calculator":t.isCalculator,stepData:t.getStepData(t.currentStepIndex),stepOptions:t.steps[t.currentStepIndex].options},on:{"model-select":function(e){return t.$emit("model-select")},"complectation-select":function(e){return t.$emit("complectation-select")},"trade-in-form-click":t.tradeInFormClickHandler,"credit-popup-open":t.openCreditInfoPopup,"select-offer":t.selectOffer}})],1)],1)],1)]],2)],1),t._v(" "),t.openCreditPopup?n("popup",[n("credit-info-content",{attrs:{popup:t.creditPopup.data},on:{"toggle-info-popup":t.closeCreditInfoPopup}})],1):t._e()],1)}),[],!1,null,null,null).exports),qe=n(390);function He(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function ze(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?He(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):He(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ve={props:{hasCalculator:{type:Boolean,default:!1},isPopupStore:{type:Boolean,default:!1},steps:Array,options:{type:Object,default:function(){return{}}}},mixins:[qe.a,o.a],data:function(){return{allSteps:{model:{name:"Модели",component:b,parent:Ne},modification:{name:"Двигатель и КПП",component:T,parent:Ne},complectation:{name:"Комплектация",component:vt,parent:Ne},color:{name:"Цвета и отделка",component:xt,parent:Ne},accessories:{name:"Аксессуары",component:ge,parent:Ne},configurator_final:{name:"Результаты",component:$t,parent:Ne},offers:{name:"Спецпредложения",component:ee,parent:be.a},credit:{name:"Условия кредита",component:ne.a,parent:be.a},calculator_final:{name:"Результаты расчета",component:ie.a,parent:be.a}},cleanStore:!0}},computed:ze({},Object(s.e)("step-manager",["currentStepIndex","pageParams"]),{},Object(s.e)("configurator",["seo","models","configuration","currentModelId","currentComplectationId"]),{},Object(s.e)("compare",{compareSelectedComplectations:"selectedComplectations"}),{},Object(s.c)("configurator",["currentModel","currentComplectation","transmissionsById"]),{},Object(s.e)("calculator",["calcResult"]),{currentSteps:function(){var t=this,e=[];return this.steps.forEach((function(n){e.push({code:n,name:t.allSteps[n].name,parent:t.allSteps[n].parent,component:t.allSteps[n].component,options:t.getStepOptions(n)})})),e},getTitle:function(){return 0===this.currentStepIndex&&"popup_store"!==this.options.mode?"Конфигуратор":"Конфигуратор "+this.currentModel.name},getTitleCalc:function(){return 0!==this.currentStepIndex&&this.currentModel?"Расчет кредита "+this.currentModel.name:"Расчет кредита"}}),methods:ze({},Object(s.d)("step-manager",["setStepIndices","setCurrentStepIndex","nextStep"]),{},Object(s.d)("calculator",["setComplectationId","clearCalculatorData","clearCurrentProgramIndex","clearSelectedOffers","setCurrentProgramIndex","setLoadingResult","selectOffer"]),{},Object(s.d)("configurator",["setCurrentComplectationId","clearModificationStepData","clearComplectationStepData","clearColorStepData","clearFavoriteData","setCurrentModelIdByCode","setCurrentYear","setCurrentExteriorColorId","setCurrentInteriorColorId","setCurrentEngineId","setCurrentGearsNumber","setCurrentGearboxId","setCurrentDriveId"]),{},Object(s.d)("compare",{clearCompareComplectations:"clearComplectations"}),{getStepOptions:function(t){return"object"==Object(i.a)(this.options[String(t)])?this.options[String(t)]:void 0},getParentOptions:function(t){if("object"==Object(i.a)(this.options.parent))return"object"==Object(i.a)(this.options.parent[t.name])?this.options.parent[t.name]:void 0},setStepUrl:function(){if(this.currentStepIndex>1){var t=this.$route.path+"step_".concat(this.currentStepIndex+1,"/");this.currentStepIndex===this.steps.length-1&&(t=this.hasCalculator?this.calcResult&&this.calcResult.unique_code?t+"".concat(this.calcResult.unique_code,"/"):t:this.configuration&&this.configuration.unique_code?t+"".concat(this.configuration.unique_code,"/"):t)}else 0!==this.currentStepIndex||this.isPopupStore||"buy-calc"===this.$store.state.history.to||"buy-configurator"===this.$store.state.history.to||this.$nuxt.$router.push({name:this.hasCalculator?"buy-calc":"buy-configurator"})},notCleanStoreHandler:function(){this.cleanStore=!1},modelSelectHandler:function(){this.pageParams.code&&this.pageParams.code===this.currentModel.code?this.nextStep():this.$nuxt.$router.push({name:this.hasCalculator?"models-code-calc":"models-code-configurator",params:{code:this.currentModel.code}})},clickChangeModelButtonHandler:function(){var t=this.stepIndices().model;void 0!==t?this.setCurrentStepIndex(t):this.$nuxt.$router.push({name:"buy-calc",params:{code:this.pageParams.code}}),this.setComplectationId(this.currentComplectationId)},complectationSelectHandler:function(){this.clearCalculatorData(),this.setComplectationId(this.currentComplectationId)},stepIndices:function(){var t={};return this.currentSteps.forEach((function(e,n){t[e.code]=n})),t},setCurrentStep:function(){var t=0;this.hasCalculator?this.$route.query.calc_result_id&&this.calcResult&&this.calcResult.unique_code?(t=this.steps.length-1,this.setLoadingResult()):this.pageParams.code&&(Object.keys(this.compareSelectedComplectations).length?(this.clearCompareComplectations(),t=this.pageParams.complectationId?this.stepIndices().complectation:this.stepIndices().modification):t=this.pageParams.complectationId?this.stepIndices().offers:this.stepIndices().modification):this.pageParams.complectationId?(Object.keys(this.compareSelectedComplectations).length&&this.clearCompareComplectations(),t=this.stepIndices().complectation):this.pageParams.code&&(t=this.stepIndices().modification),this.setCurrentStepIndex(t)},clearStepsData:function(){this.setCurrentYear(null),this.clearModificationStepData(),this.clearComplectationStepData(),this.clearColorStepData(),this.clearCurrentProgramIndex(),this.clearSelectedOffers()}}),destroyed:function(){this.clearStepsData(),this.clearFavoriteData(),this.cleanStore&&this.clearCalculatorData()},created:function(){if(this.clearStepsData(),this.setStepIndices(this.stepIndices()),!this.currentModelId&&this.pageParams.code?this.setCurrentModelIdByCode(this.pageParams.code):this.currentModel&&this.currentModel.code!==this.pageParams.code&&this.setCurrentModelIdByCode(this.pageParams.code),this.configuration.complectation_id?this.setCurrentComplectationId(this.configuration.complectation_id):this.calcResult.complectation_id?this.setCurrentComplectationId(this.calcResult.complectation_id):!this.currentComplectationId&&this.pageParams.complectationId&&this.setCurrentComplectationId(this.pageParams.complectationId),this.configuration.exterior_colors_id&&this.setCurrentExteriorColorId(this.configuration.exterior_colors_id),this.configuration.interior_colors_id&&this.setCurrentInteriorColorId(this.configuration.interior_colors_id),this.currentComplectation&&(this.currentComplectation.engine_id&&this.setCurrentEngineId(this.currentComplectation.engine_id),this.currentComplectation.transmission_id)){var t=this.transmissionsById[this.currentComplectation.transmission_id];this.setCurrentGearsNumber(t.gears_number),this.setCurrentGearboxId(t.gearbox_id),this.setCurrentDriveId(t.drive_id)}if(this.hasCalculator&&(this.calcResult.credit_program_id&&this.setCurrentProgramIndex(this.calcResult.credit_program_id),this.calcResult.special_offers))for(var e in this.calcResult.special_offers.special_offers)this.selectOffer(this.calcResult.special_offers.special_offers[e].id);this.setCurrentStep()},mounted:function(){this.$route.query.configuration_id&&this.configuration&&this.configuration.unique_code?this.setCurrentStepIndex(this.steps.length-1):this.configuration.unique_code&&!this.hasCalculator?(this.clearStepsData(),this.setCurrentModelIdByCode(this.pageParams.code),this.setCurrentStep()):this.setStepUrl()},watch:{pageParams:function(t,e){t.code!==e.code&&(this.clearStepsData(),this.setCurrentModelIdByCode(this.pageParams.code),this.setCurrentStep())},currentStepIndex:function(){this.setStepUrl()}}},Ge=Object(f.a)(Ve,(function(){var t=this,e=t.$createElement;return(t._self._c||e)(t.currentSteps[t.currentStepIndex].parent,{tag:"component",attrs:{"is-calculator":t.hasCalculator,currentStepIndex:t.currentStepIndex,steps:t.currentSteps,options:t.getParentOptions(t.currentSteps[t.currentStepIndex].parent),pageTitle:t.hasCalculator?t.getTitleCalc:t.getTitle},on:{"not-clean-store":t.notCleanStoreHandler,"model-select":t.modelSelectHandler,"complectation-select":t.complectationSelectHandler,"calculator-change-model":t.clickChangeModelButtonHandler}})}),[],!1,null,null,null);e.a=Ge.exports},2568:function(t,e,n){"use strict";n.r(e);n(7),n(75),n(3),n(9),n(10),n(8),n(5);var i=n(15),r=n(18),s=n(997),a=n(1366);function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}var c={name:"models-code-calc",fetch:function(t){var e=t.store,n=t.params,i=t.error,r=t.query,a=t.redirect,o=t.route;return n.compareId&&e.commit("configurator/setCurrentComplectationId",n.compareId),e.state.configurator.currentComplectationId&&(n.complectationId=e.state.configurator.currentComplectationId),e.commit("ui/setHeaderColor","black"),e.commit("step-manager/setPageParams",n),e.commit("calculator/setPageParams",n),e.commit("configurator/setIsCalc",!0),e.commit("calculator/setCalcResult",{}),r.calc_result_id?Object(s.a)(e,i,"calculator/loadCalcResultByCode",r.calc_result_id).then((function(){var t=e.state.calculator.carInStockParams;if(t&&t.external_id){var c=t.city_code,l=t.model_code,u=t.external_id;if(l&&c&&u)return a(302,{name:"models-code-cars-city-id",params:{code:l,city:c,id:u},query:{credit:r.calc_result_id}})}var d=e.state.calculator.model.code;if(!d||d===o.params.code)return Object(s.a)(e,i,"configurator/loadPageFull",{code:n.code});a(302,{name:"models-code-calc",params:{code:d}},{calc_result_id:r.calc_result_id})}),(function(t){a(302,{name:"models-code-calc-error",params:n},{uniqueid:r.calc_result_id})})):e.state.configurator.models.length?Object(s.a)(e,i,"configurator/lazyLoadModifications",{code:n.code}).then((function(){}),(function(){})):Object(s.a)(e,i,"configurator/loadPageFull",{code:n.code}).then((function(){}),(function(){}))},head:function(){return{title:this.$store.state.configurator.calculatorSeo.title,meta:[{hid:"description",name:"description",content:this.$store.state.configurator.calculatorSeo.description}]}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach((function(e){Object(i.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},Object(r.e)("calculator",["pageParams"])),components:{StepManager:a.a}},l=n(2),u=Object(l.a)(c,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("StepManager",{attrs:{steps:["model","modification","complectation","offers","credit","calculator_final"],hasCalculator:!0}})],1)}),[],!1,null,null,null);e.default=u.exports},998:function(t,e,n){"use strict";n(49),n(38),n(376),n(27),n(43),n(59);e.a={methods:{choice:function(t,e){return e[t%100>4&&t%100<20?2:[2,0,1,1,1,2][t%10<5?t%10:5]]},translit:function(t){var e={"а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"e","ж":"j","з":"z","и":"i","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"shch","ы":"y","э":"e","ю":"u","я":"ya"," ":"_",'"':""},n=[];t=t.replace(/[ъь]+/g,"").replace(/й/g,"i");for(var i=0;i<t.length;++i)n.push(e[t[i]]||null==e[t[i].toLowerCase()]&&t[i]||e[t[i].toLowerCase()].replace(/^(.)/,(function(t){return t.toUpperCase()})));return n.join("")},createId:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!1!==t)return this.translit((null!==e?e:"basic")+"_"+t+n).toLowerCase()},tabsIds:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=t.split("_");return r.splice(r.length-(e?2:1),0,i?"slides":"tabs"),n.map((function(t,e){return r.join("_")+"_"+(e+1)}))},getDisclaimerText:function(t,e){return t[e]&&t[e].text?t[e].text:""}}}},999:function(t,e,n){}}]);