(window.webpackJsonp=window.webpackJsonp||[]).push([[92],{1001:function(e,t,i){},1002:function(e,t,i){"use strict";i(1013),i(3),i(60),i(36),i(27),i(168),i(311);var n=i(161),s=i(86),r=(i(33),i(376),i(8),i(5),null);var a=null;function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=document.createElement(e);return Object.keys(t).forEach((function(e){i[e]=t[e]})),i}function c(e,t,i){return(window.getComputedStyle(e,i||null)||{display:"none"})[t]}function l(e){if(!document.documentElement.contains(e))return{detached:!0,rendered:!1};for(var t=e;t!==document;){if("none"===c(t,"display"))return{detached:!1,rendered:!1};t=t.parentNode}return{detached:!1,rendered:!0}}var d='.resize-triggers{visibility:hidden;opacity:0}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',u=0,p=null;function f(e,t){if(e.__resize_mutation_handler__||(e.__resize_mutation_handler__=m.bind(e)),!e.__resize_listeners__)if(e.__resize_listeners__=[],window.ResizeObserver){var i=e.offsetWidth,n=e.offsetHeight,s=new ResizeObserver((function(){(e.__resize_observer_triggered__||(e.__resize_observer_triggered__=!0,e.offsetWidth!==i||e.offsetHeight!==n))&&_(e)})),r=l(e),a=r.detached,f=r.rendered;e.__resize_observer_triggered__=!1===a&&!1===f,e.__resize_observer__=s,s.observe(e)}else if(e.attachEvent&&e.addEventListener)e.__resize_legacy_resize_handler__=function(){_(e)},e.attachEvent("onresize",e.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);else if(u||(p=function(e){var t=document.createElement("style");return t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),(document.querySelector("head")||document.body).appendChild(t),t}(d)),function(e){var t=c(e,"position");t&&"static"!==t||(e.style.position="relative");e.__resize_old_position__=t,e.__resize_last__={};var i=o("div",{className:"resize-triggers"}),n=o("div",{className:"resize-expand-trigger"}),s=o("div"),r=o("div",{className:"resize-contract-trigger"});n.appendChild(s),i.appendChild(n),i.appendChild(r),e.appendChild(i),e.__resize_triggers__={triggers:i,expand:n,expandChild:s,contract:r},v(e),e.addEventListener("scroll",h,!0),e.__resize_last__={width:e.offsetWidth,height:e.offsetHeight}}(e),e.__resize_rendered__=l(e).rendered,window.MutationObserver){var g=new MutationObserver(e.__resize_mutation_handler__);g.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__resize_mutation_observer__=g}e.__resize_listeners__.push(t),u++}function m(){var e=l(this),t=e.rendered,i=e.detached;t!==this.__resize_rendered__&&(!i&&this.__resize_triggers__&&(v(this),this.addEventListener("scroll",h,!0)),this.__resize_rendered__=t,_(this))}function h(){var e,t,i=this;v(this),this.__resize_raf__&&(e=this.__resize_raf__,a||(a=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}).bind(window)),a(e)),this.__resize_raf__=(t=function(){var e,t,n,s,r,a,o=(t=(e=i).__resize_last__,n=t.width,s=t.height,r=e.offsetWidth,a=e.offsetHeight,r!==n||a!==s?{width:r,height:a}:null);o&&(i.__resize_last__=o,_(i))},r||(r=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){return setTimeout(e,16)}).bind(window)),r(t))}function _(e){e&&e.__resize_listeners__&&e.__resize_listeners__.forEach((function(t){t.call(e)}))}function v(e){var t=e.__resize_triggers__,i=t.expand,n=t.expandChild,s=t.contract,r=s.scrollWidth,a=s.scrollHeight,o=i.offsetWidth,c=i.offsetHeight,l=i.scrollWidth,d=i.scrollHeight;s.scrollLeft=r,s.scrollTop=a,n.style.width=o+1+"px",n.style.height=c+1+"px",i.scrollLeft=l,i.scrollTop=d}var g=["maxLines","maxHeight","ellipsis","isClamped"],b=["tag","text","autoresize"];t.a={name:"vue-clamp",props:{tag:{type:String,default:"div"},autoresize:{type:Boolean,default:!1},maxLines:Number,maxHeight:[String,Number],ellipsis:{type:String,default:"…"},expanded:Boolean},data:function(){return{offset:null,text:this.getText(),localExpanded:!!this.expanded}},computed:{clampedText:function(){return this.text.slice(0,this.offset)+this.ellipsis},isClamped:function(){return!!this.text&&this.offset!==this.text.length},realText:function(){return this.isClamped?this.clampedText:this.text},realMaxHeight:function(){if(this.localExpanded)return null;var e=this.maxHeight;return e?"number"==typeof e?"".concat(e,"px"):e:null}},watch:{expanded:function(e){this.localExpanded=e},localExpanded:function(e){e?this.clampAt(this.text.length):this.update(),this.expanded!==e&&this.$emit("update:expanded",e)}},mounted:function(){var e=this;this.init(),b.forEach((function(t){e.$watch(t,e.init)})),g.forEach((function(t){e.$watch(t,e.update)}))},updated:function(){this.text=this.getText(),this.applyChange()},beforeDestroy:function(){this.cleanUp()},methods:{init:function(){var e=this;if(this.$slots.default){if(this.offset=this.text.length,this.cleanUp(),this.autoresize){var t=function(){e.update()};f(this.$el,t),this.unregisterResizeCallback=function(){!function(e,t){if(e.detachEvent&&e.removeEventListener)return e.detachEvent("onresize",e.__resize_legacy_resize_handler__),void document.removeEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);var i=e.__resize_listeners__;i&&(i.splice(i.indexOf(t),1),i.length||(e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__.disconnect(),e.__resize_observer__=null):(e.__resize_mutation_observer__&&(e.__resize_mutation_observer__.disconnect(),e.__resize_mutation_observer__=null),e.removeEventListener("scroll",h),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null),e.__resize_listeners__=null),!--u&&p&&p.parentNode.removeChild(p))}(e.$el,t)}}this.update()}},update:function(){this.localExpanded||(this.applyChange(),(this.isOverflow()||this.isClamped)&&this.search())},expand:function(){this.localExpanded=!0},collapse:function(){this.localExpanded=!1},toggle:function(){this.localExpanded=!this.localExpanded},getLines:function(){return this.$refs.content.getClientRects().length},isOverflow:function(){return!(!this.maxLines&&!this.maxHeight)&&(!!(this.maxLines&&this.getLines()>this.maxLines)||!!(this.maxHeight&&this.$el.scrollHeight>this.$el.offsetHeight))},getText:function(){var e=(this.$slots.default||[]).filter((function(e){return!e.tag&&!e.isComment})),t=Object(s.a)(e,1)[0];return t?t.text:""},moveEdge:function(e){this.clampAt(this.offset+e)},clampAt:function(e){this.offset=e,this.applyChange()},applyChange:function(){this.$refs.text.textContent=this.realText},stepToFit:function(){this.fill(),this.clamp()},fill:function(){for(;(!this.isOverflow()||this.getLines()<2)&&this.offset<this.text.length;)this.moveEdge(1)},clamp:function(){for(;this.isOverflow()&&this.getLines()>1&&this.offset>0;)this.moveEdge(-1)},search:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=t[0],s=void 0===n?0:n,r=t[1],a=void 0===r?this.offset:r;if(a-s<=3)this.stepToFit();else{var o=Math.floor((a+s)/2);this.clampAt(o),this.isOverflow()?this.search(s,o):this.search(o,a)}},cleanUp:function(){this.unregisterResizeCallback&&this.unregisterResizeCallback()}},render:function(e){var t=[e("span",{ref:"text",attrs:{"aria-label":this.text.trim()}},this.realText)],i={expand:this.expand,collapse:this.collapse,toggle:this.toggle,clamped:this.isClamped,expanded:this.localExpanded},s=this.$scopedSlots.before?this.$scopedSlots.before(i):this.$slots.before;s&&t.unshift.apply(t,Object(n.a)(Array.isArray(s)?s:[s]));var r=this.$scopedSlots.after?this.$scopedSlots.after(i):this.$slots.after;r&&t.push.apply(t,Object(n.a)(Array.isArray(r)?r:[r]));var a=[e("span",{style:{boxShadow:"transparent 0 0"},ref:"content"},t)];return e(this.tag,{style:{maxHeight:this.realMaxHeight,overflow:"hidden"}},a)}}},1007:function(e,t,i){},1010:function(e,t){var i=Array.prototype.join;e.exports=function(e,t){return null==e?"":i.call(e,t)}},1011:function(e,t){e.exports=function(e){for(var t=-1,i=null==e?0:e.length,n=0,s=[];++t<i;){var r=e[t];r&&(s[n++]=r)}return s}},1012:function(e,t){var i=Object.prototype.hasOwnProperty;e.exports=function(e,t){return null!=e&&i.call(e,t)}},1013:function(e,t,i){var n=i(23),s=i(1014),r=i(167);n({target:"Array",proto:!0},{fill:s}),r("fill")},1014:function(e,t,i){"use strict";var n=i(71),s=i(310),r=i(64);e.exports=function(e){for(var t=n(this),i=r(t.length),a=arguments.length,o=s(a>1?arguments[1]:void 0,i),c=a>2?arguments[2]:void 0,l=void 0===c?i:s(c,i);l>o;)t[o++]=e;return t}},1022:function(e,t,i){"use strict";i(7),i(3),i(9),i(10),i(8),i(6),i(5),i(51);var n=i(21),s=i(15),r=i(18),a=i(11),o=i(96),c=i.n(o),l=i(137),d=i.n(l),u=i(98),p=i.n(u),f=i(83),m=i(107),h=i(109),_=i(112),v=i(379);function g(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}var b,y={mixins:[i(24).a],props:{error:String,dealership:null,dealershipIds:{type:Array,default:function(){return[]}},excludedDealershipIds:{type:Array,default:function(){return[]}},model:{type:Object,default:function(){}},theme:{type:Object,default:function(){}},mapId:{type:String,default:"yamap"},autoFill:{type:Boolean,default:!1},showButton:{type:Boolean,default:!0},isSmall:{type:Boolean,default:function(){return!0}},buttonShort:{type:Boolean,default:!1},showServices:{type:Boolean,default:function(){return!0}},showFilter:{type:Boolean,default:function(){return!0}},showGeoIp:{type:Boolean,default:function(){return!0}},title:{type:String,default:function(){return"Выберите дилера"}},description:{type:String,default:null},disableResult:{type:Boolean,default:function(){return!1}},value:{type:Object,default:null},carInfo:{type:Object,default:null},headerClass:{type:String,default:""},isCalculatorPage:{type:Boolean,default:!1},showLink:{type:Boolean,default:!0},isMaintenanceCalc:{type:Boolean,default:function(){return!1}},isBuyCalc:{type:Boolean,default:!1},isConfigurator:{type:Boolean,default:!1},isTradeIn:{type:Boolean,default:function(){return!1}},isUsedCars:{type:Boolean,default:function(){return!1}}},data:function(){return{dealer:null,isLoading:!1,isPopupOpen:!1,isLimitQuery:this.dealershipIds.length>=100}},created:function(){var e=this;this.clearDealerships(),this.dealership?this.setDealer(this.dealership):this.autoFill&&this.$auth.loggedIn&&(this.isLoading=!0,this.$axios(a.a.lastUserDealer()).then((function(t){0===t.data.error&&void 0!==t.data.content.dealership&&e.setDealer(t.data.content.dealership)})).finally((function(){e.isLoading=!1})))},destroyed:function(){this.clearDealerships()},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?g(Object(i),!0).forEach((function(t){Object(s.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):g(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},Object(r.e)("geo-position",{currentCity:"city"}),{},Object(r.c)("dealerships",{cities:"getCities",dealerships:"getDealerships"}),{dealershipFiltered:function(){var e=this,t=this.dealerships;return this.excludedDealershipIds.length>0&&(t=this.dealerships.filter((function(t){return!e.excludedDealershipIdsByKey[t.id]}))),this.isLimitQuery?d()(t,(function(t){return-1!==p()(e.dealershipIds,t.id)})):t},cityFiltered:function(){if(this.isLimitQuery){var e=c()(this.dealershipFiltered,"city_id");return d()(this.cities,(function(t){return-1!==p()(e,t.id)}))}return this.cities},dealerSelected:function(){return!this.disableResult&&null!==this.dealer},hasError:function(){return!!this.error},hasButtonSlot:function(){return!!this.$slots.button},excludedDealershipIdsByKey:function(){var e={};return this.excludedDealershipIds.forEach((function(t){e[t]=t})),e}}),methods:{togglePopup:(b=Object(n.a)(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,this.loadDealerships();case 3:this.isPopupOpen=!this.isPopupOpen,this.dealerSelected&&this.dataLayerPush("Dealer search","Change dealer"),!this.dealerSelected&&this.isConfigurator&&this.isPopupOpen&&this.dataLayerPush("Dealer search pop-up","Open");case 6:case"end":return e.stop()}}),e,this)}))),function(e){return b.apply(this,arguments)}),checkedDealer:function(e){Object.assign(this,{dealer:e,isPopupOpen:!1}),this.$emit("input",e)},loadDealerships:function(){return this.dealerships.length<=0?this.$store.dispatch("dealerships/loadAll",this.isLimitQuery?[]:this.dealershipIds):Promise.resolve()},clearDealerships:function(){this.dealershipIds.length>0&&this.$store.dispatch("dealerships/clearAll")},clearSelected:function(){this.dealer=null},setDealer:function(e){this.dealer=e,this.isPopupOpen=!1,this.$emit("input",this.dealer)}},components:{Popup:f.a,Loader:m.a,IconEdit:h.a,IconClose:_.a,DealerLocator:v.a}},C=(i(1037),i(2)),x=Object(C.a)(y,(function(){var e,t=this,i=t.$createElement,n=t._self._c||i;return n("div",[t.isLoading?n("Loader",{attrs:{inline:!0}}):t.showButton?n("div",[n("div",{class:["form-control",(e={},e["has-error"]=t.hasError,e)]},[t.dealerSelected?t._e():n("button",{class:["button button_secondary",{button_small:t.isSmall},{"mt-3":t.isMaintenanceCalc},{"button-short":t.buttonShort}],on:{click:t.togglePopup}},[n("span",{staticClass:"button__span-after"},[t._v("\n          Выбрать дилера\n        ")])]),t._v(" "),t.hasError?n("span",{class:["form-control__error"]},[t._v(t._s(t.error))]):t._e()]),t._v(" "),t.dealerSelected?n("div",{staticClass:"form-dealer text-s2i"},[n("div",{staticClass:"flex items-center text-s1 mt-3 mb-1",class:t.headerClass},[t._v("\n        Дилер\n        "),n("icon-edit",{staticClass:"color-disabled-gray cursor-pointer ml-2",on:{click:t.togglePopup}})],1),t._v(" "),n("div",[t._v(t._s(t.dealer.name))]),t._v(" "),n("div",{staticClass:"color-dark-gray"},[t._v(t._s(t.dealer.address))])]):t._e()]):t._e(),t._v(" "),t.isPopupOpen?n("popup",[n("div",{staticClass:"popup__container flex items-center justify-center"},[n("div",{staticClass:"popup__body"},[n("div",{staticClass:"popup__close",on:{click:t.togglePopup}},[n("IconClose",{staticClass:"block"})],1),t._v(" "),n("div",{staticClass:"form form_popup flex flex-col"},[n("div",{staticClass:"form__wrap flex flex-col"},[n("div",{staticClass:"form__header px-6 desktop:px-16 pt-6 desktop:pt-8 desktop:pb-4"},[n("h1",{staticClass:"text-x5 desktop:text-x4 mb-1"},[t._v(t._s(t.title))]),t._v(" "),t.description?n("div",{staticClass:"sub-header",domProps:{innerHTML:t._s(t.description)}}):t._e()]),t._v(" "),n("div",{staticClass:"form__container flex-container flex-col"},[n("DealerLocator",{attrs:{mapId:t.mapId,cities:t.cityFiltered,carInfo:t.carInfo,showServices:t.showServices,"show-filter":t.showFilter,"show-geo-ip":t.showGeoIp,"dealership-ids":t.dealershipIds,defaultCityCode:t.currentCity.code,"excluded-dealership-ids":t.excludedDealershipIds,"is-calculator-page":t.isCalculatorPage,"show-link":t.showLink,isBuyCalc:t.isBuyCalc,isConfigurator:t.isConfigurator,isTradeIn:t.isTradeIn,isUsedCars:t.isUsedCars},on:{"checked-dealer":t.checkedDealer}})],1)])])])])]):t._e()],1)}),[],!1,null,"cf648c4c",null);t.a=x.exports},1023:function(e,t,i){var n=i(535)((function(e,t,i){return e+(i?" ":"")+t.toLowerCase()}));e.exports=n},1027:function(e,t,i){"use strict";i(13);var n=i(83),s=i(48),r={props:{offer:Object,isPopupShown:Boolean},computed:{datePrepare:function(){var e=this.$moment().startOf("month"),t=this.$moment().endOf("month"),i=this.$moment.unix(this.offer.active_from),n=this.$moment.unix(this.offer.active_to);return i=i.isSame(e,"month")?i:e,n=n.isSame(t,"month")?n:t,"".concat(i.format("D ")," - ").concat(n.format("D MMMM YYYY"))}},methods:{toggleInfoPopup:function(){this.$emit("toggle-info-popup")}},components:{Popup:n.a,CloseIcon:s.a}},a=(i(1125),i(2)),o=Object(a.a)(r,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isPopupShown?i("Popup",[i("div",{staticClass:"info__popup-wrapper bg-white pt-16 pb-8 desktop:pb-20 px-6 desktop:px-22"},[i("button",{staticClass:"info__close-button",on:{click:e.toggleInfoPopup}},[i("CloseIcon")],1),e._v(" "),i("div",[i("h1",{staticClass:"info__title",domProps:{innerHTML:e._s(e.offer.name)}}),e._v(" "),i("p",{staticClass:"info__head",domProps:{innerHTML:e._s(e.offer.preview_text)}}),e._v(" "),i("p",{staticClass:"info__head",domProps:{innerHTML:e._s(e.datePrepare)}}),e._v(" "),i("hr"),e._v(" "),e.offer.condition_text?[i("p",{staticClass:"info__head__bold"},[e._v("Условия участия в Программе")]),e._v(" "),i("p",{staticClass:"info__text__main",domProps:{innerHTML:e._s(e.offer.condition_text)}})]:e._e(),e._v(" "),e.offer.advantage_text?[i("p",{staticClass:"info__head__bold"},[e._v("Преимущества")]),e._v(" "),i("p",{staticClass:"info__text__main",domProps:{innerHTML:e._s(e.offer.advantage_text)}})]:e._e(),e._v(" "),e.offer.description?[i("div",{staticClass:"info__text",domProps:{innerHTML:e._s(e.offer.description)}})]:e._e(),e._v(" "),i("button",{staticClass:"button bg-black color-white info__button",on:{click:e.toggleInfoPopup}},[i("span",{staticClass:"button__span-after"},[e._v("\n          Понятно\n        ")])])],2)])]):e._e()}),[],!1,null,null,null);t.a=o.exports},1028:function(e,t,i){"use strict";var n=i(32);t.a={methods:{getLocalizedName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"name",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en";if("object"!==Object(n.a)(e)||null===e)return"";var s=t+"_"+i;return e[s]?e[s]:e[t]||""}}}},1032:function(e,t,i){},1034:function(e,t,i){},1037:function(e,t,i){"use strict";var n=i(1001);i.n(n).a},1038:function(e,t,i){"use strict";i(17),i(13),i(8),i(7),i(3),i(6),i(9),i(5),i(10);var n=["class","staticClass","style","staticStyle","attrs"];function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function a(e,t){if(null==e)return{};var i,n,s=function(e,t){if(null==e)return{};var i,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||(s[i]=e[i]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(s[i]=e[i])}return s}t.a={functional:!0,render:function(e,t){var i=t._c,o=(t._v,t.data),c=t.children,l=void 0===c?[]:c,d=o.class,u=o.staticClass,p=o.style,f=o.staticStyle,m=o.attrs,h=void 0===m?{}:m,_=a(o,n);return i("svg",function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({class:[d,u],style:[p,f],attrs:Object.assign({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},h)},_),l.concat([i("path",{attrs:{d:"M5 8l5 5 5-5",stroke:"currentColor","stroke-width":"2"}})]))}}},1040:function(e,t,i){var n=i(1012),s=i(536);e.exports=function(e,t){return null!=e&&s(e,t,n)}},1041:function(e,t,i){var n=i(164),s=i(309),r=i(97);e.exports=function(e,t){var i={};return t=r(t,3),s(e,(function(e,s,r){n(i,t(e,s,r),e)})),i}},1043:function(e,t,i){"use strict";var n=i(374),s={props:{popup:{type:Object,default:function(){return{}}}},components:{PopupContent:n.a}},r=i(2),a=Object(r.a)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("popup-content",{attrs:{popup:e.popup},on:{"toggle-info-popup":function(t){return e.$emit("toggle-info-popup")},"send-analytics-popup":function(t){return e.$emit("send-analytics-popup",t)}}},[i("template",{slot:"title"},[e._v("\n    Условия формирования цены на авто\n  ")]),e._v(" "),i("template",{slot:"description"}),e._v(" "),i("template",{slot:"button-name"},[e._v("\n    Комплектации и цены "+e._s(e.popup.label)+"\n  ")])],2)}),[],!1,null,null,null);t.a=a.exports},1047:function(e,t,i){},1048:function(e,t,i){"use strict";i.r(t);i(7),i(13),i(3),i(9),i(10),i(8),i(5);var n=i(15),s=i(173),r=i.n(s),a=i(76),o=i(998),c=i(386),l=i(169),d=i.n(l);function u(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function p(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?u(Object(i),!0).forEach((function(t){Object(n.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var f=o.a.methods.choice,m=function(e,t){return e.length===t.length?r()(e,t):null};Object(a.c)("integer",p({},c.d,{message:"Поле должно содержать только цифры"})),Object(a.c)("alpha_spaces",p({},c.b,{message:function(e,t){var i=t.locale;return"Поле может содержать только ".concat("ru"===i?"русские ":"","буквы или пробелы")}})),Object(a.c)("alpha_num",p({},c.a,{message:function(e,t){var i=t.locale;return"Поле может содержать только ".concat("en"===i?"латинские ":"","буквы или цифры")}})),Object(a.c)("length",p({},c.e,{message:function(e,t){var i=t.length,n=f(i,["символ","символа","символов"]);return"Поле должно содержать ".concat(i," ").concat(n)}})),Object(a.c)("digits",p({},c.c,{message:function(e,t){var i=t.length,n=f(i,["цифру","цифры","цифр"]);return"Поле должно быть числовым и иметь ".concat(i," ").concat(n)}})),Object(a.c)("min_value",p({},c.g,{message:function(e,t){var i=t.min;return"Поле должно быть не менее ".concat(i)}})),Object(a.c)("max",p({},c.f,{message:function(e,t){var i=t.length,n=f(i,["символа","символов","символов"]);return"Не более ".concat(i," ").concat(n)}})),Object(a.c)("date_format",{params:["format"],validate:function(e,t){var i=t.format,n=m(e,i);return n&&n.isValid()},message:"Поле должно быть корректной датой"}),Object(a.c)("date_before",{params:["format"],validate:function(e,t){var i=t.format,n=m(e,i);return n&&n.isSameOrBefore(r()())},message:"Поле должно быть датой меньше текущей"}),Object(a.c)("date_after",{params:["format"],validate:function(e,t){var i=t.format,n=m(e,i);return n&&n.isSameOrAfter(r()())},message:"Поле должно быть датой больше текущей"}),Object(a.c)("max_age",{params:["max","format"],validate:function(e,t){var i=t.max,n=t.format;return r()().diff(r()(e,n),"years",!0)<d()(i)},message:"Поле должно быть корректной датой"}),Object(a.c)("letter_number",{validate:function(e){return/^[а-яА-ЯёЁa-zA-Z0-9\w -]+$/.test(e)},message:"Поле должно содержать только буквы, цифры, пробел и тире"})},1049:function(e,t,i){"use strict";i(17),i(13),i(8),i(7),i(3),i(6),i(9),i(5),i(10);var n=["class","staticClass","style","staticStyle","attrs"];function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function a(e,t){if(null==e)return{};var i,n,s=function(e,t){if(null==e)return{};var i,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||(s[i]=e[i]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(s[i]=e[i])}return s}t.a={functional:!0,render:function(e,t){var i=t._c,o=(t._v,t.data),c=t.children,l=void 0===c?[]:c,d=o.class,u=o.staticClass,p=o.style,f=o.staticStyle,m=o.attrs,h=void 0===m?{}:m,_=a(o,n);return i("svg",function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({class:[d,u],style:[p,f],attrs:Object.assign({width:"20",height:"21",viewBox:"0 0 20 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},h)},_),l.concat([i("path",{attrs:{d:"M14.734 11.239l2.706-2.955c.747-.816.747-2.14 0-2.956l-2.03-2.216c-.746-.816-1.958-.816-2.705 0L8.647 7.545c-.747.816-.747 2.139 0 2.955l1.015 1.108m-3.72-2.586L2.56 12.716c-.747.816-.747 2.14 0 2.956l2.03 2.216c.746.816 1.957.816 2.705 0l4.735-5.172c.747-.816.746-2.139-.001-2.955l-1.014-1.108",stroke:"currentColor","stroke-width":"1.5"}})]))}}},1058:function(e,t,i){},1059:function(e,t,i){},1060:function(e,t,i){},1061:function(e,t,i){},1062:function(e,t,i){},1063:function(e,t,i){},1064:function(e,t,i){},1065:function(e,t,i){},1066:function(e,t,i){},1067:function(e,t,i){},1068:function(e,t,i){"use strict";var n=i(163),s=i(170),r=i(396),a=i.n(r),o={props:{text:String,open:Boolean,color:String,isPopup:Boolean},data:function(){return{moreText:!1}},methods:{isDot:function(){this.moreText=!0},onToggle:function(){this.$emit("toggle-disclaimer")}},computed:{isOpen:function(){return this.open},formattedText:function(){return this.open?a()(this.text,1e4,{html:!0,maxLines:2}):this.text}},components:{IconTickDown:n.a,IconTickUp:s.a}},c=(i(1172),i(2)),l=Object(c.a)(o,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isPopup&&e.text?i("div",[i("div",{class:"text-s3 tablet:text-s2i "+(e.color?e.color:"color-black"),domProps:{innerHTML:e._s(e.formattedText)}}),e._v(" "),e.open?i("span",{class:"pt-1 text-s2-b inline-flex items-center cursor-pointer text-bold "+(e.color?e.color:"color-black"),on:{click:e.onToggle}},[e._v("\n    Подробнее\n    "),i("icon-tick-down")],1):e._e(),e._v(" "),e.open?e._e():i("span",{class:"pt-1 text-s2-b inline-flex items-center cursor-pointer "+(e.color?e.color:"color-black"),on:{click:e.onToggle}},[e._v("\n    Свернуть\n    "),i("icon-tick-up")],1)]):i("div",{staticClass:"maxposter-disclaimer text-s3 tablet:text-s2i color-dark-gray mt-4"},[e._v("\n  Указанная расчетная стоимость является приблизительной и действует при сдаче автомобиля с\n  пробегом в зачет покупки нового автомобиля Kia. Информация предоставлена\n  "),i("a",{attrs:{href:"https://maxposter.ru",target:"_blank"}},[e._v("MaxPoster")]),e._v(".\n")])}),[],!1,null,"79dba481",null);t.a=l.exports},1069:function(e,t,i){"use strict";i(7),i(3),i(9),i(10),i(8),i(5);var n=i(15),s=i(18),r=i(62),a=i(1002);function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}var c={props:{customAside:{type:Boolean,default:!1}},data:function(){return{atTop:!0,isInited:!0,isOpened:!1,isResultFixed:!1,isResultScrolled:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){Object(n.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},Object(s.e)("ui",["header"]),{hasOffset:function(){return!(!this.header.isFixedHeaderVisible&&!this.isInited)}}),mounted:function(){window.addEventListener("load",this.handleScrollResult),window.addEventListener("resize",this.handleScrollResult),window.addEventListener("scroll",this.handleScrollResult)},beforeDestroy:function(){window.removeEventListener("load",this.handleScrollResult),window.removeEventListener("resize",this.handleScrollResult),window.removeEventListener("scroll",this.handleScrollResult)},methods:{handleTouchMove:function(e){e.preventDefault()},handleScrollResult:function(){var e=window.scrollY,t=Math.round(window.innerHeight),i=Math.round(document.getElementsByClassName("page-wrapper__footer")[0].offsetTop);e<60?this.isInited=!this.header.isFixedHeaderVisible:(this.atTop=this.isInited,this.isInited=!1);var n=Math.round(this.$refs.result.offsetTop);this.isResultFixed=e>n,this.isResultScrolled=e+t>i+1},toggleResult:function(){this.isOpened=!this.isOpened,this.isOpened?Object(r.disableBodyScroll)(this.$refs.resultContent):Object(r.enableBodyScroll)(this.$refs.resultContent)}},components:{VClamp:a.a}},l=(i(1071),i(2)),d=Object(l.a)(c,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("aside",{ref:"result",class:["form-aside",e.isInited?"absolute":"fixed",{"is-opened":e.isOpened},{"at-top":e.isInited||e.atTop},{"has-offset":e.hasOffset},{"is-fixed":e.isResultFixed},{"is-scrolled":e.isResultScrolled},{"is-custom":e.customAside}]},[i("div",{directives:[{name:"touch",rawName:"v-touch:tap",value:e.toggleResult,expression:"toggleResult",arg:"tap"},{name:"touch",rawName:"v-touch:swipe.bottom.top",value:e.toggleResult,expression:"toggleResult",arg:"swipe",modifiers:{bottom:!0,top:!0}}],staticClass:"form-aside__header flex justify-between"},[i("div",{staticClass:"form-aside__header__title text-s2-b tablet:text-x5"},[i("v-clamp",{attrs:{autoresize:"","max-lines":1,ellipsis:"..."}},[e._t("title")],2)],1)]),e._v(" "),i("div",{staticClass:"form-aside__body"},[i("div",{ref:"resultContent",staticClass:"form-aside__content"},[e._t("body")],2),e._v(" "),i("div",{directives:[{name:"touch",rawName:"v-touch:tap",value:e.toggleResult,expression:"toggleResult",arg:"tap"},{name:"touch",rawName:"v-touch:swipe.bottom.top",value:e.toggleResult,expression:"toggleResult",arg:"swipe",modifiers:{bottom:!0,top:!0}}],staticClass:"form-aside__toggle"})])])}),[],!1,null,null,null);t.a=d.exports},1070:function(e,t,i){"use strict";var n=i(83),s=i(48),r={data:function(){return{title:"Изменения повлияют на стоимость автомобиля",description:"Текущий кредитный расчет будет сброшен",apply:"Продолжить",cancel:"Отменить"}},components:{Popup:n.a,CloseIcon:s.a}},a=(i(1171),i(2)),o=Object(a.a)(r,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("Popup",[i("div",{staticClass:"info__popup-wrapper bg-white pt-16 pb-8 desktop:pb-20 px-6 desktop:px-22"},[i("button",{staticClass:"info__close-button",on:{click:function(t){return e.$emit("cancel")}}},[i("CloseIcon")],1),e._v(" "),i("div",[i("h1",{staticClass:"info__title",domProps:{innerHTML:e._s(e.title)}}),e._v(" "),i("hr"),e._v(" "),i("p",{staticClass:"info__text__main",domProps:{innerHTML:e._s(e.description)}}),e._v(" "),i("button",{staticClass:"button bg-black color-white info__button",domProps:{innerHTML:e._s(e.apply)},on:{click:function(t){return e.$emit("apply")}}}),e._v(" "),i("button",{staticClass:"button button_secondary info__button",domProps:{innerHTML:e._s(e.cancel)},on:{click:function(t){return e.$emit("cancel")}}})])])])}),[],!1,null,null,null);t.a=o.exports},1071:function(e,t,i){"use strict";var n=i(1007);i.n(n).a},1083:function(e,t,i){"use strict";i(17),i(13),i(8),i(7),i(3),i(6),i(9),i(5),i(10);var n=["class","staticClass","style","staticStyle","attrs"];function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function a(e,t){if(null==e)return{};var i,n,s=function(e,t){if(null==e)return{};var i,n,s={},r=Object.keys(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||(s[i]=e[i]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(s[i]=e[i])}return s}t.a={functional:!0,render:function(e,t){var i=t._c,o=(t._v,t.data),c=t.children,l=void 0===c?[]:c,d=o.class,u=o.staticClass,p=o.style,f=o.staticStyle,m=o.attrs,h=void 0===m?{}:m,_=a(o,n);return i("svg",function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({class:[d,u],style:[p,f],attrs:Object.assign({width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid"},h)},_),l.concat([i("path",{attrs:{d:"M5 0l1.123 3.455h3.632L6.816 5.59 7.94 9.045 5 6.91 2.061 9.045 3.184 5.59.244 3.455h3.633L5 0z",fill:"currentColor"}})]))}}},1087:function(e,t,i){"use strict";i(36);var n={props:{steps:Array,currentStepIndex:Number,stepClickEmitFunction:{type:String,default:"select-step"}},methods:{onStepClick:function(e){this.stepClickEmitFunction&&e<this.currentStepIndex&&this.$emit(this.stepClickEmitFunction,e)}}},s=(i(1129),i(2)),r=Object(s.a)(n,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["progress-bar-box w-screen desktop:w-auto",{"progress-bar-box--shifted":0!==e.currentStepIndex}]},[i("div",{staticClass:"flex progress-bar",style:"transform: translateX(-"+260*e.currentStepIndex+"px)"},e._l(e.steps,(function(t,n){return i("div",{class:["progress-bar__step relative color-gray flex",{"progress-bar__step--active":n===e.currentStepIndex},{"progress-bar__step--past":n<e.currentStepIndex},{"progress-bar__step-link":n<e.currentStepIndex}],on:{click:function(t){return t.preventDefault(),e.onStepClick(n)}}},[i("div",{staticClass:"progress-bar__step-number mt-2 text-s2-b color-black"},[e._v("\n        "+e._s("0"+(n+1))+"\n      ")]),e._v(" "),i("div",{staticClass:"progress-bar__step-name pl-3 mt-2 text-s2 color-disabled-gray"},[e._v("\n        "+e._s(t.name)+"\n      ")])])})),0)])}),[],!1,null,null,null);t.a=r.exports},1125:function(e,t,i){"use strict";var n=i(1032);i.n(n).a},1129:function(e,t,i){"use strict";var n=i(1034);i.n(n).a},1139:function(e,t,i){"use strict";var n=i(162),s={name:"test-drive-buttons",props:{showNextBtn:{type:Boolean,default:!0},textNextBtn:{type:String,default:"Шаг назад"},showPrevBtn:{type:Boolean,default:!1},textPrevBtn:{type:String,default:"Далее"},isContainerBordered:{type:Boolean,default:!1}},data:function(){return{isButtonsScrolled:!1}},mounted:function(){window.addEventListener("load",this.handleScrollButtons),window.addEventListener("resize",this.handleScrollButtons),window.addEventListener("scroll",this.handleScrollButtons)},beforeDestroy:function(){window.removeEventListener("load",this.handleScrollButtons),window.removeEventListener("resize",this.handleScrollButtons),window.removeEventListener("scroll",this.handleScrollButtons)},methods:{handleScrollButtons:function(){var e=window.scrollY,t=Math.round(window.innerHeight),i=Math.round(document.getElementsByClassName("page-wrapper__footer")[0].offsetTop);this.isButtonsScrolled=e+t>i+1}},components:{IconLeft:n.a}},r=(i(1157),i(2)),a=Object(r.a)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("nav",{staticClass:"form-buttons"},[i("div",{class:["form-buttons__container",{"is-scrolled":e.isButtonsScrolled},{"form-buttons__container--bordered":e.isContainerBordered}]},[i("g-container",[i("ul",{staticClass:"flex desktop:justify-end"},[e.showPrevBtn?i("li",[i("button",{staticClass:"button button_text",on:{click:function(t){return t.preventDefault(),e.$emit("click-prev")}}},[i("span",{staticClass:"button__span-after"},[i("icon-left"),e._v("\n              "+e._s(e.textPrevBtn)+"\n            ")],1)])]):e._e(),e._v(" "),e.showNextBtn?i("li",[i("button",{staticClass:"button button_primary",on:{click:function(t){return t.preventDefault(),e.$emit("click-next")}}},[i("span",{staticClass:"button__span-after"},[e._v("\n              "+e._s(e.textNextBtn)+"\n            ")])])]):e._e()])])],1)])}),[],!1,null,"6e69ebae",null);t.a=a.exports},1157:function(e,t,i){"use strict";var n=i(1047);i.n(n).a},1171:function(e,t,i){"use strict";var n=i(1058);i.n(n).a},1172:function(e,t,i){"use strict";var n=i(1059);i.n(n).a},1173:function(e,t,i){"use strict";var n=i(1060);i.n(n).a},1174:function(e,t,i){"use strict";var n=i(1061);i.n(n).a},1175:function(e,t,i){"use strict";var n=i(1062);i.n(n).a},1176:function(e,t,i){"use strict";var n=i(1063);i.n(n).a},1177:function(e,t,i){"use strict";var n=i(1064);i.n(n).a},1178:function(e,t,i){"use strict";var n=i(1065);i.n(n).a},1179:function(e,t,i){"use strict";var n=i(1066);i.n(n).a},1180:function(e,t,i){"use strict";var n=i(1067);i.n(n).a},1183:function(e,t,i){"use strict";i(7),i(13),i(3),i(84),i(60),i(26),i(9),i(10),i(8),i(6),i(69),i(108),i(111),i(5);var n=i(15),s=i(0),r=i(11),a=i(18),o=i(1068),c=i(109),l=i(32),d=i(14),u=i.n(d),p=i(533),f=i(24),m=i(1030),h=i(1022),_=i(1017),v=i(76),g=i(165),b=i(1016);i(55);function y(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function C(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?y(Object(i),!0).forEach((function(t){Object(n.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):y(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var x={mixins:[f.a,b.a,m.a],props:{dataLayerInfo:{type:Object,default:function(){}},sms:{type:Object,default:function(){}},model:{type:Object,default:function(){}},resultId:String,uniqueCode:String,agreement:{type:Object,default:function(){return{}}}},data:function(){return{data:{title:"Отправить заявку дилеру",buttonText:"Отправить",success:{title:"Заявка успешно отправлена!",description:"Сотрудник дилерского центра Kia свяжется с Вами в ближайшее время."}},form:{name:null,phone:null,dealer:null},source:"trade_in",isSended:!1}},created:function(){this.fillFormUserData(this.form)},mounted:function(){this.loadAllCities()},computed:C({},Object(a.e)("geo-position",["city"]),{description:function(){return"Отправьте заявку, чтобы получить консультацию по оценке Вашего автомобиля ".concat(this.model.name," и условиям покупки с учетом трейд-ин.")}}),methods:C({},Object(a.b)("geo-position",["loadAllCities"]),{bindObject:function(e,t,i){var n=this;Object.keys(e).forEach((function(s){"object"===Object(l.a)(e[s])?n.bindObject(e[s],"".concat(t,"[").concat(s,"]"),i):i.append("".concat(t,"[").concat(s,"]"),e[s])}))},onSubmit:function(){var e=this,t=new FormData;t.append("source",this.source),t.append("name",this.form.name),t.append("agree",+this.form.agree),t.append("result_id",this.resultId),t.append("unique_code",this.uniqueCode),t.append("agreement_id",this.agreement.id),t.append("dealership_id",this.form.dealer.id),t.append("phone",this.preparePhone(this.form.phone)),t.append("model_code",this.model.model_code),u()(this.sms)||this.bindObject(this.sms,"sms",t),this.sendDataLayerAnalytics(),this.$axios(s.a.createTradeInRequest(t)).then((function(t){t.data.content.success&&(e.isSended=!0,e.$nextTick((function(){window.scrollTo(0,e.$refs.successBlock.offsetTop-150)})))})).catch((function(t){t instanceof g.a&&e.$refs.form.setErrors(e.prepareValidateErrors(t.data,{dealership_id:"dealer"}))}))},sendDataLayerAnalytics:function(){var e={vehicleTransmission:this.dataLayerInfo.transmission,customerLeadVin:this.dataLayerInfo.vin,vehicleEngine:this.dataLayerInfo.engine,driveUnit:this.dataLayerInfo.drive,usedCarMileage:this.dataLayerInfo.mileage,usedCarYearOfIssue:this.dataLayerInfo.usedYear,settlementDate:this.dataLayerInfo.settlementDate,city:this.city.name_en,carBrand:this.dataLayerInfo.brand,tradeInId:this.dataLayerInfo.tradeInId,userLocation:this.city.name_en,tradeInOffer:this.dataLayerInfo.tradeInPrice};this.dataLayerInfo.bodyType&&(e.bodyType=this.dataLayerInfo.bodyType),this.dataLayerInfo.complectationName&&(e.vehicleTrim=this.dataLayerInfo.complectationName),this.dataLayerInfo.generation&&(e.carGeneration=this.dataLayerInfo.generation),this.dataLayerInfo.ownerCount&&(e.usedCarNumberOfOwners=this.dataLayerInfo.ownerCount),this.$auth.user&&(e.kiaCustomerId=this.$auth.user.id),this.dataLayerPush("Lead","Trade-in","Lead submit",e)}}),components:{NavLink:p.default,IconEdit:c.a,DealerChoice:h.a,LicenseButton:_.a,ValidationObserver:v.a,ValidationProvider:v.b}},O=i(2),P=Object(O.a)(x,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.isSended?[i("div",{ref:"successBlock"},[i("div",{staticClass:"text-x4 mb-4"},[e._v(e._s(e.data.success.title))]),e._v(" "),e.description?i("p",[e._v(e._s(e.description))]):e._e(),e._v(" "),i("div",{staticClass:"form__footer__buttons flex flex-wrap"},[i("div",{staticClass:"form__footer__button"},[i("nuxt-link",{tag:"NavLink",staticClass:"button button_primary",attrs:{to:"/"}},[e._v("На главную")])],1)])])]:[i("div",{staticClass:"text-x5 desktop:text-x4 mb-4 desktop:mb-12"},[e._v("\n      "+e._s(e.data.title)+"\n    ")]),e._v(" "),e.description?i("div",[e._v(e._s(e.description))]):e._e(),e._v(" "),i("ValidationObserver",{ref:"form",scopedSlots:e._u([{key:"default",fn:function(t){var n=t.handleSubmit;return[i("form",{on:{submit:function(t){return t.preventDefault(),n(e.onSubmit)}}},[i("fieldset",[i("ul",{staticClass:"form-fields flex-wrap"},[i("li",[i("ValidationProvider",{attrs:{vid:"name",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[i("g-form-control",{attrs:{type:"text",label:"Имя",error:n[0]},nativeOn:{focusout:function(t){return e.$emit("trade-in-name-input")}},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})]}}],null,!0)})],1),e._v(" "),i("li",[i("ValidationProvider",{attrs:{vid:"phone",rules:"required|phone"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[i("g-form-control",{directives:[{name:"mask",rawName:"v-mask",value:"+7 (###) ###-##-##",expression:"'+7 (###) ###-##-##'"}],attrs:{type:"text",label:"Телефон",placeholder:"+7 (___) ___-__-__",error:n[0]},nativeOn:{focusout:function(t){return e.$emit("trade-in-phone-input")}},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})]}}],null,!0)})],1),e._v(" "),i("li",[i("ValidationProvider",{attrs:{vid:"dealer",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[i("DealerChoice",{attrs:{autoFill:!0,model:e.model,error:n[0],isTradeIn:!0},nativeOn:{click:function(t){return e.$emit("trade-in-dealer-choice")}},model:{value:e.form.dealer,callback:function(t){e.$set(e.form,"dealer",t)},expression:"form.dealer"}})]}}],null,!0)})],1)])]),e._v(" "),i("div",{staticClass:"form-agree"},[i("ValidationProvider",{attrs:{vid:"agree",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[i("g-form-control",{attrs:{id:"agree",name:"agree",type:"checkbox",error:n[0],"has-label":!1},model:{value:e.form.agree,callback:function(t){e.$set(e.form,"agree",t)},expression:"form.agree"}},[i("template",{slot:"label"},[i("LicenseButton",{attrs:{agreement:e.agreement}})],1)],2)]}}],null,!0)})],1),e._v(" "),i("div",{staticClass:"form-button"},[i("button",{staticClass:"button button_primary",attrs:{type:"submit"}},[i("span",{staticClass:"button__span-after"},[e._v("\n              "+e._s(e.data.buttonText)+"\n            ")])])])])]}}])})]],2)}),[],!1,null,null,null).exports,w=i(1075),k=i(37),S=i(1028),I=i(107),j=i(1339),L=i(61),F=i(1038),T=i(1009),D=i(1043),B=i(83),M=i(1027),E=i(374),$=i(1049),H=(i(49),i(27),i(59),i(384)),R=i.n(H),q={mixins:[i(34).a],props:{tradeInResultCode:{type:String,default:null}},data:function(){return{cookieName:"saved_trade_in_results",cookiePath:"/",cookieDomain:"",cookieExpiryDays:90}},methods:{handleTradeInResultCode:function(){if(this.tradeInResultCode){var e=this.getCookie(this.cookieName),t=[];void 0!==e&&(t=e.split(",")),t.push(this.tradeInResultCode),t=R()(t).join(","),this.setCookie(this.cookieName,t,this.cookieExpiryDays,this.cookieDomain,this.cookiePath)}}},mounted:function(){this.handleTradeInResultCode()},watch:{tradeInResultCode:function(){this.handleTradeInResultCode()}}},A=Object(O.a)(q,(function(){var e=this.$createElement;return(this._self._c||e)("div")}),[],!1,null,null,null).exports,z=i(31),N=i(177),V=i(110),U={mixins:[z.a,k.a],props:{model:Object,disclaimer:String},data:function(){return{resize:"400x198"}},components:{Arrow:V.a,IconStar:N.a}},Y=(i(1179),Object(O.a)(U,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"trade-in-result__car mt-3 flex flex-wrap justify-between items-end"},[i("div",[i("div",{staticClass:"flex items-baseline"},[e.model.min_price?i("span",{staticClass:"text-s1 desktop:text-x5"},[e._v("\n        от "+e._s(e.formatMoney(e.model.min_price))+"\n      ")]):e._e(),e._v(" "),e.disclaimer?i("g-button-info",{on:{click:function(t){return e.$emit("price-info")}}}):e._e()],1),e._v(" "),i("div",{staticClass:"mt-3"},[i("nuxt-link",{attrs:{to:{name:"models-code-desc",params:{code:e.model.code}}}},[i("img",{attrs:{src:e.getResizeImagePath(e.model.image_side_view,e.resize)}})])],1),e._v(" "),i("div",{staticClass:"mt-3"},[e.model.trade_in_benefit?i("div",{staticClass:"trade-in-result__car-labels flex flex-wrap"},[i("span",{staticClass:"green"},[e._v("\n          Выгода по трейд-ин до "),i("span",{staticClass:"no-wrap-price"},[e._v(e._s(e.formatMoney(e.model.trade_in_benefit)))])])]):e._e()])]),e._v(" "),i("div",[i("div",{staticClass:"trade-in-result__car-buttons flex flex-wrap mt-3"},[i("nuxt-link",{staticClass:"button button_secondary mb-2 mr-2",attrs:{to:{name:"models-code-configurator",params:{code:e.model.code}}},nativeOn:{click:function(t){return e.$emit("car-conf-click")}}},[i("span",{staticClass:"button__span-after"},[e._v("\n          Конфигуратор\n        ")])]),e._v(" "),i("nuxt-link",{staticClass:"button button_secondary mb-2 mr-2",attrs:{to:{name:"models-code-cars",params:{code:e.model.code}}},nativeOn:{click:function(t){return e.$emit("car-stock-click")}}},[i("span",{staticClass:"button__span-after"},[e._v("\n          Авто в наличии\n        ")])]),e._v(" "),i("nuxt-link",{staticClass:"button button_secondary",attrs:{to:{name:"models-code-calc",params:{code:e.model.code}}},nativeOn:{click:function(t){return e.$emit("car-credit-click")}}},[i("span",{staticClass:"button__span-after"},[e._v("\n          Рассчитать кредит\n        ")])])],1)])])}),[],!1,null,"2063a4f4",null).exports),G=i(1070),K=i(1036),W=i(534),Q=i(56),J=i.n(Q);function X(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Z(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?X(Object(i),!0).forEach((function(t){Object(n.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):X(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var ee={mixins:[f.a,k.a,S.a],props:{result:Object,selected:Object,isResultLoading:Boolean,tradeInRequestAgreement:Object,isPopup:Boolean,showOffers:{type:Boolean,default:!0}},data:function(){return{smsPopupIsOpen:!1,dateOptions:{month:"2-digit",day:"2-digit",year:"numeric"},popup:{data:{},isOpened:!1},popupConfigId:{data:{},isOpened:!1},popupOffer:{},loadingPdf:!1,scrolledToForm:!1,isOpenDisclaimer:!0,needOfferConfirm:!1,isOfferPopupOpen:!1,isPopupFavoriteOpened:!1,popupFormComponent:"AddedTradeIn",popupFormProps:{},isPopupPdfSendingOpened:!1,pageName:"trade-in"}},mounted:function(){var e=this;if(0===this.result.price)this.dataLayerPush("Trade-in","Results","Not possible to estimate",null,!0);else{var t={vehicleTransmission:J()(this.selected,"gearbox.code",null),vehicleTrim:J()(this.selected,"complectation.name",null),customerLeadVin:J()(this.selected,"vin",null),vehicleEngine:J()(this.selected,"engine.code",null),driveUnit:J()(this.selected,"drive.code",null),usedCarMileage:J()(this.selected,"mileage",null),usedCarYearOfIssue:J()(this.selected,"year.name",null),usedCarNumberOfOwners:J()(this.selected,"ownerCount",null),settlementDate:this.formatDate(this.result.created_at||this.date,this.dateOptions),city:J()(this.selected,"city.name_en",null),bodyType:J()(this.selected,"modification.body_type",null),carBrand:J()(this.selected,"brand.name",null),carGeneration:J()(this.selected,"generation.name",null),tradeInId:J()(this.result,"unique_code",null),userLocation:J()(this.selected,"city.name_en",null),tradeInOffer:J()(this.result,"marginalityPrice",null)};this.$auth.user&&(t.KiaCustomerId=this.$auth.user.id),void 0!==this.result.kiaModel&&void 0!==this.result.kiaModel.unique_id&&(t.VehicleModelYear=this.result.kiaModel.unique_id.substr(4,4)),this.dataLayerPush("Trade-in","Results","Complete",t,!0)}this.$route.query.scrollToForm&&setTimeout((function(){e.requestButtonClickHandler()})),this.showRequest&&!this.isPopup&&window.addEventListener("scroll",this.handleScroll),this.addWatched({type:W.watchedTypes.tradeIn,id:this.result.id})},computed:Z({},Object(a.e)("calculator",["offers","selectedOffers","disabledOffers","isPopupCreditSelected"]),{},Object(a.c)("trade-in",["modelName"]),{},Object(a.e)("trade-in",["unique_code","popupDisclaimer","isFavoriteLoading","isFavorite","date","vin"]),{model:function(){var e=this.selected.year.name||"";return{name:"".concat(this.selected.brand.name," ").concat(this.selected.model.name," ").concat(e),model_code:this.result.kiaModel?this.result.kiaModel.external_id:""}},showRequest:function(){return!this.isResultLoading&&this.result.price&&this.tradeInRequestAgreement.id},resultItems:function(){var e=[],t=this.selected.vin||this.vin;return t&&e.push({name:"VIN",value:t}),this.selected.brand&&e.push({name:"Марка",value:this.selected.brand.name}),this.selected.model&&e.push({name:"Модель",value:this.selected.model.name}),this.selected.year&&e.push({name:"Год выпуска",value:this.selected.year.name}),this.selected.generation&&""!==this.selected.generation.name&&e.push({name:"Поколение",value:this.selected.generation.name}),this.selected.configuration&&e.push({name:"Тип кузова",value:this.selected.configuration.name}),this.selected.engine&&e.push({name:"Двигатель",value:this.selected.engine.name}),this.selected.drive&&e.push({name:"Привод",value:this.selected.drive.name}),this.selected.gearbox&&e.push({name:"КПП",value:this.selected.gearbox.name}),this.selected.modification&&e.push({name:"Модификация",value:this.selected.modification.name}),this.formatedMileage&&e.push({name:"Пробег",value:this.formatedMileage}),this.selected.complectation&&e.push({name:"Комплектация",value:this.selected.complectation.name}),this.selected.ownerCount&&e.push({name:"Владельцев",value:this.selected.ownerCount}),this.selected.ptsType&&e.push({name:"ПТС",value:this.selected.ptsType.name}),this.selected.city&&e.push({name:"Город",value:this.selected.city.name}),e},resultItemsColumns:function(){return[this.resultItemsFirstColumn,this.resultItemsSecondColumn]},resultItemsFirstColumn:function(){return this.resultItems.slice(0,Math.round(this.resultItems.length/2))},resultItemsSecondColumn:function(){return this.resultItems.slice(-Math.floor(this.resultItems.length/2))},formatedMileage:function(){if(!this.selected.mileage)return null;var e=parseInt(this.selected.mileage);return e>0?this.formatNumber(e," "," "):null},formTradeInPosition:function(){return J()(this.$refs.formTradeIn,"$el.offsetTop",150)-150},tradeInOffers:function(){return Object.values(this.offers).filter((function(e){return e.is_traid_in}))},pdfSendingProps:function(){return{page:this.pageName,formData:this.formData,modelName:this.modelName,uniqueId:this.unique_code||this.result.unique_code,header:"Отправить ссылку на расчет трейд-ин по email",uniqueUrl:this.uniquerUrl,source:"trade-in"}},smsSendingProps:function(){return{header:"Отправить ссылку на расчет трейд-ин по sms",linkOn:"расчет трейд-ин",code:"trade-in",dynamic_variables:{"trade-in_id":this.result.unique_code,model_name:this.modelName},source:"trade-in"}},smsConfirmProps:function(){return{code:"confirm-trade-in",dynamic_variables:{"trade-in_id":this.result.unique_code,model_name:this.modelName}}},formData:function(){var e=new FormData;this.selected.year&&e.append("year",this.selected.year.name),this.selected.drive&&e.append("drive",this.selected.drive.name),this.selected.engine&&e.append("engine",this.selected.engine.name),this.selected.gearbox&&e.append("gearbox",this.selected.gearbox.name),this.selected.ptsType&&e.append("ptsType",this.selected.ptsType.name),this.selected.ownerCount&&e.append("ownerCount",this.selected.ownerCount),this.selected.generation&&e.append("generation",this.selected.generation.name),this.selected.modification&&e.append("modification",this.selected.modification.name),this.selected.configuration&&e.append("configuration",this.selected.configuration.name),this.selected.complectation&&e.append("complectation",this.selected.complectation.name);var t=this.selected.vin||this.vin;return t&&e.append("vin",t),e.append("price",this.result.price),e.append("city",this.selected.city.name),e.append("mileage",this.selected.mileage),e.append("brand",this.selected.brand.name),e.append("model",this.selected.model.name),e.append("marginalityPrice",this.result.marginalityPrice),e.append("createdAt",this.result.created_at||this.date),e.append("unique_code",this.result.unique_code),e},uniquerUrl:function(){return window.location.origin+"/t/"+this.result.unique_code+"/"},prepareDataLayerInfo:function(){return{complectationName:this.selected.complectation?this.selected.complectation.name:null,vin:this.selected.vin,mileage:this.selected.mileage,usedYear:this.selected.year.id,owners:this.selected.ownerCount,brand:this.selected.brand?this.selected.brand.name:null,generation:this.selected.generation?this.selected.generation.name:null,tradeInId:this.result.unique_code,tradeInPrice:this.result.marginalityPrice,settlementDate:this.formatDate(this.result.created_at||this.date,this.dateOptions),bodyType:this.selected.configuration?this.selected.configuration.name:null,transmission:this.selected.gearbox?this.selected.gearbox.name:null,engine:this.selected.engine?this.selected.engine.name:null,drive:this.selected.drive?this.selected.drive.name:null}}}),methods:Z({},Object(a.d)("trade-in",["setUniqueCode","setPrice","setMarginalityPrice","setIsFavoriteLoading","setIsFavorite"]),{},Object(a.d)("calculator",["setOffer"]),{},Object(a.b)("watched",["addWatched"]),{toggleSmsPopup:function(){this.smsPopupIsOpen||this.dataLayerPush("Saving","Send trade-in in sms"),this.smsPopupIsOpen=!this.smsPopupIsOpen},onFavoriteClick:function(){var e=this;this.setIsFavoriteLoading(!0),this.dataLayerPush("Saving","Add trade-in to favorites"),this.$axios(r.a.addFavorite("trade_in",this.result.id)).then((function(t){e.popupFormProps={selected:e.selected,uniqueId:e.result.unique_code,alreadyAdded:!1,success:!1},t.data.content.success?(e.setIsFavorite(!0),e.popupFormProps.success=!0):1==t.data.error&&"favorite_already_added_exception"===t.data.content.error_code&&(e.setIsFavorite(!0),e.popupFormProps.alreadyAdded=!0),e.isPopupFavoriteOpened=!0})).finally((function(){e.setIsFavoriteLoading(!1)}))},requestButtonClickHandler:function(){this.dataLayerPush("Trade-in","Results","Trade-in request to dealer");var e=document.getElementById("trade_in_request");window.scrollTo(0,e.offsetTop-150)},createTradeInPdf:function(){var e=this;this.loadingPdf||(this.loadingPdf=!0,s.a.createTradeInPdf(this.formData,this.selected.brand.name,this.selected.model.name).finally((function(){s.a.getTradeInPdfLink(e.formData).then((function(t){e.dataLayerPush("Saving","Download pdf",t)})),e.loadingPdf=!1})))},sendTradeInEmail:function(){},sendTradeInSms:function(){},handleScroll:function(e){!this.scrolledToForm&&window.scrollY>=this.formTradeInPosition?this.scrolledToForm=!0:this.scrolledToForm&&window.scrollY<this.formTradeInPosition&&(this.scrolledToForm=!1)},prepareEngine:function(){return this.selected.modification?this.selected.engine?"".concat(this.selected.modification.name," / ").concat(this.selected.engine.name):this.selected.modification.name:this.selected.engine?this.selected.engine.name:""},toggleDisclaimer:function(){this.isOpenDisclaimer=!this.isOpenDisclaimer},openPopup:function(){this.dataLayerPush("Info pop-up","Trade-in id description","Open"),Object.assign(this,{popupConfigId:{data:{title:"ID трейд-ин расчета",description:"\n                <p>ID трейд-ин расчета — это код, который хранит все детали вашего расчета, указанные параметры автомобиля, а так же расчетную стоимость при сдаче в трейд-ин.</p>\n                <p>Сохраните ссылку или код и откройте ваш расчет в любое время с любого устройства.</p>\n                <p>Код действует 3 месяца.</p>\n              ",buttonClose:!0},isOpened:!0}})},openPricePopup:function(){this.dataLayerPush("Info pop-up","Price description","Open"),Object.assign(this,{popup:{data:{description:this.result.kiaModelPriceDisclaimer,buttonClose:!0},isOpened:!0}})},closePopup:function(){Object.assign(this,{popup:{data:{},isOpened:!1}})},closePopupConfigId:function(){Object.assign(this,{popupConfigId:{data:{},isOpened:!1}})},showPopupOffer:function(e){this.popupOffer=e,this.isOfferPopupOpen=!0},closePopupOffer:function(){this.isOfferPopupOpen=!1},copyUrlToClipboard:function(e){this.dataLayerPush("Saving","Copy link");var t,i=this.$refs.copyButton,n=this.$refs.copyInput;clearTimeout(t),n.value=this.uniquerUrl,n.select(),document.execCommand("copy"),i.classList.add("hinted_callback-done"),t=setTimeout((function(){i.classList.remove("hinted_callback-done")}),2e3)},isDisabledOffer:function(e){return this.disabledOffers.includes(e)},selectOffer:function(e,t){this.isPopupCreditSelected&&!this.inCredit?(t.preventDefault(),this.popupOffer=e,this.needOfferConfirm=!0):this.setOffer(e)},submitPopupTradeIn:function(){this.dataLayerPush("Calculator pop-up","Trade-in","Apply"),this.isPopupCreditSelected&&this.unique_code!==this.result.unique_code?this.needOfferConfirm=!0:this.setTradeIn()},setTradeIn:function(){this.setUniqueCode(this.result.unique_code),this.setPrice(this.result.price),this.setMarginalityPrice(this.result.marginalityPrice),this.$emit("submit-popup")},firstStep:function(){this.dataLayerPush("Calculator pop-up","Trade-in","Recalculate"),this.setUniqueCode(null),this.$emit("first-step")},closeOfferConfirmPopup:function(){this.needOfferConfirm=!1},applyOfferConfirmPopup:function(){this.needOfferConfirm=!1,this.$emit("clear-credit"),this.setTradeIn()},closePopupFavorite:function(){this.isPopupFavoriteOpened=!1},openPdfSubmissionForm:function(){this.dataLayerPush("Saving","Send trade-in to email"),this.isPopupPdfSendingOpened=!0},closePdfSubmissionForm:function(){this.isPopupPdfSendingOpened=!1},toFormClick:function(){this.dataLayerPush("Trade-in","Results","Edit car characteristics"),this.$emit("prev-step")}}),components:{Popup:B.a,Loader:I.a,CarCard:Y,Results:A,IconLink:$.a,IconEdit:c.a,ViewAlso:w.a,LinkBySms:j.a,Preloader:T.a,PopupOffer:M.a,Disclaimer:o.a,FormTradein:P,PopupContent:E.a,DocumentIcon:L.a,TrickRightIcon:F.a,PriceInfoContent:D.a,ConfirmOfferPopup:G.a,PopupContentForm:K.a}},te=(i(1180),Object(O.a)(ee,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"trade-in-calc__summary",class:{"mt-14":!e.isPopup}},[i("g-padding",[i("g-container",[i("div",{staticClass:"trade-in-calc__summary-header",class:{"trade-in-calc__summary-header_popup":e.isPopup}},[e.isPopup?i("div",[i("div",{staticClass:"text-x5 desktop:text-x4 mb-6"},[e._v("\n            Трейд-ин оценка\n          ")])]):i("div",{staticClass:"text-x5 desktop:text-x4"},[e._v("Расчетная цена "+e._s(e.model.name))]),e._v(" "),e.isResultLoading?i("Loader"):[e.result.price>0&&e.isPopup?[i("div",{staticClass:"popup-result-content mt-4"},[i("div",{staticClass:"bg-pale-beige pt-8 px-4 pb-2"},[i("div",{staticClass:"desktop:flex justify-between"},[i("div",{staticClass:"mb-8"},[e.isPopup?i("span",{staticClass:"text-s1"},[e._v("\n                      Расчетная стоимость\n                    ")]):e._e(),e._v(" "),i("span",{staticClass:"text-s1 nowrap"},[e._v("\n                      "+e._s(e.model.name)+"\n                    ")]),e._v(" "),i("div",{staticClass:"tablet:flex items-end"},[i("div",{staticClass:"mt-4 tablet:mt-0 tablet:mr-6"},[i("div",{staticClass:"text-x5 mt-2"},[e._v(e._s(e.formatMoney(e.result.marginalityPrice)))]),e._v(" "),i("div",{staticClass:"text-s3 color-black mt-1"},[e._v("\n                          При сдаче в трейд-ин\n                        ")])]),e._v(" "),i("div",{staticClass:"mt-4 tablet:mt-0"},[i("div",{staticClass:"text-x6 mt-2"},[e._v(e._s(e.formatMoney(e.result.price)))]),e._v(" "),i("div",{staticClass:"text-s3 color-black mt-1 tablet:mt-2"},[e._v("\n                          При самостоятельной продаже\n                        ")])])])]),e._v(" "),i("div",{staticClass:"popup-result-content__offers mb-8"},[e.tradeInOffers.length&&e.showOffers?i("div",{staticClass:"mt-6 desktop:mt-0 desktop:ml-2 desktop:ml-4"},[i("div",{staticClass:"text-s1"},[e._v("Выберите спецпредложение")]),e._v(" "),e._l(e.tradeInOffers,(function(t){return i("div",{key:t.id,staticClass:"catalog-detail-summary__offers-item"},[i("g-checkbox",{attrs:{id:t.id,val:t.id,label:t.name,value:e.selectedOffers,disabled:e.isDisabledOffer(t.id)},on:{click:function(i){return e.selectOffer(t,i)}}}),e._v(" "),i("div",{staticClass:"catalog-detail-summary__offers-item-price"},[e._v("\n                          Выгода - "+e._s(e.formatMoney(t.price))+"\n                        ")]),e._v(" "),t.description||t.advantage_text||t.condition_text?i("button",{staticClass:"offer__info-button",on:{click:function(i){return i.stopPropagation(),e.showPopupOffer(t)}}},[i("g-info-icon")],1):e._e()],1)}))],2):e._e()])]),e._v(" "),i("div",{staticClass:"text-s3 color-disabled-gray mt-1 mb-2 pt-2",staticStyle:{"border-top":"1px solid #cccccc"}},[e._v("\n                  Расчёт носит информационный характер и не является публичной офертой\n                ")])])])]:e.result.price>0?[i("div",{staticClass:"flex items-center justify-between flex-wrap"},[i("div",{staticClass:"flex flex-wrap mb-4"},[i("div",{staticClass:"mt-5 mr-10"},[i("div",{staticClass:"text-s3 mb-1"},[e._v("\n                    При сдаче в трейд-ин\n                  ")]),e._v(" "),i("div",{staticClass:"text-x4"},[e._v("\n                    "+e._s(e.formatMoney(e.result.marginalityPrice))+"\n                  ")])]),e._v(" "),i("div",{staticClass:"mt-5"},[i("div",{staticClass:"text-s3 mb-1"},[e._v("\n                    При самостоятельной продаже\n                  ")]),e._v(" "),i("div",{staticClass:"text-x5 pt-1"},[e._v("\n                    "+e._s(e.formatMoney(e.result.price))+"\n                  ")])])]),e._v(" "),e.showRequest?i("div",{staticClass:"mt-4 desktop:mt-0 items-center desktop:flex mb-4"},[i("div",{staticClass:"text-s2i-b desktop:ml-4"},[e._v("\n                  Хотите сдать авто по программе трейд-ин?\n                ")]),e._v(" "),i("div",{staticClass:"mt-6 desktop:mt-0 desktop:ml-7"},[i("a",{staticClass:"button button_primary",attrs:{href:"javascript:"},on:{click:e.requestButtonClickHandler}},[i("span",{staticClass:"button__span-after"},[e._v("\n                      Оставить заявку дилеру\n                    ")])])])]):e._e()])]:0===e.result.price?i("div",{staticClass:"mt-4 error-calc"},[e._v("\n            К сожалению, по указанным параметрам сделать расчет не удалось.\n          ")]):[e._v("\n            Ошибка расчета стоимости. Попробуйте изменить характеристики автомобиля.\n          ")]],e._v(" "),e.isPopup?i("div",{staticClass:"mt-6"},[i("div",{staticClass:"desktop:flex flex-wrap"},[e.result.price>0?i("g-button",{staticClass:"button_fixed-width-desktop mb-2 desktop:mr-4",nativeOn:{click:function(t){return e.submitPopupTradeIn(t)}}},[e._v("\n              Применить\n            ")]):e._e(),e._v(" "),i("g-button",{staticClass:"button_fixed-width-desktop mb-2",attrs:{inverted:"",hasBorder:""},nativeOn:{click:function(t){return e.firstStep(t)}}},[e._v("\n              Пересчитать\n            ")])],1)]):e._e()],2),e._v(" "),e.result.unique_code?i("div",{class:["mt-6",{"calc-font":e.isPopup}]},[i("span",[e._v("Дата расчета: "+e._s(e.formatDate(e.result.created_at||e.date,e.dateOptions)))])]):e._e(),e._v(" "),e.result.unique_code?i("div",{class:["unique-id my-6",{"unique-id_popup":e.isPopup}]},[i("div",{staticClass:"unique-id__info"},[i("div",{staticClass:"unique-id__info-title text-s2-b"},[i("div",{staticClass:"inline-flex items-center"},[i("div",[e._v("\n                Ваш ID расчета трейд-ин\n              ")]),e._v(" "),i("g-button-info",{staticClass:"unique-id__info-button hinted hinted_bottom",on:{click:e.openPopup}})],1)]),e._v(" "),i("div",{staticClass:"unique-id__info-code text-x5",on:{click:e.copyUrlToClipboard}},[i("div",{ref:"copyButton",staticClass:"unique-id__info-code-content hinted hinted_bottom hinted_callback"},[i("input",{ref:"copyInput",staticClass:"unique-id__info-code-input",attrs:{name:"copyInput",value:""}}),e._v("\n\n              "+e._s(e.result.unique_code)+"\n\n              "),i("div",{staticClass:"hinted-text"},[e._v("\n                Ссылка скопирована\n              ")])]),e._v(" "),i("IconLink",{staticClass:"ml-2"})],1)]),e._v(" "),i("div",{staticClass:"unique-id__links"},[e.result.unique_code?i("div",{staticClass:"unique-id__links-item"},[e.isFavorite?i("div",[e._v("\n              Сохранено в избранном\n            ")]):i("div",[e.isFavoriteLoading?[i("Loader",{attrs:{inline:!0}})]:[i("a",{attrs:{href:"javascript:"},on:{click:e.onFavoriteClick}},[e._v("\n                  Сохранить в избранное\n                ")])]],2)]):e._e(),e._v(" "),i("div",{staticClass:"unique-id__links-item"},[i("a",{attrs:{href:"javascript:"},on:{click:e.createTradeInPdf}},[e._v("\n              Загрузить расчет в pdf\n            ")])]),e._v(" "),i("div",{staticClass:"unique-id__links-item"},[i("a",{attrs:{href:"javascript:"},on:{click:e.openPdfSubmissionForm}},[e._v("\n              Отправить на email\n            ")])]),e._v(" "),i("div",{staticClass:"unique-id__links-item"},[i("a",{attrs:{href:"javascript:"},on:{click:e.toggleSmsPopup}},[e._v("\n              Отправить по sms\n            ")])])])]):e._e(),e._v(" "),e.isPopup?e._e():i("div",{staticClass:"trade-in-calc__summary-info mt-14 mb-12"},[i("div",{staticClass:"inline-flex items-center cursor-pointer text-s1 mb-6"},[e._v("\n          Характеристики авто\n          "),i("IconEdit",{staticClass:"ml-2 color-black",on:{click:e.toFormClick}})],1),e._v(" "),i("div",{staticClass:"trade-in-calc__summary-info-params tablet:flex"},e._l(e.resultItemsColumns,(function(t,n){return i("div",{key:n,staticClass:"trade-in-calc__summary-info-params-section"},e._l(t,(function(t,n){return i("dl",{key:n},[i("dt",[e._v(e._s(t.name))]),e._v(" "),i("dd",[e._v(e._s(t.value))])])})),0)})),0),e._v(" "),e.result.kiaModel?i("div",[i("div",{staticClass:"text-x5 desktop:text-x4 mt-14"},[e._v("\n            Выбранный автомобиль: Kia "+e._s(e.result.kiaModel.modelLine)+"\n          ")]),e._v(" "),i("car-card",{attrs:{model:e.result.kiaModel,disclaimer:e.result.kiaModelPriceDisclaimer},on:{"price-info":e.openPricePopup,"car-conf-click":function(t){return e.dataLayerPush("Trade-in","Results","Configurator")},"car-stock-click":function(t){return e.dataLayerPush("Trade-in","Results","Car locator")},"car-credit-click":function(t){return e.dataLayerPush("Trade-in","Results","Loan calculator")}}})],1):e._e()])])],1),e._v(" "),e.showRequest&&!e.isPopup?i("g-form-wrapper",[i("FormTradein",{ref:"formTradeIn",attrs:{id:"trade_in_request",agreement:e.tradeInRequestAgreement,model:e.model,resultId:e.result.id,uniqueCode:e.result.unique_code,sms:e.smsConfirmProps,dataLayerInfo:e.prepareDataLayerInfo},on:{"trade-in-name-input":function(t){return e.dataLayerPush("Form","Results","First name")},"trade-in-phone-input":function(t){return e.dataLayerPush("Form","Results","Phone")},"trade-in-dealer-choice":function(t){return e.dataLayerPush("Dealer search pop-up","Open")}}})],1):e._e(),e._v(" "),i("PopupOffer",{attrs:{offer:e.popupOffer,"is-popup-shown":e.isOfferPopupOpen},on:{"toggle-info-popup":e.closePopupOffer}}),e._v(" "),e.needOfferConfirm?i("ConfirmOfferPopup",{on:{cancel:e.closeOfferConfirmPopup,apply:e.applyOfferConfirmPopup}}):e._e(),e._v(" "),e.popupConfigId.isOpened?i("Popup",[i("PopupContent",{attrs:{popup:e.popupConfigId.data},on:{"toggle-info-popup":e.closePopupConfigId}})],1):e._e(),e._v(" "),e.popup.isOpened?i("popup",[i("price-info-content",{attrs:{popup:e.popup.data},on:{"toggle-info-popup":e.closePopup}})],1):e._e(),e._v(" "),i("g-padding",[i("g-container",[e.isPopup?e._e():i("ViewAlso",{on:{"view-also-credit-click":function(t){return e.dataLayerPush("Navigation","Additional information","Loan calculator")},"view-also-special-click":function(t){return e.dataLayerPush("Navigation","Additional information","Special offers for purchase")},"view-also-models-click":function(t){return e.dataLayerPush("Navigation","Additional information","All models")}}}),e._v(" "),i("Disclaimer",{staticClass:"mt-12 mb-16",attrs:{"is-popup":e.isPopup,text:e.popupDisclaimer,color:"color-disabled-gray",open:e.isOpenDisclaimer},on:{"toggle-disclaimer":e.toggleDisclaimer}})],1)],1),e._v(" "),i("Results",{attrs:{tradeInResultCode:e.result.unique_code}}),e._v(" "),e.isPopupFavoriteOpened?i("Popup",[i("PopupContentForm",{attrs:{"component-name":e.popupFormComponent,"component-props":e.popupFormProps},on:{"close-popup":e.closePopupFavorite}})],1):e._e(),e._v(" "),e.isPopupPdfSendingOpened?i("Popup",[i("PopupContentForm",{attrs:{"component-name":"SendPdf","component-props":e.pdfSendingProps},on:{"close-popup":e.closePdfSubmissionForm,"send-pdf-email-input":function(t){return e.dataLayerPush("Form","Send trade-in to email","Email")}}})],1):e._e(),e._v(" "),e.smsPopupIsOpen?i("Popup",[i("PopupContentForm",{attrs:{"component-name":"LinkBySms","component-props":e.smsSendingProps},on:{"close-popup":e.toggleSmsPopup,"link-by-sms-input":function(t){return e.dataLayerPush("Form","Send trade-in in sms","Phone")}}})],1):e._e()],1)}),[],!1,null,"185c0654",null).exports),ie=i(997),ne={props:{selected:Object,tradeInRequestAgreement:Object,isResultLoading:Boolean,result:Object,applyTradeInProgram:Boolean,showOffers:{type:Boolean,default:!0},isPopup:{type:Boolean,default:function(){return!1}}},created:function(){return this.isPopup?Object(ie.a)(this.$store,this.$error,"trade-in/loadPopupDisclaimer","buy-trade-in-result").then((function(){}),(function(){})):Object(ie.a)(this.$store,this.$error,"layout/loadDisclaimer","buy-trade-in-result").then((function(){}),(function(){}))},activated:function(){this.isPopup?document.getElementsByClassName("popup-tradein__content")[0].scrollTo(0,0):window.scrollTo(0,0)},components:{Final:te}},se=Object(O.a)(ne,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("Final",{attrs:{selected:e.selected,result:e.result,isResultLoading:e.isResultLoading,tradeInRequestAgreement:e.tradeInRequestAgreement,isPopup:e.isPopup,"show-offers":e.showOffers},on:{"prev-step":function(t){return e.$emit("prev-step")},"submit-popup":function(t){return e.$emit("submit-popup")},"first-step":function(t){return e.$emit("first-step")},"clear-credit":function(t){return e.$emit("clear-credit")}}})}),[],!1,null,null,null);t.a=se.exports},1184:function(e,t,i){"use strict";i(7),i(3),i(375),i(38),i(26),i(9),i(10),i(8),i(5);var n=i(15),s=i(18),r=i(14),a=i.n(r),o=i(1068),c=i(382),l=i(110),d=i(1083),u={props:{brands:Array},computed:{groupedBrands:function(){var e={};return this.brands.forEach((function(t){var i=t.name.substr(0,1);e[i]?e[i].push(t):e[i]=[t]})),e}},components:{IconStar:d.a}},p=(i(1173),i(2)),f=Object(p.a)(u,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"trade-in-calc__models-list mt-8"},e._l(e.groupedBrands,(function(t,n){return i("div",{key:n,staticClass:"trade-in-calc__models-item"},[i("div",{staticClass:"trade-in-calc__models-item-letter text-x4"},[e._v("\n      "+e._s(n)+"\n    ")]),e._v(" "),i("ul",e._l(t,(function(t,n){return i("li",{key:n,on:{click:function(i){return e.$emit("select-brand",t.id)}}},[t.has_star?i("IconStar",{staticClass:"trade-in-calc__models-item-star color-kia-red"}):e._e(),e._v("\n        "+e._s(t.name)+"\n      ")],1)})),0)])})),0)}),[],!1,null,"2dfe4764",null).exports,m={props:{brands:Array},components:{IconTickRight:l.a,IconStar:d.a}},h=(i(1174),Object(p.a)(m,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"trade-in-calc__models-featured mt-8 mb-6"},[i("ul",[e._l(e.brands,(function(t,n){return i("li",{key:n,on:{click:function(i){return e.$emit("select-brand",t.id)}}},[t.has_star?i("IconStar",{staticClass:"trade-in-calc__models-item-star color-forest-green"}):e._e(),e._v("\n      "+e._s(t.name)+"\n    ")],1)})),e._v(" "),i("li",[i("div",{staticClass:"inline-flex items-center text-s2-b cursor-pointer",on:{click:function(t){return e.$emit("select-all-tab")}}},[e._v("\n        Все марки\n        "),i("IconTickRight")],1)])],2)])}),[],!1,null,"8d9e21b8",null).exports),_=i(107),v=i(24),g=i(76),b=i(50),y=i.n(b);function C(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function x(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?C(Object(i),!0).forEach((function(t){Object(n.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):C(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}i(1048);var O={mixins:[v.a],data:function(){return{isLoading:!1,activeTabIndex:0,vin:null,vinError:null}},props:{brands:Array,currentVin:String,isPopup:{type:Boolean,default:function(){return!1}}},created:function(){a()(this.brands)&&this.loadBrands(),this.dataLayerPush("Trade-in","Select car brand","Start",null,!0)},computed:x({wrapperClass:function(){return this.isPopup?"trade-in-calc":"trade-in-calc mt-8 mb-12"}},Object(s.e)("trade-in",["brand"]),{tabs:function(){var e=[];return this.popularBrands.length&&e.push({name:"Популярные",code:"popular"}),e.push({name:"Все марки",code:"all"}),e},currentTab:function(){return this.tabs[this.activeTabIndex]},categoryTabs:function(){return this.tabs.map((function(e){return e.name}))},allBrands:function(){return this.brands.map((function(e){return e.has_star="kia"===e.name.toLowerCase(),e}))},popularBrands:function(){return this.allBrands.filter((function(e){return e.is_popular}))}}),methods:x({},Object(s.b)("trade-in",["loadBrands"]),{},Object(s.d)("trade-in",["setUniqueCode"]),{selectCategory:function(e){this.activeTabIndex=e,this.dataLayerPush("Trade-in","Select car brand",0===e?"All brands":"Popular brands")},selectTabByCode:function(e){var t=y()(this.tabs,{code:e});-1!==t&&(this.activeTabIndex=t)},selectBrandHandler:function(e){this.vin=null,this.$emit("select-brand",e);var t=this.brands.find((function(t){return t.id===e})).name;this.dataLayerPush("Trade-in","Select car brand","Select brand",{CarBrand:t})},onSubmit:function(){this.vin&&this.vin.length&&(this.$emit("decode-vin",this.vin),this.currentVin!==this.vin&&this.showLoader())},showLoader:function(){this.isLoading=!0},hideLoader:function(){this.isLoading=!1},onVinDecodeSuccess:function(){this.hideLoader(),this.vinError=null},onVinDecodeFail:function(){this.hideLoader(),this.vinError="Ошибка расшифровки VIN номера"}}),activated:function(){this.isPopup?document.getElementsByClassName("popup-tradein__content")[0].scrollTo(0,0):window.scrollTo(0,0)},components:{Disclaimer:o.a,NavTabs:c.a,AllBrands:f,PopularBrands:h,IconTickRight:l.a,ValidationProvider:g.b,ValidationObserver:g.a,Loader:_.a}},P=(i(1175),Object(p.a)(O,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:e.wrapperClass},[i("g-padding",[i("g-container",[e.isPopup?i("div",[i("div",{staticClass:"text-x5 desktop:text-x4 mb-6"},[e._v("\n          Трейд-ин оценка\n        ")]),e._v(" "),i("div",{staticClass:"text-s1 mb-3"},[e._v("\n          Оцените свой авто\n        ")])]):i("div",{staticClass:"text-x5 tablet:text-x4 mb-6 tablet:mb-8"},[e._v("\n        Ваш автомобиль\n      ")]),e._v(" "),i("ValidationObserver",{scopedSlots:e._u([{key:"default",fn:function(t){var n=t.handleSubmit;return[i("div",{staticClass:"trade-in-calc__car flex"},[i("div",{staticClass:"trade-in-calc__car-input"},[i("ValidationProvider",{attrs:{rules:"length:17"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[i("g-form-control",{attrs:{type:"text",placeholder:"Введите VIN-номер",addClassName:"form-control_common w-full",error:n[0]||e.vinError},model:{value:e.vin,callback:function(t){e.vin=t},expression:"vin"}})]}}],null,!0)})],1),e._v(" "),i("div",{staticClass:"trade-in-calc__car-button"},[i("button",{staticClass:"trade-in-calc__car-button-item button button_primary button_small",on:{click:function(t){return n(e.onSubmit)}}},[i("IconTickRight")],1)])]),e._v(" "),i("div",{staticClass:"trade-in-calc__vin-loader"},[e.isLoading?i("Loader"):e._e()],1)]}}])}),e._v(" "),e.brands.length?i("div",{staticClass:"trade-in-calc__models mt-10"},[i("div",{staticClass:"trade-in-calc__models-header mb-4"},[i("span",{staticClass:"trade-in-calc__models-header-title"},[e._v("\n            Или выберите из списка\n          ")])]),e._v(" "),i("NavTabs",{attrs:{tabs:e.categoryTabs,activeTabIndex:e.activeTabIndex},on:{"select-tab":e.selectCategory}}),e._v(" "),i("keep-alive",["all"===e.currentTab.code?[i("AllBrands",{attrs:{brands:e.allBrands},on:{"select-brand":e.selectBrandHandler}})]:e._e(),e._v(" "),"popular"===e.currentTab.code?[i("PopularBrands",{attrs:{brands:e.popularBrands},on:{"select-all-tab":function(t){return e.selectTabByCode("all")},"select-brand":e.selectBrandHandler}})]:e._e()],2)],1):e._e(),e._v(" "),i("Disclaimer")],1)],1)],1)}),[],!1,null,"80d4f878",null));t.a=P.exports},1185:function(e,t,i){"use strict";i(7),i(13),i(3),i(375),i(33),i(26),i(9),i(10),i(8),i(5);var n=i(15),s=i(24),r=(i(108),i(1069)),a={mixins:[i(37).a],props:{selected:Object},computed:{formatedMileage:function(){if(!this.selected.mileage)return null;var e=parseInt(this.selected.mileage);return e>0?this.formatNumber(e," "," "):null}},components:{AsideBlock:r.a}},o=(i(1176),i(2)),c=Object(o.a)(a,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("AsideBlock",[i("template",{slot:"title"},[e._v("\n    Ваш автомобиль\n  ")]),e._v(" "),i("template",{slot:"body"},[i("g-container",[i("div",{staticClass:"trade-in-calc__form-aside-title text-x5 mb-6"},[e._v("\n        Ваш автомобиль\n      ")]),e._v(" "),i("div",{staticClass:"trade-in-calc__form-aside-params"},[i("div",{staticClass:"trade-in-calc__form-aside-params-section"},[e.selected.brand?i("dl",[i("dt",[e._v("Марка")]),e._v(" "),i("dd",[e._v(e._s(e.selected.brand.name))])]):e._e(),e._v(" "),e.selected.model?i("dl",[i("dt",[e._v("Модель")]),e._v(" "),i("dd",[e._v(e._s(e.selected.model.name))])]):e._e(),e._v(" "),e.selected.year?i("dl",[i("dt",[e._v("Год выпуска")]),e._v(" "),i("dd",[e._v(e._s(e.selected.year.name))])]):e._e(),e._v(" "),e.selected.generation&&""!==e.selected.generation.name?i("dl",[i("dt",[e._v("Поколение")]),e._v(" "),i("dd",[e._v(e._s(e.selected.generation.name))])]):e._e()]),e._v(" "),i("div",{staticClass:"trade-in-calc__form-aside-params-section"},[e.selected.modification?i("dl",[i("dt",[e._v("Модификация")]),e._v(" "),i("dd",[e._v(e._s(e.selected.modification.name))])]):e._e(),e._v(" "),e.selected.configuration?i("dl",[i("dt",[e._v("Тип кузова")]),e._v(" "),i("dd",[e._v(e._s(e.selected.configuration.name))])]):e._e(),e._v(" "),e.selected.engine?i("dl",[i("dt",[e._v("Двигатель")]),e._v(" "),i("dd",[e._v(e._s(e.selected.engine.name))])]):e._e(),e._v(" "),e.selected.drive?i("dl",[i("dt",[e._v("Привод")]),e._v(" "),i("dd",[e._v(e._s(e.selected.drive.name))])]):e._e(),e._v(" "),e.selected.gearbox?i("dl",[i("dt",[e._v("КПП")]),e._v(" "),i("dd",[e._v(e._s(e.selected.gearbox.name))])]):e._e()]),e._v(" "),i("div",{staticClass:"trade-in-calc__form-aside-params-section"},[e.formatedMileage?i("dl",[i("dt",[e._v("Пробег")]),e._v(" "),i("dd",[e._v(e._s(e.formatedMileage))])]):e._e()]),e._v(" "),i("div",{staticClass:"trade-in-calc__form-aside-params-section trade-in-calc__form-aside-params-section_sep"},[e.selected.complectation?i("dl",[i("dt",[e._v("Комплектация")]),e._v(" "),i("dd",[e._v(e._s(e.selected.complectation.name))])]):e._e(),e._v(" "),e.selected.ownerCount?i("dl",[i("dt",[e._v("Владельцев")]),e._v(" "),i("dd",[e._v(e._s(e.selected.ownerCount))])]):e._e(),e._v(" "),e.selected.ptsType?i("dl",[i("dt",[e._v("ПТС")]),e._v(" "),i("dd",[e._v(e._s(e.selected.ptsType.name))])]):e._e()])])])],1)],2)}),[],!1,null,"22297338",null).exports,l={data:function(){return{}}},d=(i(1177),Object(o.a)(l,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"trade-in-calc__form-content"},[t("div",{staticClass:"trade-in-calc__form-content-body"},[this._t("body")],2),this._v(" "),this._t("footer")],2)}),[],!1,null,"2add09d2",null).exports),u=i(1139),p=i(1068),f=i(163),m=i(76),h=i(14),_=i.n(h),v=i(56),g=i.n(v),b=i(18);function y(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function C(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?y(Object(i),!0).forEach((function(t){Object(n.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):y(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var x={mixins:[s.a],data:function(){return{showAddons:!0,form:this.getDefaultFormData(),formState:{},loaded:!1}},props:{brand:Object,cities:Array,options:Object,selected:Object,enginesById:Object,drivesById:Object,gearboxesById:Object,isFormShort:Boolean,needClearForm:Boolean,isDictionariesLoaded:Boolean,isPopup:{type:Boolean,default:function(){return!1}}},computed:C({selectedCity:function(){var e=this;if(this.isCitiesLoaded&&this.isUserCityLoaded){var t=this.cities.filter((function(t){return t.code===e.geoCity.code}));return _()(t)?null:(this.form.city=t[0],this.selectCityHandler(t[0]),t[0])}},wrapperClass:function(){return this.isPopup?"trade-in-calc__form trade-in-calc__form_popup":"trade-in-calc__form mt-6"},fieldsClass:function(){return this.isPopup?"trade-in-calc__form-fields trade-in-calc__popup-coloumns":"trade-in-calc__form-fields"}},Object(b.e)("geo-position",{geoCity:"city"}),{},Object(b.e)("trade-in",["unique_code","model","year","generation","configuration","modification","complectation","drive","engine","gearbox","ptsType","mileage","steeringWheel","ownerCount","city","isFormChanged"]),{generations:function(){var e=[];return this.form.year&&this.form.year.id&&0!==this.options.generations.length&&this.options.generations.forEach((function(t){e.push({id:t.id,name:""===t.name?"Без поколения":t.name})})),e},isCitiesLoaded:function(){return 0!==this.cities.length},isUserCityLoaded:function(){return 0!==this.geoCity.length}}),methods:C({},Object(b.b)("trade-in",["loadCities","loadBrands","loadDictionaries"]),{},Object(b.d)("trade-in",["setUniqueCode","setIsFormChanged"]),{getDefaultFormState:function(){var e={};return Object.keys(this.form).forEach((function(t){e[t]={loading:!1,disabled:!0}})),e},toggleAddons:function(){this.showAddons=!this.showAddons,setTimeout((function(){window.dispatchEvent(new Event("resize"))}),10)},changeFormState:function(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.formState[e][t]=i},lockFields:function(e){var t=this;e.forEach((function(e){t.changeFormState(e,"disabled")})),-1!==e.indexOf("modification")&&(this.changeFormState("drive","disabled",!1),this.changeFormState("engine","disabled",!1),this.changeFormState("gearbox","disabled",!1)),this.unique_code||this.clearFields(e)},clearFields:function(e){var t=this;-1!==e.indexOf("modification")&&this.form.modification&&(e=e.concat(["drive","engine","gearbox"])),e.forEach((function(e){t.form[e]=null})),this.$emit("clear-form-fields",e)},unlockFields:function(e){var t=this;e.forEach((function(e){t.changeFormState(e,"disabled",!1),t.changeFormState(e,"loading",!1)}))},selectBrandHandler:function(e){this.lockFields(["model","year","generation","configuration","modification","complectation"]),this.changeFormState("model","loading"),this.emitSelectFormEntity("brand",e.id)},onModelsLoaded:function(){var e=this;this.unlockFields(["model"]),this.$nextTick((function(){1===e.options.models.length?(e.form.model=e.options.models[0],e.selectModelHandler(e.options.models[0])):e.unique_code&&(e.form.model=e.model,e.selectModelHandler(e.model))}))},selectModelHandler:function(e){this.lockFields(["year","generation","configuration","modification","complectation"]),this.changeFormState("year","loading"),this.emitSelectFormEntity("model",e.id)},onYearsLoaded:function(){var e=this;this.unlockFields(["year"]),this.$nextTick((function(){1===e.options.years.length?(e.form.year=e.options.years[0],e.selectYearHandler(e.options.years[0])):e.unique_code&&(e.form.year=e.year,e.selectYearHandler(e.year))}))},selectYearHandler:function(e){this.lockFields(["generation","configuration","modification","complectation"]),this.changeFormState("generation","loading"),this.emitSelectFormEntity("year",e.id)},onGenerationsLoaded:function(){var e=this;this.unlockFields(["generation"]),this.$nextTick((function(){1===e.generations.length?(e.form.generation=e.generations[0],e.selectGenerationHandler(e.generations[0])):e.unique_code&&(e.form.generation=e.generation,e.selectGenerationHandler(e.generation))}))},selectGenerationHandler:function(e){this.lockFields(["configuration","modification","complectation"]),this.changeFormState("configuration","loading"),this.emitSelectFormEntity("generation",e?e.id:null)},onConfigurationsLoaded:function(){var e=this;this.unlockFields(["configuration"]),this.$nextTick((function(){1===e.options.configurations.length?(e.form.configuration=e.options.configurations[0],e.selectConfigurationHandler(e.options.configurations[0])):e.unique_code&&e.configuration&&(e.form.configuration=e.configuration,e.selectConfigurationHandler(e.configuration))}))},selectConfigurationHandler:function(e){this.lockFields(["modification","complectation"]),this.changeFormState("modification","loading"),this.emitSelectFormEntity("configuration",e?e.id:null)},onModificationsLoaded:function(){var e=this;this.unlockFields(["modification"]),this.$nextTick((function(){1===e.options.modifications.length?(e.form.modification=e.options.modifications[0],e.selectModificationHandler(e.options.modifications[0])):e.unique_code&&(e.form.modification=e.modification,e.selectModificationHandler(e.modification))}))},selectModificationHandler:function(e){this.lockFields(["complectation"]),this.changeFormState("complectation","loading"),this.emitSelectFormEntity("modification",e?e.id:null),this.checkModificationEntities(e)},onComplectationsLoaded:function(){var e=this;this.unlockFields(["complectation"]),this.$nextTick((function(){1===e.options.complectations.length?(e.form.complectation=e.options.complectations[0],e.selectComplectationHandler(e.options.complectations[0])):e.unique_code&&(e.form.complectation=e.complectation,e.selectComplectationHandler(e.complectation))}))},selectComplectationHandler:function(e){this.emitSelectFormEntity("complectation",e?e.id:null),this.unique_code&&this.setUniqueCode(null)},selectEngineHandler:function(e){this.emitSelectFormEntity("engine",e.id)},selectDriveHandler:function(e){this.emitSelectFormEntity("drive",e.id)},selectGearboxHandler:function(e){this.emitSelectFormEntity("gearbox",e.id)},changeOwnerCountHandler:function(e){this.emitSelectFormEntity("owner_count",e)},changePtsHandler:function(e){this.emitSelectFormEntity("pts_type",e)},changeMileageHandler:function(e){this.emitSelectFormEntity("mileage",e)},selectWheelHandler:function(e){this.emitSelectFormEntity("wheel-right",e?"right":"left")},selectCityHandler:function(e){this.emitSelectFormEntity("city",e)},emitSelectFormEntity:function(e,t){this.setIsFormChanged(!0),this.$emit("select-form-entity",e,t)},checkModificationEntities:function(e){if(e){if(e.drive_id&&this.drivesById[e.drive_id]){var t=this.drivesById[e.drive_id];this.form.drive=t,this.selectDriveHandler(t),this.changeFormState("drive","disabled")}else this.changeFormState("drive","disabled",!1);if(e.engine_id&&this.enginesById[e.engine_id]){var i=this.enginesById[e.engine_id];this.form.engine=i,this.selectEngineHandler(i),this.changeFormState("engine","disabled")}else this.changeFormState("engine","disabled",!1);if(e.gearbox_id&&this.gearboxesById[e.gearbox_id]){var n=this.gearboxesById[e.gearbox_id];this.form.gearbox=n,this.selectGearboxHandler(n),this.changeFormState("gearbox","disabled")}else this.changeFormState("gearbox","disabled",!1)}else this.changeFormState("drive","disabled"),this.changeFormState("engine","disabled"),this.changeFormState("gearbox","disabled")},onSubmit:function(){var e={VehicleEngine:g()(this.selected,"engine.code",null),DriveUnit:g()(this.selected,"drive.code",null),UsedCarMileage:g()(this.selected,"mileage",null),UsedCarYearOfIssue:g()(this.selected,"year.name",null),UsedCarNumberOfOwners:g()(this.selected,"ownerCount",null),City:g()(this.selected,"city.name_en",null),BodyType:g()(this.selected,"modification.body_type",null),CarBrand:g()(this.selected,"brand.name",null),CarGeneration:g()(this.selected,"generation.name",null),CompleteSets:g()(this.selected,"complectation.name",null)};this.dataLayerPush("Trade-in","Car characteristics","Calculate",e,!1),this.$emit("submit-form",this.isFormChanged)},getDefaultFormData:function(){return{brand:null,model:null,year:null,generation:null,configuration:null,modification:null,complectation:null,pts:null,mileage:null,drive:null,engine:null,gearbox:null,wheelRight:!1,ownerCount:null,city:null}},ptsChecked:function(e){return this.ptsType&&this.ptsType.id===e.id},addToDataLayer:function(e,t){void 0===window.dataLayer.find((function(i){return i.EventAction===e&&i.EventLabel===t}))&&this.dataLayerPush("Form",e,t,null,!1)},handleBack:function(){this.$emit("prev-step"),this.dataLayerPush("Trade-in","Car characteristics","Back",null,!1)}}),activated:function(){this.isPopup?document.getElementsByClassName("popup-tradein__content")[0].scrollTo(0,0):window.scrollTo(0,0),this.needClearForm&&(this.formState=this.getDefaultFormState(),this.form=this.getDefaultFormData()),this.form.brand&&this.form.brand.id===this.selected.brand.id||(this.form.brand=this.selected.brand),this.showAddons=!0},created:function(){var e=this;this.unique_code&&!this.needClearForm&&(this.loadBrands().then((function(){e.selectBrandHandler(e.selected.brand),e.form.city=e.city,e.form.mileage=e.mileage,e.form.ownerCount=e.ownerCount,e.form.wheelRight="right"===e.steeringWheel})),this.loadCities(),this.loadDictionaries()),this.formState=this.getDefaultFormState(),this.form.brand&&this.form.brand.id===this.selected.brand.id||(this.form.brand=this.selected.brand),this.options.models.length&&this.onModelsLoaded(),this.dataLayerPush("Trade-in","Car characteristics","Start",null,!0)},components:{FormAside:c,FormContent:d,FormButtons:u.a,Disclaimer:p.a,IconTickDown:f.a,ValidationProvider:m.b,ValidationObserver:m.a}},O=(i(1178),Object(o.a)(x,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:e.wrapperClass},[i("g-padding",[i("g-container",{staticClass:"flex"},[e.isPopup?e._e():i("FormAside",{attrs:{selected:e.selected}}),e._v(" "),i("ValidationObserver",{staticClass:"trade-in-calc__form-content-wrap",scopedSlots:e._u([{key:"default",fn:function(t){var n=t.handleSubmit;return[i("FormContent",{scopedSlots:e._u([{key:"body",fn:function(){return[e.isPopup?i("div",[i("div",{staticClass:"text-x5 desktop:text-x4 mb-6"},[e._v("\n                Трейд-ин оценка\n              ")])]):i("div",[i("div",{staticClass:"text-s1 mb-2"},[e._v("\n                Характеристики вашего авто\n              ")]),e._v(" "),i("div",{staticClass:"mb-4"},[e._v("\n                Параметры, необходимые для оценки автомобиля\n              ")])]),e._v(" "),e.isFormShort?[i("div",{staticClass:"trade-in-calc__form-fields"},[i("div",{staticClass:"trade-in-calc__form-fields-item"},[i("ValidationProvider",{attrs:{rules:"required|integer|min_value:1"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[i("g-form-control",{attrs:{type:"text",label:"Пробег, км *",maxlength:"10",error:n[0]},on:{input:e.changeMileageHandler},nativeOn:{focusout:function(t){return e.addToDataLayer("Car characteristics","Mileage")}},model:{value:e.form.mileage,callback:function(t){e.$set(e.form,"mileage",t)},expression:"form.mileage"}})]}}],null,!0)})],1),e._v(" "),i("div",{staticClass:"w-full"}),e._v(" "),i("div",{staticClass:"trade-in-calc__form-fields-item"},[i("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[i("g-select",{staticClass:"multiselect_small form-control_text",attrs:{placeholder:"Город",searchable:!0,"has-label":!0,loading:!e.isCitiesLoaded,disabled:!e.isCitiesLoaded,options:e.cities,selected:e.selectedCity,error:n[0]},on:{input:e.selectCityHandler},nativeOn:{focusout:function(t){return e.addToDataLayer("Car characteristics","City")}},model:{value:e.form.city,callback:function(t){e.$set(e.form,"city",t)},expression:"form.city"}})]}}],null,!0)})],1)]),e._v(" "),i("div",{on:{click:e.toggleAddons}},[i("div",{staticClass:"trade-in-calc__form-fields-toggle flex items-center justify-between cursor-pointer"},[i("div",{staticClass:"mr-2 text-s1"},[e._v("Дополнительная информация")]),e._v(" "),i("IconTickDown",{class:[{"trade-in-calc__form-fields-toggle-icon-opened":e.showAddons}]})],1),e._v(" "),i("div",{staticClass:"mt-2"},[e._v("\n                  Если вы заполните эти поля, то повысите точность расчета\n                ")])]),e._v(" "),i("div",{class:["trade-in-calc__form-addons",{hidden:!e.showAddons}]},[i("div",{staticClass:"trade-in-calc__form-fields"},[i("div",{staticClass:"trade-in-calc__form-fields-item"},[i("ValidationProvider",{attrs:{rules:"integer|min_value:1"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[i("g-form-control",{attrs:{type:"text",label:"Владельцев по ПТС",maxlength:"2",error:n[0]},on:{input:e.changeOwnerCountHandler},nativeOn:{focusout:function(t){return e.addToDataLayer("Car characteristics","Owners")}},model:{value:e.form.ownerCount,callback:function(t){e.$set(e.form,"ownerCount",t)},expression:"form.ownerCount"}})]}}],null,!0)})],1),e._v(" "),i("div",{staticClass:"w-full"}),e._v(" "),e.options.ptsTypes.length?i("div",{staticClass:"trade-in-calc__form-fields-item mt-6"},[i("div",{staticClass:"text-s2-b"},[e._v("ПТС")]),e._v(" "),i("div",{staticClass:"flex flex-wrap"},e._l(e.options.ptsTypes,(function(t,n){return i("g-form-control",{key:n,staticClass:"mt-4 mr-6",attrs:{type:"radio",name:"pts_type",label:t.name,id:t.id,selected:e.form.pts,checked:e.ptsChecked(t)},on:{input:function(i){return e.changePtsHandler(t.id)}},nativeOn:{focusout:function(t){return e.addToDataLayer("Car characteristics","Registration certificate")}},model:{value:e.form.pts,callback:function(t){e.$set(e.form,"pts",t)},expression:"form.pts"}})})),1)]):e._e()])]),e._v(" "),e.isPopup?i("div",{staticClass:"w-1/2"},[i("g-button",{staticClass:"button-border text-s2i-b",nativeOn:{click:function(t){return n(e.onSubmit)}}},[i("span",[e._v("Рассчитать")])])],1):e._e(),e._v(" "),i("Disclaimer")]:[i("div",{staticClass:"trade-in-calc__form-fields trade-in-calc__form-fields_cols"},[i("div",{staticClass:"trade-in-calc__form-fields-item"},[i("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[i("g-select",{staticClass:"multiselect_small form-control_text",attrs:{placeholder:"Марка автомобиля *","no-options":"Нет такой марки",searchable:!0,"has-label":!0,loading:!1,disabled:!1,options:e.options.brands,selectFunction:"select",selected:e.selected.brand,error:n[0]},on:{select:e.selectBrandHandler},nativeOn:{focusout:function(t){return e.addToDataLayer("Car characteristics","Car brand")}},model:{value:e.form.brand,callback:function(t){e.$set(e.form,"brand",t)},expression:"form.brand"}})]}}],null,!0)})],1),e._v(" "),i("div",{staticClass:"trade-in-calc__form-fields-item"},[i("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[i("g-select",{staticClass:"multiselect_small form-control_text",attrs:{placeholder:"Модель *","no-options":"Нет такой модели",searchable:!0,"has-label":!0,loading:e.formState.model.loading,disabled:e.formState.model.disabled||0===e.options.models.length,options:e.options.models,selectFunction:"select",selected:e.form.model,error:n[0]},on:{select:e.selectModelHandler},nativeOn:{focusout:function(t){return e.addToDataLayer("Car characteristics","Model")}},model:{value:e.form.model,callback:function(t){e.$set(e.form,"model",t)},expression:"form.model"}})]}}],null,!0)})],1),e._v(" "),i("div",{staticClass:"trade-in-calc__form-fields-item"},[i("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[i("g-select",{staticClass:"multiselect_small form-control_text",attrs:{placeholder:"Год выпуска *","no-options":"",searchable:!0,"has-label":!0,loading:e.formState.year.loading,disabled:e.formState.year.disabled||0===e.options.years.length,options:e.options.years,selected:e.form.year,selectFunction:"select",error:n[0]},on:{select:e.selectYearHandler},nativeOn:{focusout:function(t){return e.addToDataLayer("Car characteristics","Year of Issue")}},model:{value:e.form.year,callback:function(t){e.$set(e.form,"year",t)},expression:"form.year"}})]}}],null,!0)})],1),e._v(" "),i("div",{staticClass:"trade-in-calc__form-fields-item"},[i("g-select",{staticClass:"multiselect_small form-control_text",attrs:{placeholder:"Поколение","no-options":"",searchable:!0,"has-label":!0,loading:e.formState.generation.loading,disabled:e.formState.generation.disabled||0===e.generations.length,options:e.generations,selected:e.form.generation,selectFunction:"select"},on:{select:e.selectGenerationHandler},nativeOn:{focusout:function(t){return e.addToDataLayer("Car characteristics","Generation")}},model:{value:e.form.generation,callback:function(t){e.$set(e.form,"generation",t)},expression:"form.generation"}})],1),e._v(" "),i("div",{staticClass:"trade-in-calc__form-fields-item"},[i("g-select",{staticClass:"multiselect_small form-control_text",attrs:{placeholder:"Тип кузова","no-options":"",searchable:!0,"has-label":!0,loading:e.formState.configuration.loading,disabled:e.formState.configuration.disabled||0===e.options.configurations.length,options:e.options.configurations,selected:e.form.configuration,selectFunction:"select"},on:{select:e.selectConfigurationHandler},nativeOn:{focusout:function(t){return e.addToDataLayer("Car characteristics","Body type")}},model:{value:e.form.configuration,callback:function(t){e.$set(e.form,"configuration",t)},expression:"form.configuration"}})],1),e._v(" "),i("div",{staticClass:"trade-in-calc__form-fields-item"},[i("g-select",{staticClass:"multiselect_small form-control_text",attrs:{placeholder:"Модификация","no-options":"",searchable:!0,"has-label":!0,loading:e.formState.modification.loading,disabled:e.formState.modification.disabled||0===e.options.modifications.length,options:e.options.modifications,selected:e.form.modification,selectFunction:"select"},on:{select:e.selectModificationHandler},nativeOn:{focusout:function(t){return e.addToDataLayer("Car characteristics","Modification")}},model:{value:e.form.modification,callback:function(t){e.$set(e.form,"modification",t)},expression:"form.modification"}})],1),e._v(" "),i("div",{staticClass:"trade-in-calc__form-fields-item"},[i("g-select",{staticClass:"multiselect_small form-control_text",attrs:{placeholder:"Двигатель","no-options":"",searchable:!0,"has-label":!0,loading:e.formState.engine.loading,disabled:e.formState.engine.disabled||0===e.options.engines.length,options:e.options.engines,selected:e.form.engine,selectFunction:"select"},on:{select:e.selectEngineHandler},nativeOn:{focusout:function(t){return e.addToDataLayer("Car characteristics","Engine")}},model:{value:e.form.engine,callback:function(t){e.$set(e.form,"engine",t)},expression:"form.engine"}})],1),e._v(" "),i("div",{staticClass:"trade-in-calc__form-fields-item"},[i("g-select",{staticClass:"multiselect_small form-control_text",attrs:{placeholder:"Привод","no-options":"",searchable:!0,"has-label":!0,loading:e.formState.drive.loading,disabled:e.formState.drive.disabled||0===e.options.drives.length,options:e.options.drives,selected:e.form.drive,selectFunction:"select"},on:{select:e.selectDriveHandler},nativeOn:{focusout:function(t){return e.addToDataLayer("Car characteristics","Drive unit")}},model:{value:e.form.drive,callback:function(t){e.$set(e.form,"drive",t)},expression:"form.drive"}})],1),e._v(" "),i("div",{staticClass:"trade-in-calc__form-fields-item"},[i("g-select",{staticClass:"multiselect_small form-control_text",attrs:{placeholder:"КПП","no-options":"",searchable:!0,"has-label":!0,loading:e.formState.gearbox.loading,disabled:e.formState.gearbox.disabled||0===e.options.gearboxes.length,options:e.options.gearboxes,selected:e.form.gearbox,selectFunction:"select"},on:{select:e.selectGearboxHandler},nativeOn:{focusout:function(t){return e.addToDataLayer("Car characteristics","Transmission")}},model:{value:e.form.gearbox,callback:function(t){e.$set(e.form,"gearbox",t)},expression:"form.gearbox"}})],1),e._v(" "),i("div",{staticClass:"w-full"}),e._v(" "),i("div",{staticClass:"trade-in-calc__form-fields-item"},[i("ValidationProvider",{attrs:{rules:"required|integer|min_value:1"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[i("g-form-control",{attrs:{type:"text",label:"Пробег, км *",maxlength:"10",error:n[0]},on:{input:e.changeMileageHandler},nativeOn:{focusout:function(t){return e.addToDataLayer("Car characteristics","Mileage")}},model:{value:e.form.mileage,callback:function(t){e.$set(e.form,"mileage",t)},expression:"form.mileage"}})]}}],null,!0)})],1),e._v(" "),i("div",{staticClass:"w-full"}),e._v(" "),i("div",{staticClass:"trade-in-calc__form-fields-item"},[i("ValidationProvider",{attrs:{rules:"required"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[i("g-select",{staticClass:"multiselect_small form-control_text",attrs:{placeholder:"Город",searchable:!0,"has-label":!0,"is-above":!0,loading:!e.isCitiesLoaded,disabled:!e.isCitiesLoaded,options:e.cities,selected:e.selectedCity,error:n[0]},on:{input:e.selectCityHandler},nativeOn:{focusout:function(t){return e.addToDataLayer("Car characteristics","City")}},model:{value:e.form.city,callback:function(t){e.$set(e.form,"city",t)},expression:"form.city"}})]}}],null,!0)})],1)]),e._v(" "),i("div",{on:{click:e.toggleAddons}},[i("div",{staticClass:"trade-in-calc__form-fields-toggle flex items-center justify-between cursor-pointer"},[i("div",{staticClass:"mr-2 text-s1"},[e._v("Дополнительная информация")]),e._v(" "),i("IconTickDown",{class:[{"trade-in-calc__form-fields-toggle-icon-opened":e.showAddons}]})],1),e._v(" "),i("div",{staticClass:"mt-2"},[e._v("\n                  Если вы заполните эти поля, то повысите точность расчета\n                ")])]),e._v(" "),i("div",{class:["trade-in-calc__form-addons",{hidden:!e.showAddons}]},[i("div",{staticClass:"trade-in-calc__form-fields"},[i("div",{staticClass:"trade-in-calc__form-fields-item"},[i("g-select",{staticClass:"multiselect_small form-control_text",attrs:{placeholder:"Комплектация","no-options":"",searchable:!0,"has-label":!0,loading:e.formState.complectation.loading,disabled:e.formState.complectation.disabled||0===e.options.complectations.length,options:e.options.complectations,selected:e.form.complectation,selectFunction:"select"},on:{select:e.selectComplectationHandler},nativeOn:{focusout:function(t){return e.addToDataLayer("Car characteristics","Equipment")}},model:{value:e.form.complectation,callback:function(t){e.$set(e.form,"complectation",t)},expression:"form.complectation"}})],1),e._v(" "),i("div",{staticClass:"trade-in-calc__form-fields-item"},[i("ValidationProvider",{attrs:{rules:"integer|min_value:1"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.errors;return[i("g-form-control",{attrs:{type:"text",label:"Владельцев по ПТС",maxlength:"2",error:n[0]},on:{input:e.changeOwnerCountHandler},nativeOn:{focusout:function(t){return e.addToDataLayer("Car characteristics","Owners")}},model:{value:e.form.ownerCount,callback:function(t){e.$set(e.form,"ownerCount",t)},expression:"form.ownerCount"}})]}}],null,!0)})],1),e._v(" "),e.options.ptsTypes.length?i("div",{staticClass:"trade-in-calc__form-fields-item mt-6"},[i("div",{staticClass:"text-s2-b"},[e._v("ПТС")]),e._v(" "),i("div",{staticClass:"flex flex-wrap"},e._l(e.options.ptsTypes,(function(t,n){return i("g-form-control",{key:n,staticClass:"mt-4 mr-6",attrs:{type:"radio",name:"pts_type",label:t.name,id:t.id,selected:e.form.pts,checked:e.ptsChecked(t)},on:{input:function(i){return e.changePtsHandler(t.id)}},nativeOn:{focusout:function(t){return e.addToDataLayer("Car characteristics","Registration certificate")}},model:{value:e.form.pts,callback:function(t){e.$set(e.form,"pts",t)},expression:"form.pts"}})})),1)]):e._e(),e._v(" "),i("div",{staticClass:"trade-in-calc__form-fields-item mt-6"},[i("div",{staticClass:"text-s2-b hidden tablet:block"},[e._v(" ")]),e._v(" "),i("g-form-control",{staticClass:"tablet:mt-4",attrs:{type:"checkbox",id:"wheelRight",label:"Правый руль",checked:e.form.wheelRight},on:{input:e.selectWheelHandler},nativeOn:{focusout:function(t){return e.addToDataLayer("Car characteristics","Right hand drive")}},model:{value:e.form.wheelRight,callback:function(t){e.$set(e.form,"wheelRight",t)},expression:"form.wheelRight"}})],1)])]),e._v(" "),e.isPopup?i("div",{staticClass:"w-1/2"},[i("g-button",{staticClass:"button-border text-s2i-b",nativeOn:{click:function(t){return n(e.onSubmit)}}},[i("span",[e._v("Рассчитать")])])],1):e._e(),e._v(" "),i("Disclaimer")]]},proxy:!0},e.isPopup?null:{key:"footer",fn:function(){return[i("FormButtons",{attrs:{showPrevBtn:!0,textPrevBtn:"Шаг назад",showNextBtn:!0,textNextBtn:"Рассчитать"},on:{"click-prev":e.handleBack,"click-next":function(t){return n(e.onSubmit)}}})]},proxy:!0}],null,!0)})]}}])})],1)],1)],1)}),[],!1,null,"78e66334",null));t.a=O.exports},1193:function(e,t,i){var n=i(119),s=i(39),r=i(79),a="[object String]";e.exports=function(e){return"string"==typeof e||!s(e)&&r(e)&&n(e)==a}},1383:function(e,t,i){var n=i(123),s=i(322),r=i(142),a=i(87),o=i(1193),c=i(1384),l=i(559),d=i(319),u=i(550),p=i(389),f="[object Map]",m="[object Set]",h=n?n.iterator:void 0;e.exports=function(e){if(!e)return[];if(a(e))return o(e)?u(e):s(e);if(h&&e[h])return c(e[h]());var t=r(e);return(t==f?l:t==m?d:p)(e)}},1384:function(e,t){e.exports=function(e){for(var t,i=[];!(t=e.next()).done;)i.push(t.value);return i}},1385:function(e,t,i){},1576:function(e,t,i){"use strict";var n=i(1385);i.n(n).a},1667:function(e,t,i){},1668:function(e,t,i){},1669:function(e,t,i){},1967:function(e,t,i){"use strict";i(26);var n={props:{modelList:Array},data:function(){return{filterCarcass:[]}},computed:{selectModel:function(){var e=[],t=this.modelList;e.push({id:0,name:"Не выбраны"});for(var i=0;i<t.length;i++){var n={id:t[i].id,name:t[i].name};e.push(n)}return e}},methods:{inputModel:function(e){var t=null;for(var i in 0!=e.id&&(t=e),this.$refs.checkbox){this.$refs.checkbox[i].off()}this.filterCarcass=[],this.model=this.selectModel,this.$emit("filter-model",t)}}},s=(i(1576),i(2)),r=Object(s.a)(n,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"models-selection-filter flex flex-wrap items-center"},[i("div",{staticClass:"models-selection-filter__select"},[i("g-select",{staticClass:"multiselect_small",attrs:{options:e.selectModel,placeholder:"Выберите модель","select-function":"select-model"},on:{"select-model":function(t){return e.inputModel(t)}}})],1)])])}),[],!1,null,"64fbfa54",null);t.a=r.exports},2142:function(e,t,i){"use strict";var n=i(1667);i.n(n).a},2143:function(e,t,i){"use strict";var n=i(1668);i.n(n).a},2144:function(e,t,i){"use strict";var n=i(1669);i.n(n).a},2418:function(e,t,i){"use strict";i.r(t);i(7),i(75),i(13),i(3),i(33),i(38),i(26),i(9),i(10),i(8),i(6),i(69),i(27),i(43),i(5);var n=i(15),s=i(532),r=i(1087),a=i(19),o=i.n(a),c=i(1383),l=i.n(c),d=i(83),u=i(31),p=i(37),f=i(177),m=i(110),h={mixins:[u.a,p.a],props:{model:Object,disclaimers:String},data:function(){return{resize:"400x198"}},components:{Arrow:m.a,IconStar:f.a}},_=(i(2142),i(2)),v=Object(_.a)(h,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"car-card items-center py-4 desktop1440:px-4"},[i("div",{staticClass:"car-card__photo pr-3 desktop1440:pr-0"},[i("div",{staticClass:"car-card__photo-wrapper"},[i("img",{staticClass:"car-card__img",attrs:{src:e.getResizeImagePath(e.model.image,e.resize)},on:{click:function(t){return e.$emit("select-kia-model",{model:e.model,disclaimer:e.disclaimers})}}})])]),e._v(" "),i("div",{staticClass:"car-card__content-block pl-3 desktop1440:pl-0"},[i("div",{staticClass:"car-card__name-block"},[e.model.labelName?i("div",{staticClass:"car-card__sticker text-s2i"},[e._v(e._s(e.model.labelName))]):e._e(),e._v(" "),i("div",{staticClass:"car-card__name pt-1 desktop1440:pt-0 text-s1 desktop1440:text-x5",on:{click:function(t){return e.$emit("select-kia-model",{model:e.model,disclaimer:e.disclaimers})}}},[e._v("\n        "+e._s(e.model.modelLine)+"\n      ")])]),e._v(" "),e.model.is_coming_soon?e._e():i("div",{staticClass:"car-card__price pb-1"},[i("div",{staticClass:"flex items-center pt-1 desktop1440:pt-0"},[e.model.min_price?i("span",{staticClass:"car-card__price-count text-s2"},[e._v("\n          от "+e._s(e.formatMoney(e.model.min_price))+"\n        ")]):e._e(),e._v(" "),e.disclaimers?i("g-button-info",{on:{click:function(t){return e.$emit("price-info",{model:e.model,disclaimer:e.disclaimers})}}}):e._e()],1)]),e._v(" "),e.model.trade_in_benefit?i("div",{staticClass:"car-card__labels flex flex-wrap"},[i("span",{staticClass:"green"},[e._v("\n        Выгода по трейд-ин до\n        "),i("span",{staticClass:"no-wrap-price"},[e._v(e._s(e.formatMoney(e.model.trade_in_benefit)))])])]):e._e()])])}),[],!1,null,"003f8c88",null).exports,g=i(1967),b=i(1043),y=i(24),C=i(18);function x(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function O(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?x(Object(i),!0).forEach((function(t){Object(n.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var P={mixins:[y.a],props:{models:Array,groups:Array,modelLines:Array,disclaimers:Object},data:function(){return{pricePopup:{data:{},isOpened:!1},activeCategoryIndex:0,filterModel:null}},created:function(){0===this.kiaModels.length&&this.loadKiaModels(),this.dataLayerPush("Trade-in","Choose your new Kia","Start",null,!0)},computed:O({},Object(C.e)("trade-in",["kiaModels"]),{filteredModelLines:function(){return this.modelLines},carModels:{get:function(){var e={},t=o()(this.models,"model_line_id");for(var i in this.groups)e[this.groups[i].id]={id:this.groups[i].id,name:this.groups[i].name,data:[]};for(var n in this.modelLines)if(!this.filterModel||this.modelLines[n].id===this.filterModel.id){var s=this.modelLines[n],r=e[this.modelLines[n].group_id],a=t[this.modelLines[n].id];r.data.push({id:a.id,groupId:r.id,code:s.code,modelLine:s.name,image:a.image_right,min_price:a.min_price,labelName:s.label_name,trade_in_benefit:a.trade_in_benefit,image_side_view:a.image_side_view,external_id:a.external_id,year:a.unique_id.substr(4,4)})}return l()(e)},set:function(e){"model"==e[0]&&Object.assign(this,{filterModel:e[1]})}}}),methods:O({},Object(C.d)("trade-in",["setUniqueCode"]),{},Object(C.b)("trade-in",["loadKiaModels"]),{openPriceInfo:function(e){Object.assign(this,{pricePopup:{data:{description:e.disclaimer,link:{name:"models-code-options",params:{code:e.model.code}},label:e.model.modelLine,year:e.model.year},isOpened:!0}}),this.dataLayerPush("Info pop-up","Price description","Open")},closePriceInfo:function(){Object.assign(this,{pricePopup:{data:{},isOpened:!1}})},popupButtonAnalytics:function(e){var t={vehicleModelYear:e.year,vehicleNameplate:e.label};this.dataLayerPush("Trade-in","Price description","Price and options",t)},selectKiaModelHandler:function(e){var t=e.model,i=e.disclaimer;this.$emit("select-form-entity","kiaModel",{model:t,disclaimer:i});var n={vehicleModelYear:t.year,vehicleNameplate:t.modelLine};this.dataLayerPush("Trade-in","Choose your new Kia","Select model",n)},getDisclaimersByModelCode:function(e){return void 0!==this.disclaimers[e]?this.disclaimers[e].text:null},filterModelSelectHandler:function(e){this.carModels=["model",e],this.dataLayerPush("Trade-in","Drop-down",e.name)}}),components:{Popup:d.a,CarCard:v,FilterModels:g.a,PriceInfoContent:b.a}},w=(i(2143),Object(_.a)(P,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("g-padding",{staticClass:"pt-0 desktop:pt-4"},[i("g-container",[i("div",{staticClass:"page-title pt-8 tablet:pt-6 pb-6 tablet:pb-10 desktop1440:pb-12"},[i("h1",{staticClass:"text-x4"},[e._v("Какую модель Kia вы планируете приобрести?")])])])],1),e._v(" "),i("g-padding",[i("g-container",{staticClass:"pb-8 tablet:pb-10 desktop1440:pb-20"},[i("div",{staticClass:"models-filter tablet:flex items-center justify-between desktop:justify-start"},[i("div",{staticClass:"models-filter__select"},[i("FilterModels",{attrs:{modelList:e.filteredModelLines},on:{"filter-model":e.filterModelSelectHandler},nativeOn:{click:function(t){return e.dataLayerPush("Trade-in","Drop down","Open")}}})],1)]),e._v(" "),e._l(e.carModels,(function(t){return t.data.length?i("div",{staticClass:"pt-8 desktop1440:pt-16"},[i("h3",{staticClass:"text-s2i-b tablet:text-x4 pb-4"},[e._v(e._s(t.name))]),e._v(" "),i("div",{staticClass:"cards-list flex flex-wrap"},[e._l(t.data,(function(t){return[i("CarCard",{attrs:{model:t,disclaimers:e.getDisclaimersByModelCode(t.code)},on:{"select-kia-model":e.selectKiaModelHandler,"price-info":e.openPriceInfo}})]}))],2)]):e._e()})),e._v(" "),e.pricePopup.isOpened?i("popup",[i("price-info-content",{attrs:{popup:e.pricePopup.data},on:{"toggle-info-popup":e.closePriceInfo,"send-analytics-popup":e.popupButtonAnalytics}})],1):e._e()],2)],1)],1)}),[],!1,null,null,null).exports),k=i(1184),S=i(1185),I=i(1183),j=i(390),L=i(107),F=i(0),T=i(997);i(56);function D(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function B(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?D(Object(i),!0).forEach((function(t){Object(n.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):D(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var M={mixins:[j.a,y.a],fetch:function(e){var t=e.store,i=e.error,n=e.query;return n.trade_in_code?(t.state["trade-in"].unique_code&&t.state["trade-in"].unique_code!=n.trade_in_code&&t.commit("trade-in/clearData"),Object(T.a)(t,i,"trade-in/loadTradeInByCode",n.trade_in_code).then((function(){t.commit("ui/setHeaderColor","black")}),(function(){}))):Object(T.a)(t,i,"trade-in/loadPage",null).then((function(){t.commit("ui/setHeaderColor","black")}),(function(){}))},head:function(){return{title:this.$store.state["trade-in"].seo.title,meta:[{hid:"description",name:"description",content:this.$store.state["trade-in"].seo.description}]}},data:function(){return{breadcrumbItems:[{name:"Онлайн-сервисы",href:"/buy/"},{name:"Трейд-ин"}],currentStepIndex:0,isFormShort:!1,needClearForm:!1,vin:null,userData:{},result:{id:null,price:null},isResultLoading:!0,steps:{models:{name:"Выбор модели Kia",component:w},brands:{name:"Марка вашего авто",component:k.a},form:{name:"Характеристики авто",component:S.a},results:{name:"Результаты оценки",component:I.a}}}},created:function(){this.unique_code&&(this.currentStepIndex=this.stepNames.indexOf("results"),this.marginalityPrice&&this.marginalityPrice>0&&(this.result={id:this.tradeInId,price:this.price?this.price:null,marginalityPrice:this.marginalityPrice,kiaModel:this.kiaModel,kiaModelPriceDisclaimer:this.kiaModelPriceDisclaimer,unique_code:this.unique_code}),this.checkIsFavorite(this.result.id))},destroyed:function(){this.clearState()},mounted:function(){this.setStepUrl(),this.isResultLoading=!1},computed:B({},Object(C.e)("trade-in",["brand","model","year","generation","configuration","modification","complectation","drive","engine","gearbox","ptsType","mileage","ownerCount","steeringWheel","city","unique_code","tradeInId","price","marginalityPrice","brands","models","years","drives","engines","gearboxes","ptsTypes","generations","configurations","modifications","complectations","cities","tradeInRequestAgreement","seo","kiaModels","kiaModelLines","kiaModelGroups","kiaPriceDisclaimers","kiaModel","kiaModelPriceDisclaimer"]),{currentStep:{get:function(){return this.steps[this.currentStepName]},set:function(e){this.currentStepIndex=e,this.setStepUrl()}},currentStepName:function(){return this.stepNames[this.currentStepIndex]},stepNames:function(){return Object.keys(this.steps)},progressSteps:function(){return Object.values(this.steps).map((function(e){return{name:e.name}}))},isDictionariesLoaded:function(){return 0!==this.drives.length||0!==this.engines.length||0!==this.gearboxes.length||0!==this.ptsTypes.length},isTradeInCalcForm:function(){return"form"===this.currentStepName},brandsById:function(){return o()(this.brands,"id")},modelsById:function(){return o()(this.models,"id")},yearsById:function(){return o()(this.years,"id")},generationsById:function(){return o()(this.generations,"id")},configurationsById:function(){return o()(this.configurations,"id")},modificationsById:function(){return o()(this.modifications,"id")},complectationsById:function(){return o()(this.complectations,"id")},enginesById:function(){return o()(this.engines,"id")},drivesById:function(){return o()(this.drives,"id")},gearboxesById:function(){return o()(this.gearboxes,"id")},ptsTypesById:function(){return o()(this.ptsTypes,"id")}}),methods:B({},Object(C.b)("trade-in",["loadCities","checkIsFavorite","commitDecodeVin","loadDictionaries","loadTradeInRequestAgreement"]),{},Object(C.d)("trade-in",["setModels","setYears","setGenerations","setConfigurations","setModifications","setComplectations","setKiaModel","setKiaModelPriceDisclaimer","setBrand","setModel","setYear","setGeneration","setConfiguration","setModification","setComplectation","setDrive","setEngine","setGearbox","setPtsType","setOwnerCount","setMileage","setSteeringWheel","setCity","setVin","clearStates","setIsFormChanged","clearState"]),{setStepUrl:function(){if(this.currentStepIndex){this.$route.path,"step_".concat(this.currentStepIndex+1,"/");this.currentStepIndex===this.stepNames.length-1&&null!==this.unique_code&&"".concat(this.unique_code,"/")}},setBrandById:function(e){this.setBrand(this.brandsById[e]||null)},selectStepHandler:function(e){this.currentStep=e},nextStep:function(){this.currentStep=this.currentStepIndex+1},prevStep:function(){this.currentStep=this.currentStepIndex-1},getModelsStepProps:function(){return{models:this.kiaModels,groups:this.kiaModelGroups,modelLines:this.kiaModelLines,disclaimers:this.kiaPriceDisclaimers}},getBrandsStepProps:function(){return{brands:this.brands,currentVin:this.vin}},getFormStepProps:function(){return{isFormShort:this.isFormShort,needClearForm:this.needClearForm,isDictionariesLoaded:this.isDictionariesLoaded,selected:this.getSelectedFields(),enginesById:this.enginesById,drivesById:this.drivesById,gearboxesById:this.gearboxesById,options:{brands:this.brands,models:this.models,years:this.years,generations:this.generations,configurations:this.configurations,modifications:this.modifications,complectations:this.complectations,drives:this.drives,engines:this.engines,ptsTypes:this.ptsTypes,gearboxes:this.gearboxes},cities:this.cities}},getSelectedFields:function(){return{brand:this.brand,model:this.model,year:this.year,generation:this.generation,configuration:this.configuration,modification:this.modification,complectation:this.complectation,drive:this.drive,engine:this.engine,gearbox:this.gearbox,ptsType:this.ptsType,mileage:this.mileage,ownerCount:this.ownerCount,city:this.city,vin:this.vin}},getResultsStepProps:function(){return{result:this.result,selected:this.getSelectedFields(),isResultLoading:this.isResultLoading,tradeInRequestAgreement:this.tradeInRequestAgreement}},getCurrentStepProps:function(){switch(this.currentStepName){case"models":return this.getModelsStepProps();case"brands":return this.getBrandsStepProps();case"form":return this.getFormStepProps();case"results":return this.getResultsStepProps();default:return{}}},selectKiaModelHandler:function(e){var t=e.model,i=e.disclaimer;this.clearFormStateData(),this.setIsFormChanged(!0),this.setKiaModel(t),this.setKiaModelPriceDisclaimer(i),this.nextStep()},selectBrandHandler:function(e){if(!this.$refs.currentStep.isLoading){var t=null!==this.vin||this.isFormShort;this.brand&&this.brand.id===e&&!t?(this.needClearForm=!1,this.nextStep()):(this.clearFormStateData(),this.needClearForm=!0,this.vin=null,this.setVin(this.vin),this.isFormShort=!1,this.checkDictionaries(),this.checkCities(),this.nextStep(),this.selectFormBrandHandler(e))}},clearFormStateData:function(){this.clearStates(["brand","model","year","generation","configuration","modification","complectation","drive","engine","gearbox","ptsType","mileage","steeringWheel","ownerCount","unique_code","isFavorite"])},decodeVinHandler:function(e){var t=this;if(this.checkDictionaries(),this.checkCities(),this.vin!==e){var i=null!==this.brand;i&&this.clearFormStateData(),this.needClearForm=i,F.a.decodeTradeInVin(e).then((function(i){0===i.data.error&&0!==i.data.content.length?(t.commitDecodeVin(i.data.content),t.isFormShort=!0,t.vin=e):t.isFormShort=!1})).catch((function(e){t.isFormShort=!1})).finally((function(){t.$refs.currentStep.hideLoader(),t.nextStep(),t.addToDataLayer("Select car brand","VIN check")}))}else this.nextStep()},clearFormFieldsHandler:function(e){this.clearStates(e)},selectFormEntityHandler:function(e,t){switch(e){case"kiaModel":this.selectKiaModelHandler(t);break;case"brand":this.selectFormBrandHandler(t);break;case"model":this.selectFormModelHandler(t);break;case"generation":this.selectFormGenerationHandler(t);break;case"year":this.selectFormYearHandler(t);break;case"configuration":this.selectFormConfigurationHandler(t);break;case"modification":this.selectFormModificationHandler(t);break;case"complectation":this.selectFormComplectationHandler(t);break;case"engine":this.selectFormEngineHandler(t);break;case"drive":this.selectFormDriveHandler(t);break;case"gearbox":this.selectFormGearboxHandler(t);break;case"pts_type":this.selectFormPtsTypeHandler(t);break;case"owner_count":this.selectFormOwnerCountHandler(t);break;case"mileage":this.selectFormMileageHandler(t);break;case"wheel-right":this.selectFormWheelRightHandler(t);break;case"city":this.selectFormCityHandler(t)}},selectFormBrandHandler:function(e){var t=this;this.brand&&this.brand.id!==e&&this.clearFormStateData(),this.setBrandById(e),F.a.getTradeInModels(e).then((function(e){0===e.data.error&&void 0!==e.data.content.models&&(t.setModels(e.data.content.models),t.$refs.currentStep.onModelsLoaded())}))},selectFormModelHandler:function(e){var t=this;this.setModel(this.modelsById[e]||null),F.a.getTradeInYears(e).then((function(e){0===e.data.error&&void 0!==e.data.content.years&&(t.setYears(e.data.content.years),t.$refs.currentStep.onYearsLoaded())}))},selectFormYearHandler:function(e){var t=this;this.setYear(this.yearsById[e]||null),F.a.getTradeInGenerations(this.model.id,e).then((function(e){0===e.data.error&&void 0!==e.data.content.generations&&(t.setGenerations(e.data.content.generations),t.$refs.currentStep.onGenerationsLoaded())}))},selectFormGenerationHandler:function(e){var t=this;this.setGeneration(this.generationsById[e]||null),F.a.getTradeInConfigurations(this.model.id,e,this.year.id).then((function(e){0===e.data.error&&void 0!==e.data.content.body_configurations&&(t.setConfigurations(e.data.content.body_configurations),t.$refs.currentStep.onConfigurationsLoaded())}))},selectFormConfigurationHandler:function(e){var t=this;this.setConfiguration(this.configurationsById[e]||null),F.a.getTradeInModifications(this.model.id,this.generation.id,e,this.year.id).then((function(e){0===e.data.error&&void 0!==e.data.content.modifications&&(t.setModifications(e.data.content.modifications),t.$refs.currentStep.onModificationsLoaded())}))},selectFormModificationHandler:function(e){var t=this;this.setModification(this.modificationsById[e]||null),F.a.getTradeInComplectations(e).then((function(e){0===e.data.error&&void 0!==e.data.content.complectations&&t.setComplectations(e.data.content.complectations),t.$refs.currentStep.onComplectationsLoaded()}))},selectFormComplectationHandler:function(e){this.setComplectation(this.complectationsById[e]||null)},selectFormEngineHandler:function(e){this.setEngine(this.enginesById[e]||null)},selectFormDriveHandler:function(e){this.setDrive(this.drivesById[e]||null)},selectFormGearboxHandler:function(e){this.setGearbox(this.gearboxesById[e]||null)},selectFormPtsTypeHandler:function(e){this.setPtsType(this.ptsTypesById[e]||null)},selectFormOwnerCountHandler:function(e){this.setOwnerCount(e)},selectFormMileageHandler:function(e){this.setMileage(e)},selectFormCityHandler:function(e){this.setCity(e)},submitFormHandler:function(e){this.needClearForm=!1,this.checkCities(),this.nextStep(),e&&(this.tradeInRequestAgreement.id||this.loadTradeInRequestAgreement(),this.getTradeInExpressRating(),this.setIsFormChanged(!1))},selectFormWheelRightHandler:function(e){this.setSteeringWheel(e)},getTradeInExpressRating:function(){var e=this,t=new FormData;t.append("source","trade_in"),t.append("brand_id",this.brand.id),t.append("model_id",this.model.id),t.append("kia_model_id",this.kiaModel.id),this.generation&&t.append("generation_id",this.generation.id),this.configuration&&t.append("body_configuration_id",this.configuration.id),this.modification&&t.append("modification_id",this.modification.id),this.complectation&&t.append("complectation_id",this.complectation.id),t.append("year",this.year.id),t.append("city_id",this.city.id),t.append("latitude",this.city.lat),t.append("longitude",this.city.lng),this.drive&&t.append("drive_id",this.drive.id),this.engine&&t.append("engine_id",this.engine.id),this.gearbox&&t.append("gearbox_id",this.gearbox.id),this.ptsType&&t.append("pts_type_id",this.ptsType.id),t.append("mileage",this.mileage),this.ownerCount&&t.append("owner_count",this.ownerCount),t.append("steering_wheel",this.steeringWheel||"left"),this.vin&&t.append("vin",this.vin),this.isResultLoading=!0,F.a.tradeInExpressRating(t).then((function(t){e.isResultLoading=!1,0!==t.data.error?e.clearExpressRatingResult():(void 0!==t.data.content.marginality_price&&t.data.content.marginality_price>0&&(e.result={id:t.data.content.id,marginalityPrice:t.data.content.marginality_price,created_at:t.data.content.created_at,price:void 0!==t.data.content.price?t.data.content.price:null,unique_code:t.data.content.unique_code,kiaModel:e.kiaModel,kiaModelPriceDisclaimer:e.kiaModelPriceDisclaimer}),0!==t.data.content.length&&void 0!==t.data.content.price&&0!==t.data.content.price||(e.result={id:null,price:0,kiaModel:e.kiaModel,kiaModelPriceDisclaimer:e.kiaModelPriceDisclaimer}),void 0!==t.data.content.unique_code&&(history.pushState({},null,e.$route.path+"step_".concat(e.currentStepIndex+1,"/").concat(e.result.unique_code,"/")),e.checkIsFavorite(t.data.content.id)))})).catch((function(t){e.clearExpressRatingResult()}))},clearExpressRatingResult:function(){this.isResultLoading=!1,this.result={id:null,price:null}},preparePhone:function(e){return e.replace(/[^0-9]/g,"")},checkDictionaries:function(){this.isDictionariesLoaded||this.loadDictionaries()},checkCities:function(){0===this.cities.length&&this.loadCities()},addToDataLayer:function(e,t){this.dataLayerPush("Trade-in",e,t,null,!1)}}),components:{Breadcrumbs:s.default,ProgressBar:r.a,Loader:L.a}},E=(i(2144),Object(_.a)(M,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["pt-12 desktop1440:pt-16",{"trade-in-calc-form":e.isTradeInCalcForm}]},[i("g-padding",{staticClass:"pt-0 desktop:pt-4"},[i("g-container",{staticClass:"flex justify-between"},[i("Breadcrumbs",{attrs:{items:e.breadcrumbItems}})],1)],1),e._v(" "),i("g-padding",{staticClass:"py-6 desktop:pb-8"},[i("g-container",[i("h1",{staticClass:"text-x5 tablet:text-x4 desktop1440:text-x3"},[e._v("Трейд-ин оценка")])])],1),e._v(" "),i("g-padding",[i("g-container",[i("progress-bar",{attrs:{steps:e.progressSteps,currentStepIndex:e.currentStepIndex},on:{"select-step":e.selectStepHandler}})],1)],1),e._v(" "),i("keep-alive",[e.isResultLoading?i("Loader"):e._e(),e._v(" "),i(e.currentStep.component,e._b({ref:"currentStep",tag:"component",on:{"select-brand":e.selectBrandHandler,"decode-vin":e.decodeVinHandler,"select-form-entity":e.selectFormEntityHandler,"clear-form-fields":e.clearFormFieldsHandler,"submit-form":e.submitFormHandler,"prev-step":function(t){return e.prevStep()}}},"component",e.getCurrentStepProps(),!1))],1)],1)}),[],!1,null,"2964fc28",null));t.default=E.exports},998:function(e,t,i){"use strict";i(49),i(38),i(376),i(27),i(43),i(59);t.a={methods:{choice:function(e,t){return t[e%100>4&&e%100<20?2:[2,0,1,1,1,2][e%10<5?e%10:5]]},translit:function(e){var t={"а":"a","б":"b","в":"v","г":"g","д":"d","е":"e","ё":"e","ж":"j","з":"z","и":"i","к":"k","л":"l","м":"m","н":"n","о":"o","п":"p","р":"r","с":"s","т":"t","у":"u","ф":"f","х":"h","ц":"c","ч":"ch","ш":"sh","щ":"shch","ы":"y","э":"e","ю":"u","я":"ya"," ":"_",'"':""},i=[];e=e.replace(/[ъь]+/g,"").replace(/й/g,"i");for(var n=0;n<e.length;++n)i.push(t[e[n]]||null==t[e[n].toLowerCase()]&&e[n]||t[e[n].toLowerCase()].replace(/^(.)/,(function(e){return e.toUpperCase()})));return i.join("")},createId:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!1!==e)return this.translit((null!==t?t:"basic")+"_"+e+i).toLowerCase()},tabsIds:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=e.split("_");return s.splice(s.length-(t?2:1),0,n?"slides":"tabs"),i.map((function(e,t){return s.join("_")+"_"+(t+1)}))},getDisclaimerText:function(e,t){return e[t]&&e[t].text?e[t].text:""}}}}}]);